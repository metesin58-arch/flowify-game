var fN=Object.defineProperty;var hN=(t,e,n)=>e in t?fN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var La=(t,e,n)=>hN(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ib={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=Symbol.for("react.transitional.element"),mN=Symbol.for("react.fragment");function Ob(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:pN,type:t,key:i,ref:e!==void 0?e:null,props:n}}Ru.Fragment=mN;Ru.jsx=Ob;Ru.jsxs=Ob;Ib.exports=Ru;var a=Ib.exports,Lb={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=Symbol.for("react.transitional.element"),gN=Symbol.for("react.portal"),xN=Symbol.for("react.fragment"),bN=Symbol.for("react.strict_mode"),vN=Symbol.for("react.profiler"),yN=Symbol.for("react.consumer"),_N=Symbol.for("react.context"),wN=Symbol.for("react.forward_ref"),NN=Symbol.for("react.suspense"),EN=Symbol.for("react.memo"),Mb=Symbol.for("react.lazy"),SN=Symbol.for("react.activity"),Wm=Symbol.iterator;function AN(t){return t===null||typeof t!="object"?null:(t=Wm&&t[Wm]||t["@@iterator"],typeof t=="function"?t:null)}var Db={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pb=Object.assign,Ub={};function ha(t,e,n){this.props=t,this.context=e,this.refs=Ub,this.updater=n||Db}ha.prototype.isReactComponent={};ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zb(){}zb.prototype=ha.prototype;function Yh(t,e,n){this.props=t,this.context=e,this.refs=Ub,this.updater=n||Db}var Kh=Yh.prototype=new zb;Kh.constructor=Yh;Pb(Kh,ha.prototype);Kh.isPureReactComponent=!0;var Zm=Array.isArray;function yf(){}var Ve={H:null,A:null,T:null,S:null},Bb=Object.prototype.hasOwnProperty;function $h(t,e,n){var i=n.ref;return{$$typeof:Vh,type:t,key:e,ref:i!==void 0?i:null,props:n}}function kN(t,e){return $h(t.type,e,t.props)}function qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vh}function TN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qm=/\/+/g;function hd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TN(""+t.key):e.toString(36)}function RN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(yf,yf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function dr(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(r){case"bigint":case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Vh:case gN:l=!0;break;case Mb:return l=t._init,dr(l(t._payload),e,n,i,s)}}if(l)return s=s(t),l=i===""?"."+hd(t,0):i,Zm(s)?(n="",l!=null&&(n=l.replace(Qm,"$&/")+"/"),dr(s,e,n,"",function(f){return f})):s!=null&&(qh(s)&&(s=kN(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+l)),e.push(s)),1;l=0;var o=i===""?".":i+":";if(Zm(t))for(var u=0;u<t.length;u++)i=t[u],r=o+hd(i,u),l+=dr(i,e,n,r,s);else if(u=AN(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=o+hd(i,u++),l+=dr(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return dr(RN(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return l}function ko(t,e,n){if(t==null)return t;var i=[],s=0;return dr(t,i,"","",function(r){return e.call(n,r,s++)}),i}function jN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},CN={map:ko,forEach:function(t,e,n){ko(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ko(t,function(){e++}),e},toArray:function(t){return ko(t,function(e){return e})||[]},only:function(t){if(!qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Activity=SN;ce.Children=CN;ce.Component=ha;ce.Fragment=xN;ce.Profiler=vN;ce.PureComponent=Yh;ce.StrictMode=bN;ce.Suspense=NN;ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ve;ce.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ve.H.useMemoCache(t)}};ce.cache=function(t){return function(){return t.apply(null,arguments)}};ce.cacheSignal=function(){return null};ce.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Pb({},t.props),s=t.key;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)!Bb.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(i[r]=e[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];i.children=l}return $h(t.type,s,i)};ce.createContext=function(t){return t={$$typeof:_N,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:yN,_context:t},t};ce.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)Bb.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var o=Array(l),u=0;u<l;u++)o[u]=arguments[u+2];s.children=o}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return $h(t,r,s)};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:wN,render:t}};ce.isValidElement=qh;ce.lazy=function(t){return{$$typeof:Mb,_payload:{_status:-1,_result:t},_init:jN}};ce.memo=function(t,e){return{$$typeof:EN,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Ve.T,n={};Ve.T=n;try{var i=t(),s=Ve.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(yf,Xm)}catch(r){Xm(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ve.T=e}};ce.unstable_useCacheRefresh=function(){return Ve.H.useCacheRefresh()};ce.use=function(t){return Ve.H.use(t)};ce.useActionState=function(t,e,n){return Ve.H.useActionState(t,e,n)};ce.useCallback=function(t,e){return Ve.H.useCallback(t,e)};ce.useContext=function(t){return Ve.H.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t,e){return Ve.H.useDeferredValue(t,e)};ce.useEffect=function(t,e){return Ve.H.useEffect(t,e)};ce.useEffectEvent=function(t){return Ve.H.useEffectEvent(t)};ce.useId=function(){return Ve.H.useId()};ce.useImperativeHandle=function(t,e,n){return Ve.H.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ve.H.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ve.H.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ve.H.useMemo(t,e)};ce.useOptimistic=function(t,e){return Ve.H.useOptimistic(t,e)};ce.useReducer=function(t,e,n){return Ve.H.useReducer(t,e,n)};ce.useRef=function(t){return Ve.H.useRef(t)};ce.useState=function(t){return Ve.H.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ve.H.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ve.H.useTransition()};ce.version="19.2.3";Lb.exports=ce;var w=Lb.exports;const pa=Cb(w);var Hb={exports:{}},ju={},Gb={exports:{}},Fb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,H){var Q=O.length;O.push(H);e:for(;0<Q;){var P=Q-1>>>1,R=O[P];if(0<s(R,H))O[P]=H,O[Q]=R,Q=P;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var H=O[0],Q=O.pop();if(Q!==H){O[0]=Q;e:for(var P=0,R=O.length,I=R>>>1;P<I;){var M=2*(P+1)-1,z=O[M],V=M+1,Z=O[V];if(0>s(z,Q))V<R&&0>s(Z,z)?(O[P]=Z,O[V]=Q,P=V):(O[P]=z,O[M]=Q,P=M);else if(V<R&&0>s(Z,Q))O[P]=Z,O[V]=Q,P=V;else break e}}return H}function s(O,H){var Q=O.sortIndex-H.sortIndex;return Q!==0?Q:O.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var u=[],f=[],h=1,c=null,d=3,p=!1,x=!1,v=!1,b=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function _(O){for(var H=n(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=O)i(f),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(f)}}function E(O){if(v=!1,_(O),!x)if(n(u)!==null)x=!0,S||(S=!0,L());else{var H=n(f);H!==null&&$(E,H.startTime-O)}}var S=!1,N=-1,A=5,T=-1;function k(){return b?!0:!(t.unstable_now()-T<A)}function C(){if(b=!1,S){var O=t.unstable_now();T=O;var H=!0;try{e:{x=!1,v&&(v=!1,g(N),N=-1),p=!0;var Q=d;try{t:{for(_(O),c=n(u);c!==null&&!(c.expirationTime>O&&k());){var P=c.callback;if(typeof P=="function"){c.callback=null,d=c.priorityLevel;var R=P(c.expirationTime<=O);if(O=t.unstable_now(),typeof R=="function"){c.callback=R,_(O),H=!0;break t}c===n(u)&&i(u),_(O)}else i(u);c=n(u)}if(c!==null)H=!0;else{var I=n(f);I!==null&&$(E,I.startTime-O),H=!1}}break e}finally{c=null,d=Q,p=!1}H=void 0}}finally{H?L():S=!1}}}var L;if(typeof y=="function")L=function(){y(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=C,L=function(){B.postMessage(null)}}else L=function(){m(C,0)};function $(O,H){N=m(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(O){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var Q=d;d=H;try{return O()}finally{d=Q}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=d;d=O;try{return H()}finally{d=Q}},t.unstable_scheduleCallback=function(O,H,Q){var P=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?P+Q:P):Q=P,O){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=Q+R,O={id:h++,callback:H,priorityLevel:O,startTime:Q,expirationTime:R,sortIndex:-1},Q>P?(O.sortIndex=Q,e(f,O),n(u)===null&&O===n(f)&&(v?(g(N),N=-1):v=!0,$(E,Q-P))):(O.sortIndex=R,e(u,O),x||p||(x=!0,S||(S=!0,L()))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var H=d;return function(){var Q=d;d=H;try{return O.apply(this,arguments)}finally{d=Q}}}})(Fb);Gb.exports=Fb;var IN=Gb.exports,Vb={exports:{}},Mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=w;function Yb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ni(){}var jt={d:{f:Ni,r:function(){throw Error(Yb(522))},D:Ni,C:Ni,L:Ni,m:Ni,X:Ni,S:Ni,M:Ni},p:0,findDOMNode:null},LN=Symbol.for("react.portal");function MN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:LN,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var el=ON.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Cu(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=jt;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Yb(299));return MN(t,e,null,n)};Mt.flushSync=function(t){var e=el.T,n=jt.p;try{if(el.T=null,jt.p=2,t)return t()}finally{el.T=e,jt.p=n,jt.d.f()}};Mt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,jt.d.C(t,e))};Mt.prefetchDNS=function(t){typeof t=="string"&&jt.d.D(t)};Mt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Cu(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?jt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&jt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Mt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Cu(e.as,e.crossOrigin);jt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&jt.d.M(t)};Mt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Cu(n,e.crossOrigin);jt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Mt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Cu(e.as,e.crossOrigin);jt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else jt.d.m(t)};Mt.requestFormReset=function(t){jt.d.r(t)};Mt.unstable_batchedUpdates=function(t,e){return t(e)};Mt.useFormState=function(t,e,n){return el.H.useFormState(t,e,n)};Mt.useFormStatus=function(){return el.H.useHostTransitionStatus()};Mt.version="19.2.3";function Kb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kb)}catch(t){console.error(t)}}Kb(),Vb.exports=Mt;var DN=Vb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut=IN,$b=w,PN=DN;function U(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zb(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jm(t){if(Jl(t)!==t)throw Error(U(188))}function UN(t){var e=t.alternate;if(!e){if(e=Jl(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Jm(s),t;if(r===i)return Jm(s),e;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,i=r;break}if(o===i){l=!0,i=s,n=r;break}o=o.sibling}if(!l){for(o=r.child;o;){if(o===n){l=!0,n=r,i=s;break}if(o===i){l=!0,i=r,n=s;break}o=o.sibling}if(!l)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Qb(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Qb(t),e!==null)return e;t=t.sibling}return null}var Ye=Object.assign,zN=Symbol.for("react.element"),To=Symbol.for("react.transitional.element"),$a=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Xb=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Jb=Symbol.for("react.consumer"),Jn=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),Zh=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),Ef=Symbol.for("react.activity"),BN=Symbol.for("react.memo_cache_sentinel"),e0=Symbol.iterator;function Ma(t){return t===null||typeof t!="object"?null:(t=e0&&t[e0]||t["@@iterator"],typeof t=="function"?t:null)}var HN=Symbol.for("react.client.reference");function Sf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===HN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pr:return"Fragment";case _f:return"Profiler";case Xb:return"StrictMode";case wf:return"Suspense";case Nf:return"SuspenseList";case Ef:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $a:return"Portal";case Jn:return t.displayName||"Context";case Jb:return(t._context.displayName||"Context")+".Consumer";case Wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zh:return e=t.displayName||null,e!==null?e:Sf(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return Sf(t(e))}catch{}}return null}var qa=Array.isArray,le=$b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=PN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Os={pending:!1,data:null,method:null,action:null},Af=[],mr=-1;function zn(t){return{current:t}}function xt(t){0>mr||(t.current=Af[mr],Af[mr]=null,mr--)}function Be(t,e){mr++,Af[mr]=t.current,t.current=e}var Ln=zn(null),Al=zn(null),Fi=zn(null),_c=zn(null);function wc(t,e){switch(Be(Fi,e),Be(Al,t),Be(Ln,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?ag(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=ag(e),t=v_(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}xt(Ln),Be(Ln,t)}function Hr(){xt(Ln),xt(Al),xt(Fi)}function kf(t){t.memoizedState!==null&&Be(_c,t);var e=Ln.current,n=v_(e,t.type);e!==n&&(Be(Al,t),Be(Ln,n))}function Nc(t){Al.current===t&&(xt(Ln),xt(Al)),_c.current===t&&(xt(_c),Pl._currentValue=Os)}var pd,t0;function Es(t){if(pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pd=e&&e[1]||"",t0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pd+t+t0}var md=!1;function gd(t,e){if(!t||md)return"";md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var c=function(){throw Error()};if(Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(p){var d=p}Reflect.construct(t,[],c)}else{try{c.call()}catch(p){d=p}t.call(c.prototype)}}else{try{throw Error()}catch(p){d=p}(c=t())&&typeof c.catch=="function"&&c.catch(function(){})}}catch(p){if(p&&d&&typeof p.stack=="string")return[p.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),l=r[0],o=r[1];if(l&&o){var u=l.split(`
`),f=o.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<f.length&&!f[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===f.length)for(i=u.length-1,s=f.length-1;1<=i&&0<=s&&u[i]!==f[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==f[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==f[s]){var h=`
`+u[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=s);break}}}finally{md=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Es(n):""}function GN(t,e){switch(t.tag){case 26:case 27:case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return t.child!==e&&e!==null?Es("Suspense Fallback"):Es("Suspense");case 19:return Es("SuspenseList");case 0:case 15:return gd(t.type,!1);case 11:return gd(t.type.render,!1);case 1:return gd(t.type,!0);case 31:return Es("Activity");default:return""}}function n0(t){try{var e="",n=null;do e+=GN(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Tf=Object.prototype.hasOwnProperty,Qh=ut.unstable_scheduleCallback,xd=ut.unstable_cancelCallback,FN=ut.unstable_shouldYield,VN=ut.unstable_requestPaint,Zt=ut.unstable_now,YN=ut.unstable_getCurrentPriorityLevel,ev=ut.unstable_ImmediatePriority,tv=ut.unstable_UserBlockingPriority,Ec=ut.unstable_NormalPriority,KN=ut.unstable_LowPriority,nv=ut.unstable_IdlePriority,$N=ut.log,qN=ut.unstable_setDisableYieldValue,eo=null,Qt=null;function Mi(t){if(typeof $N=="function"&&qN(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(eo,t)}catch{}}var Xt=Math.clz32?Math.clz32:QN,WN=Math.log,ZN=Math.LN2;function QN(t){return t>>>=0,t===0?32:31-(WN(t)/ZN|0)|0}var Ro=256,jo=262144,Co=4194304;function Ss(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Iu(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,l=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~r,i!==0?s=Ss(i):(l&=o,l!==0?s=Ss(l):n||(n=o&~t,n!==0&&(s=Ss(n))))):(o=i&~r,o!==0?s=Ss(o):l!==0?s=Ss(l):n||(n=i&~t,n!==0&&(s=Ss(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function to(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function XN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iv(){var t=Co;return Co<<=1,!(Co&62914560)&&(Co=4194304),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function no(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function JN(t,e,n,i,s,r){var l=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=l&~n;0<n;){var h=31-Xt(n),c=1<<h;o[h]=0,u[h]=-1;var d=f[h];if(d!==null)for(f[h]=null,h=0;h<d.length;h++){var p=d[h];p!==null&&(p.lane&=-536870913)}n&=~c}i!==0&&sv(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(l&~e))}function sv(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Xt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Xt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function av(t,e){var n=e&-e;return n=n&42?1:Xh(n),n&(t.suspendedLanes|e)?0:n}function Xh(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Jh(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function lv(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:j_(t.type))}function i0(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var ps=Math.random().toString(36).slice(2),_t="__reactFiber$"+ps,Gt="__reactProps$"+ps,ma="__reactContainer$"+ps,Rf="__reactEvents$"+ps,eE="__reactListeners$"+ps,tE="__reactHandles$"+ps,s0="__reactResources$"+ps,io="__reactMarker$"+ps;function ep(t){delete t[_t],delete t[Gt],delete t[Rf],delete t[eE],delete t[tE]}function gr(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ma]||n[_t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dg(t);t!==null;){if(n=t[_t])return n;t=dg(t)}return e}t=n,n=t.parentNode}return null}function ga(t){if(t=t[_t]||t[ma]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Wa(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(U(33))}function jr(t){var e=t[s0];return e||(e=t[s0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function mt(t){t[io]=!0}var ov=new Set,cv={};function Qs(t,e){Gr(t,e),Gr(t+"Capture",e)}function Gr(t,e){for(cv[t]=e,t=0;t<e.length;t++)ov.add(e[t])}var nE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r0={},a0={};function iE(t){return Tf.call(a0,t)?!0:Tf.call(r0,t)?!1:nE.test(t)?a0[t]=!0:(r0[t]=!0,!1)}function ec(t,e,n){if(iE(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Io(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Yn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sE(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,r.call(this,l)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jf(t){if(!t._valueTracker){var e=uv(t)?"checked":"value";t._valueTracker=sE(t,e,""+t[e])}}function dv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=uv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rE=/[\n"\\]/g;function dn(t){return t.replace(rE,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Cf(t,e,n,i,s,r,l,o){t.name="",l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.type=l:t.removeAttribute("type"),e!=null?l==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+on(e)):t.value!==""+on(e)&&(t.value=""+on(e)):l!=="submit"&&l!=="reset"||t.removeAttribute("value"),e!=null?If(t,l,on(e)):n!=null?If(t,l,on(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+on(o):t.removeAttribute("name")}function fv(t,e,n,i,s,r,l,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){jf(t);return}n=n!=null?""+on(n):"",e=e!=null?""+on(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(t.name=l),jf(t)}function If(t,e,n){e==="number"&&Sc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Cr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+on(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hv(t,e,n){if(e!=null&&(e=""+on(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+on(n):""}function pv(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(U(92));if(qa(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=on(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),jf(t)}function Fr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var aE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function l0(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||aE.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function mv(t,e,n){if(e!=null&&typeof e!="object")throw Error(U(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&l0(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&l0(t,r,e[r])}function tp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tc(t){return oE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ei(){}var Of=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xr=null,Ir=null;function o0(t){var e=ga(t);if(e&&(t=e.stateNode)){var n=t[Gt]||null;e:switch(t=e.stateNode,e.type){case"input":if(Cf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Gt]||null;if(!s)throw Error(U(90));Cf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&dv(i)}break e;case"textarea":hv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Cr(t,!!n.multiple,e,!1)}}}var vd=!1;function gv(t,e,n){if(vd)return t(e,n);vd=!0;try{var i=t(e);return i}finally{if(vd=!1,(xr!==null||Ir!==null)&&(Vu(),xr&&(e=xr,t=Ir,Ir=xr=null,o0(e),t)))for(e=0;e<t.length;e++)o0(t[e])}}function kl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Gt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(ci)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{Lf=!1}var Di=null,ip=null,nc=null;function xv(){if(nc)return nc;var t,e=ip,n=e.length,i,s="value"in Di?Di.value:Di.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[r-i];i++);return nc=s.slice(t,1<i?1-i:void 0)}function ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oo(){return!0}function c0(){return!1}function Ft(t){function e(n,i,s,r,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Oo:c0,this.isPropagationStopped=c0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),e}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=Ft(Xs),so=Ye({},Xs,{view:0,detail:0}),cE=Ft(so),yd,_d,Pa,Lu=Ye({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(yd=t.screenX-Pa.screenX,_d=t.screenY-Pa.screenY):_d=yd=0,Pa=t),yd)},movementY:function(t){return"movementY"in t?t.movementY:_d}}),u0=Ft(Lu),uE=Ye({},Lu,{dataTransfer:0}),dE=Ft(uE),fE=Ye({},so,{relatedTarget:0}),wd=Ft(fE),hE=Ye({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),pE=Ft(hE),mE=Ye({},Xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gE=Ft(mE),xE=Ye({},Xs,{data:0}),d0=Ft(xE),bE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _E(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yE[t])?!!e[t]:!1}function sp(){return _E}var wE=Ye({},so,{key:function(t){if(t.key){var e=bE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sp,charCode:function(t){return t.type==="keypress"?ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NE=Ft(wE),EE=Ye({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f0=Ft(EE),SE=Ye({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sp}),AE=Ft(SE),kE=Ye({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),TE=Ft(kE),RE=Ye({},Lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jE=Ft(RE),CE=Ye({},Xs,{newState:0,oldState:0}),IE=Ft(CE),OE=[9,13,27,32],rp=ci&&"CompositionEvent"in window,tl=null;ci&&"documentMode"in document&&(tl=document.documentMode);var LE=ci&&"TextEvent"in window&&!tl,bv=ci&&(!rp||tl&&8<tl&&11>=tl),h0=" ",p0=!1;function vv(t,e){switch(t){case"keyup":return OE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var br=!1;function ME(t,e){switch(t){case"compositionend":return yv(e);case"keypress":return e.which!==32?null:(p0=!0,h0);case"textInput":return t=e.data,t===h0&&p0?null:t;default:return null}}function DE(t,e){if(br)return t==="compositionend"||!rp&&vv(t,e)?(t=xv(),nc=ip=Di=null,br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bv&&e.locale!=="ko"?null:e.data;default:return null}}var PE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PE[t.type]:e==="textarea"}function _v(t,e,n,i){xr?Ir?Ir.push(i):Ir=[i]:xr=i,e=Fc(e,"onChange"),0<e.length&&(n=new Ou("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var nl=null,Tl=null;function UE(t){g_(t,0)}function Mu(t){var e=Wa(t);if(dv(e))return t}function g0(t,e){if(t==="change")return e}var wv=!1;if(ci){var Nd;if(ci){var Ed="oninput"in document;if(!Ed){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),Ed=typeof x0.oninput=="function"}Nd=Ed}else Nd=!1;wv=Nd&&(!document.documentMode||9<document.documentMode)}function b0(){nl&&(nl.detachEvent("onpropertychange",Nv),Tl=nl=null)}function Nv(t){if(t.propertyName==="value"&&Mu(Tl)){var e=[];_v(e,Tl,t,np(t)),gv(UE,e)}}function zE(t,e,n){t==="focusin"?(b0(),nl=e,Tl=n,nl.attachEvent("onpropertychange",Nv)):t==="focusout"&&b0()}function BE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mu(Tl)}function HE(t,e){if(t==="click")return Mu(e)}function GE(t,e){if(t==="input"||t==="change")return Mu(e)}function FE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:FE;function Rl(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Tf.call(e,s)||!en(t[s],e[s]))return!1}return!0}function v0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y0(t,e){var n=v0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v0(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sv(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Sc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sc(t.document)}return e}function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var VE=ci&&"documentMode"in document&&11>=document.documentMode,vr=null,Mf=null,il=null,Df=!1;function _0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||vr==null||vr!==Sc(i)||(i=vr,"selectionStart"in i&&ap(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),il&&Rl(il,i)||(il=i,i=Fc(Mf,"onSelect"),0<i.length&&(e=new Ou("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=vr)))}function Ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yr={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},Sd={},Av={};ci&&(Av=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Js(t){if(Sd[t])return Sd[t];if(!yr[t])return t;var e=yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Av)return Sd[t]=e[n];return t}var kv=Js("animationend"),Tv=Js("animationiteration"),Rv=Js("animationstart"),YE=Js("transitionrun"),KE=Js("transitionstart"),$E=Js("transitioncancel"),jv=Js("transitionend"),Cv=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function Tn(t,e){Cv.set(t,e),Qs(e,[t])}var Ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ln=[],_r=0,lp=0;function Du(){for(var t=_r,e=lp=_r=0;e<t;){var n=ln[e];ln[e++]=null;var i=ln[e];ln[e++]=null;var s=ln[e];ln[e++]=null;var r=ln[e];if(ln[e++]=null,i!==null&&s!==null){var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}r!==0&&Iv(n,s,r)}}function Pu(t,e,n,i){ln[_r++]=t,ln[_r++]=e,ln[_r++]=n,ln[_r++]=i,lp|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function op(t,e,n,i){return Pu(t,e,n,i),kc(t)}function er(t,e){return Pu(t,null,null,e),kc(t)}function Iv(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-Xt(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function kc(t){if(50<fl)throw fl=0,sh=null,Error(U(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var wr={};function qE(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,i){return new qE(t,e,n,i)}function cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ri(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Ov(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function sc(t,e,n,i,s,r){var l=0;if(i=t,typeof t=="function")cp(t)&&(l=1);else if(typeof t=="string")l=J2(t,n,Ln.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Ef:return t=Kt(31,n,e,s),t.elementType=Ef,t.lanes=r,t;case pr:return Ls(n.children,s,r,e);case Xb:l=8,s|=24;break;case _f:return t=Kt(12,n,e,s|2),t.elementType=_f,t.lanes=r,t;case wf:return t=Kt(13,n,e,s),t.elementType=wf,t.lanes=r,t;case Nf:return t=Kt(19,n,e,s),t.elementType=Nf,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jn:l=10;break e;case Jb:l=9;break e;case Wh:l=11;break e;case Zh:l=14;break e;case Si:l=16,i=null;break e}l=29,n=Error(U(130,t===null?"null":typeof t,"")),i=null}return e=Kt(l,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Ls(t,e,n,i){return t=Kt(7,t,i,e),t.lanes=n,t}function Ad(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Lv(t){var e=Kt(18,null,null,0);return e.stateNode=t,e}function kd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var w0=new WeakMap;function fn(t,e){if(typeof t=="object"&&t!==null){var n=w0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:n0(e)},w0.set(t,e),e)}return{value:t,source:e,stack:n0(e)}}var Nr=[],Er=0,Tc=null,jl=0,cn=[],un=0,ss=null,Cn=1,In="";function Qn(t,e){Nr[Er++]=jl,Nr[Er++]=Tc,Tc=t,jl=e}function Mv(t,e,n){cn[un++]=Cn,cn[un++]=In,cn[un++]=ss,ss=t;var i=Cn;t=In;var s=32-Xt(i)-1;i&=~(1<<s),n+=1;var r=32-Xt(e)+s;if(30<r){var l=s-s%5;r=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Cn=1<<32-Xt(e)+s|n<<s|i,In=r+t}else Cn=1<<r|n<<s|i,In=t}function up(t){t.return!==null&&(Qn(t,1),Mv(t,1,0))}function dp(t){for(;t===Tc;)Tc=Nr[--Er],Nr[Er]=null,jl=Nr[--Er],Nr[Er]=null;for(;t===ss;)ss=cn[--un],cn[un]=null,In=cn[--un],cn[un]=null,Cn=cn[--un],cn[un]=null}function Dv(t,e){cn[un++]=Cn,cn[un++]=In,cn[un++]=ss,Cn=e.id,In=e.overflow,ss=t}var wt=null,Fe=null,be=!1,Vi=null,hn=!1,Uf=Error(U(519));function rs(t){var e=Error(U(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(fn(e,t)),Uf}function N0(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[_t]=t,e[Gt]=i,n){case"dialog":me("cancel",e),me("close",e);break;case"iframe":case"object":case"embed":me("load",e);break;case"video":case"audio":for(n=0;n<Ml.length;n++)me(Ml[n],e);break;case"source":me("error",e);break;case"img":case"image":case"link":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"input":me("invalid",e),fv(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":me("invalid",e);break;case"textarea":me("invalid",e),pv(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||b_(e.textContent,n)?(i.popover!=null&&(me("beforetoggle",e),me("toggle",e)),i.onScroll!=null&&me("scroll",e),i.onScrollEnd!=null&&me("scrollend",e),i.onClick!=null&&(e.onclick=ei),e=!0):e=!1,e||rs(t,!0)}function E0(t){for(wt=t.return;wt;)switch(wt.tag){case 5:case 31:case 13:hn=!1;return;case 27:case 3:hn=!0;return;default:wt=wt.return}}function ar(t){if(t!==wt)return!1;if(!be)return E0(t),be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||ch(t.type,t.memoizedProps)),n=!n),n&&Fe&&rs(t),E0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));Fe=ug(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));Fe=ug(t)}else e===27?(e=Fe,ms(t.type)?(t=hh,hh=null,Fe=t):Fe=e):Fe=wt?gn(t.stateNode.nextSibling):null;return!0}function zs(){Fe=wt=null,be=!1}function Td(){var t=Vi;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),Vi=null),t}function Cl(t){Vi===null?Vi=[t]:Vi.push(t)}var zf=zn(null),tr=null,ti=null;function ki(t,e,n){Be(zf,e._currentValue),e._currentValue=n}function ai(t){t._currentValue=zf.current,xt(zf)}function Bf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Hf(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var l=s.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=s;for(var u=0;u<e.length;u++)if(o.context===e[u]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Bf(r.return,n,t),i||(l=null);break e}r=o.next}}else if(s.tag===18){if(l=s.return,l===null)throw Error(U(341));l.lanes|=n,r=l.alternate,r!==null&&(r.lanes|=n),Bf(l,n,t),l=null}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}}function xa(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var l=s.alternate;if(l===null)throw Error(U(387));if(l=l.memoizedProps,l!==null){var o=s.type;en(s.pendingProps.value,l.value)||(t!==null?t.push(o):t=[o])}}else if(s===_c.current){if(l=s.alternate,l===null)throw Error(U(387));l.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}s=s.return}t!==null&&Hf(e,t,n,i),e.flags|=262144}function Rc(t){for(t=t.firstContext;t!==null;){if(!en(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bs(t){tr=t,ti=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Nt(t){return Pv(tr,t)}function Lo(t,e){return tr===null&&Bs(t),Pv(t,e)}function Pv(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ti===null){if(t===null)throw Error(U(308));ti=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ti=ti.next=e;return n}var WE=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},ZE=ut.unstable_scheduleCallback,QE=ut.unstable_NormalPriority,rt={$$typeof:Jn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fp(){return{controller:new WE,data:new Map,refCount:0}}function ro(t){t.refCount--,t.refCount===0&&ZE(QE,function(){t.controller.abort()})}var sl=null,Gf=0,Vr=0,Or=null;function XE(t,e){if(sl===null){var n=sl=[];Gf=0,Vr=Pp(),Or={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Gf++,e.then(S0,S0),e}function S0(){if(--Gf===0&&sl!==null){Or!==null&&(Or.status="fulfilled");var t=sl;sl=null,Vr=0,Or=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function JE(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var A0=le.S;le.S=function(t,e){Qy=Zt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&XE(t,e),A0!==null&&A0(t,e)};var Ms=zn(null);function hp(){var t=Ms.current;return t!==null?t:De.pooledCache}function rc(t,e){e===null?Be(Ms,Ms.current):Be(Ms,e.pool)}function Uv(){var t=hp();return t===null?null:{parent:rt._currentValue,pool:t}}var ba=Error(U(460)),pp=Error(U(474)),Uu=Error(U(542)),jc={then:function(){}};function k0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zv(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ei,ei),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,R0(t),t;default:if(typeof e.status=="string")e.then(ei,ei);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(U(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,R0(t),t}throw Ds=e,ba}}function As(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ds=n,ba):n}}var Ds=null;function T0(){if(Ds===null)throw Error(U(459));var t=Ds;return Ds=null,t}function R0(t){if(t===ba||t===Uu)throw Error(U(483))}var Lr=null,Il=0;function Mo(t){var e=Il;return Il+=1,Lr===null&&(Lr=[]),zv(Lr,t,e)}function Ua(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Do(t,e){throw e.$$typeof===zN?Error(U(525)):(t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Bv(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function i(m){for(var g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(m,g){return m=ri(m,g),m.index=0,m.sibling=null,m}function r(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=67108866,g):y):(m.flags|=67108866,g)):(m.flags|=1048576,g)}function l(m){return t&&m.alternate===null&&(m.flags|=67108866),m}function o(m,g,y,_){return g===null||g.tag!==6?(g=Ad(y,m.mode,_),g.return=m,g):(g=s(g,y),g.return=m,g)}function u(m,g,y,_){var E=y.type;return E===pr?h(m,g,y.props.children,_,y.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Si&&As(E)===g.type)?(g=s(g,y.props),Ua(g,y),g.return=m,g):(g=sc(y.type,y.key,y.props,null,m.mode,_),Ua(g,y),g.return=m,g)}function f(m,g,y,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=kd(y,m.mode,_),g.return=m,g):(g=s(g,y.children||[]),g.return=m,g)}function h(m,g,y,_,E){return g===null||g.tag!==7?(g=Ls(y,m.mode,_,E),g.return=m,g):(g=s(g,y),g.return=m,g)}function c(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Ad(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case To:return y=sc(g.type,g.key,g.props,null,m.mode,y),Ua(y,g),y.return=m,y;case $a:return g=kd(g,m.mode,y),g.return=m,g;case Si:return g=As(g),c(m,g,y)}if(qa(g)||Ma(g))return g=Ls(g,m.mode,y,null),g.return=m,g;if(typeof g.then=="function")return c(m,Mo(g),y);if(g.$$typeof===Jn)return c(m,Lo(m,g),y);Do(m,g)}return null}function d(m,g,y,_){var E=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return E!==null?null:o(m,g,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case To:return y.key===E?u(m,g,y,_):null;case $a:return y.key===E?f(m,g,y,_):null;case Si:return y=As(y),d(m,g,y,_)}if(qa(y)||Ma(y))return E!==null?null:h(m,g,y,_,null);if(typeof y.then=="function")return d(m,g,Mo(y),_);if(y.$$typeof===Jn)return d(m,g,Lo(m,y),_);Do(m,y)}return null}function p(m,g,y,_,E){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return m=m.get(y)||null,o(g,m,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case To:return m=m.get(_.key===null?y:_.key)||null,u(g,m,_,E);case $a:return m=m.get(_.key===null?y:_.key)||null,f(g,m,_,E);case Si:return _=As(_),p(m,g,y,_,E)}if(qa(_)||Ma(_))return m=m.get(y)||null,h(g,m,_,E,null);if(typeof _.then=="function")return p(m,g,y,Mo(_),E);if(_.$$typeof===Jn)return p(m,g,y,Lo(g,_),E);Do(g,_)}return null}function x(m,g,y,_){for(var E=null,S=null,N=g,A=g=0,T=null;N!==null&&A<y.length;A++){N.index>A?(T=N,N=null):T=N.sibling;var k=d(m,N,y[A],_);if(k===null){N===null&&(N=T);break}t&&N&&k.alternate===null&&e(m,N),g=r(k,g,A),S===null?E=k:S.sibling=k,S=k,N=T}if(A===y.length)return n(m,N),be&&Qn(m,A),E;if(N===null){for(;A<y.length;A++)N=c(m,y[A],_),N!==null&&(g=r(N,g,A),S===null?E=N:S.sibling=N,S=N);return be&&Qn(m,A),E}for(N=i(N);A<y.length;A++)T=p(N,m,A,y[A],_),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?A:T.key),g=r(T,g,A),S===null?E=T:S.sibling=T,S=T);return t&&N.forEach(function(C){return e(m,C)}),be&&Qn(m,A),E}function v(m,g,y,_){if(y==null)throw Error(U(151));for(var E=null,S=null,N=g,A=g=0,T=null,k=y.next();N!==null&&!k.done;A++,k=y.next()){N.index>A?(T=N,N=null):T=N.sibling;var C=d(m,N,k.value,_);if(C===null){N===null&&(N=T);break}t&&N&&C.alternate===null&&e(m,N),g=r(C,g,A),S===null?E=C:S.sibling=C,S=C,N=T}if(k.done)return n(m,N),be&&Qn(m,A),E;if(N===null){for(;!k.done;A++,k=y.next())k=c(m,k.value,_),k!==null&&(g=r(k,g,A),S===null?E=k:S.sibling=k,S=k);return be&&Qn(m,A),E}for(N=i(N);!k.done;A++,k=y.next())k=p(N,m,A,k.value,_),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?A:k.key),g=r(k,g,A),S===null?E=k:S.sibling=k,S=k);return t&&N.forEach(function(L){return e(m,L)}),be&&Qn(m,A),E}function b(m,g,y,_){if(typeof y=="object"&&y!==null&&y.type===pr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case To:e:{for(var E=y.key;g!==null;){if(g.key===E){if(E=y.type,E===pr){if(g.tag===7){n(m,g.sibling),_=s(g,y.props.children),_.return=m,m=_;break e}}else if(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Si&&As(E)===g.type){n(m,g.sibling),_=s(g,y.props),Ua(_,y),_.return=m,m=_;break e}n(m,g);break}else e(m,g);g=g.sibling}y.type===pr?(_=Ls(y.props.children,m.mode,_,y.key),_.return=m,m=_):(_=sc(y.type,y.key,y.props,null,m.mode,_),Ua(_,y),_.return=m,m=_)}return l(m);case $a:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),_=s(g,y.children||[]),_.return=m,m=_;break e}else{n(m,g);break}else e(m,g);g=g.sibling}_=kd(y,m.mode,_),_.return=m,m=_}return l(m);case Si:return y=As(y),b(m,g,y,_)}if(qa(y))return x(m,g,y,_);if(Ma(y)){if(E=Ma(y),typeof E!="function")throw Error(U(150));return y=E.call(y),v(m,g,y,_)}if(typeof y.then=="function")return b(m,g,Mo(y),_);if(y.$$typeof===Jn)return b(m,g,Lo(m,y),_);Do(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),_=s(g,y),_.return=m,m=_):(n(m,g),_=Ad(y,m.mode,_),_.return=m,m=_),l(m)):n(m,g)}return function(m,g,y,_){try{Il=0;var E=b(m,g,y,_);return Lr=null,E}catch(N){if(N===ba||N===Uu)throw N;var S=Kt(29,N,null,m.mode);return S.lanes=_,S.return=m,S}finally{}}}var Hs=Bv(!0),Hv=Bv(!1),Ai=!1;function mp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ff(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Yi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ki(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Se&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=kc(t),Iv(t,null,n),e}return Pu(t,i,e,n),kc(t)}function rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rv(t,n)}}function Rd(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=l:r=r.next=l,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Vf=!1;function al(){if(Vf){var t=Or;if(t!==null)throw t}}function ll(t,e,n,i){Vf=!1;var s=t.updateQueue;Ai=!1;var r=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,f=u.next;u.next=null,l===null?r=f:l.next=f,l=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=f:o.next=f,h.lastBaseUpdate=u))}if(r!==null){var c=s.baseState;l=0,h=f=u=null,o=r;do{var d=o.lane&-536870913,p=d!==o.lane;if(p?(xe&d)===d:(i&d)===d){d!==0&&d===Vr&&(Vf=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var x=t,v=o;d=e;var b=n;switch(v.tag){case 1:if(x=v.payload,typeof x=="function"){c=x.call(b,c,d);break e}c=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,d=typeof x=="function"?x.call(b,c,d):x,d==null)break e;c=Ye({},c,d);break e;case 2:Ai=!0}}d=o.callback,d!==null&&(t.flags|=64,p&&(t.flags|=8192),p=s.callbacks,p===null?s.callbacks=[d]:p.push(d))}else p={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(f=h=p,u=c):h=h.next=p,l|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);h===null&&(u=c),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=h,r===null&&(s.shared.lanes=0),ls|=l,t.lanes=l,t.memoizedState=c}}function Gv(t,e){if(typeof t!="function")throw Error(U(191,t));t.call(e)}function Fv(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Gv(n[t],e)}var Yr=zn(null),Cc=zn(0);function j0(t,e){t=hi,Be(Cc,t),Be(Yr,e),hi=t|e.baseLanes}function Yf(){Be(Cc,hi),Be(Yr,Yr.current)}function gp(){hi=Cc.current,xt(Yr),xt(Cc)}var tn=zn(null),mn=null;function Ti(t){var e=t.alternate;Be(et,et.current&1),Be(tn,t),mn===null&&(e===null||Yr.current!==null||e.memoizedState!==null)&&(mn=t)}function Kf(t){Be(et,et.current),Be(tn,t),mn===null&&(mn=t)}function Vv(t){t.tag===22?(Be(et,et.current),Be(tn,t),mn===null&&(mn=t)):Ri()}function Ri(){Be(et,et.current),Be(tn,tn.current)}function Yt(t){xt(tn),mn===t&&(mn=null),xt(et)}var et=zn(0);function Ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||dh(n)||fh(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ui=0,ue=null,Le=null,it=null,Oc=!1,Mr=!1,Gs=!1,Lc=0,Ol=0,Dr=null,e2=0;function Ze(){throw Error(U(321))}function xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function bp(t,e,n,i,s,r){return ui=r,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,le.H=t===null||t.memoizedState===null?_y:Rp,Gs=!1,r=n(i,s),Gs=!1,Mr&&(r=Kv(e,n,i,s)),Yv(t),r}function Yv(t){le.H=Ll;var e=Le!==null&&Le.next!==null;if(ui=0,it=Le=ue=null,Oc=!1,Ol=0,Dr=null,e)throw Error(U(300));t===null||at||(t=t.dependencies,t!==null&&Rc(t)&&(at=!0))}function Kv(t,e,n,i){ue=t;var s=0;do{if(Mr&&(Dr=null),Ol=0,Mr=!1,25<=s)throw Error(U(301));if(s+=1,it=Le=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}le.H=wy,r=e(n,i)}while(Mr);return r}function t2(){var t=le.H,e=t.useState()[0];return e=typeof e.then=="function"?ao(e):e,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(ue.flags|=1024),e}function vp(){var t=Lc!==0;return Lc=0,t}function yp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function _p(t){if(Oc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Oc=!1}ui=0,it=Le=ue=null,Mr=!1,Ol=Lc=0,Dr=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ue.memoizedState=it=t:it=it.next=t,it}function tt(){if(Le===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=it===null?ue.memoizedState:it.next;if(e!==null)it=e,Le=t;else{if(t===null)throw ue.alternate===null?Error(U(467)):Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},it===null?ue.memoizedState=it=t:it=it.next=t}return it}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ao(t){var e=Ol;return Ol+=1,Dr===null&&(Dr=[]),t=zv(Dr,t,e),e=ue,(it===null?e.memoizedState:it.next)===null&&(e=e.alternate,le.H=e===null||e.memoizedState===null?_y:Rp),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ao(t);if(t.$$typeof===Jn)return Nt(t)}throw Error(U(438,String(t)))}function wp(t){var e=null,n=ue.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ue.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=zu(),ue.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=BN;return e.index++,n}function di(t,e){return typeof e=="function"?e(t):e}function ac(t){var e=tt();return Np(e,Le,t)}function Np(t,e,n){var i=t.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var l=s.next;s.next=r.next,r.next=l}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var o=l=null,u=null,f=e,h=!1;do{var c=f.lane&-536870913;if(c!==f.lane?(xe&c)===c:(ui&c)===c){var d=f.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),c===Vr&&(h=!0);else if((ui&d)===d){f=f.next,d===Vr&&(h=!0);continue}else c={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(o=u=c,l=r):u=u.next=c,ue.lanes|=d,ls|=d;c=f.action,Gs&&n(r,c),r=f.hasEagerState?f.eagerState:n(r,c)}else d={lane:c,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(o=u=d,l=r):u=u.next=d,ue.lanes|=c,ls|=c;f=f.next}while(f!==null&&f!==e);if(u===null?l=r:u.next=o,!en(r,t.memoizedState)&&(at=!0,h&&(n=Or,n!==null)))throw n;t.memoizedState=r,t.baseState=l,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function jd(t){var e=tt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do r=t(r,l.action),l=l.next;while(l!==s);en(r,e.memoizedState)||(at=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function $v(t,e,n){var i=ue,s=tt(),r=be;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=e();var l=!en((Le||s).memoizedState,n);if(l&&(s.memoizedState=n,at=!0),s=s.queue,Ep(Zv.bind(null,i,s,t),[t]),s.getSnapshot!==e||l||it!==null&&it.memoizedState.tag&1){if(i.flags|=2048,Kr(9,{destroy:void 0},Wv.bind(null,i,s,n,e),null),De===null)throw Error(U(349));r||ui&127||qv(i,e,n)}return n}function qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e=zu(),ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wv(t,e,n,i){e.value=n,e.getSnapshot=i,Qv(e)&&Xv(t)}function Zv(t,e,n){return n(function(){Qv(e)&&Xv(t)})}function Qv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function Xv(t){var e=er(t,2);e!==null&&Ht(e,t,2)}function $f(t){var e=Rt();if(typeof t=="function"){var n=t;if(t=n(),Gs){Mi(!0);try{n()}finally{Mi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},e}function Jv(t,e,n,i){return t.baseState=n,Np(t,Le,typeof i=="function"?i:di)}function n2(t,e,n,i,s){if(Gu(t))throw Error(U(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(l){r.listeners.push(l)}};le.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,ey(e,r)):(r.next=n.next,e.pending=n.next=r)}}function ey(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=le.T,l={};le.T=l;try{var o=n(s,i),u=le.S;u!==null&&u(l,o),C0(t,e,o)}catch(f){qf(t,e,f)}finally{r!==null&&l.types!==null&&(r.types=l.types),le.T=r}}else try{r=n(s,i),C0(t,e,r)}catch(f){qf(t,e,f)}}function C0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){I0(t,e,i)},function(i){return qf(t,e,i)}):I0(t,e,n)}function I0(t,e,n){e.status="fulfilled",e.value=n,ty(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ey(t,n)))}function qf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,ty(e),e=e.next;while(e!==i)}t.action=null}function ty(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function ny(t,e){return e}function O0(t,e){if(be){var n=De.formState;if(n!==null){e:{var i=ue;if(be){if(Fe){t:{for(var s=Fe,r=hn;s.nodeType!==8;){if(!r){s=null;break t}if(s=gn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Fe=gn(s.nextSibling),i=s.data==="F!";break e}}rs(i)}i=!1}i&&(e=n[0])}}return n=Rt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ny,lastRenderedState:e},n.queue=i,n=by.bind(null,ue,i),i.dispatch=n,i=$f(!1),r=Tp.bind(null,ue,!1,i.queue),i=Rt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=n2.bind(null,ue,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function L0(t){var e=tt();return iy(e,Le,t)}function iy(t,e,n){if(e=Np(t,e,ny)[0],t=ac(di)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=ao(e)}catch(l){throw l===ba?Uu:l}else i=e;e=tt();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(ue.flags|=2048,Kr(9,{destroy:void 0},i2.bind(null,s,n),null)),[i,r,t]}function i2(t,e){t.action=e}function M0(t){var e=tt(),n=Le;if(n!==null)return iy(e,n,t);tt(),e=e.memoizedState,n=tt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Kr(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ue.updateQueue,e===null&&(e=zu(),ue.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function sy(){return tt().memoizedState}function lc(t,e,n,i){var s=Rt();ue.flags|=t,s.memoizedState=Kr(1|e,{destroy:void 0},n,i===void 0?null:i)}function Hu(t,e,n,i){var s=tt();i=i===void 0?null:i;var r=s.memoizedState.inst;Le!==null&&i!==null&&xp(i,Le.memoizedState.deps)?s.memoizedState=Kr(e,r,n,i):(ue.flags|=t,s.memoizedState=Kr(1|e,r,n,i))}function D0(t,e){lc(8390656,8,t,e)}function Ep(t,e){Hu(2048,8,t,e)}function s2(t){ue.flags|=4;var e=ue.updateQueue;if(e===null)e=zu(),ue.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function ry(t){var e=tt().memoizedState;return s2({ref:e,nextImpl:t}),function(){if(Se&2)throw Error(U(440));return e.impl.apply(void 0,arguments)}}function ay(t,e){return Hu(4,2,t,e)}function ly(t,e){return Hu(4,4,t,e)}function oy(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cy(t,e,n){n=n!=null?n.concat([t]):null,Hu(4,4,oy.bind(null,e,t),n)}function Sp(){}function uy(t,e){var n=tt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&xp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dy(t,e){var n=tt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&xp(e,i[1]))return i[0];if(i=t(),Gs){Mi(!0);try{t()}finally{Mi(!1)}}return n.memoizedState=[i,e],i}function Ap(t,e,n){return n===void 0||ui&1073741824&&!(xe&261930)?t.memoizedState=e:(t.memoizedState=n,t=Jy(),ue.lanes|=t,ls|=t,n)}function fy(t,e,n,i){return en(n,e)?n:Yr.current!==null?(t=Ap(t,n,i),en(t,e)||(at=!0),t):!(ui&42)||ui&1073741824&&!(xe&261930)?(at=!0,t.memoizedState=n):(t=Jy(),ue.lanes|=t,ls|=t,e)}function hy(t,e,n,i,s){var r=Ae.p;Ae.p=r!==0&&8>r?r:8;var l=le.T,o={};le.T=o,Tp(t,!1,e,n);try{var u=s(),f=le.S;if(f!==null&&f(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=JE(u,i);ol(t,e,h,Jt(t))}else ol(t,e,i,Jt(t))}catch(c){ol(t,e,{then:function(){},status:"rejected",reason:c},Jt())}finally{Ae.p=r,l!==null&&o.types!==null&&(l.types=o.types),le.T=l}}function r2(){}function Wf(t,e,n,i){if(t.tag!==5)throw Error(U(476));var s=py(t).queue;hy(t,s,e,Os,n===null?r2:function(){return my(t),n(i)})}function py(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Os,baseState:Os,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:Os},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function my(t){var e=py(t);e.next===null&&(e=t.alternate.memoizedState),ol(t,e.next.queue,{},Jt())}function kp(){return Nt(Pl)}function gy(){return tt().memoizedState}function xy(){return tt().memoizedState}function a2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Jt();t=Yi(n);var i=Ki(e,t,n);i!==null&&(Ht(i,e,n),rl(i,e,n)),e={cache:fp()},t.payload=e;return}e=e.return}}function l2(t,e,n){var i=Jt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Gu(t)?vy(e,n):(n=op(t,e,n,i),n!==null&&(Ht(n,t,i),yy(n,e,i)))}function by(t,e,n){var i=Jt();ol(t,e,n,i)}function ol(t,e,n,i){var s={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gu(t))vy(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var l=e.lastRenderedState,o=r(l,n);if(s.hasEagerState=!0,s.eagerState=o,en(o,l))return Pu(t,e,s,0),De===null&&Du(),!1}catch{}finally{}if(n=op(t,e,s,i),n!==null)return Ht(n,t,i),yy(n,e,i),!0}return!1}function Tp(t,e,n,i){if(i={lane:2,revertLane:Pp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Gu(t)){if(e)throw Error(U(479))}else e=op(t,n,i,2),e!==null&&Ht(e,t,2)}function Gu(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function vy(t,e){Mr=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yy(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rv(t,n)}}var Ll={readContext:Nt,use:Bu,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Ll.useEffectEvent=Ze;var _y={readContext:Nt,use:Bu,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:D0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,lc(4194308,4,oy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){lc(4,2,t,e)},useMemo:function(t,e){var n=Rt();e=e===void 0?null:e;var i=t();if(Gs){Mi(!0);try{t()}finally{Mi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Rt();if(n!==void 0){var s=n(e);if(Gs){Mi(!0);try{n(e)}finally{Mi(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=l2.bind(null,ue,t),[i.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:function(t){t=$f(t);var e=t.queue,n=by.bind(null,ue,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Sp,useDeferredValue:function(t,e){var n=Rt();return Ap(n,t,e)},useTransition:function(){var t=$f(!1);return t=hy.bind(null,ue,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ue,s=Rt();if(be){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),De===null)throw Error(U(349));xe&127||qv(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,D0(Zv.bind(null,i,r,t),[t]),i.flags|=2048,Kr(9,{destroy:void 0},Wv.bind(null,i,r,n,e),null),n},useId:function(){var t=Rt(),e=De.identifierPrefix;if(be){var n=In,i=Cn;n=(i&~(1<<32-Xt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=e2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:kp,useFormState:O0,useActionState:O0,useOptimistic:function(t){var e=Rt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Tp.bind(null,ue,!0,n),n.dispatch=e,[t,e]},useMemoCache:wp,useCacheRefresh:function(){return Rt().memoizedState=a2.bind(null,ue)},useEffectEvent:function(t){var e=Rt(),n={impl:t};return e.memoizedState=n,function(){if(Se&2)throw Error(U(440));return n.impl.apply(void 0,arguments)}}},Rp={readContext:Nt,use:Bu,useCallback:uy,useContext:Nt,useEffect:Ep,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:ly,useMemo:dy,useReducer:ac,useRef:sy,useState:function(){return ac(di)},useDebugValue:Sp,useDeferredValue:function(t,e){var n=tt();return fy(n,Le.memoizedState,t,e)},useTransition:function(){var t=ac(di)[0],e=tt().memoizedState;return[typeof t=="boolean"?t:ao(t),e]},useSyncExternalStore:$v,useId:gy,useHostTransitionStatus:kp,useFormState:L0,useActionState:L0,useOptimistic:function(t,e){var n=tt();return Jv(n,Le,t,e)},useMemoCache:wp,useCacheRefresh:xy};Rp.useEffectEvent=ry;var wy={readContext:Nt,use:Bu,useCallback:uy,useContext:Nt,useEffect:Ep,useImperativeHandle:cy,useInsertionEffect:ay,useLayoutEffect:ly,useMemo:dy,useReducer:jd,useRef:sy,useState:function(){return jd(di)},useDebugValue:Sp,useDeferredValue:function(t,e){var n=tt();return Le===null?Ap(n,t,e):fy(n,Le.memoizedState,t,e)},useTransition:function(){var t=jd(di)[0],e=tt().memoizedState;return[typeof t=="boolean"?t:ao(t),e]},useSyncExternalStore:$v,useId:gy,useHostTransitionStatus:kp,useFormState:M0,useActionState:M0,useOptimistic:function(t,e){var n=tt();return Le!==null?Jv(n,Le,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:wp,useCacheRefresh:xy};wy.useEffectEvent=ry;function Cd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),s=Yi(i);s.payload=e,n!=null&&(s.callback=n),e=Ki(t,s,i),e!==null&&(Ht(e,t,i),rl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),s=Yi(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ki(t,s,i),e!==null&&(Ht(e,t,i),rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Yi(n);i.tag=2,e!=null&&(i.callback=e),e=Ki(t,i,n),e!==null&&(Ht(e,t,n),rl(e,t,n))}};function P0(t,e,n,i,s,r,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,l):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,i)||!Rl(s,r):!0}function U0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Zf.enqueueReplaceState(e,e.state,null)}function Fs(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ye({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function Ny(t){Ac(t)}function Ey(t){console.error(t)}function Sy(t){Ac(t)}function Mc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function z0(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Qf(t,e,n){return n=Yi(n),n.tag=3,n.payload={element:null},n.callback=function(){Mc(t,e)},n}function Ay(t){return t=Yi(t),t.tag=3,t}function ky(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){z0(e,n,i)}}var l=n.stateNode;l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){z0(e,n,i),typeof s!="function"&&($i===null?$i=new Set([this]):$i.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function o2(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&xa(e,n,s,!0),n=tn.current,n!==null){switch(n.tag){case 31:case 13:return mn===null?Bc():n.alternate===null&&Qe===0&&(Qe=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===jc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Gd(t,i,s)),!1;case 22:return n.flags|=65536,i===jc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Gd(t,i,s)),!1}throw Error(U(435,n.tag))}return Gd(t,i,s),Bc(),!1}if(be)return e=tn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==Uf&&(t=Error(U(422),{cause:i}),Cl(fn(t,n)))):(i!==Uf&&(e=Error(U(423),{cause:i}),Cl(fn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=fn(i,n),s=Qf(t.stateNode,i,s),Rd(t,s),Qe!==4&&(Qe=2)),!1;var r=Error(U(520),{cause:i});if(r=fn(r,n),dl===null?dl=[r]:dl.push(r),Qe!==4&&(Qe=2),e===null)return!0;i=fn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Qf(n.stateNode,i,t),Rd(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&($i===null||!$i.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=Ay(s),ky(s,t,n,i),Rd(n,s),!1}n=n.return}while(n!==null);return!1}var jp=Error(U(461)),at=!1;function yt(t,e,n,i){e.child=t===null?Hv(e,null,n,i):Hs(e,t.child,n,i)}function B0(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var l={};for(var o in i)o!=="ref"&&(l[o]=i[o])}else l=i;return Bs(e),i=bp(t,e,n,l,r,s),o=vp(),t!==null&&!at?(yp(t,e,s),fi(t,e,s)):(be&&o&&up(e),e.flags|=1,yt(t,e,i,s),e.child)}function H0(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!cp(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,Ty(t,e,r,i,s)):(t=sc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Cp(t,s)){var l=r.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(l,i)&&t.ref===e.ref)return fi(t,e,s)}return e.flags|=1,t=ri(r,i),t.ref=e.ref,t.return=e,e.child=t}function Ty(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Rl(r,i)&&t.ref===e.ref)if(at=!1,e.pendingProps=i=r,Cp(t,s))t.flags&131072&&(at=!0);else return e.lanes=t.lanes,fi(t,e,s)}return Xf(t,e,n,i,s)}function Ry(t,e,n,i){var s=i.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;i=s&~r}else i=0,e.child=null;return G0(t,e,r,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&rc(e,r!==null?r.cachePool:null),r!==null?j0(e,r):Yf(),Vv(e);else return i=e.lanes=536870912,G0(t,e,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(rc(e,r.cachePool),j0(e,r),Ri(),e.memoizedState=null):(t!==null&&rc(e,null),Yf(),Ri());return yt(t,e,s,n),e.child}function Za(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function G0(t,e,n,i,s){var r=hp();return r=r===null?null:{parent:rt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&rc(e,null),Yf(),Vv(e),t!==null&&xa(t,e,i,!0),e.childLanes=s,null}function oc(t,e){return e=Dc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function F0(t,e,n){return Hs(e,t.child,null,n),t=oc(e,e.pendingProps),t.flags|=2,Yt(e),e.memoizedState=null,t}function c2(t,e,n){var i=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(be){if(i.mode==="hidden")return t=oc(e,i),e.lanes=536870912,Za(null,t);if(Kf(e),(t=Fe)?(t=__(t,hn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ss!==null?{id:Cn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},n=Lv(t),n.return=e,e.child=n,wt=e,Fe=null)):t=null,t===null)throw rs(e);return e.lanes=536870912,null}return oc(e,i)}var r=t.memoizedState;if(r!==null){var l=r.dehydrated;if(Kf(e),s)if(e.flags&256)e.flags&=-257,e=F0(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(U(558));else if(at||xa(t,e,n,!1),s=(n&t.childLanes)!==0,at||s){if(i=De,i!==null&&(l=av(i,n),l!==0&&l!==r.retryLane))throw r.retryLane=l,er(t,l),Ht(i,t,l),jp;Bc(),e=F0(t,e,n)}else t=r.treeContext,Fe=gn(l.nextSibling),wt=e,be=!0,Vi=null,hn=!1,t!==null&&Dv(e,t),e=oc(e,i),e.flags|=4096;return e}return t=ri(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function cc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Xf(t,e,n,i,s){return Bs(e),n=bp(t,e,n,i,void 0,s),i=vp(),t!==null&&!at?(yp(t,e,s),fi(t,e,s)):(be&&i&&up(e),e.flags|=1,yt(t,e,n,s),e.child)}function V0(t,e,n,i,s,r){return Bs(e),e.updateQueue=null,n=Kv(e,i,n,s),Yv(t),i=vp(),t!==null&&!at?(yp(t,e,r),fi(t,e,r)):(be&&i&&up(e),e.flags|=1,yt(t,e,n,r),e.child)}function Y0(t,e,n,i,s){if(Bs(e),e.stateNode===null){var r=wr,l=n.contextType;typeof l=="object"&&l!==null&&(r=Nt(l)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zf,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},mp(e),l=n.contextType,r.context=typeof l=="object"&&l!==null?Nt(l):wr,r.state=e.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(Cd(e,n,l,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(l=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),l!==r.state&&Zf.enqueueReplaceState(r,r.state,null),ll(e,i,r,s),al(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,u=Fs(n,o);r.props=u;var f=r.context,h=n.contextType;l=wr,typeof h=="object"&&h!==null&&(l=Nt(h));var c=n.getDerivedStateFromProps;h=typeof c=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||f!==l)&&U0(e,r,i,l),Ai=!1;var d=e.memoizedState;r.state=d,ll(e,i,r,s),al(),f=e.memoizedState,o||d!==f||Ai?(typeof c=="function"&&(Cd(e,n,c,i),f=e.memoizedState),(u=Ai||P0(e,n,u,i,d,f,l))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),r.props=i,r.state=f,r.context=l,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Ff(t,e),l=e.memoizedProps,h=Fs(n,l),r.props=h,c=e.pendingProps,d=r.context,f=n.contextType,u=wr,typeof f=="object"&&f!==null&&(u=Nt(f)),o=n.getDerivedStateFromProps,(f=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l!==c||d!==u)&&U0(e,r,i,u),Ai=!1,d=e.memoizedState,r.state=d,ll(e,i,r,s),al();var p=e.memoizedState;l!==c||d!==p||Ai||t!==null&&t.dependencies!==null&&Rc(t.dependencies)?(typeof o=="function"&&(Cd(e,n,o,i),p=e.memoizedState),(h=Ai||P0(e,n,h,i,d,p,u)||t!==null&&t.dependencies!==null&&Rc(t.dependencies))?(f||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,p,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,p,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),r.props=i,r.state=p,r.context=u,i=h):(typeof r.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,cc(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,n,s)):yt(t,e,n,s),e.memoizedState=r.state,t=e.child):t=fi(t,e,s),t}function K0(t,e,n,i){return zs(),e.flags|=256,yt(t,e,n,i),e.child}var Id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Od(t){return{baseLanes:t,cachePool:Uv()}}function Ld(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Wt),t}function jy(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,l;if((l=r)||(l=t!==null&&t.memoizedState===null?!1:(et.current&2)!==0),l&&(s=!0,e.flags&=-129),l=(e.flags&32)!==0,e.flags&=-33,t===null){if(be){if(s?Ti(e):Ri(),(t=Fe)?(t=__(t,hn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ss!==null?{id:Cn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},n=Lv(t),n.return=e,e.child=n,wt=e,Fe=null)):t=null,t===null)throw rs(e);return fh(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,s?(Ri(),s=e.mode,o=Dc({mode:"hidden",children:o},s),i=Ls(i,s,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=Od(n),i.childLanes=Ld(t,l,n),e.memoizedState=Id,Za(null,i)):(Ti(e),Jf(e,o))}var u=t.memoizedState;if(u!==null&&(o=u.dehydrated,o!==null)){if(r)e.flags&256?(Ti(e),e.flags&=-257,e=Md(t,e,n)):e.memoizedState!==null?(Ri(),e.child=t.child,e.flags|=128,e=null):(Ri(),o=i.fallback,s=e.mode,i=Dc({mode:"visible",children:i.children},s),o=Ls(o,s,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Hs(e,t.child,null,n),i=e.child,i.memoizedState=Od(n),i.childLanes=Ld(t,l,n),e.memoizedState=Id,e=Za(null,i));else if(Ti(e),fh(o)){if(l=o.nextSibling&&o.nextSibling.dataset,l)var f=l.dgst;l=f,i=Error(U(419)),i.stack="",i.digest=l,Cl({value:i,source:null,stack:null}),e=Md(t,e,n)}else if(at||xa(t,e,n,!1),l=(n&t.childLanes)!==0,at||l){if(l=De,l!==null&&(i=av(l,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,er(t,i),Ht(l,t,i),jp;dh(o)||Bc(),e=Md(t,e,n)}else dh(o)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Fe=gn(o.nextSibling),wt=e,be=!0,Vi=null,hn=!1,t!==null&&Dv(e,t),e=Jf(e,i.children),e.flags|=4096);return e}return s?(Ri(),o=i.fallback,s=e.mode,u=t.child,f=u.sibling,i=ri(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?o=ri(f,o):(o=Ls(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,Za(null,i),i=e.child,o=t.child.memoizedState,o===null?o=Od(n):(s=o.cachePool,s!==null?(u=rt._currentValue,s=s.parent!==u?{parent:u,pool:u}:s):s=Uv(),o={baseLanes:o.baseLanes|n,cachePool:s}),i.memoizedState=o,i.childLanes=Ld(t,l,n),e.memoizedState=Id,Za(t.child,i)):(Ti(e),n=t.child,t=n.sibling,n=ri(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(l=e.deletions,l===null?(e.deletions=[t],e.flags|=16):l.push(t)),e.child=n,e.memoizedState=null,n)}function Jf(t,e){return e=Dc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Dc(t,e){return t=Kt(22,t,null,e),t.lanes=0,t}function Md(t,e,n){return Hs(e,t.child,null,n),t=Jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Bf(t.return,e,n)}function Dd(t,e,n,i,s,r){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s,treeForkCount:r}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=s,l.treeForkCount=r)}function Cy(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;i=i.children;var l=et.current,o=(l&2)!==0;if(o?(l=l&1|2,e.flags|=128):l&=1,Be(et,l),yt(t,e,i,n),i=be?jl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$0(t,n,e);else if(t.tag===19)$0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ic(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dd(e,!1,s,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ic(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dd(e,!0,n,null,r,i);break;case"together":Dd(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function fi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))if(t!==null){if(xa(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Rc(t)))}function u2(t,e,n){switch(e.tag){case 3:wc(e,e.stateNode.containerInfo),ki(e,rt,t.memoizedState.cache),zs();break;case 27:case 5:kf(e);break;case 4:wc(e,e.stateNode.containerInfo);break;case 10:ki(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Kf(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Ti(e),e.flags|=128,null):n&e.child.childLanes?jy(t,e,n):(Ti(e),t=fi(t,e,n),t!==null?t.sibling:null);Ti(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(xa(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return Cy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(et,et.current),i)break;return null;case 22:return e.lanes=0,Ry(t,e,n,e.pendingProps);case 24:ki(e,rt,t.memoizedState.cache)}return fi(t,e,n)}function Iy(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)at=!0;else{if(!Cp(t,n)&&!(e.flags&128))return at=!1,u2(t,e,n);at=!!(t.flags&131072)}else at=!1,be&&e.flags&1048576&&Mv(e,jl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=As(e.elementType),e.type=t,typeof t=="function")cp(t)?(i=Fs(t,i),e.tag=1,e=Y0(null,e,t,i,n)):(e.tag=0,e=Xf(null,e,t,i,n));else{if(t!=null){var s=t.$$typeof;if(s===Wh){e.tag=11,e=B0(null,e,t,i,n);break e}else if(s===Zh){e.tag=14,e=H0(null,e,t,i,n);break e}}throw e=Sf(t)||t,Error(U(306,e,""))}}return e;case 0:return Xf(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Fs(i,e.pendingProps),Y0(t,e,i,s,n);case 3:e:{if(wc(e,e.stateNode.containerInfo),t===null)throw Error(U(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,Ff(t,e),ll(e,i,null,n);var l=e.memoizedState;if(i=l.cache,ki(e,rt,i),i!==r.cache&&Hf(e,[rt],n,!0),al(),i=l.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:l.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=K0(t,e,i,n);break e}else if(i!==s){s=fn(Error(U(424)),e),Cl(s),e=K0(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Fe=gn(t.firstChild),wt=e,be=!0,Vi=null,hn=!0,n=Hv(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(zs(),i===s){e=fi(t,e,n);break e}yt(t,e,i,n)}e=e.child}return e;case 26:return cc(t,e),t===null?(n=hg(e.type,null,e.pendingProps,null))?e.memoizedState=n:be||(n=e.type,t=e.pendingProps,i=Vc(Fi.current).createElement(n),i[_t]=e,i[Gt]=t,St(i,n,t),mt(i),e.stateNode=i):e.memoizedState=hg(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return kf(e),t===null&&be&&(i=e.stateNode=w_(e.type,e.pendingProps,Fi.current),wt=e,hn=!0,s=Fe,ms(e.type)?(hh=s,Fe=gn(i.firstChild)):Fe=s),yt(t,e,e.pendingProps.children,n),cc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&be&&((s=i=Fe)&&(i=B2(i,e.type,e.pendingProps,hn),i!==null?(e.stateNode=i,wt=e,Fe=gn(i.firstChild),hn=!1,s=!0):s=!1),s||rs(e)),kf(e),s=e.type,r=e.pendingProps,l=t!==null?t.memoizedProps:null,i=r.children,ch(s,r)?i=null:l!==null&&ch(s,l)&&(e.flags|=32),e.memoizedState!==null&&(s=bp(t,e,t2,null,null,n),Pl._currentValue=s),cc(t,e),yt(t,e,i,n),e.child;case 6:return t===null&&be&&((t=n=Fe)&&(n=H2(n,e.pendingProps,hn),n!==null?(e.stateNode=n,wt=e,Fe=null,t=!0):t=!1),t||rs(e)),null;case 13:return jy(t,e,n);case 4:return wc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Hs(e,null,i,n):yt(t,e,i,n),e.child;case 11:return B0(t,e,e.type,e.pendingProps,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ki(e,e.type,i.value),yt(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Bs(e),s=Nt(s),i=i(s),e.flags|=1,yt(t,e,i,n),e.child;case 14:return H0(t,e,e.type,e.pendingProps,n);case 15:return Ty(t,e,e.type,e.pendingProps,n);case 19:return Cy(t,e,n);case 31:return c2(t,e,n);case 22:return Ry(t,e,n,e.pendingProps);case 24:return Bs(e),i=Nt(rt),t===null?(s=hp(),s===null&&(s=De,r=fp(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},mp(e),ki(e,rt,s)):(t.lanes&n&&(Ff(t,e),ll(e,null,null,n),al()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),ki(e,rt,i)):(i=r.cache,ki(e,rt,i),i!==s.cache&&Hf(e,[rt],n,!0))),yt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(U(156,e.tag))}function Kn(t){t.flags|=4}function Pd(t,e,n,i,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(n_())t.flags|=8192;else throw Ds=jc,pp}else t.flags&=-16777217}function q0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!S_(e))if(n_())t.flags|=8192;else throw Ds=jc,pp}function Po(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?iv():536870912,t.lanes|=e,$r|=e)}function za(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function d2(t,e,n){var i=e.pendingProps;switch(dp(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return Ge(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),ai(rt),Hr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ar(e)?Kn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Td())),Ge(e),null;case 26:var s=e.type,r=e.memoizedState;return t===null?(Kn(e),r!==null?(Ge(e),q0(e,r)):(Ge(e),Pd(e,s,null,i,n))):r?r!==t.memoizedState?(Kn(e),Ge(e),q0(e,r)):(Ge(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&Kn(e),Ge(e),Pd(e,s,t,i,n)),null;case 27:if(Nc(e),n=Fi.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Kn(e);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ge(e),null}t=Ln.current,ar(e)?N0(e):(t=w_(s,i,n),e.stateNode=t,Kn(e))}return Ge(e),null;case 5:if(Nc(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Kn(e);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ge(e),null}if(r=Ln.current,ar(e))N0(e);else{var l=Vc(Fi.current);switch(r){case 1:r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=l.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=l.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?l.createElement("select",{is:i.is}):l.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?l.createElement(s,{is:i.is}):l.createElement(s)}}r[_t]=e,r[Gt]=i;e:for(l=e.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===e)break e;for(;l.sibling===null;){if(l.return===null||l.return===e)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}e.stateNode=r;e:switch(St(r,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Kn(e)}}return Ge(e),Pd(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Kn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(t=Fi.current,ar(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=wt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[_t]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||b_(t.nodeValue,n)),t||rs(e,!0)}else t=Vc(t).createTextNode(i),t[_t]=e,e.stateNode=t}return Ge(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ar(e),n!==null){if(t===null){if(!i)throw Error(U(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(557));t[_t]=e}else zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),t=!1}else n=Td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Yt(e),e):(Yt(e),null);if(e.flags&128)throw Error(U(558))}return Ge(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ar(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[_t]=e}else zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else s=Td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Yt(e),e):(Yt(e),null)}return Yt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Po(e,e.updateQueue),Ge(e),null);case 4:return Hr(),t===null&&Up(e.stateNode.containerInfo),Ge(e),null;case 10:return ai(e.type),Ge(e),null;case 19:if(xt(et),i=e.memoizedState,i===null)return Ge(e),null;if(s=(e.flags&128)!==0,r=i.rendering,r===null)if(s)za(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Ic(t),r!==null){for(e.flags|=128,za(i,!1),t=r.updateQueue,e.updateQueue=t,Po(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Ov(n,t),n=n.sibling;return Be(et,et.current&1|2),be&&Qn(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Zt()>Uc&&(e.flags|=128,s=!0,za(i,!1),e.lanes=4194304)}else{if(!s)if(t=Ic(r),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Po(e,t),za(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!be)return Ge(e),null}else 2*Zt()-i.renderingStartTime>Uc&&n!==536870912&&(e.flags|=128,s=!0,za(i,!1),e.lanes=4194304);i.isBackwards?(r.sibling=e.child,e.child=r):(t=i.last,t!==null?t.sibling=r:e.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Zt(),t.sibling=null,n=et.current,Be(et,s?n&1|2:n&1),be&&Qn(e,i.treeForkCount),t):(Ge(e),null);case 22:case 23:return Yt(e),gp(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),n=e.updateQueue,n!==null&&Po(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&xt(Ms),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ai(rt),Ge(e),null;case 25:return null;case 30:return null}throw Error(U(156,e.tag))}function f2(t,e){switch(dp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ai(rt),Hr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Nc(e),null;case 31:if(e.memoizedState!==null){if(Yt(e),e.alternate===null)throw Error(U(340));zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Yt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(et),null;case 4:return Hr(),null;case 10:return ai(e.type),null;case 22:case 23:return Yt(e),gp(),t!==null&&xt(Ms),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ai(rt),null;case 25:return null;default:return null}}function Oy(t,e){switch(dp(e),e.tag){case 3:ai(rt),Hr();break;case 26:case 27:case 5:Nc(e);break;case 4:Hr();break;case 31:e.memoizedState!==null&&Yt(e);break;case 13:Yt(e);break;case 19:xt(et);break;case 10:ai(e.type);break;case 22:case 23:Yt(e),gp(),t!==null&&xt(Ms);break;case 24:ai(rt)}}function lo(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,l=n.inst;i=r(),l.destroy=i}n=n.next}while(n!==s)}}catch(o){je(e,e.return,o)}}function as(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var l=i.inst,o=l.destroy;if(o!==void 0){l.destroy=void 0,s=e;var u=n,f=o;try{f()}catch(h){je(s,u,h)}}}i=i.next}while(i!==r)}}catch(h){je(e,e.return,h)}}function Ly(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Fv(e,n)}catch(i){je(t,t.return,i)}}}function My(t,e,n){n.props=Fs(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){je(t,e,i)}}function cl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){je(t,e,s)}}function On(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){je(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){je(t,e,s)}else n.current=null}function Dy(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){je(t,t.return,s)}}function Ud(t,e,n){try{var i=t.stateNode;L2(i,t.type,n,e),i[Gt]=e}catch(s){je(t,t.return,s)}}function Py(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ms(t.type)||t.tag===4}function zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ms(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ei));else if(i!==4&&(i===27&&ms(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(eh(t,e,n),t=t.sibling;t!==null;)eh(t,e,n),t=t.sibling}function Pc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&ms(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function Uy(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);St(e,i,n),e[_t]=t,e[Gt]=n}catch(r){je(t,t.return,r)}}var Xn=!1,st=!1,Bd=!1,W0=typeof WeakSet=="function"?WeakSet:Set,ht=null;function h2(t,e){if(t=t.containerInfo,lh=qc,t=Sv(t),ap(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var l=0,o=-1,u=-1,f=0,h=0,c=t,d=null;t:for(;;){for(var p;c!==n||s!==0&&c.nodeType!==3||(o=l+s),c!==r||i!==0&&c.nodeType!==3||(u=l+i),c.nodeType===3&&(l+=c.nodeValue.length),(p=c.firstChild)!==null;)d=c,c=p;for(;;){if(c===t)break t;if(d===n&&++f===s&&(o=l),d===r&&++h===i&&(u=l),(p=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=p}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(oh={focusedElem:t,selectionRange:n},qc=!1,ht=e;ht!==null;)if(e=ht,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ht=t;else for(;ht!==null;){switch(e=ht,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var x=Fs(n.type,s);t=i.getSnapshotBeforeUpdate(x,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(v){je(n,n.return,v)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)uh(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":uh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(U(163))}if(t=e.sibling,t!==null){t.return=e.return,ht=t;break}ht=e.return}}function zy(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:qn(t,n),i&4&&lo(5,n);break;case 1:if(qn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){je(n,n.return,l)}else{var s=Fs(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){je(n,n.return,l)}}i&64&&Ly(n),i&512&&cl(n,n.return);break;case 3:if(qn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Fv(t,e)}catch(l){je(n,n.return,l)}}break;case 27:e===null&&i&4&&Uy(n);case 26:case 5:qn(t,n),e===null&&i&4&&Dy(n),i&512&&cl(n,n.return);break;case 12:qn(t,n);break;case 31:qn(t,n),i&4&&Gy(t,n);break;case 13:qn(t,n),i&4&&Fy(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=w2.bind(null,n),G2(t,n))));break;case 22:if(i=n.memoizedState!==null||Xn,!i){e=e!==null&&e.memoizedState!==null||st,s=Xn;var r=st;Xn=i,(st=e)&&!r?Zn(t,n,(n.subtreeFlags&8772)!==0):qn(t,n),Xn=s,st=r}break;case 30:break;default:qn(t,n)}}function By(t){var e=t.alternate;e!==null&&(t.alternate=null,By(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ep(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,Ut=!1;function $n(t,e,n){for(n=n.child;n!==null;)Hy(t,e,n),n=n.sibling}function Hy(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(eo,n)}catch{}switch(n.tag){case 26:st||On(n,e),$n(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:st||On(n,e);var i=$e,s=Ut;ms(n.type)&&($e=n.stateNode,Ut=!1),$n(t,e,n),hl(n.stateNode),$e=i,Ut=s;break;case 5:st||On(n,e);case 6:if(i=$e,s=Ut,$e=null,$n(t,e,n),$e=i,Ut=s,$e!==null)if(Ut)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(n.stateNode)}catch(r){je(n,e,r)}else try{$e.removeChild(n.stateNode)}catch(r){je(n,e,r)}break;case 18:$e!==null&&(Ut?(t=$e,og(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Qr(t)):og($e,n.stateNode));break;case 4:i=$e,s=Ut,$e=n.stateNode.containerInfo,Ut=!0,$n(t,e,n),$e=i,Ut=s;break;case 0:case 11:case 14:case 15:as(2,n,e),st||as(4,n,e),$n(t,e,n);break;case 1:st||(On(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&My(n,e,i)),$n(t,e,n);break;case 21:$n(t,e,n);break;case 22:st=(i=st)||n.memoizedState!==null,$n(t,e,n),st=i;break;default:$n(t,e,n)}}function Gy(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Qr(t)}catch(n){je(e,e.return,n)}}}function Fy(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Qr(t)}catch(n){je(e,e.return,n)}}function p2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new W0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new W0),e;default:throw Error(U(435,t.tag))}}function Uo(t,e){var n=p2(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var s=N2.bind(null,t,i);i.then(s,s)}})}function Dt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 27:if(ms(o.type)){$e=o.stateNode,Ut=!1;break e}break;case 5:$e=o.stateNode,Ut=!1;break e;case 3:case 4:$e=o.stateNode.containerInfo,Ut=!0;break e}o=o.return}if($e===null)throw Error(U(160));Hy(r,l,s),$e=null,Ut=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Vy(e,t),e=e.sibling}var wn=null;function Vy(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dt(e,t),Pt(t),i&4&&(as(3,t,t.return),lo(3,t),as(5,t,t.return));break;case 1:Dt(e,t),Pt(t),i&512&&(st||n===null||On(n,n.return)),i&64&&Xn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=wn;if(Dt(e,t),Pt(t),i&512&&(st||n===null||On(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[io]||r[_t]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),St(r,i,n),r[_t]=t,mt(r),i=r;break e;case"link":var l=mg("link","href",s).get(i+(n.href||""));if(l){for(var o=0;o<l.length;o++)if(r=l[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){l.splice(o,1);break t}}r=s.createElement(i),St(r,i,n),s.head.appendChild(r);break;case"meta":if(l=mg("meta","content",s).get(i+(n.content||""))){for(o=0;o<l.length;o++)if(r=l[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){l.splice(o,1);break t}}r=s.createElement(i),St(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[_t]=t,mt(r),i=r}t.stateNode=i}else gg(s,t.type,t.stateNode);else t.stateNode=pg(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?gg(s,t.type,t.stateNode):pg(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,n.memoizedProps)}break;case 27:Dt(e,t),Pt(t),i&512&&(st||n===null||On(n,n.return)),n!==null&&i&4&&Ud(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Dt(e,t),Pt(t),i&512&&(st||n===null||On(n,n.return)),t.flags&32){s=t.stateNode;try{Fr(s,"")}catch(x){je(t,t.return,x)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,Ud(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Bd=!0);break;case 6:if(Dt(e,t),Pt(t),i&4){if(t.stateNode===null)throw Error(U(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(x){je(t,t.return,x)}}break;case 3:if(fc=null,s=wn,wn=Yc(e.containerInfo),Dt(e,t),wn=s,Pt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Qr(e.containerInfo)}catch(x){je(t,t.return,x)}Bd&&(Bd=!1,Yy(t));break;case 4:i=wn,wn=Yc(t.stateNode.containerInfo),Dt(e,t),Pt(t),wn=i;break;case 12:Dt(e,t),Pt(t);break;case 31:Dt(e,t),Pt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uo(t,i)));break;case 13:Dt(e,t),Pt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fu=Zt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uo(t,i)));break;case 22:s=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=Xn,h=st;if(Xn=f||s,st=h||u,Dt(e,t),st=h,Xn=f,Pt(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||u||Xn||st||ks(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,s)l=r.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{o=u.stateNode;var c=u.memoizedProps.style,d=c!=null&&c.hasOwnProperty("display")?c.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(x){je(u,u.return,x)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(x){je(u,u.return,x)}}}else if(e.tag===18){if(n===null){u=e;try{var p=u.stateNode;s?cg(p,!0):cg(u.stateNode,!1)}catch(x){je(u,u.return,x)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Uo(t,n))));break;case 19:Dt(e,t),Pt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uo(t,i)));break;case 30:break;case 21:break;default:Dt(e,t),Pt(t)}}function Pt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Py(i)){n=i;break}i=i.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var s=n.stateNode,r=zd(t);Pc(t,r,s);break;case 5:var l=n.stateNode;n.flags&32&&(Fr(l,""),n.flags&=-33);var o=zd(t);Pc(t,o,l);break;case 3:case 4:var u=n.stateNode.containerInfo,f=zd(t);eh(t,f,u);break;default:throw Error(U(161))}}catch(h){je(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Yy(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function qn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)zy(t,e.alternate,e),e=e.sibling}function ks(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:as(4,e,e.return),ks(e);break;case 1:On(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&My(e,e.return,n),ks(e);break;case 27:hl(e.stateNode);case 26:case 5:On(e,e.return),ks(e);break;case 22:e.memoizedState===null&&ks(e);break;case 30:ks(e);break;default:ks(e)}t=t.sibling}}function Zn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,l=r.flags;switch(r.tag){case 0:case 11:case 15:Zn(s,r,n),lo(4,r);break;case 1:if(Zn(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(f){je(i,i.return,f)}if(i=r,s=i.updateQueue,s!==null){var o=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)Gv(u[s],o)}catch(f){je(i,i.return,f)}}n&&l&64&&Ly(r),cl(r,r.return);break;case 27:Uy(r);case 26:case 5:Zn(s,r,n),n&&i===null&&l&4&&Dy(r),cl(r,r.return);break;case 12:Zn(s,r,n);break;case 31:Zn(s,r,n),n&&l&4&&Gy(s,r);break;case 13:Zn(s,r,n),n&&l&4&&Fy(s,r);break;case 22:r.memoizedState===null&&Zn(s,r,n),cl(r,r.return);break;case 30:break;default:Zn(s,r,n)}e=e.sibling}}function Ip(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ro(n))}function Op(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ro(t))}function yn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ky(t,e,n,i),e=e.sibling}function Ky(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:yn(t,e,n,i),s&2048&&lo(9,e);break;case 1:yn(t,e,n,i);break;case 3:yn(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ro(t)));break;case 12:if(s&2048){yn(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,l=r.id,o=r.onPostCommit;typeof o=="function"&&o(l,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){je(e,e.return,u)}}else yn(t,e,n,i);break;case 31:yn(t,e,n,i);break;case 13:yn(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,l=e.alternate,e.memoizedState!==null?r._visibility&2?yn(t,e,n,i):ul(t,e):r._visibility&2?yn(t,e,n,i):(r._visibility|=2,fr(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Ip(l,e);break;case 24:yn(t,e,n,i),s&2048&&Op(e.alternate,e);break;default:yn(t,e,n,i)}}function fr(t,e,n,i,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,l=e,o=n,u=i,f=l.flags;switch(l.tag){case 0:case 11:case 15:fr(r,l,o,u,s),lo(8,l);break;case 23:break;case 22:var h=l.stateNode;l.memoizedState!==null?h._visibility&2?fr(r,l,o,u,s):ul(r,l):(h._visibility|=2,fr(r,l,o,u,s)),s&&f&2048&&Ip(l.alternate,l);break;case 24:fr(r,l,o,u,s),s&&f&2048&&Op(l.alternate,l);break;default:fr(r,l,o,u,s)}e=e.sibling}}function ul(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:ul(n,i),s&2048&&Ip(i.alternate,i);break;case 24:ul(n,i),s&2048&&Op(i.alternate,i);break;default:ul(n,i)}e=e.sibling}}var Qa=8192;function lr(t,e,n){if(t.subtreeFlags&Qa)for(t=t.child;t!==null;)$y(t,e,n),t=t.sibling}function $y(t,e,n){switch(t.tag){case 26:lr(t,e,n),t.flags&Qa&&t.memoizedState!==null&&eS(n,wn,t.memoizedState,t.memoizedProps);break;case 5:lr(t,e,n);break;case 3:case 4:var i=wn;wn=Yc(t.stateNode.containerInfo),lr(t,e,n),wn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Qa,Qa=16777216,lr(t,e,n),Qa=i):lr(t,e,n));break;default:lr(t,e,n)}}function qy(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ba(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ht=i,Zy(i,t)}qy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wy(t),t=t.sibling}function Wy(t){switch(t.tag){case 0:case 11:case 15:Ba(t),t.flags&2048&&as(9,t,t.return);break;case 3:Ba(t);break;case 12:Ba(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,uc(t)):Ba(t);break;default:Ba(t)}}function uc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ht=i,Zy(i,t)}qy(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:as(8,e,e.return),uc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,uc(e));break;default:uc(e)}t=t.sibling}}function Zy(t,e){for(;ht!==null;){var n=ht;switch(n.tag){case 0:case 11:case 15:as(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ro(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ht=i;else e:for(n=t;ht!==null;){i=ht;var s=i.sibling,r=i.return;if(By(i),i===n){ht=null;break e}if(s!==null){s.return=r,ht=s;break e}ht=r}}}var m2={getCacheForType:function(t){var e=Nt(rt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Nt(rt).controller.signal}},g2=typeof WeakMap=="function"?WeakMap:Map,Se=0,De=null,ge=null,xe=0,Re=0,Vt=null,Pi=!1,va=!1,Lp=!1,hi=0,Qe=0,ls=0,Ps=0,Mp=0,Wt=0,$r=0,dl=null,zt=null,th=!1,Fu=0,Qy=0,Uc=1/0,zc=null,$i=null,lt=0,qi=null,qr=null,li=0,nh=0,ih=null,Xy=null,fl=0,sh=null;function Jt(){return Se&2&&xe!==0?xe&-xe:le.T!==null?Pp():lv()}function Jy(){if(Wt===0)if(!(xe&536870912)||be){var t=jo;jo<<=1,!(jo&3932160)&&(jo=262144),Wt=t}else Wt=536870912;return t=tn.current,t!==null&&(t.flags|=32),Wt}function Ht(t,e,n){(t===De&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(Wr(t,0),Ui(t,xe,Wt,!1)),no(t,n),(!(Se&2)||t!==De)&&(t===De&&(!(Se&2)&&(Ps|=n),Qe===4&&Ui(t,xe,Wt,!1)),Bn(t))}function e_(t,e,n){if(Se&6)throw Error(U(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||to(t,e),s=i?v2(t,e):Hd(t,e,!0),r=i;do{if(s===0){va&&!i&&Ui(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!x2(n)){s=Hd(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var l=0;else l=t.pendingLanes&-536870913,l=l!==0?l:l&536870912?536870912:0;if(l!==0){e=l;e:{var o=t;s=dl;var u=o.current.memoizedState.isDehydrated;if(u&&(Wr(o,l).flags|=256),l=Hd(o,l,!1),l!==2){if(Lp&&!u){o.errorRecoveryDisabledLanes|=r,Ps|=r,s=4;break e}r=zt,zt=s,r!==null&&(zt===null?zt=r:zt.push.apply(zt,r))}s=l}if(r=!1,s!==2)continue}}if(s===1){Wr(t,0),Ui(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(U(345));case 4:if((e&4194048)!==e)break;case 6:Ui(i,e,Wt,!Pi);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(U(329))}if((e&62914560)===e&&(s=Fu+300-Zt(),10<s)){if(Ui(i,e,Wt,!Pi),Iu(i,0,!0)!==0)break e;li=e,i.timeoutHandle=y_(Z0.bind(null,i,n,zt,zc,th,e,Wt,Ps,$r,Pi,r,"Throttled",-0,0),s);break e}Z0(i,n,zt,zc,th,e,Wt,Ps,$r,Pi,r,null,-0,0)}}break}while(!0);Bn(t)}function Z0(t,e,n,i,s,r,l,o,u,f,h,c,d,p){if(t.timeoutHandle=-1,c=e.subtreeFlags,c&8192||(c&16785408)===16785408){c={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},$y(e,r,c);var x=(r&62914560)===r?Fu-Zt():(r&4194048)===r?Qy-Zt():0;if(x=tS(c,x),x!==null){li=r,t.cancelPendingCommit=x(X0.bind(null,t,e,r,n,i,s,l,o,u,h,c,null,d,p)),Ui(t,r,l,!f);return}}X0(t,e,r,n,i,s,l,o,u)}function x2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!en(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e,n,i){e&=~Mp,e&=~Ps,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-Xt(s),l=1<<r;i[r]=-1,s&=~l}n!==0&&sv(t,n,e)}function Vu(){return Se&6?!0:(oo(0),!1)}function Dp(){if(ge!==null){if(Re===0)var t=ge.return;else t=ge,ti=tr=null,_p(t),Lr=null,Il=0,t=ge;for(;t!==null;)Oy(t.alternate,t),t=t.return;ge=null}}function Wr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,P2(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),li=0,Dp(),De=t,ge=n=ri(t.current,null),xe=e,Re=0,Vt=null,Pi=!1,va=to(t,e),Lp=!1,$r=Wt=Mp=Ps=ls=Qe=0,zt=dl=null,th=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Xt(i),r=1<<s;e|=t[s],i&=~r}return hi=e,Du(),n}function t_(t,e){ue=null,le.H=Ll,e===ba||e===Uu?(e=T0(),Re=3):e===pp?(e=T0(),Re=4):Re=e===jp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Vt=e,ge===null&&(Qe=1,Mc(t,fn(e,t.current)))}function n_(){var t=tn.current;return t===null?!0:(xe&4194048)===xe?mn===null:(xe&62914560)===xe||xe&536870912?t===mn:!1}function i_(){var t=le.H;return le.H=Ll,t===null?Ll:t}function s_(){var t=le.A;return le.A=m2,t}function Bc(){Qe=4,Pi||(xe&4194048)!==xe&&tn.current!==null||(va=!0),!(ls&134217727)&&!(Ps&134217727)||De===null||Ui(De,xe,Wt,!1)}function Hd(t,e,n){var i=Se;Se|=2;var s=i_(),r=s_();(De!==t||xe!==e)&&(zc=null,Wr(t,e)),e=!1;var l=Qe;e:do try{if(Re!==0&&ge!==null){var o=ge,u=Vt;switch(Re){case 8:Dp(),l=6;break e;case 3:case 2:case 9:case 6:tn.current===null&&(e=!0);var f=Re;if(Re=0,Vt=null,Sr(t,o,u,f),n&&va){l=0;break e}break;default:f=Re,Re=0,Vt=null,Sr(t,o,u,f)}}b2(),l=Qe;break}catch(h){t_(t,h)}while(!0);return e&&t.shellSuspendCounter++,ti=tr=null,Se=i,le.H=s,le.A=r,ge===null&&(De=null,xe=0,Du()),l}function b2(){for(;ge!==null;)r_(ge)}function v2(t,e){var n=Se;Se|=2;var i=i_(),s=s_();De!==t||xe!==e?(zc=null,Uc=Zt()+500,Wr(t,e)):va=to(t,e);e:do try{if(Re!==0&&ge!==null){e=ge;var r=Vt;t:switch(Re){case 1:Re=0,Vt=null,Sr(t,e,r,1);break;case 2:case 9:if(k0(r)){Re=0,Vt=null,Q0(e);break}e=function(){Re!==2&&Re!==9||De!==t||(Re=7),Bn(t)},r.then(e,e);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:k0(r)?(Re=0,Vt=null,Q0(e)):(Re=0,Vt=null,Sr(t,e,r,7));break;case 5:var l=null;switch(ge.tag){case 26:l=ge.memoizedState;case 5:case 27:var o=ge;if(l?S_(l):o.stateNode.complete){Re=0,Vt=null;var u=o.sibling;if(u!==null)ge=u;else{var f=o.return;f!==null?(ge=f,Yu(f)):ge=null}break t}}Re=0,Vt=null,Sr(t,e,r,5);break;case 6:Re=0,Vt=null,Sr(t,e,r,6);break;case 8:Dp(),Qe=6;break e;default:throw Error(U(462))}}y2();break}catch(h){t_(t,h)}while(!0);return ti=tr=null,le.H=i,le.A=s,Se=n,ge!==null?0:(De=null,xe=0,Du(),Qe)}function y2(){for(;ge!==null&&!FN();)r_(ge)}function r_(t){var e=Iy(t.alternate,t,hi);t.memoizedProps=t.pendingProps,e===null?Yu(t):ge=e}function Q0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=V0(n,e,e.pendingProps,e.type,void 0,xe);break;case 11:e=V0(n,e,e.pendingProps,e.type.render,e.ref,xe);break;case 5:_p(e);default:Oy(n,e),e=ge=Ov(e,hi),e=Iy(n,e,hi)}t.memoizedProps=t.pendingProps,e===null?Yu(t):ge=e}function Sr(t,e,n,i){ti=tr=null,_p(e),Lr=null,Il=0;var s=e.return;try{if(o2(t,s,e,n,xe)){Qe=1,Mc(t,fn(n,t.current)),ge=null;return}}catch(r){if(s!==null)throw ge=s,r;Qe=1,Mc(t,fn(n,t.current)),ge=null;return}e.flags&32768?(be||i===1?t=!0:va||xe&536870912?t=!1:(Pi=t=!0,(i===2||i===9||i===3||i===6)&&(i=tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),a_(e,t)):Yu(e)}function Yu(t){var e=t;do{if(e.flags&32768){a_(e,Pi);return}t=e.return;var n=d2(e.alternate,e,hi);if(n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);Qe===0&&(Qe=5)}function a_(t,e){do{var n=f2(t.alternate,t);if(n!==null){n.flags&=32767,ge=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ge=t;return}ge=t=n}while(t!==null);Qe=6,ge=null}function X0(t,e,n,i,s,r,l,o,u){t.cancelPendingCommit=null;do Ku();while(lt!==0);if(Se&6)throw Error(U(327));if(e!==null){if(e===t.current)throw Error(U(177));if(r=e.lanes|e.childLanes,r|=lp,JN(t,n,r,l,o,u),t===De&&(ge=De=null,xe=0),qr=e,qi=t,li=n,nh=r,ih=s,Xy=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,E2(Ec,function(){return d_(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=le.T,le.T=null,s=Ae.p,Ae.p=2,l=Se,Se|=4;try{h2(t,e,n)}finally{Se=l,Ae.p=s,le.T=i}}lt=1,l_(),o_(),c_()}}function l_(){if(lt===1){lt=0;var t=qi,e=qr,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=le.T,le.T=null;var i=Ae.p;Ae.p=2;var s=Se;Se|=4;try{Vy(e,t);var r=oh,l=Sv(t.containerInfo),o=r.focusedElem,u=r.selectionRange;if(l!==o&&o&&o.ownerDocument&&Ev(o.ownerDocument.documentElement,o)){if(u!==null&&ap(o)){var f=u.start,h=u.end;if(h===void 0&&(h=f),"selectionStart"in o)o.selectionStart=f,o.selectionEnd=Math.min(h,o.value.length);else{var c=o.ownerDocument||document,d=c&&c.defaultView||window;if(d.getSelection){var p=d.getSelection(),x=o.textContent.length,v=Math.min(u.start,x),b=u.end===void 0?v:Math.min(u.end,x);!p.extend&&v>b&&(l=b,b=v,v=l);var m=y0(o,v),g=y0(o,b);if(m&&g&&(p.rangeCount!==1||p.anchorNode!==m.node||p.anchorOffset!==m.offset||p.focusNode!==g.node||p.focusOffset!==g.offset)){var y=c.createRange();y.setStart(m.node,m.offset),p.removeAllRanges(),v>b?(p.addRange(y),p.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),p.addRange(y))}}}}for(c=[],p=o;p=p.parentNode;)p.nodeType===1&&c.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<c.length;o++){var _=c[o];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}qc=!!lh,oh=lh=null}finally{Se=s,Ae.p=i,le.T=n}}t.current=e,lt=2}}function o_(){if(lt===2){lt=0;var t=qi,e=qr,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=le.T,le.T=null;var i=Ae.p;Ae.p=2;var s=Se;Se|=4;try{zy(t,e.alternate,e)}finally{Se=s,Ae.p=i,le.T=n}}lt=3}}function c_(){if(lt===4||lt===3){lt=0,VN();var t=qi,e=qr,n=li,i=Xy;e.subtreeFlags&10256||e.flags&10256?lt=5:(lt=0,qr=qi=null,u_(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&($i=null),Jh(n),e=e.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(eo,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=le.T,s=Ae.p,Ae.p=2,le.T=null;try{for(var r=t.onRecoverableError,l=0;l<i.length;l++){var o=i[l];r(o.value,{componentStack:o.stack})}}finally{le.T=e,Ae.p=s}}li&3&&Ku(),Bn(t),s=t.pendingLanes,n&261930&&s&42?t===sh?fl++:(fl=0,sh=t):fl=0,oo(0)}}function u_(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ro(e)))}function Ku(){return l_(),o_(),c_(),d_()}function d_(){if(lt!==5)return!1;var t=qi,e=nh;nh=0;var n=Jh(li),i=le.T,s=Ae.p;try{Ae.p=32>n?32:n,le.T=null,n=ih,ih=null;var r=qi,l=li;if(lt=0,qr=qi=null,li=0,Se&6)throw Error(U(331));var o=Se;if(Se|=4,Wy(r.current),Ky(r,r.current,l,n),Se=o,oo(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(eo,r)}catch{}return!0}finally{Ae.p=s,le.T=i,u_(t,e)}}function J0(t,e,n){e=fn(n,e),e=Qf(t.stateNode,e,2),t=Ki(t,e,2),t!==null&&(no(t,2),Bn(t))}function je(t,e,n){if(t.tag===3)J0(t,t,n);else for(;e!==null;){if(e.tag===3){J0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($i===null||!$i.has(i))){t=fn(n,t),n=Ay(2),i=Ki(e,n,2),i!==null&&(ky(n,i,e,t),no(i,2),Bn(i));break}}e=e.return}}function Gd(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new g2;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(Lp=!0,s.add(n),t=_2.bind(null,t,e,n),e.then(t,t))}function _2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,De===t&&(xe&n)===n&&(Qe===4||Qe===3&&(xe&62914560)===xe&&300>Zt()-Fu?!(Se&2)&&Wr(t,0):Mp|=n,$r===xe&&($r=0)),Bn(t)}function f_(t,e){e===0&&(e=iv()),t=er(t,e),t!==null&&(no(t,e),Bn(t))}function w2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f_(t,n)}function N2(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(e),f_(t,n)}function E2(t,e){return Qh(t,e)}var Hc=null,hr=null,rh=!1,Gc=!1,Fd=!1,zi=0;function Bn(t){t!==hr&&t.next===null&&(hr===null?Hc=hr=t:hr=hr.next=t),Gc=!0,rh||(rh=!0,A2())}function oo(t,e){if(!Fd&&Gc){Fd=!0;do for(var n=!1,i=Hc;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var l=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-Xt(42|t)+1)-1,r&=s&~(l&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,eg(i,r))}else r=xe,r=Iu(i,i===De?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||to(i,r)||(n=!0,eg(i,r));i=i.next}while(n);Fd=!1}}function S2(){h_()}function h_(){Gc=rh=!1;var t=0;zi!==0&&D2()&&(t=zi);for(var e=Zt(),n=null,i=Hc;i!==null;){var s=i.next,r=p_(i,e);r===0?(i.next=null,n===null?Hc=s:n.next=s,s===null&&(hr=n)):(n=i,(t!==0||r&3)&&(Gc=!0)),i=s}lt!==0&&lt!==5||oo(t),zi!==0&&(zi=0)}function p_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var l=31-Xt(r),o=1<<l,u=s[l];u===-1?(!(o&n)||o&i)&&(s[l]=XN(o,e)):u<=e&&(t.expiredLanes|=o),r&=~o}if(e=De,n=xe,n=Iu(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&xd(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||to(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&xd(i),Jh(n)){case 2:case 8:n=tv;break;case 32:n=Ec;break;case 268435456:n=nv;break;default:n=Ec}return i=m_.bind(null,t),n=Qh(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&xd(i),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,e){if(lt!==0&&lt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ku()&&t.callbackNode!==n)return null;var i=xe;return i=Iu(t,t===De?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(e_(t,i,e),p_(t,Zt()),t.callbackNode!=null&&t.callbackNode===n?m_.bind(null,t):null)}function eg(t,e){if(Ku())return null;e_(t,e,!0)}function A2(){U2(function(){Se&6?Qh(ev,S2):h_()})}function Pp(){if(zi===0){var t=Vr;t===0&&(t=Ro,Ro<<=1,!(Ro&261888)&&(Ro=256)),zi=t}return zi}function tg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:tc(""+t)}function ng(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function k2(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=tg((s[Gt]||null).action),l=i.submitter;l&&(e=(e=l[Gt]||null)?tg(e.formAction):l.getAttribute("formAction"),e!==null&&(r=e,l=null));var o=new Ou("action","action",null,i,s);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(zi!==0){var u=l?ng(s,l):new FormData(s);Wf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(o.preventDefault(),u=l?ng(s,l):new FormData(s),Wf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Vd=0;Vd<Pf.length;Vd++){var Yd=Pf[Vd],T2=Yd.toLowerCase(),R2=Yd[0].toUpperCase()+Yd.slice(1);Tn(T2,"on"+R2)}Tn(kv,"onAnimationEnd");Tn(Tv,"onAnimationIteration");Tn(Rv,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(YE,"onTransitionRun");Tn(KE,"onTransitionStart");Tn($E,"onTransitionCancel");Tn(jv,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function g_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var l=i.length-1;0<=l;l--){var o=i[l],u=o.instance,f=o.currentTarget;if(o=o.listener,u!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=f;try{r(s)}catch(h){Ac(h)}s.currentTarget=null,r=u}else for(l=0;l<i.length;l++){if(o=i[l],u=o.instance,f=o.currentTarget,o=o.listener,u!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=f;try{r(s)}catch(h){Ac(h)}s.currentTarget=null,r=u}}}}function me(t,e){var n=e[Rf];n===void 0&&(n=e[Rf]=new Set);var i=t+"__bubble";n.has(i)||(x_(e,t,2,!1),n.add(i))}function Kd(t,e,n){var i=0;e&&(i|=4),x_(n,t,i,e)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Up(t){if(!t[zo]){t[zo]=!0,ov.forEach(function(n){n!=="selectionchange"&&(j2.has(n)||Kd(n,!1,t),Kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zo]||(e[zo]=!0,Kd("selectionchange",!1,e))}}function x_(t,e,n,i){switch(j_(e)){case 2:var s=sS;break;case 8:s=rS;break;default:s=Gp}n=s.bind(null,e,n,t),s=void 0,!Lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $d(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var o=i.stateNode.containerInfo;if(o===s)break;if(l===4)for(l=i.return;l!==null;){var u=l.tag;if((u===3||u===4)&&l.stateNode.containerInfo===s)return;l=l.return}for(;o!==null;){if(l=gr(o),l===null)return;if(u=l.tag,u===5||u===6||u===26||u===27){i=r=l;continue e}o=o.parentNode}}i=i.return}gv(function(){var f=r,h=np(n),c=[];e:{var d=Cv.get(t);if(d!==void 0){var p=Ou,x=t;switch(t){case"keypress":if(ic(n)===0)break e;case"keydown":case"keyup":p=NE;break;case"focusin":x="focus",p=wd;break;case"focusout":x="blur",p=wd;break;case"beforeblur":case"afterblur":p=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=u0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=AE;break;case kv:case Tv:case Rv:p=pE;break;case jv:p=TE;break;case"scroll":case"scrollend":p=cE;break;case"wheel":p=jE;break;case"copy":case"cut":case"paste":p=gE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=f0;break;case"toggle":case"beforetoggle":p=IE}var v=(e&4)!==0,b=!v&&(t==="scroll"||t==="scrollend"),m=v?d!==null?d+"Capture":null:d;v=[];for(var g=f,y;g!==null;){var _=g;if(y=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||y===null||m===null||(_=kl(g,m),_!=null&&v.push(Dl(g,_,y))),b)break;g=g.return}0<v.length&&(d=new p(d,x,null,n,h),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==Of&&(x=n.relatedTarget||n.fromElement)&&(gr(x)||x[ma]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=f,x=x?gr(x):null,x!==null&&(b=Jl(x),v=x.tag,x!==b||v!==5&&v!==27&&v!==6)&&(x=null)):(p=null,x=f),p!==x)){if(v=u0,_="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=f0,_="onPointerLeave",m="onPointerEnter",g="pointer"),b=p==null?d:Wa(p),y=x==null?d:Wa(x),d=new v(_,g+"leave",p,n,h),d.target=b,d.relatedTarget=y,_=null,gr(h)===f&&(v=new v(m,g+"enter",x,n,h),v.target=y,v.relatedTarget=b,_=v),b=_,p&&x)t:{for(v=C2,m=p,g=x,y=0,_=m;_;_=v(_))y++;_=0;for(var E=g;E;E=v(E))_++;for(;0<y-_;)m=v(m),y--;for(;0<_-y;)g=v(g),_--;for(;y--;){if(m===g||g!==null&&m===g.alternate){v=m;break t}m=v(m),g=v(g)}v=null}else v=null;p!==null&&ig(c,d,p,v,!1),x!==null&&b!==null&&ig(c,b,x,v,!0)}}e:{if(d=f?Wa(f):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var S=g0;else if(m0(d))if(wv)S=GE;else{S=BE;var N=zE}else p=d.nodeName,!p||p.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?f&&tp(f.elementType)&&(S=g0):S=HE;if(S&&(S=S(t,f))){_v(c,S,n,h);break e}N&&N(t,d,f),t==="focusout"&&f&&d.type==="number"&&f.memoizedProps.value!=null&&If(d,"number",d.value)}switch(N=f?Wa(f):window,t){case"focusin":(m0(N)||N.contentEditable==="true")&&(vr=N,Mf=f,il=null);break;case"focusout":il=Mf=vr=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,_0(c,n,h);break;case"selectionchange":if(VE)break;case"keydown":case"keyup":_0(c,n,h)}var A;if(rp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else br?vv(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(bv&&n.locale!=="ko"&&(br||T!=="onCompositionStart"?T==="onCompositionEnd"&&br&&(A=xv()):(Di=h,ip="value"in Di?Di.value:Di.textContent,br=!0)),N=Fc(f,T),0<N.length&&(T=new d0(T,t,null,n,h),c.push({event:T,listeners:N}),A?T.data=A:(A=yv(n),A!==null&&(T.data=A)))),(A=LE?ME(t,n):DE(t,n))&&(T=Fc(f,"onBeforeInput"),0<T.length&&(N=new d0("onBeforeInput","beforeinput",null,n,h),c.push({event:N,listeners:T}),N.data=A)),k2(c,t,f,n,h)}g_(c,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=kl(t,n),s!=null&&i.unshift(Dl(t,s,r)),s=kl(t,e),s!=null&&i.push(Dl(t,s,r))),t.tag===3)return i;t=t.return}return[]}function C2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ig(t,e,n,i,s){for(var r=e._reactName,l=[];n!==null&&n!==i;){var o=n,u=o.alternate,f=o.stateNode;if(o=o.tag,u!==null&&u===i)break;o!==5&&o!==26&&o!==27||f===null||(u=f,s?(f=kl(n,r),f!=null&&l.unshift(Dl(n,f,u))):s||(f=kl(n,r),f!=null&&l.push(Dl(n,f,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var I2=/\r\n?/g,O2=/\u0000|\uFFFD/g;function sg(t){return(typeof t=="string"?t:""+t).replace(I2,`
`).replace(O2,"")}function b_(t,e){return e=sg(e),sg(t)===e}function Ie(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Fr(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Fr(t,""+i);break;case"className":Io(t,"class",i);break;case"tabIndex":Io(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Io(t,n,i);break;case"style":mv(t,i,r);break;case"data":if(e!=="object"){Io(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=tc(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ie(t,e,"name",s.name,s,null),Ie(t,e,"formEncType",s.formEncType,s,null),Ie(t,e,"formMethod",s.formMethod,s,null),Ie(t,e,"formTarget",s.formTarget,s,null)):(Ie(t,e,"encType",s.encType,s,null),Ie(t,e,"method",s.method,s,null),Ie(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=tc(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=ei);break;case"onScroll":i!=null&&me("scroll",t);break;case"onScrollEnd":i!=null&&me("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=tc(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":me("beforetoggle",t),me("toggle",t),ec(t,"popover",i);break;case"xlinkActuate":Yn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Yn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Yn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Yn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Yn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Yn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Yn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Yn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Yn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ec(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=lE.get(n)||n,ec(t,n,i))}}function ah(t,e,n,i,s,r){switch(n){case"style":mv(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Fr(t,i):(typeof i=="number"||typeof i=="bigint")&&Fr(t,""+i);break;case"onScroll":i!=null&&me("scroll",t);break;case"onScrollEnd":i!=null&&me("scrollend",t);break;case"onClick":i!=null&&(t.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Gt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ec(t,n,i)}}}function St(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",t),me("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(l!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,e));default:Ie(t,e,r,l,n,null)}}s&&Ie(t,e,"srcSet",n.srcSet,n,null),i&&Ie(t,e,"src",n.src,n,null);return;case"input":me("invalid",t);var o=r=l=s=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":s=h;break;case"type":l=h;break;case"checked":u=h;break;case"defaultChecked":f=h;break;case"value":r=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(U(137,e));break;default:Ie(t,e,i,h,n,null)}}fv(t,r,o,u,f,l,s,!1);return;case"select":me("invalid",t),i=l=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:Ie(t,e,s,o,n,null)}e=r,n=l,t.multiple=!!i,e!=null?Cr(t,!!i,e,!1):n!=null&&Cr(t,!!i,n,!0);return;case"textarea":me("invalid",t),r=s=i=null;for(l in n)if(n.hasOwnProperty(l)&&(o=n[l],o!=null))switch(l){case"value":i=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(U(91));break;default:Ie(t,e,l,o,n,null)}pv(t,i,s,r);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ie(t,e,u,i,n,null)}return;case"dialog":me("beforetoggle",t),me("toggle",t),me("cancel",t),me("close",t);break;case"iframe":case"object":me("load",t);break;case"video":case"audio":for(i=0;i<Ml.length;i++)me(Ml[i],t);break;case"image":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"embed":case"source":case"link":me("error",t),me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,e));default:Ie(t,e,f,i,n,null)}return;default:if(tp(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&ah(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ie(t,e,o,i,n,null))}function L2(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,l=null,o=null,u=null,f=null,h=null;for(p in n){var c=n[p];if(n.hasOwnProperty(p)&&c!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":u=c;default:i.hasOwnProperty(p)||Ie(t,e,p,null,i,c)}}for(var d in i){var p=i[d];if(c=n[d],i.hasOwnProperty(d)&&(p!=null||c!=null))switch(d){case"type":r=p;break;case"name":s=p;break;case"checked":f=p;break;case"defaultChecked":h=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(U(137,e));break;default:p!==c&&Ie(t,e,d,p,i,c)}}Cf(t,l,o,u,f,h,r,s);return;case"select":p=l=o=d=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":p=u;default:i.hasOwnProperty(r)||Ie(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":d=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==u&&Ie(t,e,s,r,i,u)}e=o,n=l,i=p,d!=null?Cr(t,!!n,d,!1):!!i!=!!n&&(e!=null?Cr(t,!!n,e,!0):Cr(t,!!n,n?[]:"",!1));return;case"textarea":p=d=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ie(t,e,o,null,i,s)}for(l in i)if(s=i[l],r=n[l],i.hasOwnProperty(l)&&(s!=null||r!=null))switch(l){case"value":d=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&Ie(t,e,l,s,i,r)}hv(t,d,p);return;case"option":for(var x in n)if(d=n[x],n.hasOwnProperty(x)&&d!=null&&!i.hasOwnProperty(x))switch(x){case"selected":t.selected=!1;break;default:Ie(t,e,x,null,i,d)}for(u in i)if(d=i[u],p=n[u],i.hasOwnProperty(u)&&d!==p&&(d!=null||p!=null))switch(u){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ie(t,e,u,d,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)d=n[v],n.hasOwnProperty(v)&&d!=null&&!i.hasOwnProperty(v)&&Ie(t,e,v,null,i,d);for(f in i)if(d=i[f],p=n[f],i.hasOwnProperty(f)&&d!==p&&(d!=null||p!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,e));break;default:Ie(t,e,f,d,i,p)}return;default:if(tp(e)){for(var b in n)d=n[b],n.hasOwnProperty(b)&&d!==void 0&&!i.hasOwnProperty(b)&&ah(t,e,b,void 0,i,d);for(h in i)d=i[h],p=n[h],!i.hasOwnProperty(h)||d===p||d===void 0&&p===void 0||ah(t,e,h,d,i,p);return}}for(var m in n)d=n[m],n.hasOwnProperty(m)&&d!=null&&!i.hasOwnProperty(m)&&Ie(t,e,m,null,i,d);for(c in i)d=i[c],p=n[c],!i.hasOwnProperty(c)||d===p||d==null&&p==null||Ie(t,e,c,d,i,p)}function rg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var s=n[i],r=s.transferSize,l=s.initiatorType,o=s.duration;if(r&&o&&rg(l)){for(l=0,o=s.responseEnd,i+=1;i<n.length;i++){var u=n[i],f=u.startTime;if(f>o)break;var h=u.transferSize,c=u.initiatorType;h&&rg(c)&&(u=u.responseEnd,l+=h*(u<o?1:(o-f)/(u-f)))}if(--i,e+=8*(r+l)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lh=null,oh=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function ag(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qd=null;function D2(){var t=window.event;return t&&t.type==="popstate"?t===qd?!1:(qd=t,!0):(qd=null,!1)}var y_=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,U2=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(t){return lg.resolve(null).then(t).catch(z2)}:y_;function z2(t){setTimeout(function(){throw t})}function ms(t){return t==="head"}function og(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(s),Qr(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")hl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,hl(n);for(var r=n.firstChild;r;){var l=r.nextSibling,o=r.nodeName;r[io]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=l}}else n==="body"&&hl(t.ownerDocument.body);n=s}while(n);Qr(e)}function cg(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function uh(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":uh(n),ep(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function B2(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[io])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=gn(t.nextSibling),t===null)break}return null}function H2(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=gn(t.nextSibling),t===null))return null;return t}function __(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=gn(t.nextSibling),t===null))return null;return t}function dh(t){return t.data==="$?"||t.data==="$~"}function fh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function G2(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var hh=null;function ug(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return gn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function w_(t,e,n){switch(e=Vc(n),t){case"html":if(t=e.documentElement,!t)throw Error(U(452));return t;case"head":if(t=e.head,!t)throw Error(U(453));return t;case"body":if(t=e.body,!t)throw Error(U(454));return t;default:throw Error(U(451))}}function hl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ep(t)}var xn=new Map,fg=new Set;function Yc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yi=Ae.d;Ae.d={f:F2,r:V2,D:Y2,C:K2,L:$2,m:q2,X:Z2,S:W2,M:Q2};function F2(){var t=yi.f(),e=Vu();return t||e}function V2(t){var e=ga(t);e!==null&&e.tag===5&&e.type==="form"?my(e):yi.r(t)}var ya=typeof document>"u"?null:document;function N_(t,e,n){var i=ya;if(i&&typeof e=="string"&&e){var s=dn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),fg.has(s)||(fg.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),St(e,"link",t),mt(e),i.head.appendChild(e)))}}function Y2(t){yi.D(t),N_("dns-prefetch",t,null)}function K2(t,e){yi.C(t,e),N_("preconnect",t,e)}function $2(t,e,n){yi.L(t,e,n);var i=ya;if(i&&t&&e){var s='link[rel="preload"][as="'+dn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+dn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+dn(n.imageSizes)+'"]')):s+='[href="'+dn(t)+'"]';var r=s;switch(e){case"style":r=Zr(t);break;case"script":r=_a(t)}xn.has(r)||(t=Ye({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),xn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(co(r))||e==="script"&&i.querySelector(uo(r))||(e=i.createElement("link"),St(e,"link",t),mt(e),i.head.appendChild(e)))}}function q2(t,e){yi.m(t,e);var n=ya;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+dn(i)+'"][href="'+dn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=_a(t)}if(!xn.has(r)&&(t=Ye({rel:"modulepreload",href:t},e),xn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(uo(r)))return}i=n.createElement("link"),St(i,"link",t),mt(i),n.head.appendChild(i)}}}function W2(t,e,n){yi.S(t,e,n);var i=ya;if(i&&t){var s=jr(i).hoistableStyles,r=Zr(t);e=e||"default";var l=s.get(r);if(!l){var o={loading:0,preload:null};if(l=i.querySelector(co(r)))o.loading=5;else{t=Ye({rel:"stylesheet",href:t,"data-precedence":e},n),(n=xn.get(r))&&zp(t,n);var u=l=i.createElement("link");mt(u),St(u,"link",t),u._p=new Promise(function(f,h){u.onload=f,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,dc(l,e,i)}l={type:"stylesheet",instance:l,count:1,state:o},s.set(r,l)}}}function Z2(t,e){yi.X(t,e);var n=ya;if(n&&t){var i=jr(n).hoistableScripts,s=_a(t),r=i.get(s);r||(r=n.querySelector(uo(s)),r||(t=Ye({src:t,async:!0},e),(e=xn.get(s))&&Bp(t,e),r=n.createElement("script"),mt(r),St(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Q2(t,e){yi.M(t,e);var n=ya;if(n&&t){var i=jr(n).hoistableScripts,s=_a(t),r=i.get(s);r||(r=n.querySelector(uo(s)),r||(t=Ye({src:t,async:!0,type:"module"},e),(e=xn.get(s))&&Bp(t,e),r=n.createElement("script"),mt(r),St(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function hg(t,e,n,i){var s=(s=Fi.current)?Yc(s):null;if(!s)throw Error(U(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Zr(n.href),n=jr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Zr(n.href);var r=jr(s).hoistableStyles,l=r.get(t);if(l||(s=s.ownerDocument||s,l={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,l),(r=s.querySelector(co(t)))&&!r._p&&(l.instance=r,l.state.loading=5),xn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xn.set(t,n),r||X2(s,t,n,l.state))),e&&i===null)throw Error(U(528,""));return l}if(e&&i!==null)throw Error(U(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=_a(n),n=jr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,t))}}function Zr(t){return'href="'+dn(t)+'"'}function co(t){return'link[rel="stylesheet"]['+t+"]"}function E_(t){return Ye({},t,{"data-precedence":t.precedence,precedence:null})}function X2(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),St(e,"link",n),mt(e),t.head.appendChild(e))}function _a(t){return'[src="'+dn(t)+'"]'}function uo(t){return"script[async]"+t}function pg(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+dn(n.href)+'"]');if(i)return e.instance=i,mt(i),i;var s=Ye({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),mt(i),St(i,"style",s),dc(i,n.precedence,t),e.instance=i;case"stylesheet":s=Zr(n.href);var r=t.querySelector(co(s));if(r)return e.state.loading|=4,e.instance=r,mt(r),r;i=E_(n),(s=xn.get(s))&&zp(i,s),r=(t.ownerDocument||t).createElement("link"),mt(r);var l=r;return l._p=new Promise(function(o,u){l.onload=o,l.onerror=u}),St(r,"link",i),e.state.loading|=4,dc(r,n.precedence,t),e.instance=r;case"script":return r=_a(n.src),(s=t.querySelector(uo(r)))?(e.instance=s,mt(s),s):(i=n,(s=xn.get(r))&&(i=Ye({},n),Bp(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),mt(s),St(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(U(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,dc(i,n.precedence,t));return e.instance}function dc(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,l=0;l<i.length;l++){var o=i[l];if(o.dataset.precedence===e)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function zp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Bp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var fc=null;function mg(t,e,n){if(fc===null){var i=new Map,s=fc=new Map;s.set(n,i)}else s=fc,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[io]||r[_t]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var l=r.getAttribute(e)||"";l=t+l;var o=i.get(l);o?o.push(r):i.set(l,[r])}}return i}function gg(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function J2(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function S_(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function eS(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=Zr(i.href),r=e.querySelector(co(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Kc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,mt(r);return}r=e.ownerDocument||e,i=E_(i),(s=xn.get(s))&&zp(i,s),r=r.createElement("link"),mt(r);var l=r;l._p=new Promise(function(o,u){l.onload=o,l.onerror=u}),St(r,"link",i),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Kc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Wd=0;function tS(t,e){return t.stylesheets&&t.count===0&&hc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&hc(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Wd===0&&(Wd=62500*M2());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&hc(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Wd?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(s)}}:null}function Kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $c=null;function hc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$c=new Map,e.forEach(nS,t),$c=null,Kc.call(t))}function nS(t,e){if(!(e.state.loading&4)){var n=$c.get(t);if(n)var i=n.get(null);else{n=new Map,$c.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var l=s[r];(l.nodeName==="LINK"||l.getAttribute("media")!=="not all")&&(n.set(l.dataset.precedence,l),i=l)}i&&n.set(null,i)}s=e.instance,l=s.getAttribute("data-precedence"),r=n.get(l)||i,r===i&&n.set(null,s),n.set(l,s),this.count++,i=Kc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Pl={$$typeof:Jn,Provider:null,Consumer:null,_currentValue:Os,_currentValue2:Os,_threadCount:0};function iS(t,e,n,i,s,r,l,o,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.hiddenUpdates=bd(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function A_(t,e,n,i,s,r,l,o,u,f,h,c){return t=new iS(t,e,n,l,u,f,h,c,o),e=1,r===!0&&(e|=24),r=Kt(3,null,null,e),t.current=r,r.stateNode=t,e=fp(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},mp(r),t}function k_(t){return t?(t=wr,t):wr}function T_(t,e,n,i,s,r){s=k_(s),i.context===null?i.context=s:i.pendingContext=s,i=Yi(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Ki(t,i,e),n!==null&&(Ht(n,t,e),rl(n,t,e))}function xg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){xg(t,e),(t=t.alternate)&&xg(t,e)}function R_(t){if(t.tag===13||t.tag===31){var e=er(t,67108864);e!==null&&Ht(e,t,67108864),Hp(t,67108864)}}function bg(t){if(t.tag===13||t.tag===31){var e=Jt();e=Xh(e);var n=er(t,e);n!==null&&Ht(n,t,e),Hp(t,e)}}var qc=!0;function sS(t,e,n,i){var s=le.T;le.T=null;var r=Ae.p;try{Ae.p=2,Gp(t,e,n,i)}finally{Ae.p=r,le.T=s}}function rS(t,e,n,i){var s=le.T;le.T=null;var r=Ae.p;try{Ae.p=8,Gp(t,e,n,i)}finally{Ae.p=r,le.T=s}}function Gp(t,e,n,i){if(qc){var s=ph(i);if(s===null)$d(t,e,i,Wc,n),vg(t,i);else if(lS(s,t,e,n,i))i.stopPropagation();else if(vg(t,i),e&4&&-1<aS.indexOf(t)){for(;s!==null;){var r=ga(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var l=Ss(r.pendingLanes);if(l!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var u=1<<31-Xt(l);o.entanglements[1]|=u,l&=~u}Bn(r),!(Se&6)&&(Uc=Zt()+500,oo(0))}}break;case 31:case 13:o=er(r,2),o!==null&&Ht(o,r,2),Vu(),Hp(r,2)}if(r=ph(i),r===null&&$d(t,e,i,Wc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else $d(t,e,i,null,n)}}function ph(t){return t=np(t),Fp(t)}var Wc=null;function Fp(t){if(Wc=null,t=gr(t),t!==null){var e=Jl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Wb(e),t!==null)return t;t=null}else if(n===31){if(t=Zb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Wc=t,null}function j_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(YN()){case ev:return 2;case tv:return 8;case Ec:case KN:return 32;case nv:return 268435456;default:return 32}default:return 32}}var mh=!1,Wi=null,Zi=null,Qi=null,Ul=new Map,zl=new Map,ji=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vg(t,e){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(e.pointerId)}}function Ha(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ga(e),e!==null&&R_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lS(t,e,n,i,s){switch(e){case"focusin":return Wi=Ha(Wi,t,e,n,i,s),!0;case"dragenter":return Zi=Ha(Zi,t,e,n,i,s),!0;case"mouseover":return Qi=Ha(Qi,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ul.set(r,Ha(Ul.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,zl.set(r,Ha(zl.get(r)||null,t,e,n,i,s)),!0}return!1}function C_(t){var e=gr(t.target);if(e!==null){var n=Jl(e);if(n!==null){if(e=n.tag,e===13){if(e=Wb(n),e!==null){t.blockedOn=e,i0(t.priority,function(){bg(n)});return}}else if(e===31){if(e=Zb(n),e!==null){t.blockedOn=e,i0(t.priority,function(){bg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ph(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Of=i,n.target.dispatchEvent(i),Of=null}else return e=ga(n),e!==null&&R_(e),t.blockedOn=n,!1;e.shift()}return!0}function yg(t,e,n){pc(t)&&n.delete(e)}function oS(){mh=!1,Wi!==null&&pc(Wi)&&(Wi=null),Zi!==null&&pc(Zi)&&(Zi=null),Qi!==null&&pc(Qi)&&(Qi=null),Ul.forEach(yg),zl.forEach(yg)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,mh||(mh=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,oS)))}var Ho=null;function _g(t){Ho!==t&&(Ho=t,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,function(){Ho===t&&(Ho=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(Fp(i||n)===null)continue;break}var r=ga(n);r!==null&&(t.splice(e,3),e-=3,Wf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Qr(t){function e(u){return Bo(u,t)}Wi!==null&&Bo(Wi,t),Zi!==null&&Bo(Zi,t),Qi!==null&&Bo(Qi,t),Ul.forEach(e),zl.forEach(e);for(var n=0;n<ji.length;n++){var i=ji[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ji.length&&(n=ji[0],n.blockedOn===null);)C_(n),n.blockedOn===null&&ji.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],l=s[Gt]||null;if(typeof r=="function")l||_g(n);else if(l){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,l=r[Gt]||null)o=l.formAction;else if(Fp(s)!==null)continue}else o=l.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),_g(n)}}}function I_(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(l){return s=l})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Vp(t){this._internalRoot=t}$u.prototype.render=Vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));var n=e.current,i=Jt();T_(n,i,t,e,null,null)};$u.prototype.unmount=Vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;T_(t.current,2,null,t,null,null),Vu(),e[ma]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=lv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ji.length&&e!==0&&e<ji[n].priority;n++);ji.splice(n,0,t),n===0&&C_(t)}};var wg=$b.version;if(wg!=="19.2.3")throw Error(U(527,wg,"19.2.3"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=UN(e),t=t!==null?Qb(t):null,t=t===null?null:t.stateNode,t};var cS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{eo=Go.inject(cS),Qt=Go}catch{}}ju.createRoot=function(t,e){if(!qb(t))throw Error(U(299));var n=!1,i="",s=Ny,r=Ey,l=Sy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=A_(t,1,!1,null,null,n,i,null,s,r,l,I_),t[ma]=e.current,Up(t),new Vp(e)};ju.hydrateRoot=function(t,e,n){if(!qb(t))throw Error(U(299));var i=!1,s="",r=Ny,l=Ey,o=Sy,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(l=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=A_(t,1,!0,e,n??null,i,s,u,r,l,o,I_),e.context=k_(null),n=e.current,i=Jt(),i=Xh(i),s=Yi(i),s.callback=null,Ki(n,s,i),n=i,e.current.lanes=n,no(e,n),Bn(e),t[ma]=e.current,Up(t),new $u(e)};ju.version="19.2.3";function O_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O_)}catch(t){console.error(t)}}O_(),Hb.exports=ju;var uS=Hb.exports;const dS=Cb(uS),Ne={REGEN_TIME_MS:18e4,AD_REWARD_ENERGY:20,COST:{CONCERT:25,ONLINE_MATCH:10,OFFLINE_GAME:8,TRAINING:20,RELATIONSHIP:20,STUDIO:30},TRAINING_PRICE:2500,STUDIO_RENT:5e3,MANAGER_TIER_1:2e4,MANAGER_TIER_2:5e5},Vs={eskisehir:{id:"eskisehir",name:"Eskiehir",tier:1,basePay:1500,multiplier:1,weeklyCost:0,unlockRequirements:{description:"Balang ehri",check:()=>!0}},bursa:{id:"bursa",name:"Bursa",tier:2,basePay:8e3,multiplier:5,weeklyCost:2500,unlockRequirements:{description:"Bir araba sahibi ol",check:t=>t.inventory.vehicles.length>0}},ankara:{id:"ankara",name:"Ankara",tier:3,basePay:25e3,multiplier:15,weeklyCost:1e4,unlockRequirements:{description:"50K+ Fan ve 60+ Lirik",check:t=>t.monthly_listeners>5e4&&t.lyrics>60}},izmir:{id:"izmir",name:"zmir",tier:4,basePay:75e3,multiplier:50,weeklyCost:3e4,unlockRequirements:{description:"Bir Hit ark Sahibi Ol",check:t=>t.career.hasHitSong===!0}},istanbul:{id:"istanbul",name:"stanbul",tier:5,basePay:3e5,multiplier:200,weeklyCost:15e4,unlockRequirements:{description:"Menajer Seviyesi 2+ (liki > 80)",check:t=>t.career.managerTier>=2||t.rel_manager>=80}}},Ng={name:"",energy:100,maxEnergy:100,cash:200,careerCash:200,monthly_listeners:0,respect:0,rel_manager:1,rel_team:1,rel_fans:1,rel_partner:1,lastEnergyUpdate:Date.now(),week:1,careerLevel:1,pendingCash:0,flow:3,lyrics:3,rhythm:3,charisma:3,songsReleased:0,battlesWon:0,ownedUpgrades:{},currentCity:"eskisehir",unlockedCities:["eskisehir"],inventory:{vehicles:[]},career:{hasHitSong:!1,managerTier:0},appearance:{headIndex:0,skinColor:"#f1c27d",shirtColor:"#333333",pantsColor:"#1a1a1a",shoesColor:"#ffffff",clothingStyle:0,pantsStyle:0,hatIndex:0,chainIndex:0,shoeStyle:0},gender:"male",activeProduction:null,discography:[]},Bl=[{id:"general",label:"GENEL TRKE RAP",query:"turkce rap"},{id:"sagopa",label:"SAGOPA KAJMER",query:"sagopa kajmer"},{id:"ceza",label:"CEZA",query:"ceza"},{id:"motive",label:"MOTIVE",query:"motive"},{id:"allame",label:"ALLAME",query:"allame"},{id:"killa",label:"KILLA HAKAN",query:"killa hakan"},{id:"hidra",label:"HDRA",query:"hidra"},{id:"uzi",label:"UZI",query:"uzi"},{id:"sefo",label:"SEFO",query:"sefo"},{id:"lvbel",label:"LVBEL C5",query:"lvbel c5"},{id:"cakal",label:"CAKAL",query:"cakal"},{id:"khontkar",label:"KHONTKAR",query:"khontkar"},{id:"gazapizm",label:"GAZAPZM",query:"gazapizm"},{id:"ati242",label:"ATI242",query:"ati242"}],fS=[{author:"RapMagazineTR",content:"Yeraltndan yeni sesler ykseliyor. Dikkat edin! "},{author:"HypeBeast",content:"Bu yeni tarz hi fena deil."},{author:"OldSchool_King",content:"Autotune kullanan rapi deildir. Nokta."},{author:"MelankoliaFan",content:"Duygusal paralar bekliyoruz..."},{author:"KadkyAcil",content:"Sokaklar bizimdir."}],kt=["https://i.ibb.co/Z6skzDqn/kafamete.png","https://i.ibb.co/vC3JCvXD/kafairem.png","https://i.ibb.co/bjkKyvKn/head3.png","https://i.ibb.co/21sw0c1j/head4.png","https://i.ibb.co/Pzmm5zzk/head5.png","https://i.ibb.co/W1GN3Rn/head6.png","https://i.ibb.co/NdNP9BCy/head2.png","https://i.ibb.co/dYM2p7q/head1.png"],pl=["Yok","Krmz Bere","Bucket","Pembe Toka"],ml=["Yok","nce","Kaln","Buzlu","nci","Halat"],Eg=["Sneaker","Bot","Klasik"],gl=["T-Shirt","Hoodie","Mont","Gmlek","Forma","Deri Ceket"],Sg=["Kot","Eofman","Kargo"],hS=["#f1c27d","#e0ac69","#8d5524","#c68642","#3e2723","#f5f5f5"],pS=["#18181b","#f4f4f5","#dc2626","#2563eb","#16a34a","#ca8a04","#ea580c","#7e22ce","#db2777","#52525b"],mS=["#09090b","#e4e4e7","#b91c1c","#1e3a8a","#14532d","#854d0e","#c2410c","#4c1d95","#78350f","#3f3f46"],gS=["#ffffff","#18181b","#ef4444","#3b82f6","#fbbf24","#22c55e","#71717a"],Bi=t=>t<1e4?1:Math.floor(Math.sqrt(t)/100)+1,xS=t=>{if(t<1e4)return Math.min(100,t/1e4*100);const e=Math.floor(Math.sqrt(t)/100)+1,n=Math.pow((e-1)*100,2),s=Math.pow(e*100,2)-n,r=t-n;return Math.min(100,Math.max(0,r/s*100))},bS=t=>{const e=Bi(t);return Math.pow(e*100,2)},Ag=t=>t==null?"0":t<1e5?t.toLocaleString("tr-TR"):t<1e6?(t/1e3).toFixed(1)+"K":(t/1e6).toFixed(2)+"M",vS=(t,e,n)=>{const i=Math.max(1,Math.sqrt(n));let s=0,r=0;switch(t){case"rhythm":case"flappydisk":case"hexagon":s=Math.floor(e*3),r=Math.floor(e*.1);break;case"higherlower-solo":case"rapquiz":s=Math.floor(e*20),r=Math.floor(e*1.5);break;case"flowbattle-solo":case"covermatch-solo":s=Math.floor(e*3),r=Math.floor(e*.3);break;case"rhythmtwister":s=e*50,r=e*5;break;default:s=10,r=1}const l=2e3*i,o=150*i;return{fans:Math.min(Math.floor(s),Math.floor(l)),cash:Math.min(Math.floor(r),Math.floor(o))}},kg=(t,e,n)=>{const i=Vs[e]||Vs.eskisehir,s=i.basePay,r=.5+t/100,o=1+Math.log10(Math.max(10,n.monthly_listeners))*.1*i.tier,u=n.charisma*10*i.tier;let f=s*r*o+u;const h=s*5;f>h&&(f=h);const c=.9+Math.random()*.2;return f*=c,Math.floor(f)},Zd=(t,e)=>{const n=Vs[t];return n?n.unlockRequirements.check(e):!1},yS=t=>{const e=t.currentCity||"eskisehir",n=Vs[e],i=n.weeklyCost;let s={};const l=t.careerCash-i;if(l<0){s.careerCash=l;const o=Math.floor(t.monthly_listeners*.05);s.monthly_listeners=Math.max(0,t.monthly_listeners-o),s.energy=Math.max(0,t.energy-20),s.charisma=Math.max(0,t.charisma-2),s.rel_manager=Math.max(0,t.rel_manager-5),console.log(`[ECONOMY] Bankruptcy in ${n.name}. Rent: ${i}. Punishment applied.`)}else s.careerCash=l;return s},_S=72e5,wS=.015,NS={startProduction:(t,e)=>({id:Date.now().toString(),name:t,quality:0,startTime:0,finishTime:0,potentialListeners:e.monthly_listeners*.1}),calculateQuality:(t,e)=>{const n=(e.rhythm+e.flow+e.lyrics)/30;let i=t+n*5;return Math.min(100,Math.floor(i))},startMixing:t=>{const e=Date.now();return{...t,startTime:e,finishTime:e+_S}},checkMixingStatus:t=>Date.now()>=t.finishTime?"ready":"mixing",boostMixing:t=>({...t,finishTime:Date.now()}),releaseSong:(t,e)=>{const n=t.quality*50,i=e.charisma*20,s=Math.sqrt(e.monthly_listeners)*2,r=Math.random()*800,l=n+i+s+r,o=Math.floor(l/10),u=Math.max(500,Math.floor(o*5)),f=Math.floor(o*25);return{song:{id:t.id,name:t.name,quality:t.quality,releasedAt:Date.now(),popularityScore:o,totalEarnings:f},listenersGained:u,initialCash:f}},calculatePassiveIncome:t=>{if(t.length===0)return 0;let e=0;const n=Date.now();return t.forEach(i=>{const s=(n-i.releasedAt)/36e5,r=Math.max(.05,1-s/48),l=i.popularityScore*wS*r;e+=l}),Math.floor(e)}},ES=()=>{};var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=function(t,e){if(!t)throw wa(e)},wa=function(t){return new Error("Firebase Database ("+L_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SS=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],l=t[n++],o=t[n++],u=((s&7)<<18|(r&63)<<12|(l&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|l&63)}}return e.join("")},Yp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],l=s+1<t.length,o=l?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,h=r>>2,c=(r&3)<<4|o>>4;let d=(o&15)<<2|f>>6,p=f&63;u||(p=64,l||(d=64)),i.push(n[h],n[c],n[d],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const c=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||o==null||f==null||c==null)throw new AS;const d=r<<2|o>>4;if(i.push(d),f!==64){const p=o<<4&240|f>>2;if(i.push(p),c!==64){const x=f<<6&192|c;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D_=function(t){const e=M_(t);return Yp.encodeByteArray(e,!0)},Zc=function(t){return D_(t).replace(/\./g,"")},Qc=function(t){try{return Yp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){return P_(void 0,t)}function P_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!TS(n)||(t[n]=P_(t[n],e[n]));return t}function TS(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=()=>RS().__FIREBASE_DEFAULTS__,CS=()=>{if(typeof process>"u"||typeof Tg>"u")return;const t=Tg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qc(t[1]);return e&&JSON.parse(e)},Kp=()=>{try{return ES()||jS()||CS()||IS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U_=t=>{var e,n;return(n=(e=Kp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OS=t=>{const e=U_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},z_=()=>{var t;return(t=Kp())==null?void 0:t.config},B_=t=>{var e;return(e=Kp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(l)),""].join(".")}const xl={};function MS(){const t={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?t.emulator.push(e):t.prod.push(e);return t}function DS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rg=!1;function G_(t,e){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||xl[t]===e||xl[t]||Rg)return;xl[t]=e;function n(d){return`__firebase__banner__${d}`}const i="__firebase__banner",r=MS().prod.length>0;function l(){const d=document.getElementById(i);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function f(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Rg=!0,l()},d}function h(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function c(){const d=DS(i),p=n("text"),x=document.getElementById(p)||document.createElement("span"),v=n("learnmore"),b=document.getElementById(v)||document.createElement("a"),m=n("preprendIcon"),g=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const y=d.element;o(y),h(b,v);const _=f();u(g,m),y.append(g,x,b,_),document.body.appendChild(y)}r?(x.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",c):c()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $p(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function PS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zS(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BS(){return L_.NODE_ADMIN===!0}function HS(){try{return typeof indexedDB=="object"}catch{return!1}}function GS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="FirebaseError";class gs extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=FS,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],l=r?VS(r,i):"Error",o=`${this.serviceName}: ${l} (${s}).`;return new gs(s,o,i)}}function VS(t,e){return t.replace(YS,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const YS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){return JSON.parse(t)}function ot(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Hl(Qc(r[0])||""),n=Hl(Qc(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},KS=function(t){const e=V_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$S=function(t){const e=V_(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Xc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jc(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],l=e[s];if(jg(r)&&jg(l)){if(!Ys(r,l))return!1}else if(r!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function jg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)i[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)i[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],l=this.chain_[2],o=this.chain_[3],u=this.chain_[4],f,h;for(let c=0;c<80;c++){c<40?c<20?(f=o^r&(l^o),h=1518500249):(f=r^l^o,h=1859775393):c<60?(f=r&l|o&(r|l),h=2400959708):(f=r^l^o,h=3395469782);const d=(s<<5|s>>>27)+f+u+h+i[c]&4294967295;u=o,o=l,l=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let l=this.inbuf_;for(;s<n;){if(l===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(r),l=0;break}}else for(;s<n;)if(r[l]=e[s],++l,++s,l===this.blockSize){this.compress_(r),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function WS(t,e){const n=new ZS(t,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");QS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Qd),s.error===void 0&&(s.error=Qd),s.complete===void 0&&(s.complete=Qd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qd(){}function Jr(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,F(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;s=65536+(r<<10)+l}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qu=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class Ks{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jn;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tA(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);i===o&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eA(t){return t===Ts?void 0:t}function tA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const iA={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},sA=Oe.INFO,rA={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},aA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=rA[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=sA,this._logHandler=aA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const lA=(t,e)=>e.some(n=>t instanceof n);let Cg,Ig;function oA(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cA(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y_=new WeakMap,gh=new WeakMap,K_=new WeakMap,Xd=new WeakMap,Wp=new WeakMap;function uA(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",l)},r=()=>{n(Xi(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Y_.set(n,t)}).catch(()=>{}),Wp.set(e,t),e}function dA(t){if(gh.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",l),t.removeEventListener("abort",l)},r=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",l),t.addEventListener("abort",l)});gh.set(t,e)}let xh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||K_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fA(t){xh=t(xh)}function hA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Jd(this),e,...n);return K_.set(i,e.sort?e.sort():[e]),Xi(i)}:cA().includes(t)?function(...e){return t.apply(Jd(this),e),Xi(Y_.get(this))}:function(...e){return Xi(t.apply(Jd(this),e))}}function pA(t){return typeof t=="function"?hA(t):(t instanceof IDBTransaction&&dA(t),lA(t,oA())?new Proxy(t,xh):t)}function Xi(t){if(t instanceof IDBRequest)return uA(t);if(Xd.has(t))return Xd.get(t);const e=pA(t);return e!==t&&(Xd.set(t,e),Wp.set(e,t)),e}const Jd=t=>Wp.get(t);function mA(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const l=indexedDB.open(t,e),o=Xi(l);return i&&l.addEventListener("upgradeneeded",u=>{i(Xi(l.result),u.oldVersion,u.newVersion,Xi(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),o}const gA=["get","getKey","getAll","getAllKeys","count"],xA=["put","add","delete","clear"],ef=new Map;function Og(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ef.get(e))return ef.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=xA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||gA.includes(n)))return;const r=async function(l,...o){const u=this.transaction(l,s?"readwrite":"readonly");let f=u.store;return i&&(f=f.index(o.shift())),(await Promise.all([f[n](...o),s&&u.done]))[0]};return ef.set(e,r),r}fA(t=>({...t,get:(e,n,i)=>Og(e,n)||t.get(e,n,i),has:(e,n)=>!!Og(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function vA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bh="@firebase/app",Lg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new qp("@firebase/app"),yA="@firebase/app-compat",_A="@firebase/analytics-compat",wA="@firebase/analytics",NA="@firebase/app-check-compat",EA="@firebase/app-check",SA="@firebase/auth",AA="@firebase/auth-compat",kA="@firebase/database",TA="@firebase/data-connect",RA="@firebase/database-compat",jA="@firebase/functions",CA="@firebase/functions-compat",IA="@firebase/installations",OA="@firebase/installations-compat",LA="@firebase/messaging",MA="@firebase/messaging-compat",DA="@firebase/performance",PA="@firebase/performance-compat",UA="@firebase/remote-config",zA="@firebase/remote-config-compat",BA="@firebase/storage",HA="@firebase/storage-compat",GA="@firebase/firestore",FA="@firebase/ai",VA="@firebase/firestore-compat",YA="firebase",KA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",$A={[bh]:"fire-core",[yA]:"fire-core-compat",[wA]:"fire-analytics",[_A]:"fire-analytics-compat",[EA]:"fire-app-check",[NA]:"fire-app-check-compat",[SA]:"fire-auth",[AA]:"fire-auth-compat",[kA]:"fire-rtdb",[TA]:"fire-data-connect",[RA]:"fire-rtdb-compat",[jA]:"fire-fn",[CA]:"fire-fn-compat",[IA]:"fire-iid",[OA]:"fire-iid-compat",[LA]:"fire-fcm",[MA]:"fire-fcm-compat",[DA]:"fire-perf",[PA]:"fire-perf-compat",[UA]:"fire-rc",[zA]:"fire-rc-compat",[BA]:"fire-gcs",[HA]:"fire-gcs-compat",[GA]:"fire-fst",[VA]:"fire-fst-compat",[FA]:"fire-vertex","fire-js":"fire-js",[YA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,qA=new Map,yh=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ea(t){const e=t.name;if(yh.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;yh.set(e,t);for(const n of eu.values())Mg(n,t);for(const n of qA.values())Mg(n,t);return!0}function Zp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new fo("app","Firebase",WA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=KA;function $_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:vh,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ji.create("bad-app-name",{appName:String(s)});if(n||(n=z_()),!n)throw Ji.create("no-options");const r=eu.get(s);if(r){if(Ys(n,r.options)&&Ys(i,r.config))return r;throw Ji.create("duplicate-app",{appName:s})}const l=new nA(s);for(const u of yh.values())l.addComponent(u);const o=new ZA(n,i,l);return eu.set(s,o),o}function q_(t=vh){const e=eu.get(t);if(!e&&t===vh&&z_())return $_();if(!e)throw Ji.create("no-app",{appName:t});return e}function es(t,e,n){let i=$A[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(l.join(" "));return}ea(new Ks(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firebase-heartbeat-database",XA=1,Gl="firebase-heartbeat-store";let tf=null;function W_(){return tf||(tf=mA(QA,XA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),tf}async function JA(t){try{const n=(await W_()).transaction(Gl),i=await n.objectStore(Gl).get(Z_(t));return await n.done,i}catch(e){if(e instanceof gs)pi.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pi.warn(n.message)}}}async function Dg(t,e){try{const i=(await W_()).transaction(Gl,"readwrite");await i.objectStore(Gl).put(e,Z_(t)),await i.done}catch(n){if(n instanceof gs)pi.warn(n.message);else{const i=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pi.warn(i.message)}}}function Z_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=1024,tk=30;class nk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>tk){const l=rk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pg(),{heartbeatsToSend:i,unsentEntries:s}=ik(this._heartbeatsCache.heartbeats),r=Zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return pi.warn(n),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function ik(t,e=ek){const n=[];let i=t.slice();for(const s of t){const r=n.find(l=>l.agent===s.agent);if(r){if(r.dates.push(s.date),Ug(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ug(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HS()?GS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ug(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function rk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){ea(new Ks("platform-logger",e=>new bA(e),"PRIVATE")),ea(new Ks("heartbeat",e=>new nk(e),"PRIVATE")),es(bh,Lg,t),es(bh,Lg,"esm2020"),es("fire-js","")}ak("");function Q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lk=Q_,X_=new fo("auth","Firebase",Q_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new qp("@firebase/auth");function ok(t,...e){tu.logLevel<=Oe.WARN&&tu.warn(`Auth (${Sa}): ${t}`,...e)}function mc(t,...e){tu.logLevel<=Oe.ERROR&&tu.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw Qp(t,...e)}function Mn(t,...e){return Qp(t,...e)}function J_(t,e,n){const i={...lk(),[e]:n};return new fo("auth","Firebase",i).create(e,{appName:t.name})}function Dn(t){return J_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return X_.create(t,...e)}function se(t,e,...n){if(!t)throw Qp(e,...n)}function ni(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function mi(t,e){t||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ck(){return zg()==="http:"||zg()==="https:"}function zg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ck()||US()||"connection"in navigator)?navigator.onLine:!0}function dk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=$p()||F_()}get(){return uk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pk=new ho(3e4,6e4);function xs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function bs(t,e,n,i,s={}){return t1(t,s,async()=>{let r={},l={};i&&(e==="GET"?l=i:r={body:JSON.stringify(i)});const o=Ea({key:t.config.apiKey,...l}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:u,...r};return PS()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Na(t.emulatorConfig.host)&&(f.credentials="include"),e1.fetch()(await n1(t,t.config.apiHost,n,o),f)})}async function t1(t,e,n){t._canInitEmulator=!1;const i={...fk,...e};try{const s=new gk(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await r.json();if("needConfirmation"in l)throw Fo(t,"account-exists-with-different-credential",l);if(r.ok&&!("errorMessage"in l))return l;{const o=r.ok?l.errorMessage:l.error.message,[u,f]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fo(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw Fo(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw Fo(t,"user-disabled",l);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw J_(t,h,f);kn(t,h)}}catch(s){if(s instanceof gs)throw s;kn(t,"network-request-failed",{message:String(s)})}}async function po(t,e,n,i,s={}){const r=await bs(t,e,n,i,s);return"mfaPendingCredential"in r&&kn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function n1(t,e,n,i){const s=`${e}${n}?${i}`,r=t,l=r.config.emulator?Xp(t.config,s):`${t.config.apiScheme}://${s}`;return hk.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(l).toString():l}function mk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),pk.get())})}}function Fo(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Mn(t,e,i);return s.customData._tokenResponse=n,s}function Bg(t){return t!==void 0&&t.enterprise!==void 0}class xk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bk(t,e){return bs(t,"GET","/v2/recaptchaConfig",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){return bs(t,"POST","/v1/accounts:delete",e)}async function nu(t,e){return bs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yk(t,e=!1){const n=vt(t),i=await n.getIdToken(e),s=Jp(i);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,l=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:bl(nf(s.auth_time)),issuedAtTime:bl(nf(s.iat)),expirationTime:bl(nf(s.exp)),signInProvider:l||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function nf(t){return Number(t)*1e3}function Jp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Qc(n);return s?JSON.parse(s):(mc("Failed to decode base64 JWT payload"),null)}catch(s){return mc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hg(t){const e=Jp(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof gs&&_k(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function _k({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bl(this.lastLoginAt),this.creationTime=bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t){var c;const e=t.auth,n=await t.getIdToken(),i=await Fl(t,nu(e,{idToken:n}));se(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(c=s.providerUserInfo)!=null&&c.length?i1(s.providerUserInfo):[],l=Ek(t.providerData,r),o=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=o?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new wh(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function Nk(t){const e=vt(t);await iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ek(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function i1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(t,e){const n=await t1(t,{},async()=>{const i=Ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,l=await n1(t,s,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:o,body:i};return t.emulatorConfig&&Na(t.emulatorConfig.host)&&(u.credentials="include"),e1.fetch()(l,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ak(t,e){return bs(t,"POST","/v2/accounts:revokeToken",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Hg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await Sk(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,l=new Pr;return i&&(se(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(se(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),r&&(se(typeof r=="number","internal-error",{appName:e}),l.expirationTime=r),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class En{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new wk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yk(this,e)}reload(){return Nk(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await iu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Dn(this.auth));const e=await this.getIdToken();return await Fl(this,vk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,l=n.photoURL??void 0,o=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:c,emailVerified:d,isAnonymous:p,providerData:x,stsTokenManager:v}=n;se(c&&v,e,"internal-error");const b=Pr.fromJSON(this.name,v);se(typeof c=="string",e,"internal-error"),Ei(i,e.name),Ei(s,e.name),se(typeof d=="boolean",e,"internal-error"),se(typeof p=="boolean",e,"internal-error"),Ei(r,e.name),Ei(l,e.name),Ei(o,e.name),Ei(u,e.name),Ei(f,e.name),Ei(h,e.name);const m=new En({uid:c,auth:e,email:s,emailVerified:d,displayName:i,isAnonymous:p,photoURL:l,phoneNumber:r,tenantId:o,stsTokenManager:b,createdAt:f,lastLoginAt:h});return x&&Array.isArray(x)&&(m.providerData=x.map(g=>({...g}))),u&&(m._redirectEventId=u),m}static async _fromIdTokenResponse(e,n,i=!1){const s=new Pr;s.updateFromServerResponse(n);const r=new En({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await iu(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];se(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?i1(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),o=new Pr;o.updateFromIdToken(i);const u=new En({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new wh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,f),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;function ii(t){mi(t instanceof Function,"Expected a class definition");let e=Gg.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}s1.type="NONE";const Fg=s1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ur{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=gc(this.userKey,s.apiKey,r),this.fullPersistenceKey=gc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nu(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ur(ii(Fg),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let r=s[0]||ii(Fg);const l=gc(i,e.config.apiKey,e.name);let o=null;for(const f of n)try{const h=await f._get(l);if(h){let c;if(typeof h=="string"){const d=await nu(e,{idToken:h}).catch(()=>{});if(!d)break;c=await En._fromGetAccountInfoResponse(e,d,h)}else c=En._fromJSON(e,h);f!==r&&(o=c),r=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Ur(r,e,i):(r=u[0],o&&await r._set(l,o.toJSON()),await Promise.all(n.map(async f=>{if(f!==r)try{await f._remove(l)}catch{}})),new Ur(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u1(e))return"Blackberry";if(d1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||l1(e))&&!e.includes("edge/"))return"Chrome";if(c1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function r1(t=Lt()){return/firefox\//i.test(t)}function a1(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l1(t=Lt()){return/crios\//i.test(t)}function o1(t=Lt()){return/iemobile/i.test(t)}function c1(t=Lt()){return/android/i.test(t)}function u1(t=Lt()){return/blackberry/i.test(t)}function d1(t=Lt()){return/webos/i.test(t)}function em(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kk(t=Lt()){var e;return em(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Tk(){return zS()&&document.documentMode===10}function f1(t=Lt()){return em(t)||c1(t)||d1(t)||u1(t)||/windows phone/i.test(t)||o1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e=[]){let n;switch(t){case"Browser":n=Vg(Lt());break;case"Worker":n=`${Vg(Lt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((l,o)=>{try{const u=e(r);l(u)}catch(u){o(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(t,e={}){return bs(t,"GET","/v2/passwordPolicy",xs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=6;class Ik{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ck,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yg(this),this.idTokenSubscription=new Yg(this),this.beforeStateQueue=new Rk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Ur.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nu(this,{idToken:e}),i=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($t(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)==null?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===o)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Dn(this));const n=e?vt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Dn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Dn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jk(this),n=new Ik(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Ak(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ii(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Ur.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let l=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(o,this,"internal-error"),o.then(()=>{l||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{l=!0,u()}}else{const u=e.addObserver(n);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ok(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vs(t){return vt(t)}class Yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=WS(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lk(t){Wu=t}function p1(t){return Wu.loadJS(t)}function Mk(){return Wu.recaptchaEnterpriseScript}function Dk(){return Wu.gapiScript}function Pk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Uk{constructor(){this.enterprise=new zk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class zk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Bk="recaptcha-enterprise",m1="NO_RECAPTCHA";class Hk{constructor(e){this.type=Bk,this.auth=vs(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(l,o)=>{bk(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const f=new xk(u);return r.tenantId==null?r._agentRecaptchaConfig=f:r._tenantRecaptchaConfigs[r.tenantId]=f,l(f.siteKey)}}).catch(u=>{o(u)})})}function s(r,l,o){const u=window.grecaptcha;Bg(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(f=>{l(f)}).catch(()=>{l(m1)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Uk().execute("siteKey",{action:"verify"}):new Promise((r,l)=>{i(this.auth).then(o=>{if(!n&&Bg(window.grecaptcha))s(o,r,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Mk();u.length!==0&&(u+=o),p1(u).then(()=>{s(o,r,l)}).catch(f=>{l(f)})}}).catch(o=>{l(o)})})}}async function Kg(t,e,n,i=!1,s=!1){const r=new Hk(t);let l;if(s)l=m1;else try{l=await r.verify(n)}catch{l=await r.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const u=o.phoneEnrollmentInfo.phoneNumber,f=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const u=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:l}):Object.assign(o,{captchaResponse:l}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nh(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Kg(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Kg(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t,e){const n=Zp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ys(r,e??{}))return s;kn(s,"already-initialized")}return n.initialize({options:e})}function Fk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Vk(t,e,n){const i=vs(t);se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=g1(e),{host:l,port:o}=Yk(e),u=o===null?"":`:${o}`,f={url:`${r}//${l}${u}/`},h=Object.freeze({host:l,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),se(Ys(f,i.config.emulator)&&Ys(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Na(l)?(H_(`${r}//${l}${u}`),G_("Auth",!0)):Kk()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yk(t){const e=g1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:$g(i.substr(r.length+1))}}else{const[r,l]=i.split(":");return{host:r,port:$g(l)}}}function $g(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Kk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,n){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}async function $k(t,e){return bs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e){return po(t,"POST","/v1/accounts:signInWithPassword",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e){return po(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}async function Zk(t,e){return po(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends tm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Vl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",qk);case"emailLink":return Wk(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,i,"signUpPassword",$k);case"emailLink":return Zk(e,{idToken:n,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(t,e){return po(t,"POST","/v1/accounts:signInWithIdp",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="http://localhost";class $s extends tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const l=new $s(i,s);return l.idToken=r.idToken||void 0,l.accessToken=r.accessToken||void 0,l.secret=r.secret,l.nonce=r.nonce,l.pendingToken=r.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return zr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,zr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zr(e,n)}buildRequest(){const e={requestUri:Qk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ea(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jk(t){const e=Xa(Ja(t)).link,n=e?Xa(Ja(e)).deep_link_id:null,i=Xa(Ja(t)).deep_link_id;return(i?Xa(Ja(i)).link:null)||i||n||e||t}class nm{constructor(e){const n=Xa(Ja(e)),i=n.apiKey??null,s=n.oobCode??null,r=Xk(n.mode??null);se(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Jk(e);try{return new nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.providerId=Aa.PROVIDER_ID}static credential(e,n){return Vl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=nm.parseLink(n);return se(i,"argument-error"),Vl._fromEmailAndCode(e,i.code,i.tenantId)}}Aa.PROVIDER_ID="password";Aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends x1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends mo{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ii.credential(n,i)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends mo{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends mo{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e){return po(t,"POST","/v1/accounts:signUp",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await En._fromIdTokenResponse(e,i,s),l=qg(i);return new gi({user:r,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=qg(i);return new gi({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function qg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(t){var s;if($t(t.app))return Promise.reject(Dn(t));const e=vs(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new gi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await b1(e,{returnSecureToken:!0}),i=await gi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends gs{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new su(e,n,i,s)}}function v1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,r,e,i):r})}async function tT(t,e,n=!1){const i=await Fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e,n=!1){const{auth:i}=t;if($t(i.app))return Promise.reject(Dn(i));const s="reauthenticate";try{const r=await Fl(t,v1(i,s,e,t),n);se(r.idToken,i,"internal-error");const l=Jp(r.idToken);se(l,i,"internal-error");const{sub:o}=l;return se(t.uid===o,i,"user-mismatch"),gi._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&kn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e,n=!1){if($t(t.app))return Promise.reject(Dn(t));const i="signIn",s=await v1(t,i,e),r=await gi._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function iT(t,e){return y1(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sT(t,e,n){if($t(t.app))return Promise.reject(Dn(t));const i=vs(t),l=await Nh(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b1).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_1(t),u}),o=await gi._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(o.user),o}function rT(t,e,n){return $t(t.app)?Promise.reject(Dn(t)):iT(vt(t),Aa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_1(t),i})}function aT(t,e,n,i){return vt(t).onIdTokenChanged(e,n,i)}function lT(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function oT(t,e,n,i){return vt(t).onAuthStateChanged(e,n,i)}function cT(t){return vt(t).signOut()}const ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1e3,dT=10;class N1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,o,u)=>{this.notifyListeners(l,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},r=this.storage.getItem(i);Tk()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dT):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},uT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N1.type="LOCAL";const fT=N1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E1.type="SESSION";const S1=E1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Zu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const o=Array.from(l).map(async f=>f(n.origin,r)),u=await hT(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,l;return new Promise((o,u)=>{const f=im("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(c){const d=c;if(d.data.eventId===f)switch(d.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(d.data.response);break;default:clearTimeout(h),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function mT(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function gT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function bT(){return A1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebaseLocalStorageDb",vT=1,au="firebaseLocalStorage",T1="fbase_key";class go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qu(t,e){return t.transaction([au],e?"readwrite":"readonly").objectStore(au)}function yT(){const t=indexedDB.deleteDatabase(k1);return new go(t).toPromise()}function Eh(){const t=indexedDB.open(k1,vT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(au,{keyPath:T1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(au)?e(i):(i.close(),await yT(),e(await Eh()))})})}async function Wg(t,e,n){const i=Qu(t,!0).put({[T1]:e,value:n});return new go(i).toPromise()}async function _T(t,e){const n=Qu(t,!1).get(e),i=await new go(n).toPromise();return i===void 0?null:i.value}function Zg(t,e){const n=Qu(t,!0).delete(e);return new go(n).toPromise()}const wT=800,NT=3;class R1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>NT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zu._getInstance(bT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await gT(),!this.activeServiceWorker)return;this.sender=new pT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eh();return await Wg(e,ru,"1"),await Zg(e,ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_T(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Qu(s,!1).getAll();return new go(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R1.type="LOCAL";const ET=R1;new ho(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e){return e?ii(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AT(t){return y1(t.auth,new sm(t),t.bypassAuthState)}function kT(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),nT(n,new sm(t),t.bypassAuthState)}async function TT(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),tT(n,new sm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:l,type:o}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AT;case"linkViaPopup":case"linkViaRedirect":return TT;case"reauthViaPopup":case"reauthViaRedirect":return kT;default:kn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new ho(2e3,1e4);class Ar extends j1{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ar.currentPopupAction&&Ar.currentPopupAction.cancel(),Ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RT.get())};e()}}Ar.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="pendingRedirect",xc=new Map;class CT extends j1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const i=await IT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IT(t,e){const n=MT(e),i=LT(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function OT(t,e){xc.set(t._key(),e)}function LT(t){return ii(t._redirectPersistence)}function MT(t){return gc(jT,t.config.apiKey,t.name)}async function DT(t,e,n=!1){if($t(t.app))return Promise.reject(Dn(t));const i=vs(t),s=ST(i,e),l=await new CT(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=10*60*1e3;class UT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!C1(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qg(e))}saveEventToCache(e){this.cachedEventUids.add(Qg(e)),this.lastProcessedEventTime=Date.now()}}function Qg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(t,e={}){return bs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GT=/^https?/;async function FT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BT(t);for(const n of e)try{if(VT(n))return}catch{}kn(t,"unauthorized-domain")}function VT(t){const e=_h(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!GT.test(n))return!1;if(HT.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new ho(3e4,6e4);function Xg(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KT(t){return new Promise((e,n)=>{var s,r,l;function i(){Xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xg(),n(Mn(t,"network-request-failed"))},timeout:YT.get()})}if((r=(s=Pn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((l=Pn().gapi)!=null&&l.load)i();else{const o=Pk("iframefcb");return Pn()[o]=()=>{gapi.load?i():n(Mn(t,"network-request-failed"))},p1(`${Dk()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw bc=null,e})}let bc=null;function $T(t){return bc=bc||KT(t),bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new ho(5e3,15e3),WT="__/auth/iframe",ZT="emulator/auth/iframe",QT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JT(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xp(e,ZT):`https://${t.config.authDomain}/${WT}`,i={apiKey:e.apiKey,appName:t.name,v:Sa},s=XT.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Ea(i).slice(1)}`}async function eR(t){const e=await $T(t),n=Pn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:JT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QT,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const l=Mn(t,"network-request-failed"),o=Pn().setTimeout(()=>{r(l)},qT.get());function u(){Pn().clearTimeout(o),s(i)}i.ping(u).then(u,()=>{r(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nR=500,iR=600,sR="_blank",rR="http://localhost";class Jg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aR(t,e,n,i=nR,s=iR){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const u={...tR,width:i.toString(),height:s.toString(),top:r,left:l},f=Lt().toLowerCase();n&&(o=l1(f)?sR:n),r1(f)&&(e=e||rR,u.scrollbars="yes");const h=Object.entries(u).reduce((d,[p,x])=>`${d}${p}=${x},`,"");if(kk(f)&&o!=="_self")return lR(e||"",o),new Jg(null);const c=window.open(e||"",o,h);se(c,t,"popup-blocked");try{c.focus()}catch{}return new Jg(c)}function lR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="__/auth/handler",cR="emulator/auth/handler",uR=encodeURIComponent("fac");async function ex(t,e,n,i,s,r){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Sa,eventId:s};if(e instanceof x1){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Xc(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,c]of Object.entries({}))l[h]=c}if(e instanceof mo){const h=e.getScopes().filter(c=>c!=="");h.length>0&&(l.scopes=h.join(","))}t.tenantId&&(l.tid=t.tenantId);const o=l;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),f=u?`#${uR}=${encodeURIComponent(u)}`:"";return`${dR(t)}?${Ea(o).slice(1)}${f}`}function dR({config:t}){return t.emulator?Xp(t,cR):`https://${t.authDomain}/${oR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="webStorageSupport";class fR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=DT,this._overrideRedirectResult=OT}async _openPopup(e,n,i,s){var l;mi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const r=await ex(e,n,i,_h(),s);return aR(e,r,im())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await ex(e,n,i,_h(),s);return mT(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(mi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await eR(e),i=new UT(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sf,{type:sf},s=>{var l;const r=(l=s==null?void 0:s[0])==null?void 0:l[sf];r!==void 0&&n(!!r),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f1()||a1()||em()}}const hR=fR;var tx="@firebase/auth",nx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gR(t){ea(new Ks("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:l,authDomain:o}=i.options;se(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:l,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h1(t)},f=new Ok(i,s,r,u);return Fk(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ea(new Ks("auth-internal",e=>{const n=vs(e.getProvider("auth").getImmediate());return(i=>new pR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(tx,nx,mR(t)),es(tx,nx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=5*60,bR=B_("authIdTokenMaxAge")||xR;let ix=null;const vR=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>bR)return;const s=n==null?void 0:n.token;ix!==s&&(ix=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yR(t=q_()){const e=Zp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Gk(t,{popupRedirectResolver:hR,persistence:[ET,fT,S1]}),i=B_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const l=vR(r.toString());lT(n,l,()=>l(n.currentUser)),aT(n,o=>l(o))}}const s=U_("auth");return s&&Vk(n,`http://${s}`),n}function _R(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Lk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Mn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",_R().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gR("Browser");var sx={};const rx="@firebase/database",ax="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I1="";function wR(t){I1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Hl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Hn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new NR(e)}}catch{}return new ER},Cs=O1("localStorage"),SR=O1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new qp("@firebase/database"),AR=function(){let t=1;return function(){return t++}}(),L1=function(t){const e=XS(t),n=new qS;n.update(e);const i=n.digest();return Yp.encodeByteArray(i)},xo=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=xo.apply(null,i):typeof i=="object"?e+=ot(i):e+=i,e+=" "}return e};let vl=null,lx=!0;const kR=function(t,e){F(!0,"Can't turn on custom loggers persistently."),Br.logLevel=Oe.VERBOSE,vl=Br.log.bind(Br)},gt=function(...t){if(lx===!0&&(lx=!1,vl===null&&SR.get("logging_enabled")===!0&&kR()),vl){const e=xo.apply(null,t);vl(e)}},bo=function(t){return function(...e){gt(t,...e)}},Sh=function(...t){const e="FIREBASE INTERNAL ERROR: "+xo(...t);Br.error(e)},xi=function(...t){const e=`FIREBASE FATAL ERROR: ${xo(...t)}`;throw Br.error(e),new Error(e)},It=function(...t){const e="FIREBASE WARNING: "+xo(...t);Br.warn(e)},TR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&It("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},RR=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qs="[MIN_NAME]",os="[MAX_NAME]",nr=function(t,e){if(t===e)return 0;if(t===qs||e===os)return-1;if(e===qs||t===os)return 1;{const n=ox(t),i=ox(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},jR=function(t,e){return t===e?0:t<e?-1:1},Ga=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ot(e))},rm=function(t){if(typeof t!="object"||t===null)return ot(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ot(e[i]),n+=":",n+=rm(t[e[i]]);return n+="}",n},M1=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function bt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const D1=function(t){F(!Xu(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,l,o,u;t===0?(r=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=o+i,l=Math.round(t*Math.pow(2,n-o)-Math.pow(2,n))):(r=0,l=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(u=n;u;u-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(u=e;u;u-=1)f.push(r%2?1:0),r=Math.floor(r/2);f.push(s?1:0),f.reverse();const h=f.join("");let c="";for(u=0;u<64;u+=8){let d=parseInt(h.substr(u,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},CR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},IR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const LR=new RegExp("^-?(0*)\\d{1,10}$"),MR=-2147483648,DR=2147483647,ox=function(t){if(LR.test(t)){const e=Number(t);if(e>=MR&&e<=DR)return e}return null},ka=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw It("Exception was thrown by user callback.",n),e},Math.floor(0))}},PR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$t(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){It(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',It(e)}}class vc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="5",P1="v",U1="s",z1="r",B1="f",H1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G1="ls",F1="p",Ah="ac",V1="websocket",Y1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,i,s,r=!1,l="",o=!1,u=!1,f=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=l,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=u,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function BR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function $1(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let i;if(e===V1)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Y1)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);BR(t)&&(n.ns=t.namespace);const s=[];return bt(n,(r,l)=>{s.push(r+"="+l)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.counters_={}}incrementCounter(e,n=1){Hn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return kS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf={},af={};function lm(t){const e=t.toString();return rf[e]||(rf[e]=new HR),rf[e]}function GR(t,e){const n=t.toString();return af[n]||(af[n]=e()),af[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ka(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="start",VR="close",YR="pLPCommand",KR="pRTLPCB",q1="id",W1="pw",Z1="ser",$R="cb",qR="seg",WR="ts",ZR="d",QR="dframe",Q1=1870,X1=30,XR=Q1-X1,JR=25e3,e5=3e4;class kr{constructor(e,n,i,s,r,l,o){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=l,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bo(e),this.stats_=lm(n),this.urlFn=u=>(this.appCheckToken&&(u[Ah]=this.appCheckToken),$1(n,Y1,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new FR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(e5)),RR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new om((...r)=>{const[l,o,u,f,h]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===cx)this.id=o,this.password=u;else if(l===VR)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...r)=>{const[l,o]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(l,o)},()=>{this.onClosed_()},this.urlFn);const i={};i[cx]="t",i[Z1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[$R]=this.scriptTagHolder.uniqueCallbackIdentifier),i[P1]=am,this.transportSessionId&&(i[U1]=this.transportSessionId),this.lastSessionId&&(i[G1]=this.lastSessionId),this.applicationId&&(i[F1]=this.applicationId),this.appCheckToken&&(i[Ah]=this.appCheckToken),typeof location<"u"&&location.hostname&&H1.test(location.hostname)&&(i[z1]=B1);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kr.forceAllow_=!0}static forceDisallow(){kr.forceDisallow_=!0}static isAvailable(){return kr.forceAllow_?!0:!kr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CR()&&!IR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=D_(n),s=M1(i,XR);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[QR]="t",i[q1]=e,i[W1]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ot(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class om{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=AR(),window[YR+this.uniqueCallbackIdentifier]=e,window[KR+this.uniqueCallbackIdentifier]=n,this.myIFrame=om.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(o){gt("frame writing exception"),o.stack&&gt(o.stack),gt(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[q1]=this.myID,e[W1]=this.myPW,e[Z1]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+X1+i.length<=Q1;){const l=this.pendingSegs.shift();i=i+"&"+qR+s+"="+l.seg+"&"+WR+s+"="+l.ts+"&"+ZR+s+"="+l.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(JR)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=16384,n5=45e3;let lu=null;typeof MozWebSocket<"u"?lu=MozWebSocket:typeof WebSocket<"u"&&(lu=WebSocket);class Nn{constructor(e,n,i,s,r,l,o){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bo(this.connId),this.stats_=lm(n),this.connURL=Nn.connectionURL_(n,l,o,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const l={};return l[P1]=am,typeof location<"u"&&location.hostname&&H1.test(location.hostname)&&(l[z1]=B1),n&&(l[U1]=n),i&&(l[G1]=i),s&&(l[Ah]=s),r&&(l[F1]=r),$1(e,V1,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cs.set("previous_websocket_failure",!0);try{let i;BS(),this.mySock=new lu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lu!==null&&!Nn.forceDisallow_}static previouslyFailed(){return Cs.isInMemoryStorage||Cs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Cs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Hl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(F(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=M1(n,t5);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(n5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nn.responsesRequiredToBeHealthy=2;Nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static get ALL_TRANSPORTS(){return[kr,Nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Nn&&Nn.isAvailable();let i=n&&!Nn.previouslyFailed();if(e.webSocketOnly&&(n||It("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Nn];else{const s=this.transports_=[];for(const r of Yl.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Yl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=6e4,s5=5e3,r5=10*1024,a5=100*1024,lf="t",ux="d",l5="s",dx="r",o5="e",fx="o",hx="a",px="n",mx="p",c5="h";class u5{constructor(e,n,i,s,r,l,o,u,f,h){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=l,this.onReady_=o,this.onDisconnect_=u,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bo("c:"+this.id+":"),this.transportManager_=new Yl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=yl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>r5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lf in e){const n=e[lf];n===hx?this.upgradeIfSecondaryHealthy_():n===dx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ga("t",e),i=Ga("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:px,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ga("t",e),i=Ga("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ga(lf,e);if(ux in e){const i=e[ux];if(n===c5){const s={...i};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===px){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===l5?this.onConnectionShutdown_(i):n===dx?this.onReset_(i):n===o5?Sh("Server Error: "+i):n===fx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),am!==i&&It("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),yl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(i5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(s5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends ew{static getInstance(){return new ou}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$p()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=32,xx=768;class ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ee(){return new ke("")}function de(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function cs(t){return t.pieces_.length-t.pieceNum_}function Me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function cm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function d5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Kl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function We(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ke)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ke(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){const n=de(t),i=de(e);if(n===null)return e;if(n===i)return Ct(Me(t),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function f5(t,e){const n=Kl(t,0),i=Kl(e,0);for(let s=0;s<n.length&&s<i.length;s++){const r=nr(n[s],i[s]);if(r!==0)return r}return n.length===i.length?0:n.length<i.length?-1:1}function um(t,e){if(cs(t)!==cs(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function pn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(cs(t)>cs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class h5{constructor(e,n){this.errorPrefix_=n,this.parts_=Kl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=qu(this.parts_[i]);nw(this)}}function p5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=qu(e),nw(t)}function m5(t){const e=t.parts_.pop();t.byteLength_-=qu(e),t.parts_.length>0&&(t.byteLength_-=1)}function nw(t){if(t.byteLength_>xx)throw new Error(t.errorPrefix_+"has a key path longer than "+xx+" bytes ("+t.byteLength_+").");if(t.parts_.length>gx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gx+") or object contains a cycle "+Rs(t))}function Rs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends ew{static getInstance(){return new dm}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=1e3,g5=60*5*1e3,bx=30*1e3,x5=1.3,b5=3e4,v5="server_kill",vx=3;class oi extends J1{constructor(e,n,i,s,r,l,o,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=l,this.appCheckTokenProvider_=o,this.authOverride_=u,this.id=oi.nextPersistentConnectionId_++,this.log_=bo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fa,this.maxReconnectDelay_=g5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ou.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(ot(r)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new jn,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const o=l.d;l.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+r),this.listens.has(l)||this.listens.set(l,new Map),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(l).has(r),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(l).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},l="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(l,r,o=>{const u=o.d,f=o.s;oi.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",o),f!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(f,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Hn(e,"w")){const i=Xr(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();It(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$S(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=bx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=KS(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,l=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},l="n";s&&(r.q=i,r.t=s),this.sendRequest(l,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const l={p:n,d:i};r!==void 0&&(l.h=r),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Sh("Unrecognized action received from server: "+ot(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>b5&&(this.reconnectDelay_=Fa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*x5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+oi.nextConnectionId_++,r=this.lastSessionId;let l=!1,o=null;const u=function(){o?o.close():(l=!0,i())},f=function(c){F(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(c)};this.realtime_={close:u,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);l?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,o=new u5(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,p=>{It(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(v5)},r))}catch(c){this.log_("Failed to get token: "+c),l||(this.repoInfo_.nodeAdmin&&It(c),u())}}}interrupt(e){gt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xc(this.interruptReasons_)&&(this.reconnectDelay_=Fa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>rm(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new ke(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){gt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=vx&&(this.reconnectDelay_=bx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){gt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=vx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+I1.replace(/\./g,"-")]=1,$p()?e["framework.cordova"]=1:F_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ou.getInstance().currentlyOnline();return Xc(this.interruptReasons_)&&e}}oi.nextPersistentConnectionId_=0;oi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new he(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new he(qs,e),s=new he(qs,n);return this.compare(i,s)!==0}minPost(){return he.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo;class iw extends Ju{static get __EMPTY_NODE(){return Vo}static set __EMPTY_NODE(e){Vo=e}compare(e,n){return nr(e.name,n.name)}isDefinedOn(e){throw wa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return he.MIN}maxPost(){return new he(os,Vo)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new he(e,Vo)}toString(){return".key"}}const Us=new iw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class pt{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??pt.RED,this.left=s??Bt.EMPTY_NODE,this.right=r??Bt.EMPTY_NODE}copy(e,n,i,s,r){return new pt(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}pt.RED=!0;pt.BLACK=!1;class y5{copy(e,n,i,s,r){return this}insert(e,n,i){return new pt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bt{constructor(e,n=Bt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,pt.BLACK,null,null))}remove(e){return new Bt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Yo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Yo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Yo(this.root_,null,this.comparator_,!0,e)}}Bt.EMPTY_NODE=new y5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){return nr(t.name,e.name)}function fm(t,e){return nr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh;function w5(t){kh=t}const sw=function(t){return typeof t=="number"?"number:"+D1(t):"string:"+t},rw=function(t){if(t.isLeafNode()){const e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Hn(e,".sv"),"Priority must be a string or number.")}else F(t===kh||t.isEmpty(),"priority of unexpected type.");F(t===kh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yx;class ft{static set __childrenNodeConstructor(e){yx=e}static get __childrenNodeConstructor(){return yx}constructor(e,n=ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),rw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:de(e)===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=de(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||cs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sw(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=D1(this.value_):e+=this.value_,this.lazyHash_=L1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ft.__childrenNodeConstructor?-1:(F(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=ft.VALUE_TYPE_ORDER.indexOf(n),r=ft.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+n),F(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aw,lw;function N5(t){aw=t}function E5(t){lw=t}class S5 extends Ju{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?nr(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return he.MIN}maxPost(){return new he(os,new ft("[PRIORITY-POST]",lw))}makePost(e,n){const i=aw(e);return new he(n,new ft("[PRIORITY-POST]",i))}toString(){return".priority"}}const qe=new S5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=Math.log(2);class k5{constructor(e){const n=r=>parseInt(Math.log(r)/A5,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cu=function(t,e,n,i){t.sort(e);const s=function(u,f){const h=f-u;let c,d;if(h===0)return null;if(h===1)return c=t[u],d=n?n(c):c,new pt(d,c.node,pt.BLACK,null,null);{const p=parseInt(h/2,10)+u,x=s(u,p),v=s(p+1,f);return c=t[p],d=n?n(c):c,new pt(d,c.node,pt.BLACK,x,v)}},r=function(u){let f=null,h=null,c=t.length;const d=function(x,v){const b=c-x,m=c;c-=x;const g=s(b+1,m),y=t[b],_=n?n(y):y;p(new pt(_,y.node,v,null,g))},p=function(x){f?(f.left=x,f=x):(h=x,f=x)};for(let x=0;x<u.count;++x){const v=u.nextBitIsOne(),b=Math.pow(2,u.count-(x+1));v?d(b,pt.BLACK):(d(b,pt.BLACK),d(b,pt.RED))}return h},l=new k5(t.length),o=r(l);return new Bt(i||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of;const or={};class si{static get Default(){return F(or&&qe,"ChildrenNode.ts has not been loaded"),of=of||new si({".priority":or},{".priority":qe}),of}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Xr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bt?n:null}hasIndex(e){return Hn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==Us,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(he.Wrap);let l=r.getNext();for(;l;)s=s||e.isDefinedOn(l.node),i.push(l),l=r.getNext();let o;s?o=cu(i,e.getCompare()):o=or;const u=e.toString(),f={...this.indexSet_};f[u]=e;const h={...this.indexes_};return h[u]=o,new si(h,f)}addToIndexes(e,n){const i=Jc(this.indexes_,(s,r)=>{const l=Xr(this.indexSet_,r);if(F(l,"Missing index implementation for "+r),s===or)if(l.isDefinedOn(e.node)){const o=[],u=n.getIterator(he.Wrap);let f=u.getNext();for(;f;)f.name!==e.name&&o.push(f),f=u.getNext();return o.push(e),cu(o,l.getCompare())}else return or;else{const o=n.get(e.name);let u=s;return o&&(u=u.remove(new he(e.name,o))),u.insert(e,e.node)}});return new si(i,this.indexSet_)}removeFromIndexes(e,n){const i=Jc(this.indexes_,s=>{if(s===or)return s;{const r=n.get(e.name);return r?s.remove(new he(e.name,r)):s}});return new si(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va;class re{static get EMPTY_NODE(){return Va||(Va=new re(new Bt(fm),null,si.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&rw(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Va}updatePriority(e){return this.children_.isEmpty()?this:new re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Va:n}}getChild(e){const n=de(e);return n===null?this:this.getImmediateChild(n).getChild(Me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(F(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new he(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?Va:this.priorityNode_;return new re(s,l,r)}}updateChild(e,n){const i=de(e);if(i===null)return n;{F(de(e)!==".priority"||cs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Me(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(qe,(l,o)=>{n[l]=o.val(e),i++,r&&re.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):r=!1}),!e&&r&&s<2*i){const l=[];for(const o in n)l[o]=n[o];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sw(this.getPriority().val())+":"),this.forEachChild(qe,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":L1(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new he(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new he(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new he(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,he.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,he.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vo?-1:0}withIndex(e){if(e===Us||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new re(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Us||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(qe),s=n.getIterator(qe);let r=i.getNext(),l=s.getNext();for(;r&&l;){if(r.name!==l.name||!r.node.equals(l.node))return!1;r=i.getNext(),l=s.getNext()}return r===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Us?null:this.indexMap_.get(e.toString())}}re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class T5 extends re{constructor(){super(new Bt(fm),re.EMPTY_NODE,si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return re.EMPTY_NODE}isEmpty(){return!1}}const vo=new T5;Object.defineProperties(he,{MIN:{value:new he(qs,re.EMPTY_NODE)},MAX:{value:new he(os,vo)}});iw.__EMPTY_NODE=re.EMPTY_NODE;ft.__childrenNodeConstructor=re;w5(vo);E5(vo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=!0;function Xe(t,e=null){if(t===null)return re.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ft(n,Xe(e))}if(!(t instanceof Array)&&R5){const n=[];let i=!1;if(bt(t,(l,o)=>{if(l.substring(0,1)!=="."){const u=Xe(o);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new he(l,u)))}}),n.length===0)return re.EMPTY_NODE;const r=cu(n,_5,l=>l.name,fm);if(i){const l=cu(n,qe.getCompare());return new re(r,Xe(e),new si({".priority":l},{".priority":qe}))}else return new re(r,Xe(e),si.Default)}else{let n=re.EMPTY_NODE;return bt(t,(i,s)=>{if(Hn(t,i)&&i.substring(0,1)!=="."){const r=Xe(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Xe(e))}}N5(Xe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Ju{constructor(e){super(),this.indexPath_=e,F(!fe(e)&&de(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?nr(e.name,n.name):r}makePost(e,n){const i=Xe(e),s=re.EMPTY_NODE.updateChild(this.indexPath_,i);return new he(n,s)}maxPost(){const e=re.EMPTY_NODE.updateChild(this.indexPath_,vo);return new he(os,e)}toString(){return Kl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5 extends Ju{compare(e,n){const i=e.node.compareTo(n.node);return i===0?nr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return he.MIN}maxPost(){return he.MAX}makePost(e,n){const i=Xe(e);return new he(n,i)}toString(){return".value"}}const ow=new j5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){return{type:"value",snapshotNode:t}}function ta(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $l(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ql(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function C5(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.index_=e}updateChild(e,n,i,s,r,l){F(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(n);return o.getChild(s).equals(i.getChild(s))&&o.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange($l(n,o)):F(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?l.trackChildChange(ta(n,i)):l.trackChildChange(ql(n,i,o))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(qe,(s,r)=>{n.hasChild(s)||i.trackChildChange($l(s,r))}),n.isLeafNode()||n.forEachChild(qe,(s,r)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(r)||i.trackChildChange(ql(s,r,l))}else i.trackChildChange(ta(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?re.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.indexedFilter_=new pm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Wl.getStartPost_(e),this.endPost_=Wl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,l){return this.matches(new he(n,i))||(i=re.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=re.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(re.EMPTY_NODE);const r=this;return n.forEachChild(qe,(l,o)=>{r.matches(new he(l,o))||(s=s.updateImmediateChild(l,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Wl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,l){return this.rangedFilter_.matches(new he(n,i))||(i=re.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,l):this.fullLimitUpdateChild_(e,n,i,r,l)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=re.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;r.hasNext()&&l<this.limit_;){const o=r.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))s=s.updateImmediateChild(o.name,o.node),l++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(re.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let l=0;for(;r.hasNext();){const o=r.getNext();l<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?l++:s=s.updateImmediateChild(o.name,re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let l;if(this.reverse_){const c=this.index_.getCompare();l=(d,p)=>c(p,d)}else l=this.index_.getCompare();const o=e;F(o.numChildren()===this.limit_,"");const u=new he(n,i),f=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(o.hasChild(n)){const c=o.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,f,this.reverse_);for(;d!=null&&(d.name===n||o.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const p=d==null?1:l(d,u);if(h&&!i.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(ql(n,i,c)),o.updateImmediateChild(n,i);{r!=null&&r.trackChildChange($l(n,c));const v=o.updateImmediateChild(n,re.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(r!=null&&r.trackChildChange(ta(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}}else return i.isEmpty()?e:h&&l(f,u)>=0?(r!=null&&(r.trackChildChange($l(f.name,f.node)),r.trackChildChange(ta(n,i))),o.updateImmediateChild(n,i).updateImmediateChild(f.name,re.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qs}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qe}copy(){const e=new mm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function O5(t){return t.loadsAllData()?new pm(t.getIndex()):t.hasLimit()?new I5(t):new Wl(t)}function L5(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function M5(t,e){const n=t.copy();return n.index_=e,n}function _x(t){const e={};if(t.isDefault())return e;let n;if(t.index_===qe?n="$priority":t.index_===ow?n="$value":t.index_===Us?n="$key":(F(t.index_ instanceof hm,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ot(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=ot(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ot(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ot(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ot(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==qe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends J1{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=bo("p:rest:"),this.listens_={}}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const l=uu.getListenId_(e,i),o={};this.listens_[l]=o;const u=_x(e._queryParams);this.restRequest_(r+".json",u,(f,h)=>{let c=h;if(f===404&&(c=null,f=null),f===null&&this.onDataUpdate_(r,c,!1,i),Xr(this.listens_,l)===o){let d;f?f===401?d="permission_denied":d="rest_error:"+f:d="ok",s(d,null)}})}unlisten(e,n){const i=uu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=_x(e._queryParams),i=e._path.toString(),s=new jn;return this.restRequest_(i+".json",n,(r,l)=>{let o=l;r===404&&(o=null,r=null),r===null?(this.onDataUpdate_(i,o,!1,null),s.resolve(o)):s.reject(new Error(o))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ea(n);this.log_("Sending REST request for "+l);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(i&&o.readyState===4){this.log_("REST Response for "+l+" received. status:",o.status,"response:",o.responseText);let u=null;if(o.status>=200&&o.status<300){try{u=Hl(o.responseText)}catch{It("Failed to parse JSON response for "+l+": "+o.responseText)}i(null,u)}else o.status!==401&&o.status!==404&&It("Got unsuccessful REST response for "+l+" Status: "+o.status),i(o.status);i=null}},o.open("GET",l,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.rootNode_=re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){return{value:null,children:new Map}}function Ta(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=de(e);t.children.has(i)||t.children.set(i,du());const s=t.children.get(i);e=Me(e),Ta(s,e,n)}}function Th(t,e){if(fe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(qe,(i,s)=>{Ta(t,new ke(i),s)}),Th(t,e)}}else if(t.children.size>0){const n=de(e);return e=Me(e),t.children.has(n)&&Th(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Rh(t,e,n){t.value!==null?n(e,t.value):P5(t,(i,s)=>{const r=new ke(e.toString()+"/"+i);Rh(s,r,n)})}function P5(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&bt(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=10*1e3,z5=30*1e3,B5=5*60*1e3;class H5{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new U5(e);const i=Nx+(z5-Nx)*Math.random();yl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;bt(e,(s,r)=>{r>0&&Hn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),yl(this.reportStats_.bind(this),Math.floor(Math.random()*2*B5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Sn||(Sn={}));function gm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Sn.ACK_USER_WRITE,this.source=gm()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ke(e));return new fu(Ee(),n,this.revert)}}else return F(de(this.path)===e,"operationForChild called for unrelated child."),new fu(Me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.source=e,this.path=n,this.type=Sn.LISTEN_COMPLETE}operationForChild(e){return fe(this.path)?new Zl(this.source,Ee()):new Zl(this.source,Me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Sn.OVERWRITE}operationForChild(e){return fe(this.path)?new Ws(this.source,Ee(),this.snap.getImmediateChild(e)):new Ws(this.source,Me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Sn.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new Ws(this.source,Ee(),n.value):new na(this.source,Ee(),n)}else return F(de(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new na(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=de(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function F5(t,e,n,i){const s=[],r=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&r.push(C5(l.childName,l.snapshotNode))}),Ya(t,s,"child_removed",e,i,n),Ya(t,s,"child_added",e,i,n),Ya(t,s,"child_moved",r,i,n),Ya(t,s,"child_changed",e,i,n),Ya(t,s,"value",e,i,n),s}function Ya(t,e,n,i,s,r){const l=i.filter(o=>o.type===n);l.sort((o,u)=>Y5(t,o,u)),l.forEach(o=>{const u=V5(t,o,r);s.forEach(f=>{f.respondsTo(o.type)&&e.push(f.createEvent(u,t.query_))})})}function V5(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Y5(t,e,n){if(e.childName==null||n.childName==null)throw wa("Should only compare child_ events.");const i=new he(e.childName,e.snapshotNode),s=new he(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){return{eventCache:t,serverCache:e}}function _l(t,e,n,i){return ed(new us(e,n,i),t.serverCache)}function uw(t,e,n,i){return ed(t.eventCache,new us(e,n,i))}function hu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Zs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf;const K5=()=>(cf||(cf=new Bt(jR)),cf);class ze{static fromObject(e){let n=new ze(null);return bt(e,(i,s)=>{n=n.set(new ke(i),s)}),n}constructor(e,n=K5()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ee(),value:this.value};if(fe(e))return null;{const i=de(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(Me(e),n);return r!=null?{path:We(new ke(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=de(e),i=this.children.get(n);return i!==null?i.subtree(Me(e)):new ze(null)}}set(e,n){if(fe(e))return new ze(n,this.children);{const i=de(e),r=(this.children.get(i)||new ze(null)).set(Me(e),n),l=this.children.insert(i,r);return new ze(this.value,l)}}remove(e){if(fe(e))return this.children.isEmpty()?new ze(null):new ze(null,this.children);{const n=de(e),i=this.children.get(n);if(i){const s=i.remove(Me(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new ze(null):new ze(this.value,r)}else return this}}get(e){if(fe(e))return this.value;{const n=de(e),i=this.children.get(n);return i?i.get(Me(e)):null}}setTree(e,n){if(fe(e))return n;{const i=de(e),r=(this.children.get(i)||new ze(null)).setTree(Me(e),n);let l;return r.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,r),new ze(this.value,l)}}fold(e){return this.fold_(Ee(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(We(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ee(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(fe(e))return null;{const r=de(e),l=this.children.get(r);return l?l.findOnPath_(Me(e),We(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ee(),n)}foreachOnPath_(e,n,i){if(fe(e))return this;{this.value&&i(n,this.value);const s=de(e),r=this.children.get(s);return r?r.foreachOnPath_(Me(e),We(n,s),i):new ze(null)}}foreach(e){this.foreach_(Ee(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(We(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.writeTree_=e}static empty(){return new An(new ze(null))}}function wl(t,e,n){if(fe(e))return new An(new ze(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const l=Ct(s,e);return r=r.updateChild(l,n),new An(t.writeTree_.set(s,r))}else{const s=new ze(n),r=t.writeTree_.setTree(e,s);return new An(r)}}}function jh(t,e,n){let i=t;return bt(n,(s,r)=>{i=wl(i,We(e,s),r)}),i}function Ex(t,e){if(fe(e))return An.empty();{const n=t.writeTree_.setTree(e,new ze(null));return new An(n)}}function Ch(t,e){return ir(t,e)!=null}function ir(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function Sx(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(qe,(i,s)=>{e.push(new he(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new he(i,s.value))}),e}function ts(t,e){if(fe(e))return t;{const n=ir(t,e);return n!=null?new An(new ze(n)):new An(t.writeTree_.subtree(e))}}function Ih(t){return t.writeTree_.isEmpty()}function ia(t,e){return dw(Ee(),t.writeTree_,e)}function dw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(F(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=dw(We(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(We(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e){return mw(e,t)}function $5(t,e,n,i,s){F(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=wl(t.visibleWrites,e,n)),t.lastWriteId=i}function q5(t,e,n,i){F(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=jh(t.visibleWrites,e,n),t.lastWriteId=i}function W5(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function Z5(t,e){const n=t.allWrites.findIndex(o=>o.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,l=t.allWrites.length-1;for(;s&&l>=0;){const o=t.allWrites[l];o.visible&&(l>=n&&Q5(o,i.path)?s=!1:pn(i.path,o.path)&&(r=!0)),l--}if(s){if(r)return X5(t),!0;if(i.snap)t.visibleWrites=Ex(t.visibleWrites,i.path);else{const o=i.children;bt(o,u=>{t.visibleWrites=Ex(t.visibleWrites,We(i.path,u))})}return!0}else return!1}function Q5(t,e){if(t.snap)return pn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pn(We(t.path,n),e))return!0;return!1}function X5(t){t.visibleWrites=fw(t.allWrites,J5,Ee()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function J5(t){return t.visible}function fw(t,e,n){let i=An.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const l=r.path;let o;if(r.snap)pn(n,l)?(o=Ct(n,l),i=wl(i,o,r.snap)):pn(l,n)&&(o=Ct(l,n),i=wl(i,Ee(),r.snap.getChild(o)));else if(r.children){if(pn(n,l))o=Ct(n,l),i=jh(i,o,r.children);else if(pn(l,n))if(o=Ct(l,n),fe(o))i=jh(i,Ee(),r.children);else{const u=Xr(r.children,de(o));if(u){const f=u.getChild(Me(o));i=wl(i,Ee(),f)}}}else throw wa("WriteRecord should have .snap or .children")}}return i}function hw(t,e,n,i,s){if(!i&&!s){const r=ir(t.visibleWrites,e);if(r!=null)return r;{const l=ts(t.visibleWrites,e);if(Ih(l))return n;if(n==null&&!Ch(l,Ee()))return null;{const o=n||re.EMPTY_NODE;return ia(l,o)}}}else{const r=ts(t.visibleWrites,e);if(!s&&Ih(r))return n;if(!s&&n==null&&!Ch(r,Ee()))return null;{const l=function(f){return(f.visible||s)&&(!i||!~i.indexOf(f.writeId))&&(pn(f.path,e)||pn(e,f.path))},o=fw(t.allWrites,l,e),u=n||re.EMPTY_NODE;return ia(o,u)}}}function ej(t,e,n){let i=re.EMPTY_NODE;const s=ir(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(qe,(r,l)=>{i=i.updateImmediateChild(r,l)}),i;if(n){const r=ts(t.visibleWrites,e);return n.forEachChild(qe,(l,o)=>{const u=ia(ts(r,new ke(l)),o);i=i.updateImmediateChild(l,u)}),Sx(r).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const r=ts(t.visibleWrites,e);return Sx(r).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function tj(t,e,n,i,s){F(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=We(e,n);if(Ch(t.visibleWrites,r))return null;{const l=ts(t.visibleWrites,r);return Ih(l)?s.getChild(n):ia(l,s.getChild(n))}}function nj(t,e,n,i){const s=We(e,n),r=ir(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const l=ts(t.visibleWrites,s);return ia(l,i.getNode().getImmediateChild(n))}else return null}function ij(t,e){return ir(t.visibleWrites,e)}function sj(t,e,n,i,s,r,l){let o;const u=ts(t.visibleWrites,e),f=ir(u,Ee());if(f!=null)o=f;else if(n!=null)o=ia(u,n);else return[];if(o=o.withIndex(l),!o.isEmpty()&&!o.isLeafNode()){const h=[],c=l.getCompare(),d=r?o.getReverseIteratorFrom(i,l):o.getIteratorFrom(i,l);let p=d.getNext();for(;p&&h.length<s;)c(p,i)!==0&&h.push(p),p=d.getNext();return h}else return[]}function rj(){return{visibleWrites:An.empty(),allWrites:[],lastWriteId:-1}}function pu(t,e,n,i){return hw(t.writeTree,t.treePath,e,n,i)}function vm(t,e){return ej(t.writeTree,t.treePath,e)}function Ax(t,e,n,i){return tj(t.writeTree,t.treePath,e,n,i)}function mu(t,e){return ij(t.writeTree,We(t.treePath,e))}function aj(t,e,n,i,s,r){return sj(t.writeTree,t.treePath,e,n,i,s,r)}function ym(t,e,n){return nj(t.writeTree,t.treePath,e,n)}function pw(t,e){return mw(We(t.treePath,e),t.writeTree)}function mw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,ql(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,$l(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ta(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,ql(i,e.snapshotNode,s.oldSnap));else throw wa("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const gw=new oj;class _m{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new us(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ym(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Zs(this.viewCache_),r=aj(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t){return{filter:t}}function uj(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function dj(t,e,n,i,s){const r=new lj;let l,o;if(n.type===Sn.OVERWRITE){const f=n;f.source.fromUser?l=Oh(t,e,f.path,f.snap,i,s,r):(F(f.source.fromServer,"Unknown source."),o=f.source.tagged||e.serverCache.isFiltered()&&!fe(f.path),l=gu(t,e,f.path,f.snap,i,s,o,r))}else if(n.type===Sn.MERGE){const f=n;f.source.fromUser?l=hj(t,e,f.path,f.children,i,s,r):(F(f.source.fromServer,"Unknown source."),o=f.source.tagged||e.serverCache.isFiltered(),l=Lh(t,e,f.path,f.children,i,s,o,r))}else if(n.type===Sn.ACK_USER_WRITE){const f=n;f.revert?l=gj(t,e,f.path,i,s,r):l=pj(t,e,f.path,f.affectedTree,i,s,r)}else if(n.type===Sn.LISTEN_COMPLETE)l=mj(t,e,n.path,i,r);else throw wa("Unknown operation type: "+n.type);const u=r.getChanges();return fj(e,l,u),{viewCache:l,changes:u}}function fj(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=hu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(cw(hu(e)))}}function xw(t,e,n,i,s,r){const l=e.eventCache;if(mu(i,n)!=null)return e;{let o,u;if(fe(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Zs(e),h=f instanceof re?f:re.EMPTY_NODE,c=vm(i,h);o=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const f=pu(i,Zs(e));o=t.filter.updateFullNode(e.eventCache.getNode(),f,r)}else{const f=de(n);if(f===".priority"){F(cs(n)===1,"Can't have a priority with additional path components");const h=l.getNode();u=e.serverCache.getNode();const c=Ax(i,n,h,u);c!=null?o=t.filter.updatePriority(h,c):o=l.getNode()}else{const h=Me(n);let c;if(l.isCompleteForChild(f)){u=e.serverCache.getNode();const d=Ax(i,n,l.getNode(),u);d!=null?c=l.getNode().getImmediateChild(f).updateChild(h,d):c=l.getNode().getImmediateChild(f)}else c=ym(i,f,e.serverCache);c!=null?o=t.filter.updateChild(l.getNode(),f,c,h,s,r):o=l.getNode()}}return _l(e,o,l.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function gu(t,e,n,i,s,r,l,o){const u=e.serverCache;let f;const h=l?t.filter:t.filter.getIndexedFilter();if(fe(n))f=h.updateFullNode(u.getNode(),i,null);else if(h.filtersNodes()&&!u.isFiltered()){const p=u.getNode().updateChild(n,i);f=h.updateFullNode(u.getNode(),p,null)}else{const p=de(n);if(!u.isCompleteForPath(n)&&cs(n)>1)return e;const x=Me(n),b=u.getNode().getImmediateChild(p).updateChild(x,i);p===".priority"?f=h.updatePriority(u.getNode(),b):f=h.updateChild(u.getNode(),p,b,x,gw,null)}const c=uw(e,f,u.isFullyInitialized()||fe(n),h.filtersNodes()),d=new _m(s,c,r);return xw(t,c,n,s,d,o)}function Oh(t,e,n,i,s,r,l){const o=e.eventCache;let u,f;const h=new _m(s,e,r);if(fe(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,l),u=_l(e,f,!0,t.filter.filtersNodes());else{const c=de(n);if(c===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),u=_l(e,f,o.isFullyInitialized(),o.isFiltered());else{const d=Me(n),p=o.getNode().getImmediateChild(c);let x;if(fe(d))x=i;else{const v=h.getCompleteChild(c);v!=null?cm(d)===".priority"&&v.getChild(tw(d)).isEmpty()?x=v:x=v.updateChild(d,i):x=re.EMPTY_NODE}if(p.equals(x))u=e;else{const v=t.filter.updateChild(o.getNode(),c,x,d,h,l);u=_l(e,v,o.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function kx(t,e){return t.eventCache.isCompleteForChild(e)}function hj(t,e,n,i,s,r,l){let o=e;return i.foreach((u,f)=>{const h=We(n,u);kx(e,de(h))&&(o=Oh(t,o,h,f,s,r,l))}),i.foreach((u,f)=>{const h=We(n,u);kx(e,de(h))||(o=Oh(t,o,h,f,s,r,l))}),o}function Tx(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Lh(t,e,n,i,s,r,l,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,f;fe(n)?f=i:f=new ze(null).setTree(n,i);const h=e.serverCache.getNode();return f.children.inorderTraversal((c,d)=>{if(h.hasChild(c)){const p=e.serverCache.getNode().getImmediateChild(c),x=Tx(t,p,d);u=gu(t,u,new ke(c),x,s,r,l,o)}}),f.children.inorderTraversal((c,d)=>{const p=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!h.hasChild(c)&&!p){const x=e.serverCache.getNode().getImmediateChild(c),v=Tx(t,x,d);u=gu(t,u,new ke(c),v,s,r,l,o)}}),u}function pj(t,e,n,i,s,r,l){if(mu(s,n)!=null)return e;const o=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if(fe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return gu(t,e,n,u.getNode().getChild(n),s,r,o,l);if(fe(n)){let f=new ze(null);return u.getNode().forEachChild(Us,(h,c)=>{f=f.set(new ke(h),c)}),Lh(t,e,n,f,s,r,o,l)}else return e}else{let f=new ze(null);return i.foreach((h,c)=>{const d=We(n,h);u.isCompleteForPath(d)&&(f=f.set(h,u.getNode().getChild(d)))}),Lh(t,e,n,f,s,r,o,l)}}function mj(t,e,n,i,s){const r=e.serverCache,l=uw(e,r.getNode(),r.isFullyInitialized()||fe(n),r.isFiltered());return xw(t,l,n,i,gw,s)}function gj(t,e,n,i,s,r){let l;if(mu(i,n)!=null)return e;{const o=new _m(i,e,s),u=e.eventCache.getNode();let f;if(fe(n)||de(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=pu(i,Zs(e));else{const c=e.serverCache.getNode();F(c instanceof re,"serverChildren would be complete if leaf node"),h=vm(i,c)}h=h,f=t.filter.updateFullNode(u,h,r)}else{const h=de(n);let c=ym(i,h,e.serverCache);c==null&&e.serverCache.isCompleteForChild(h)&&(c=u.getImmediateChild(h)),c!=null?f=t.filter.updateChild(u,h,c,Me(n),o,r):e.eventCache.getNode().hasChild(h)?f=t.filter.updateChild(u,h,re.EMPTY_NODE,Me(n),o,r):f=u,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=pu(i,Zs(e)),l.isLeafNode()&&(f=t.filter.updateFullNode(f,l,r)))}return l=e.serverCache.isFullyInitialized()||mu(i,Ee())!=null,_l(e,f,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new pm(i.getIndex()),r=O5(i);this.processor_=cj(r);const l=n.serverCache,o=n.eventCache,u=s.updateFullNode(re.EMPTY_NODE,l.getNode(),null),f=r.updateFullNode(re.EMPTY_NODE,o.getNode(),null),h=new us(u,l.isFullyInitialized(),s.filtersNodes()),c=new us(f,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=ed(c,h),this.eventGenerator_=new G5(this.query_)}get query(){return this.query_}}function bj(t){return t.viewCache_.serverCache.getNode()}function vj(t){return hu(t.viewCache_)}function yj(t,e){const n=Zs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(de(e)).isEmpty())?n.getChild(e):null}function Rx(t){return t.eventRegistrations_.length===0}function _j(t,e){t.eventRegistrations_.push(e)}function jx(t,e,n){const i=[];if(n){F(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const l=r.createCancelEvent(n,s);l&&i.push(l)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const l=t.eventRegistrations_[r];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function Cx(t,e,n,i){e.type===Sn.MERGE&&e.source.queryId!==null&&(F(Zs(t.viewCache_),"We should always have a full cache before handling merges"),F(hu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=dj(t.processor_,s,e,n,i);return uj(t.processor_,r.viewCache),F(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,bw(t,r.changes,r.viewCache.eventCache.getNode(),null)}function wj(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qe,(r,l)=>{i.push(ta(r,l))}),n.isFullyInitialized()&&i.push(cw(n.getNode())),bw(t,i,n.getNode(),e)}function bw(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return F5(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;class vw{constructor(){this.views=new Map}}function Nj(t){F(!xu,"__referenceConstructor has already been defined"),xu=t}function Ej(){return F(xu,"Reference.ts has not been loaded"),xu}function Sj(t){return t.views.size===0}function wm(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return F(r!=null,"SyncTree gave us an op for an invalid query."),Cx(r,e,n,i)}else{let r=[];for(const l of t.views.values())r=r.concat(Cx(l,e,n,i));return r}}function yw(t,e,n,i,s){const r=e._queryIdentifier,l=t.views.get(r);if(!l){let o=pu(n,s?i:null),u=!1;o?u=!0:i instanceof re?(o=vm(n,i),u=!1):(o=re.EMPTY_NODE,u=!1);const f=ed(new us(o,u,!1),new us(i,s,!1));return new xj(e,f)}return l}function Aj(t,e,n,i,s,r){const l=yw(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),_j(l,n),wj(l,n)}function kj(t,e,n,i){const s=e._queryIdentifier,r=[];let l=[];const o=ds(t);if(s==="default")for(const[u,f]of t.views.entries())l=l.concat(jx(f,n,i)),Rx(f)&&(t.views.delete(u),f.query._queryParams.loadsAllData()||r.push(f.query));else{const u=t.views.get(s);u&&(l=l.concat(jx(u,n,i)),Rx(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||r.push(u.query)))}return o&&!ds(t)&&r.push(new(Ej())(e._repo,e._path)),{removed:r,events:l}}function _w(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ns(t,e){let n=null;for(const i of t.views.values())n=n||yj(i,e);return n}function ww(t,e){if(e._queryParams.loadsAllData())return nd(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Nw(t,e){return ww(t,e)!=null}function ds(t){return nd(t)!=null}function nd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu;function Tj(t){F(!bu,"__referenceConstructor has already been defined"),bu=t}function Rj(){return F(bu,"Reference.ts has not been loaded"),bu}let jj=1;class Ix{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ze(null),this.pendingWriteTree_=rj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ew(t,e,n,i,s){return $5(t.pendingWriteTree_,e,n,i,s),s?Ra(t,new Ws(gm(),e,n)):[]}function Cj(t,e,n,i){q5(t.pendingWriteTree_,e,n,i);const s=ze.fromObject(n);return Ra(t,new na(gm(),e,s))}function Hi(t,e,n=!1){const i=W5(t.pendingWriteTree_,e);if(Z5(t.pendingWriteTree_,e)){let r=new ze(null);return i.snap!=null?r=r.set(Ee(),!0):bt(i.children,l=>{r=r.set(new ke(l),!0)}),Ra(t,new fu(i.path,r,n))}else return[]}function yo(t,e,n){return Ra(t,new Ws(xm(),e,n))}function Ij(t,e,n){const i=ze.fromObject(n);return Ra(t,new na(xm(),e,i))}function Oj(t,e){return Ra(t,new Zl(xm(),e))}function Lj(t,e,n){const i=Em(t,n);if(i){const s=Sm(i),r=s.path,l=s.queryId,o=Ct(r,e),u=new Zl(bm(l),o);return Am(t,r,u)}else return[]}function vu(t,e,n,i,s=!1){const r=e._path,l=t.syncPointTree_.get(r);let o=[];if(l&&(e._queryIdentifier==="default"||Nw(l,e))){const u=kj(l,e,n,i);Sj(l)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const f=u.removed;if(o=u.events,!s){const h=f.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(r,(d,p)=>ds(p));if(h&&!c){const d=t.syncPointTree_.subtree(r);if(!d.isEmpty()){const p=Pj(d);for(let x=0;x<p.length;++x){const v=p[x],b=v.query,m=Tw(t,v);t.listenProvider_.startListening(Nl(b),Ql(t,b),m.hashFn,m.onComplete)}}}!c&&f.length>0&&!i&&(h?t.listenProvider_.stopListening(Nl(e),null):f.forEach(d=>{const p=t.queryToTagMap.get(id(d));t.listenProvider_.stopListening(Nl(d),p)}))}Uj(t,f)}return o}function Sw(t,e,n,i){const s=Em(t,i);if(s!=null){const r=Sm(s),l=r.path,o=r.queryId,u=Ct(l,e),f=new Ws(bm(o),u,n);return Am(t,l,f)}else return[]}function Mj(t,e,n,i){const s=Em(t,i);if(s){const r=Sm(s),l=r.path,o=r.queryId,u=Ct(l,e),f=ze.fromObject(n),h=new na(bm(o),u,f);return Am(t,l,h)}else return[]}function Mh(t,e,n,i=!1){const s=e._path;let r=null,l=!1;t.syncPointTree_.foreachOnPath(s,(d,p)=>{const x=Ct(d,s);r=r||ns(p,x),l=l||ds(p)});let o=t.syncPointTree_.get(s);o?(l=l||ds(o),r=r||ns(o,Ee())):(o=new vw,t.syncPointTree_=t.syncPointTree_.set(s,o));let u;r!=null?u=!0:(u=!1,r=re.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,x)=>{const v=ns(x,Ee());v&&(r=r.updateImmediateChild(p,v))}));const f=Nw(o,e);if(!f&&!e._queryParams.loadsAllData()){const d=id(e);F(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const p=zj();t.queryToTagMap.set(d,p),t.tagToQueryMap.set(p,d)}const h=td(t.pendingWriteTree_,s);let c=Aj(o,e,n,h,r,u);if(!f&&!l&&!i){const d=ww(o,e);c=c.concat(Bj(t,e,d))}return c}function Nm(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(l,o)=>{const u=Ct(l,e),f=ns(o,u);if(f)return f});return hw(s,e,r,n,!0)}function Dj(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(f,h)=>{const c=Ct(f,n);i=i||ns(h,c)});let s=t.syncPointTree_.get(n);s?i=i||ns(s,Ee()):(s=new vw,t.syncPointTree_=t.syncPointTree_.set(n,s));const r=i!=null,l=r?new us(i,!0,!1):null,o=td(t.pendingWriteTree_,e._path),u=yw(s,e,o,r?l.getNode():re.EMPTY_NODE,r);return vj(u)}function Ra(t,e){return Aw(e,t.syncPointTree_,null,td(t.pendingWriteTree_,Ee()))}function Aw(t,e,n,i){if(fe(t.path))return kw(t,e,n,i);{const s=e.get(Ee());n==null&&s!=null&&(n=ns(s,Ee()));let r=[];const l=de(t.path),o=t.operationForChild(l),u=e.children.get(l);if(u&&o){const f=n?n.getImmediateChild(l):null,h=pw(i,l);r=r.concat(Aw(o,u,f,h))}return s&&(r=r.concat(wm(s,t,i,n))),r}}function kw(t,e,n,i){const s=e.get(Ee());n==null&&s!=null&&(n=ns(s,Ee()));let r=[];return e.children.inorderTraversal((l,o)=>{const u=n?n.getImmediateChild(l):null,f=pw(i,l),h=t.operationForChild(l);h&&(r=r.concat(kw(h,o,u,f)))}),s&&(r=r.concat(wm(s,t,i,n))),r}function Tw(t,e){const n=e.query,i=Ql(t,n);return{hashFn:()=>(bj(e)||re.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Lj(t,n._path,i):Oj(t,n._path);{const r=OR(s,n);return vu(t,n,null,r)}}}}function Ql(t,e){const n=id(e);return t.queryToTagMap.get(n)}function id(t){return t._path.toString()+"$"+t._queryIdentifier}function Em(t,e){return t.tagToQueryMap.get(e)}function Sm(t){const e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function Am(t,e,n){const i=t.syncPointTree_.get(e);F(i,"Missing sync point for query tag that we're tracking");const s=td(t.pendingWriteTree_,e);return wm(i,n,s,null)}function Pj(t){return t.fold((e,n,i)=>{if(n&&ds(n))return[nd(n)];{let s=[];return n&&(s=_w(n)),bt(i,(r,l)=>{s=s.concat(l)}),s}})}function Nl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Rj())(t._repo,t._path):t}function Uj(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=id(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function zj(){return jj++}function Bj(t,e,n){const i=e._path,s=Ql(t,e),r=Tw(t,n),l=t.listenProvider_.startListening(Nl(e),s,r.hashFn,r.onComplete),o=t.syncPointTree_.subtree(i);if(s)F(!ds(o.value),"If we're adding a query, it shouldn't be shadowed");else{const u=o.fold((f,h,c)=>{if(!fe(f)&&h&&ds(h))return[nd(h).query];{let d=[];return h&&(d=d.concat(_w(h).map(p=>p.query))),bt(c,(p,x)=>{d=d.concat(x)}),d}});for(let f=0;f<u.length;++f){const h=u[f];t.listenProvider_.stopListening(Nl(h),Ql(t,h))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new km(n)}node(){return this.node_}}class Tm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new Tm(this.syncTree_,n)}node(){return Nm(this.syncTree_,this.path_)}}const Hj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ox=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Gj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Fj(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Gj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},Fj=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&F(!1,"Unexpected increment value: "+i);const s=e.node();if(F(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const l=s.getValue();return typeof l!="number"?i:l+i},Rw=function(t,e,n,i){return Rm(e,new Tm(n,t),i)},jw=function(t,e,n){return Rm(t,new km(e),n)};function Rm(t,e,n){const i=t.getPriority().val(),s=Ox(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const l=t,o=Ox(l.getValue(),e,n);return o!==l.getValue()||s!==l.getPriority().val()?new ft(o,Xe(s)):t}else{const l=t;return r=l,s!==l.getPriority().val()&&(r=r.updatePriority(new ft(s))),l.forEachChild(qe,(o,u)=>{const f=Rm(u,e.getImmediateChild(o),n);f!==u&&(r=r.updateImmediateChild(o,f))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Cm(t,e){let n=e instanceof ke?e:new ke(e),i=t,s=de(n);for(;s!==null;){const r=Xr(i.node.children,s)||{children:{},childCount:0};i=new jm(s,i,r),n=Me(n),s=de(n)}return i}function ja(t){return t.node.value}function Cw(t,e){t.node.value=e,Dh(t)}function Iw(t){return t.node.childCount>0}function Vj(t){return ja(t)===void 0&&!Iw(t)}function sd(t,e){bt(t.node.children,(n,i)=>{e(new jm(n,t,i))})}function Ow(t,e,n,i){n&&e(t),sd(t,s=>{Ow(s,e,!0)})}function Yj(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _o(t){return new ke(t.parent===null?t.name:_o(t.parent)+"/"+t.name)}function Dh(t){t.parent!==null&&Kj(t.parent,t.name,t)}function Kj(t,e,n){const i=Vj(n),s=Hn(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,Dh(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Dh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=/[\[\].#$\/\u0000-\u001F\u007F]/,qj=/[\[\].#$\u0000-\u001F\u007F]/,uf=10*1024*1024,Im=function(t){return typeof t=="string"&&t.length!==0&&!$j.test(t)},Lw=function(t){return typeof t=="string"&&t.length!==0&&!qj.test(t)},Wj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Lw(t)},yu=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Xu(t)||t&&typeof t=="object"&&Hn(t,".sv")},_u=function(t,e,n,i){i&&e===void 0||rd(Jr(t,"value"),e,n)},rd=function(t,e,n){const i=n instanceof ke?new h5(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Rs(i));if(typeof e=="function")throw new Error(t+"contains a function "+Rs(i)+" with contents = "+e.toString());if(Xu(e))throw new Error(t+"contains "+e.toString()+" "+Rs(i));if(typeof e=="string"&&e.length>uf/3&&qu(e)>uf)throw new Error(t+"contains a string greater than "+uf+" utf8 bytes "+Rs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(bt(e,(l,o)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(r=!0,!Im(l)))throw new Error(t+" contains an invalid key ("+l+") "+Rs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p5(i,l),rd(t,o,i),m5(i)}),s&&r)throw new Error(t+' contains ".value" child '+Rs(i)+" in addition to actual children.")}},Zj=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=Kl(i);for(let l=0;l<r.length;l++)if(!(r[l]===".priority"&&l===r.length-1)){if(!Im(r[l]))throw new Error(t+"contains an invalid key ("+r[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(f5);let s=null;for(n=0;n<e.length;n++){if(i=e[n],s!==null&&pn(s,i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},Mw=function(t,e,n,i){const s=Jr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const r=[];bt(e,(l,o)=>{const u=new ke(l);if(rd(s,o,We(n,u)),cm(u)===".priority"&&!yu(o))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(u)}),Zj(s,r)},Qj=function(t,e,n){if(Xu(e))throw new Error(Jr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yu(e))throw new Error(Jr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Om=function(t,e,n,i){if(!Lw(n))throw new Error(Jr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Xj=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Om(t,e,n)},Is=function(t,e){if(de(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Jj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Im(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Wj(n))throw new Error(Jr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ad(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!um(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function Dw(t,e,n){ad(t,n),Pw(t,i=>um(i,e))}function bn(t,e,n){ad(t,n),Pw(t,i=>pn(i,e)||pn(e,i))}function Pw(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(tC(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function tC(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();vl&&gt("event: "+n.toString()),ka(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="repo_interrupt",iC=25;class sC{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=du(),this.transactionQueueTree_=new jm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rC(t,e,n){if(t.stats_=lm(t.repoInfo_),t.forceRestClient_||PR())t.server_=new uu(t.repoInfo_,(i,s,r,l)=>{Lx(t,i,s,r,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Mx(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new oi(t.repoInfo_,e,(i,s,r,l)=>{Lx(t,i,s,r,l)},i=>{Mx(t,i)},i=>{aC(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=GR(t.repoInfo_,()=>new H5(t.stats_,t.server_)),t.infoData_=new D5,t.infoSyncTree_=new Ix({startListening:(i,s,r,l)=>{let o=[];const u=t.infoData_.getNode(i._path);return u.isEmpty()||(o=yo(t.infoSyncTree_,i._path,u),setTimeout(()=>{l("ok")},0)),o},stopListening:()=>{}}),Lm(t,"connected",!1),t.serverSyncTree_=new Ix({startListening:(i,s,r,l)=>(t.server_.listen(i,r,s,(o,u)=>{const f=l(o,u);bn(t.eventQueue_,i._path,f)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function Uw(t){const n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ld(t){return Hj({timestamp:Uw(t)})}function Lx(t,e,n,i,s){t.dataUpdateCount++;const r=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(s)if(i){const u=Jc(n,f=>Xe(f));l=Mj(t.serverSyncTree_,r,u,s)}else{const u=Xe(n);l=Sw(t.serverSyncTree_,r,u,s)}else if(i){const u=Jc(n,f=>Xe(f));l=Ij(t.serverSyncTree_,r,u)}else{const u=Xe(n);l=yo(t.serverSyncTree_,r,u)}let o=r;l.length>0&&(o=sa(t,r)),bn(t.eventQueue_,o,l)}function Mx(t,e){Lm(t,"connected",e),e===!1&&uC(t)}function aC(t,e){bt(e,(n,i)=>{Lm(t,n,i)})}function Lm(t,e,n){const i=new ke("/.info/"+e),s=Xe(n);t.infoData_.updateSnapshot(i,s);const r=yo(t.infoSyncTree_,i,s);bn(t.eventQueue_,i,r)}function Mm(t){return t.nextWriteId_++}function lC(t,e,n){const i=Dj(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(s=>{const r=Xe(s).withIndex(e._queryParams.getIndex());Mh(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=yo(t.serverSyncTree_,e._path,r);else{const o=Ql(t.serverSyncTree_,e);l=Sw(t.serverSyncTree_,e._path,r,o)}return bn(t.eventQueue_,e._path,l),vu(t.serverSyncTree_,e,n,null,!0),r},s=>(wo(t,"get for query "+ot(e)+" failed: "+s),Promise.reject(new Error(s))))}function oC(t,e,n,i,s){wo(t,"set",{path:e.toString(),value:n,priority:i});const r=ld(t),l=Xe(n,i),o=Nm(t.serverSyncTree_,e),u=jw(l,o,r),f=Mm(t),h=Ew(t.serverSyncTree_,e,u,f,!0);ad(t.eventQueue_,h),t.server_.put(e.toString(),l.val(!0),(d,p)=>{const x=d==="ok";x||It("set at "+e+" failed: "+d);const v=Hi(t.serverSyncTree_,f,!x);bn(t.eventQueue_,e,v),fs(t,s,d,p)});const c=Pm(t,e);sa(t,c),bn(t.eventQueue_,c,[])}function cC(t,e,n,i){wo(t,"update",{path:e.toString(),value:n});let s=!0;const r=ld(t),l={};if(bt(n,(o,u)=>{s=!1,l[o]=Rw(We(e,o),Xe(u),t.serverSyncTree_,r)}),s)gt("update() called with empty data.  Don't do anything."),fs(t,i,"ok",void 0);else{const o=Mm(t),u=Cj(t.serverSyncTree_,e,l,o);ad(t.eventQueue_,u),t.server_.merge(e.toString(),n,(f,h)=>{const c=f==="ok";c||It("update at "+e+" failed: "+f);const d=Hi(t.serverSyncTree_,o,!c),p=d.length>0?sa(t,e):e;bn(t.eventQueue_,p,d),fs(t,i,f,h)}),bt(n,f=>{const h=Pm(t,We(e,f));sa(t,h)}),bn(t.eventQueue_,e,[])}}function uC(t){wo(t,"onDisconnectEvents");const e=ld(t),n=du();Rh(t.onDisconnect_,Ee(),(s,r)=>{const l=Rw(s,r,t.serverSyncTree_,e);Ta(n,s,l)});let i=[];Rh(n,Ee(),(s,r)=>{i=i.concat(yo(t.serverSyncTree_,s,r));const l=Pm(t,s);sa(t,l)}),t.onDisconnect_=du(),bn(t.eventQueue_,Ee(),i)}function dC(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,s)=>{i==="ok"&&Th(t.onDisconnect_,e),fs(t,n,i,s)})}function Dx(t,e,n,i){const s=Xe(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(r,l)=>{r==="ok"&&Ta(t.onDisconnect_,e,s),fs(t,i,r,l)})}function fC(t,e,n,i,s){const r=Xe(n,i);t.server_.onDisconnectPut(e.toString(),r.val(!0),(l,o)=>{l==="ok"&&Ta(t.onDisconnect_,e,r),fs(t,s,l,o)})}function hC(t,e,n,i){if(Xc(n)){gt("onDisconnect().update() called with empty data.  Don't do anything."),fs(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,r)=>{s==="ok"&&bt(n,(l,o)=>{const u=Xe(o);Ta(t.onDisconnect_,We(e,l),u)}),fs(t,i,s,r)})}function pC(t,e,n){let i;de(e._path)===".info"?i=Mh(t.infoSyncTree_,e,n):i=Mh(t.serverSyncTree_,e,n),Dw(t.eventQueue_,e._path,i)}function Ph(t,e,n){let i;de(e._path)===".info"?i=vu(t.infoSyncTree_,e,n):i=vu(t.serverSyncTree_,e,n),Dw(t.eventQueue_,e._path,i)}function mC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(nC)}function wo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),gt(n,...e)}function fs(t,e,n,i){e&&ka(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const l=new Error(r);l.code=s,e(l)}})}function zw(t,e,n){return Nm(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function Dm(t,e=t.transactionQueueTree_){if(e||od(t,e),ja(e)){const n=Hw(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&gC(t,_o(e),n)}else Iw(e)&&sd(e,n=>{Dm(t,n)})}function gC(t,e,n){const i=n.map(f=>f.currentWriteId),s=zw(t,e,i);let r=s;const l=s.hash();for(let f=0;f<n.length;f++){const h=n[f];F(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const c=Ct(e,h.path);r=r.updateChild(c,h.currentOutputSnapshotRaw)}const o=r.val(!0),u=e;t.server_.put(u.toString(),o,f=>{wo(t,"transaction put response",{path:u.toString(),status:f});let h=[];if(f==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Hi(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();od(t,Cm(t.transactionQueueTree_,e)),Dm(t,t.transactionQueueTree_),bn(t.eventQueue_,e,h);for(let d=0;d<c.length;d++)ka(c[d])}else{if(f==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{It("transaction at "+u.toString()+" failed: "+f);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=f}sa(t,e)}},l)}function sa(t,e){const n=Bw(t,e),i=_o(n),s=Hw(t,n);return xC(t,s,i),i}function xC(t,e,n){if(e.length===0)return;const i=[];let s=[];const l=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const u=e[o],f=Ct(n,u.path);let h=!1,c;if(F(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,c=u.abortReason,s=s.concat(Hi(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=iC)h=!0,c="maxretry",s=s.concat(Hi(t.serverSyncTree_,u.currentWriteId,!0));else{const d=zw(t,u.path,l);u.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){rd("transaction failed: Data returned ",p,u.path);let x=Xe(p);typeof p=="object"&&p!=null&&Hn(p,".priority")||(x=x.updatePriority(d.getPriority()));const b=u.currentWriteId,m=ld(t),g=jw(x,d,m);u.currentOutputSnapshotRaw=x,u.currentOutputSnapshotResolved=g,u.currentWriteId=Mm(t),l.splice(l.indexOf(b),1),s=s.concat(Ew(t.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally)),s=s.concat(Hi(t.serverSyncTree_,b,!0))}else h=!0,c="nodata",s=s.concat(Hi(t.serverSyncTree_,u.currentWriteId,!0))}bn(t.eventQueue_,n,s),s=[],h&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(c==="nodata"?i.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):i.push(()=>e[o].onComplete(new Error(c),!1,null))))}od(t,t.transactionQueueTree_);for(let o=0;o<i.length;o++)ka(i[o]);Dm(t,t.transactionQueueTree_)}function Bw(t,e){let n,i=t.transactionQueueTree_;for(n=de(e);n!==null&&ja(i)===void 0;)i=Cm(i,n),e=Me(e),n=de(e);return i}function Hw(t,e){const n=[];return Gw(t,e,n),n.sort((i,s)=>i.order-s.order),n}function Gw(t,e,n){const i=ja(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);sd(e,s=>{Gw(t,s,n)})}function od(t,e){const n=ja(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,Cw(e,n.length>0?n:void 0)}sd(e,i=>{od(t,i)})}function Pm(t,e){const n=_o(Bw(t,e)),i=Cm(t.transactionQueueTree_,e);return Yj(i,s=>{df(t,s)}),df(t,i),Ow(i,s=>{df(t,s)}),n}function df(t,e){const n=ja(e);if(n){const i=[];let s=[],r=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(F(r===l-1,"All SENT items should be at beginning of queue."),r=l,n[l].status=3,n[l].abortReason="set"):(F(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),s=s.concat(Hi(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Cw(e,void 0):n.length=r+1,bn(t.eventQueue_,_o(e),s);for(let l=0;l<i.length;l++)ka(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function vC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):It(`Invalid query segment '${n}' in query '${t}'`)}return e}const Px=function(t,e){const n=yC(t),i=n.namespace;n.domain==="firebase.com"&&xi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||TR();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new K1(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new ke(n.pathString)}},yC=function(t){let e="",n="",i="",s="",r="",l=!0,o="https",u=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(o=t.substring(0,f-1),t=t.substring(f+2));let h=t.indexOf("/");h===-1&&(h=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(h,c)),h<c&&(s=bC(t.substring(h,c)));const d=vC(t.substring(Math.min(t.length,c)));f=e.indexOf(":"),f>=0?(l=o==="https"||o==="wss",u=parseInt(e.substring(f+1),10)):f=e.length;const p=e.slice(0,f);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const x=e.indexOf(".");i=e.substring(0,x).toLowerCase(),n=e.substring(x+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:l,scheme:o,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_C=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let s;const r=new Array(8);for(s=7;s>=0;s--)r[s]=Ux.charAt(n%64),n=Math.floor(n/64);F(n===0,"Cannot push at time == 0");let l=r.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=Ux.charAt(e[s]);return F(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class Vw{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return F(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new jn;return dC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Is("OnDisconnect.remove",this._path);const e=new jn;return Dx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Is("OnDisconnect.set",this._path),_u("OnDisconnect.set",e,this._path,!1);const n=new jn;return Dx(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Is("OnDisconnect.setWithPriority",this._path),_u("OnDisconnect.setWithPriority",e,this._path,!1),Qj("OnDisconnect.setWithPriority",n);const i=new jn;return fC(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){Is("OnDisconnect.update",this._path),Mw("OnDisconnect.update",e,this._path);const n=new jn;return hC(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return fe(this._path)?null:cm(this._path)}get ref(){return new Gn(this._repo,this._path)}get _queryIdentifier(){const e=wx(this._queryParams),n=rm(e);return n==="{}"?"default":n}get _queryObject(){return wx(this._queryParams)}isEqual(e){if(e=vt(e),!(e instanceof No))return!1;const n=this._repo===e._repo,i=um(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+d5(this._path)}}function NC(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function EC(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Us){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==qs)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==os)throw new Error(i);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===qe){if(e!=null&&!yu(e)||n!=null&&!yu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(F(t.getIndex()instanceof hm||t.getIndex()===ow,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Gn extends No{constructor(e,n){super(e,n,new mm,!1)}get parent(){const e=tw(this._path);return e===null?null:new Gn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ra{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ke(e),i=aa(this.ref,e);return new ra(this._node.getChild(n),i,qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new ra(s,aa(this.ref,i),qe)))}hasChild(e){const n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ve(t,e){return t=vt(t),t._checkNotDeleted("ref"),e!==void 0?aa(t._root,e):t._root}function aa(t,e){return t=vt(t),de(t._path)===null?Xj("child","path",e):Om("child","path",e),new Gn(t._repo,We(t._path,e))}function zm(t){return t=vt(t),new wC(t._repo,t._path)}function Bm(t,e){t=vt(t),Is("push",t._path),_u("push",e,t._path,!0);const n=Uw(t._repo),i=_C(n),s=aa(t,i),r=aa(t,i);let l;return l=Promise.resolve(r),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function la(t){return Is("remove",t._path),ys(t,null)}function ys(t,e){t=vt(t),Is("set",t._path),_u("set",e,t._path,!1);const n=new jn;return oC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function bi(t,e){Mw("update",e,t._path);const n=new jn;return cC(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function wu(t){t=vt(t);const e=new Um(()=>{}),n=new Eo(e);return lC(t._repo,t,n).then(i=>new ra(i,new Gn(t._repo,t._path),t._queryParams.getIndex()))}class Eo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new Fw("value",this,new ra(e.snapshotNode,new Gn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vw(this,e,n):null}matches(e){return e instanceof Eo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class cd{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vw(this,e,n):null}createEvent(e,n){F(e.childName!=null,"Child events should have a childName.");const i=aa(new Gn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new Fw(e.type,this,new ra(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof cd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Yw(t,e,n,i,s){let r;if(typeof i=="object"&&(r=void 0,s=i),typeof i=="function"&&(r=i),s&&s.onlyOnce){const u=n,f=(h,c)=>{Ph(t._repo,t,o),u(h,c)};f.userCallback=n.userCallback,f.context=n.context,n=f}const l=new Um(n,r||void 0),o=e==="value"?new Eo(l):new cd(e,l);return pC(t._repo,t,o),()=>Ph(t._repo,t,o)}function Un(t,e,n,i){return Yw(t,"value",e,n,i)}function Kw(t,e,n,i){return Yw(t,"child_added",e,n,i)}function Tr(t,e,n){let i=null;const s=n?new Um(n):null;e==="value"?i=new Eo(s):e&&(i=new cd(e,s)),Ph(t._repo,t,i)}class $w{}class SC extends $w{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,L5(e._queryParams,this._limit),e._orderByCalled)}}function Nu(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new SC(t)}class AC extends $w{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){NC(e,"orderByChild");const n=new ke(this._path);if(fe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new hm(n),s=M5(e._queryParams,i);return EC(s),new No(e._repo,e._path,s,!0)}}function qw(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Om("orderByChild","path",t),new AC(t)}function Eu(t,...e){let n=vt(t);for(const i of e)n=i._apply(n);return n}Nj(Gn);Tj(Gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="FIREBASE_DATABASE_EMULATOR_HOST",Uh={};let TC=!1;function RC(t,e,n,i){const s=e.lastIndexOf(":"),r=e.substring(0,s),l=Na(r);t.repoInfo_=new K1(e,l,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(t.authTokenProvider_=i)}function jC(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Px(r,s),o=l.repoInfo,u;typeof process<"u"&&sx&&(u=sx[kC]),u?(r=`http://${u}?ns=${o.namespace}`,l=Px(r,s),o=l.repoInfo):l.repoInfo.secure;const f=new zR(t.name,t.options,e);Jj("Invalid Firebase Database URL",l),fe(l.path)||xi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=IC(o,t,f,new UR(t,n));return new OC(h,t)}function CC(t,e){const n=Uh[e];(!n||n[t.key]!==t)&&xi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mC(t),delete n[t.key]}function IC(t,e,n,i){let s=Uh[e.name];s||(s={},Uh[e.name]=s);let r=s[t.toURLString()];return r&&xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new sC(t,TC,n,i),s[t.toURLString()]=r,r}class OC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gn(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&xi("Cannot call "+e+" on a deleted database.")}}function LC(t=q_(),e){const n=Zp(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=OS("database");i&&MC(n,...i)}return n}function MC(t,e,n,i={}){t=vt(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Ys(i,r.repoInfo_.emulatorOptions))return;xi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&xi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new vc(vc.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:LS(i.mockUserToken,t.app.options.projectId);l=new vc(o)}Na(e)&&(H_(e),G_("Database",!0)),RC(r,s,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){wR(Sa),ea(new Ks("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return jC(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),es(rx,ax,t),es(rx,ax,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={".sv":"timestamp"};function sr(){return PC}function Rr(t){return{".sv":{increment:t}}}oi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};DC();var UC="firebase",zC="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(UC,zC,"app");const BC={apiKey:"AIzaSyDS0Hr4x2FRA-_bDkYJyB12zxf27e32ChQ",authDomain:"rhymelife00.firebaseapp.com",databaseURL:"https://rhymelife00-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"rhymelife00",storageBucket:"rhymelife00.firebasestorage.app",messagingSenderId:"36128275638",appId:"1:36128275638:web:faef5af5a0e4b3b44cfa17"},Ww=$_(BC),ye=LC(Ww),Et=yR(Ww),HC=t=>oT(Et,t),GC=async()=>eT(Et),FC=async(t,e)=>sT(Et,t,e),VC=async(t,e)=>rT(Et,t,e),YC=async()=>cT(Et),Ka=async(t,e)=>{try{const n=ve(ye,`users/${t}/stats`),i=JSON.parse(JSON.stringify(e));await bi(n,i);const s=ve(ye,`public_users/${t}`),r=Math.max(0,e.monthly_listeners||0),l=Math.floor(Math.sqrt(r)/100)+1;await bi(s,{name:e.name,monthly_listeners:r,level:l,lastActive:Date.now()})}catch(n){console.error("Cloud save failed",n)}},KC="/.netlify/functions/getMusic",$C="https://itunes.apple.com/search",El=t=>[...t].sort(()=>Math.random()-.5),zh=async(t,e=25)=>{if(!t||t.trim()==="")return[];let n=null;try{const i=`${KC}?term=${encodeURIComponent(t)}&limit=${e}`,s=await fetch(i);if(s.ok)n=await s.json();else throw new Error(`Proxy returned ${s.status}`)}catch(i){console.warn("Proxy unavailable, switching to Direct API...",i);try{const s=`${$C}?term=${encodeURIComponent(t)}&media=music&entity=song&limit=${e}&country=TR&lang=tr_tr`,r=await fetch(s);if(!r.ok)throw new Error(`Direct API returned ${r.status}`);n=await r.json()}catch(s){return console.error("Music Fetch Failed completely:",s),[]}}return!n||!n.results||n.resultCount===0?[]:n.results.filter(i=>i.wrapperType==="track"&&i.kind==="song"&&i.previewUrl&&i.artworkUrl100).map(i=>({trackId:i.trackId,artistName:i.artistName,trackName:i.trackName,releaseYear:new Date(i.releaseDate).getFullYear(),previewUrl:i.previewUrl.replace("http:","https:"),artworkUrl100:i.artworkUrl100.replace("http:","https:").replace("100x100","600x600")}))},oa=async()=>{const t=[{query:"turkce rap",strict:!1},{query:"turkish hip hop",strict:!1},{query:"sagopa kajmer",strict:!0},{query:"ceza",strict:!0},{query:"motive",strict:!0},{query:"uzi",strict:!0},{query:"sefo",strict:!0},{query:"lvbel c5",strict:!0},{query:"cakal",strict:!0},{query:"blok3",strict:!0},{query:"sehinsah",strict:!0},{query:"khontkar",strict:!0},{query:"allame",strict:!0},{query:"hidra",strict:!0},{query:"ati242",strict:!0},{query:"gazapizm",strict:!0}],e=t[Math.floor(Math.random()*t.length)];let n=await zh(e.query,60);return e.strict&&(n=n.filter(i=>i.artistName.toLowerCase().includes(e.query.toLowerCase()))),n.length<5&&(console.warn("Low results after filter, fetching general hits..."),n=await zh("turkce rap hits",50)),El(n)},ca=async(t,e=30,n=!1)=>{let i=await zh(t,e);return n&&(i=i.filter(s=>s.artistName.toLowerCase().includes(t.toLowerCase()))),i},Zw=t=>{if(!t||t.length<5)return null;const e=Array.from(new Map(t.map(i=>[i.trackId,i])).values());if(e.length<5)return null;const n=El(e);return{startSong:n[0],targetSongs:n.slice(1,21)}},Qw=(t,e=10)=>{if(!t||t.length<4)return[];const n=Array.from(new Map(t.map(l=>[l.trackId,l])).values());if(n.length<4)return[];const i=[],s=El(n),r=Math.min(e,s.length);for(let l=0;l<r;l++){const o=s[l],u=s.filter(f=>f.trackId!==o.trackId);if(u.length>=3){const f=El(u).slice(0,3);i.push({correctSong:o,options:El([o,...f])})}}return i},Xw=async(t,e)=>{if(e<=0)return;const n={};n[`users/${t}/stats/monthly_listeners`]=Rr(e),n[`public_users/${t}/monthly_listeners`]=Rr(e),n[`public_users/${t}/lastActive`]=sr(),await bi(ve(ye),n)},Hm=async(t,e)=>{console.log(` RESPECT DUEL: Winner ${t} (+34), Loser ${e} (-34)`);const s={};s[`public_users/${t}/respect`]=Rr(34),s[`public_users/${e}/respect`]=Rr(-34),s[`users/${t}/stats/respect`]=Rr(34),s[`users/${e}/stats/respect`]=Rr(-34);try{return await bi(ve(ye),s),{winnerRespectChange:34,loserRespectChange:-34}}catch(r){return console.error(" Respect update failed:",r),{winnerRespectChange:0,loserRespectChange:0}}},qC=async(t,e,n,i)=>{const s=ve(ye,"global_feed"),r=Bm(s);await ys(r,{uid:t,author:e,content:n,avatarIndex:i,timestamp:sr(),likes:0})},WC=t=>{const e=Eu(ve(ye,"global_feed"),Nu(20)),n=Kw(e,i=>{const s=i.val();s&&t({id:i.key,...s})});return()=>Tr(e,"child_added",n)},Su=(t,e,n,i=3)=>{bi(ve(ye,`games/${t}/players/${e}`),{score:n,lives:i})},Gm=(t,e,n)=>{bi(ve(ye,`games/${t}/players/${e}`),{status:"finished",score:n})},ZC=async(t,e,n)=>{const i=Bm(ve(ye,`games/${t}/taunts`));await ys(i,{targetId:e,msg:n,timestamp:sr()})},QC=(t,e,n)=>{const i=ve(ye,`games/${t}/taunts`),s=Kw(i,r=>{const l=r.val();l&&l.targetId===e&&(n(l.msg),la(r.ref))});return()=>Tr(i,"child_added",s)},XC=async(t,e)=>{await la(ve(ye,`invites/${e.id}`));const n=ve(ye,`lobbies/${t}/${e.id}`);await ys(n,{name:e.name,level:e.level,status:"idle",lastActive:sr()}),zm(n).remove()},JC=async(t,e)=>{await la(ve(ye,`lobbies/${t}/${e}`)),await la(ve(ye,`invites/${e}`))},eI=async(t,e,n,i)=>{const s=ve(ye,`invites/${t}/${e.id}`);await ys(s,{challengerName:e.name,gameType:n,status:"pending",timestamp:sr(),category:i||null}),zm(s).remove()},tI=async(t,e,n,i)=>{let s=[];try{i&&i.id!=="general"?s=await ca(i.query,60,!0):s=await oa()}catch(h){console.error(h)}if(!s||s.length<5)return null;let r={};if(n==="higherlower")r={sequence:Zw(s)};else if(n==="trivia")r={questions:Qw(s,10)};else if(n==="flowbattle"){const h=s[0];r={bpm:100+Math.floor(Math.random()*30),songUrl:h.previewUrl}}if(!r)return null;const l=Bm(ve(ye,"games")),o=l.key;if(!o)return null;const u={id:o,type:n,status:"starting",createdAt:sr(),...r,players:{[t]:{id:t,name:"Rakip",score:0,lives:3,status:"playing"},[e.id]:{id:e.id,name:e.name,score:0,lives:3,status:"playing"}}};await ys(l,u);const f=ve(ye,`invites/${e.id}/${t}`);return await bi(f,{status:"accepted",gameId:o}),o},nI=async(t,e,n)=>{const i=ve(ye,`leaderboards/rapquiz/${t}`);await ys(i,{name:e,score:n,timestamp:sr()})},iI=async(t=20)=>{try{const e=Eu(ve(ye,"leaderboards/rapquiz"),qw("score"),Nu(t)),n=await wu(e);if(n.exists()){const i=n.val();return Object.entries(i).map(([s,r])=>({uid:s,...r})).sort((s,r)=>r.score-s.score)}return[]}catch{return[]}},zx=t=>{const e=[];return t.forEach(n=>{const i=n.val();i&&e.push({uid:n.key,name:i.name||"Anonim",monthly_listeners:i.monthly_listeners||0,respect:Number(i.respect)||0,level:i.level||1,lastActive:i.lastActive||0,appearance:i.appearance})}),e.sort((n,i)=>i.respect-n.respect)},sI=async(t=100)=>{try{if(console.log("Fetching Leaderboard from public_users..."),!navigator.onLine)return console.warn("Offline, cannot fetch leaderboard"),[];const e=ve(ye,"public_users");try{const n=Eu(e,qw("respect"),Nu(t)),i=await wu(n);return i.exists()?zx(i):[]}catch(n){if(n.message&&(n.message.includes("Index not defined")||n.code==="PERMISSION_DENIED")){console.warn(" Firebase Index Warning: Falling back to client-side sorting.");try{const i=Eu(e,Nu(t)),s=await wu(i);if(s.exists())return zx(s)}catch(i){console.error("Fallback Fetch Error:",i)}}else throw n;return[]}}catch(e){return console.error("Leaderboard Fetch Critical Error:",e),[]}},rI="modulepreload",aI=function(t){return"/"+t},Bx={},lI=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=aI(u),u in Bx)return;Bx[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const c=document.createElement("link");if(c.rel=f?"stylesheet":rI,f||(c.as="script"),c.crossOrigin="",c.href=u,o&&c.setAttribute("nonce",o),document.head.appendChild(c),f)return new Promise((d,p)=>{c.addEventListener("load",d),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const oI=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},i=(r,l)=>{n.platforms.set(r,l)},s=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=i,n.setPlatform=s,n},cI=t=>t.CapacitorPlatforms=oI(t),Jw=cI(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Jw.addPlatform;Jw.setPlatform;var ua;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(ua||(ua={}));class ff extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}}const uI=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},dI=t=>{var e,n,i,s,r;const l=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},u=o.Plugins=o.Plugins||{},f=t.CapacitorPlatforms,h=()=>l!==null?l.name:uI(t),c=((e=f==null?void 0:f.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||h,d=()=>c()!=="web",p=((n=f==null?void 0:f.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||d,x=N=>{const A=_.get(N);return!!(A!=null&&A.platforms.has(c())||m(N))},v=((i=f==null?void 0:f.currentPlatform)===null||i===void 0?void 0:i.isPluginAvailable)||x,b=N=>{var A;return(A=o.PluginHeaders)===null||A===void 0?void 0:A.find(T=>T.name===N)},m=((s=f==null?void 0:f.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||b,g=N=>t.console.error(N),y=(N,A,T)=>Promise.reject(`${T} does not have an implementation of "${A}".`),_=new Map,E=(N,A={})=>{const T=_.get(N);if(T)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),T.proxy;const k=c(),C=m(N);let L;const D=async()=>(!L&&k in A?L=typeof A[k]=="function"?L=await A[k]():L=A[k]:l!==null&&!L&&"web"in A&&(L=typeof A.web=="function"?L=await A.web():L=A.web),L),B=(R,I)=>{var M,z;if(C){const V=C==null?void 0:C.methods.find(Z=>I===Z.name);if(V)return V.rtype==="promise"?Z=>o.nativePromise(N,I.toString(),Z):(Z,X)=>o.nativeCallback(N,I.toString(),Z,X);if(R)return(M=R[I])===null||M===void 0?void 0:M.bind(R)}else{if(R)return(z=R[I])===null||z===void 0?void 0:z.bind(R);throw new ff(`"${N}" plugin is not implemented on ${k}`,ua.Unimplemented)}},$=R=>{let I;const M=(...z)=>{const V=D().then(Z=>{const X=B(Z,R);if(X){const q=X(...z);return I=q==null?void 0:q.remove,q}else throw new ff(`"${N}.${R}()" is not implemented on ${k}`,ua.Unimplemented)});return R==="addListener"&&(V.remove=async()=>I()),V};return M.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:R,writable:!1,configurable:!1}),M},O=$("addListener"),H=$("removeListener"),Q=(R,I)=>{const M=O({eventName:R},I),z=async()=>{const Z=await M;H({eventName:R,callbackId:Z},I)},V=new Promise(Z=>M.then(()=>Z({remove:z})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await z()},V},P=new Proxy({},{get(R,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?Q:O;case"removeListener":return H;default:return $(I)}}});return u[N]=P,_.set(N,{name:N,proxy:P,platforms:new Set([...Object.keys(A),...C?[k]:[]])}),P},S=((r=f==null?void 0:f.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||E;return o.convertFileSrc||(o.convertFileSrc=N=>N),o.getPlatform=c,o.handleError=g,o.isNativePlatform=p,o.isPluginAvailable=v,o.pluginMethodNoop=y,o.registerPlugin=S,o.Exception=ff,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},fI=t=>t.Capacitor=dI(t),qt=fI(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Fm=qt.registerPlugin;qt.Plugins;class eN{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),i&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,n);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,i){const s=this.listeners[e];if(!s){if(i){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new qt.Exception(e,ua.Unimplemented)}unavailable(e="not available"){return new qt.Exception(e,ua.Unavailable)}async removeListener(e,n){const i=this.listeners[e];if(!i)return;const s=i.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}}const Hx=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Gx=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class hI extends eN{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Gx(s).trim(),r=Gx(r).trim(),n[s]=r}),n}async setCookie(e){try{const n=Hx(e.key),i=Hx(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${s}; path=${r}; ${l};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Fm("CapacitorCookies",{web:()=>new hI});const pI=async t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const s=i.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>n(s),i.readAsDataURL(t)}),mI=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,r,l)=>(s[r]=t[e[l]],s),{})},gI=(t,e=!0)=>t?Object.entries(t).reduce((i,s)=>{const[r,l]=s;let o,u;return Array.isArray(l)?(u="",l.forEach(f=>{o=e?encodeURIComponent(f):f,u+=`${r}=${o}&`}),u.slice(0,-1)):(o=e?encodeURIComponent(l):l,u=`${r}=${o}`),`${i}&${u}`},"").substr(1):null,xI=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=mI(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[l,o]of Object.entries(t.data||{}))r.set(l,o);n.body=r.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((o,u)=>{r.append(u,o)});else for(const o of Object.keys(t.data))r.append(o,t.data[o]);n.body=r;const l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class bI extends eN{async request(e){const n=xI(e,e.webFetchExtra),i=gI(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,r=await fetch(s,n),l=r.headers.get("content-type")||"";let{responseType:o="text"}=r.ok?e:{};l.includes("application/json")&&(o="json");let u,f;switch(o){case"arraybuffer":case"blob":f=await r.blob(),u=await pI(f);break;case"json":u=await r.json();break;case"document":case"text":default:u=await r.text()}const h={};return r.headers.forEach((c,d)=>{h[d]=c}),{data:u,headers:h,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Fm("CapacitorHttp",{web:()=>new bI});var Fx;(function(t){t.General="General",t.ParentalGuidance="ParentalGuidance",t.Teen="Teen",t.MatureAudience="MatureAudience"})(Fx||(Fx={}));var Vx;(function(t){t.SizeChanged="bannerAdSizeChanged",t.Loaded="bannerAdLoaded",t.FailedToLoad="bannerAdFailedToLoad",t.Opened="bannerAdOpened",t.Closed="bannerAdClosed",t.AdImpression="bannerAdImpression"})(Vx||(Vx={}));var Yx;(function(t){t.TOP_CENTER="TOP_CENTER",t.CENTER="CENTER",t.BOTTOM_CENTER="BOTTOM_CENTER"})(Yx||(Yx={}));var Kx;(function(t){t.BANNER="BANNER",t.FULL_BANNER="FULL_BANNER",t.LARGE_BANNER="LARGE_BANNER",t.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",t.LEADERBOARD="LEADERBOARD",t.ADAPTIVE_BANNER="ADAPTIVE_BANNER",t.SMART_BANNER="SMART_BANNER"})(Kx||(Kx={}));var Bh;(function(t){t.Loaded="interstitialAdLoaded",t.FailedToLoad="interstitialAdFailedToLoad",t.Showed="interstitialAdShowed",t.FailedToShow="interstitialAdFailedToShow",t.Dismissed="interstitialAdDismissed"})(Bh||(Bh={}));var $x;(function(t){t.Loaded="onRewardedInterstitialAdLoaded",t.FailedToLoad="onRewardedInterstitialAdFailedToLoad",t.Showed="onRewardedInterstitialAdShowed",t.FailedToShow="onRewardedInterstitialAdFailedToShow",t.Dismissed="onRewardedInterstitialAdDismissed",t.Rewarded="onRewardedInterstitialAdReward"})($x||($x={}));var Sl;(function(t){t.Loaded="onRewardedVideoAdLoaded",t.FailedToLoad="onRewardedVideoAdFailedToLoad",t.Showed="onRewardedVideoAdShowed",t.FailedToShow="onRewardedVideoAdFailedToShow",t.Dismissed="onRewardedVideoAdDismissed",t.Rewarded="onRewardedVideoAdReward"})(Sl||(Sl={}));var qx;(function(t){t.NOT_REQUIRED="NOT_REQUIRED",t.OBTAINED="OBTAINED",t.REQUIRED="REQUIRED",t.UNKNOWN="UNKNOWN"})(qx||(qx={}));var Wx;(function(t){t[t.DISABLED=0]="DISABLED",t[t.EEA=1]="EEA",t[t.NOT_EEA=2]="NOT_EEA"})(Wx||(Wx={}));const Wn=Fm("AdMob",{web:()=>lI(()=>import("./web-uexfL1Pk.js"),[]).then(t=>new t.AdMobWeb)}),vI={android:{APP_ID:"ca-app-pub-4965929442860631~8109023834",INTERSTITIAL:"ca-app-pub-4965929442860631/7302035167",REWARDED:"ca-app-pub-4965929442860631/4632813259"},ios:{APP_ID:"ca-app-pub-4965929442860631~8109023834",INTERSTITIAL:"ca-app-pub-4965929442860631/7302035167",REWARDED:"ca-app-pub-4965929442860631/4632813259"}},yI=qt.getPlatform()==="ios"?"ios":"android",Zx=vI[yI];class _I{constructor(){La(this,"isInitialized",!1);La(this,"isInterstitialLoaded",!1);La(this,"isRewardedLoaded",!1);this.initialize()}async initialize(){if(qt.isNativePlatform())try{await Wn.initialize({initializeForTesting:!1}),this.isInitialized=!0,console.log("AdMob Initialized"),this.prepareInterstitial(),this.prepareRewarded()}catch(e){console.error("AdMob Init Error:",e)}}async prepareInterstitial(){if(qt.isNativePlatform())try{const e={adId:Zx.INTERSTITIAL,isTesting:!1};await Wn.prepareInterstitial(e),this.isInterstitialLoaded=!0,console.log("Interstitial Prepared")}catch(e){console.error("Interstitial Prepare Error:",e),this.isInterstitialLoaded=!1}}async showInterstitial(){if(!qt.isNativePlatform())return console.log("Web: Interstitial Shown (Simulated)"),!0;try{if(!this.isInterstitialLoaded)return console.log("Interstitial not ready, preparing for next time."),this.prepareInterstitial(),!1;const e=await Wn.addListener(Bh.Dismissed,()=>{this.isInterstitialLoaded=!1,this.prepareInterstitial(),e.remove()});return await Wn.showInterstitial(),!0}catch(e){return console.error("Show Interstitial Error:",e),!1}}async prepareRewarded(){if(qt.isNativePlatform())try{const e={adId:Zx.REWARDED,isTesting:!1};await Wn.prepareRewardVideoAd(e),this.isRewardedLoaded=!0,console.log("Rewarded Prepared")}catch(e){console.error("Rewarded Prepare Error:",e),this.isRewardedLoaded=!1}}async reklami_baslat(){return qt.isNativePlatform()?new Promise(async e=>{try{this.isRewardedLoaded||await this.prepareRewarded();const n=await Wn.addListener(Sl.Rewarded,r=>{console.log("User rewarded:",r),e(!0)}),i=await Wn.addListener(Sl.Dismissed,()=>{this.isRewardedLoaded=!1,this.prepareRewarded(),setTimeout(()=>{n.remove(),i.remove()},500)}),s=await Wn.addListener(Sl.FailedToLoad,r=>{console.error("Ad Failed to Load",r),s.remove(),e(!1)});await Wn.showRewardVideoAd()}catch(n){console.error("Ad Show Error:",n),e(!1)}}):(console.log("Web environment: Simulating Ad..."),new Promise(e=>{setTimeout(()=>e(!0),3e3)}))}}const Au=new _I;var W=js&&js.__awaiter||function(t,e,n,i){function s(r){return r instanceof n?r:new n(function(l){l(r)})}return new(n||(n=Promise))(function(r,l){function o(h){try{f(i.next(h))}catch(c){l(c)}}function u(h){try{f(i.throw(h))}catch(c){l(c)}}function f(h){h.done?r(h.value):s(h.value).then(o,u)}f((i=i.apply(t,e||[])).next())})},j;(function(t){(function(i){i[i.SETUP=6777001]="SETUP",i[i.LOAD=6777002]="LOAD",i[i.PURCHASE=6777003]="PURCHASE",i[i.LOAD_RECEIPTS=6777004]="LOAD_RECEIPTS",i[i.CLIENT_INVALID=6777005]="CLIENT_INVALID",i[i.PAYMENT_CANCELLED=6777006]="PAYMENT_CANCELLED",i[i.PAYMENT_INVALID=6777007]="PAYMENT_INVALID",i[i.PAYMENT_NOT_ALLOWED=6777008]="PAYMENT_NOT_ALLOWED",i[i.UNKNOWN=6777010]="UNKNOWN",i[i.REFRESH_RECEIPTS=6777011]="REFRESH_RECEIPTS",i[i.INVALID_PRODUCT_ID=6777012]="INVALID_PRODUCT_ID",i[i.FINISH=6777013]="FINISH",i[i.COMMUNICATION=6777014]="COMMUNICATION",i[i.SUBSCRIPTIONS_NOT_AVAILABLE=6777015]="SUBSCRIPTIONS_NOT_AVAILABLE",i[i.MISSING_TOKEN=6777016]="MISSING_TOKEN",i[i.VERIFICATION_FAILED=6777017]="VERIFICATION_FAILED",i[i.BAD_RESPONSE=6777018]="BAD_RESPONSE",i[i.REFRESH=6777019]="REFRESH",i[i.PAYMENT_EXPIRED=6777020]="PAYMENT_EXPIRED",i[i.DOWNLOAD=6777021]="DOWNLOAD",i[i.SUBSCRIPTION_UPDATE_NOT_AVAILABLE=6777022]="SUBSCRIPTION_UPDATE_NOT_AVAILABLE",i[i.PRODUCT_NOT_AVAILABLE=6777023]="PRODUCT_NOT_AVAILABLE",i[i.CLOUD_SERVICE_PERMISSION_DENIED=6777024]="CLOUD_SERVICE_PERMISSION_DENIED",i[i.CLOUD_SERVICE_NETWORK_CONNECTION_FAILED=6777025]="CLOUD_SERVICE_NETWORK_CONNECTION_FAILED",i[i.CLOUD_SERVICE_REVOKED=6777026]="CLOUD_SERVICE_REVOKED",i[i.PRIVACY_ACKNOWLEDGEMENT_REQUIRED=6777027]="PRIVACY_ACKNOWLEDGEMENT_REQUIRED",i[i.UNAUTHORIZED_REQUEST_DATA=6777028]="UNAUTHORIZED_REQUEST_DATA",i[i.INVALID_OFFER_IDENTIFIER=6777029]="INVALID_OFFER_IDENTIFIER",i[i.INVALID_OFFER_PRICE=6777030]="INVALID_OFFER_PRICE",i[i.INVALID_SIGNATURE=6777031]="INVALID_SIGNATURE",i[i.MISSING_OFFER_PARAMS=6777032]="MISSING_OFFER_PARAMS",i[i.VALIDATOR_SUBSCRIPTION_EXPIRED=6778003]="VALIDATOR_SUBSCRIPTION_EXPIRED"})(t.ErrorCode||(t.ErrorCode={}));function n(i,s,r,l){return{isError:!0,code:i,message:s,platform:r,productId:l}}t.storeError=n})(j||(j={}));var j;(function(t){class e{constructor(i,s){this.config=i,i.url||(i.url="https://validator.iaptic.com"),this.store=s??t.store,this.log=this.store.log.child("Iaptic")}get braintreeClientTokenProvider(){return i=>{this.log.info("Calling Braintree clientTokenProvider"),t.Utils.ajax(this.log,{url:`${this.config.url}/v3/braintree/client-token?appName=${this.config.appName}&apiKey=${this.config.apiKey}`,method:"POST",data:{applicationUsername:t.store.getApplicationUsername(),customerId:t.Braintree.customerId},success:s=>{this.log.info("clientTokenProvider success: "+JSON.stringify(s)),i(s.clientToken)},error:s=>{this.log.info("clientTokenProvider error: "+JSON.stringify(s)),i(t.storeError(s,"ERROR "+s,t.Platform.BRAINTREE,null))}})}}get appStoreDiscountEligibilityDeterminer(){let i;this.log.debug("AppStore eligibility determiner is listening..."),this.store.when().verified(l=>{l.platform===t.Platform.APPLE_APPSTORE&&(this.log.debug("Got a verified AppStore receipt."),i=l)},"appStoreDiscountEligibilityDeterminer_listening");const s=(l,o,u)=>{if(this.log.debug("AppStore eligibility determiner"),i)return this.log.debug("Using cached receipt"),u(r(i,o));const f=h=>{h.platform===t.Platform.APPLE_APPSTORE&&(this.log.debug("Receipt is verified, let's analyze the content and respond."),this.store.off(f),u(r(h,o)))};this.log.debug("Waiting for receipt"),this.store.when().verified(f,"appStoreDiscountEligibilityDeterminer_waiting")};return s.cacheReceipt=function(l){i=l},s;function r(l,o){const u=l.raw.ineligible_for_intro_price;return o.map(f=>{var h;return f.discountType==="Introductory"&&u&&u.find(c=>f.productId===c)?!1:f.discountType==="Subscription"?!!((h=l.raw.collection)===null||h===void 0?void 0:h.find(d=>d.id===f.productId)):!0})}}get validator(){return`${this.config.url}/v1/validate?appName=${this.config.appName}&apiKey=${this.config.apiKey}`}}t.Iaptic=e})(j||(j={}));var j;(function(t){let e;(function(l){l[l.QUIET=0]="QUIET",l[l.ERROR=1]="ERROR",l[l.WARNING=2]="WARNING",l[l.INFO=3]="INFO",l[l.DEBUG=4]="DEBUG"})(e=t.LogLevel||(t.LogLevel={}));class n{constructor(o,u=""){this.prefix="",this.store=o,this.prefix=u||"CdvPurchase"}child(o){return new n(this.store,this.prefix+"."+o)}error(o){r(this.store.verbosity,e.ERROR,this.prefix,o);try{throw new Error(s(o))}catch(u){r(this.store.verbosity,e.ERROR,this.prefix,u.stack)}}warn(o){r(this.store.verbosity,e.WARNING,this.prefix,o)}info(o){r(this.store.verbosity,e.INFO,this.prefix,o)}debug(o){r(this.store.verbosity,e.DEBUG,this.prefix,o)}logCallbackException(o,u){if(this.warn("A callback in '"+o+"' failed with an exception."),typeof u=="string")this.warn("           "+u);else if(u){const f=u;f.fileName&&this.warn("           "+f.fileName+":"+f.lineNumber),u.message&&this.warn("           "+u.message),u.stack&&this.warn("           "+u.stack)}}}n.console=window.console,t.Logger=n;const i=["QUIET","ERROR","WARNING","INFO","DEBUG"];function s(l){return typeof l!="string"&&(l=JSON.stringify(l)),l}function r(l,o,u,f){var h=l===!0?1:l;if(o>h)return;typeof f!="string"&&(f=JSON.stringify(f));const c=u?`[${u}] `:"",d=o===e.ERROR?p=>n.console.error(p):o===e.WARNING?p=>n.console.warn(p):p=>n.console.log(p);i[o]?d(`${c}${i[o]}: ${f}`):d(`${c}${f}`)}})(j||(j={}));var j;(function(t){(function(e){e.nonEnumerable=(n,i,s)=>{if(s)return s.enumerable=!1,s;Object.defineProperty(n,i,{set(r){Object.defineProperty(this,i,{value:r,writable:!0,configurable:!0})},configurable:!0})}})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){class e{constructor(i,s){this.className="Product",this.title="",this.description="",this.platform=i.platform,this.type=i.type,this.id=i.id,this.group=i.group,this.offers=[],Object.defineProperty(this,"pricing",{enumerable:!1,get:()=>{var r;return(r=this.offers[0])===null||r===void 0?void 0:r.pricingPhases[0]}}),Object.defineProperty(this,"canPurchase",{enumerable:!1,get:()=>s.canPurchase(this)}),Object.defineProperty(this,"owned",{enumerable:!1,get:()=>s.owned(this)})}get pricing(){var i;return(i=this.offers[0])===null||i===void 0?void 0:i.pricingPhases[0]}get canPurchase(){return!1}get owned(){return!1}getOffer(i=""){return i?this.offers.find(s=>s.id===i):this.offers[0]}addOffer(i){return this.getOffer(i.id)?this:(this.offers.push(i),this)}}t.Product=e})(j||(j={}));var j;(function(t){(function(e){function n(i){const s=[];for(let r in i)i.hasOwnProperty(r)&&s.push(i[r]);return s}e.objectValues=n})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(i){switch(i){case t.Platform.APPLE_APPSTORE:return"App Store";case t.Platform.GOOGLE_PLAY:return"Google Play";case t.Platform.WINDOWS_STORE:return"Windows Store";case t.Platform.BRAINTREE:return"Braintree";case t.Platform.TEST:return"Test";default:return i}}e.platformName=n})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(){this.array=[]}get length(){return this.array.length}get(){return this.array.concat()}add(l){this.has(l)||this.array.push(l)}clear(){for(;this.array.length!==0;)this.array.pop()}has(l){return!!this.array.find(o=>o===l)}}e.ReceiptsToValidate=n;class i{constructor(l,o){this.receiptsToValidate=new n,this.verifiedReceipts=[],this.numRequests=0,this.numResponses=0,this.cache={},this.controller=l,this.log=o.child("Validator")}incrRequestsCounter(){this.numRequests=this.numRequests+1|0,this.log.debug(`Validation requests=${this.numRequests} responses=${this.numResponses}`)}incrResponsesCounter(){this.numResponses=this.numResponses+1|0,this.log.debug(`Validation requests=${this.numRequests} responses=${this.numResponses}`)}addVerifiedReceipt(l,o){for(const f of this.verifiedReceipts)if(f.platform===l.platform&&f.id===o.id)return this.log.debug("Updating existing receipt."),f.set(l,o),f;this.log.debug("Register a new verified receipt.");const u=new t.VerifiedReceipt(l,o,this.controller);return this.verifiedReceipts.push(u),u}add(l){this.log.debug("Schedule validation: "+JSON.stringify(l));const o=l instanceof t.Transaction?l.parentReceipt:l;this.receiptsToValidate.has(o)||(this.incrRequestsCounter(),this.receiptsToValidate.add(o))}run(){const l=this.receiptsToValidate.get();this.receiptsToValidate.clear();const o=u=>W(this,void 0,void 0,function*(){var f;const{receipt:h,payload:c}=u;this.incrResponsesCounter();try{const d=this.controller.adapters.find(h.platform);if(yield d==null?void 0:d.handleReceiptValidationResponse(h,c),c.ok){const p=this.addVerifiedReceipt(h,c.data);this.controller.verifiedCallbacks.trigger(p,"payload_ok")}else if(c.code===t.ErrorCode.VALIDATOR_SUBSCRIPTION_EXPIRED){const p=(f=h.lastTransaction())===null||f===void 0?void 0:f.transactionId,x=p?this.verifiedReceipts.find(v=>{var b;return((b=v.collection[0])===null||b===void 0?void 0:b.transactionId)===p}):void 0;x?(x==null||x.collection.forEach(v=>{v.transactionId===p&&(v.isExpired=!0)}),this.controller.verifiedCallbacks.trigger(x,"payload_expired")):this.controller.unverifiedCallbacks.trigger({receipt:h,payload:c},"no_verified_receipt")}else this.controller.unverifiedCallbacks.trigger({receipt:h,payload:c},"validator_error")}catch(d){this.log.error("Exception probably caused by an invalid response from the validator."+d.message),this.controller.unverifiedCallbacks.trigger({receipt:h,payload:{ok:!1,code:t.ErrorCode.VERIFICATION_FAILED,message:d.message}},"validator_exception")}});l.forEach(u=>this.runOnReceipt(u,o))}runOnReceipt(l,o){var u,f;return W(this,void 0,void 0,function*(){if(l.platform===t.Platform.TEST)return this.log.debug("Using Test Adapter mock verify function."),t.Test.Adapter.verify(l,o);if(!this.controller.validator){this.incrResponsesCounter(),o({receipt:l,payload:{ok:!0,data:{id:((f=(u=l.transactions)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.transactionId)||"unknown",latest_receipt:!0,transaction:{type:"test"}}}});return}const h=yield this.buildRequestBody(l);if(!h){this.incrResponsesCounter();return}if(typeof this.controller.validator=="function")return this.runValidatorFunction(this.controller.validator,l,h,o);const c=typeof this.controller.validator=="string"?{url:this.controller.validator,timeout:2e4}:this.controller.validator;return this.runValidatorRequest(c,l,h,o)})}runValidatorFunction(l,o,u,f){try{l(u,h=>f({receipt:o,payload:h}))}catch(h){this.log.warn("user provided validator function failed with error: "+(h==null?void 0:h.stack))}}buildRequestBody(l){var o,u,f;return W(this,void 0,void 0,function*(){const h=this.controller.adapters.find(l.platform),c=yield h==null?void 0:h.receiptValidationBody(l);if(c){if(c.additionalData=Object.assign(Object.assign({},(o=c.additionalData)!==null&&o!==void 0?o:{}),{applicationUsername:this.controller.getApplicationUsername()}),c.additionalData.applicationUsername||delete c.additionalData.applicationUsername,c.device=Object.assign(Object.assign({},(u=c.device)!==null&&u!==void 0?u:{}),t.Validator.Internal.getDeviceInfo(this.controller)),((f=c.offers)===null||f===void 0?void 0:f.length)===1){const d=c.offers[0];if(d.pricingPhases.length===1){const p=d.pricingPhases[0];c.currency=p.currency,c.priceMicros=p.priceMicros}else if(d.pricingPhases.length===2){const p=d.pricingPhases[1];c.currency=p.currency,c.priceMicros=p.priceMicros;const x=d.pricingPhases[0];c.introPriceMicros=x.priceMicros}}return c}})}removeExpiredCache(){const l=+new Date,o=[];for(const u in this.cache)this.cache[u].expires<l&&o.push(u);for(const u of o)delete this.cache[u]}runValidatorRequest(l,o,u,f){this.removeExpiredCache();const h=t.Utils.md5(JSON.stringify(u.transaction)),c=this.cache[h];if(c)return this.log.debug("validator cache hit, using cached response"),f({receipt:o,payload:c.payload});t.Utils.ajax(this.log.child("Ajax"),{url:l.url,method:"POST",customHeaders:l.headers,timeout:l.timeout,data:u,success:d=>{var p;if(this.log.debug("validator success, response: "+JSON.stringify(d)),!s(d))return f({receipt:o,payload:{ok:!1,code:t.ErrorCode.BAD_RESPONSE,message:"Validator responded with invalid data",data:{latest_receipt:(p=d==null?void 0:d.data)===null||p===void 0?void 0:p.latest_receipt}}});this.cache[h]={payload:d,expires:+new Date+12e4},f({receipt:o,payload:d})},error:(d,p,x)=>{var v="Error "+d+": "+p;this.log.debug("validator failed, response: "+JSON.stringify(v)),this.log.debug("body => "+JSON.stringify(x)),f({receipt:o,payload:{ok:!1,message:v,code:t.ErrorCode.COMMUNICATION,status:d,data:{}}})}})}}e.Validator=i;function s(r){return!!r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"}})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(){this.list=[]}add(s,r,l){r.forEach(o=>{if(s.info(""),!this.find(o.platform))switch(o.platform){case t.Platform.APPLE_APPSTORE:return this.list.push(new t.AppleAppStore.Adapter(l,o.options||{}));case t.Platform.GOOGLE_PLAY:return this.list.push(new t.GooglePlay.Adapter(l));case t.Platform.BRAINTREE:return o.options||s.error("Options missing for Braintree initialization. Use {platform: Platform.BRAINTREE, options: {...}} in your call to store.initialize"),this.list.push(new t.Braintree.Adapter(l,o.options));case t.Platform.TEST:return this.list.push(new t.Test.Adapter(l));default:return}})}initialize(s,r){return W(this,void 0,void 0,function*(){typeof s=="string"&&(s=[s]);const l=s.map(h=>typeof h=="string"?{platform:h}:h).filter(h=>!this.find(h.platform)),o=r.log.child("Adapters");o.info("Adding platforms: "+JSON.stringify(l)),this.add(o,l,r);const u=r.registeredProducts.byPlatform();return(yield Promise.all(l.map(h=>W(this,void 0,void 0,function*(){var c,d,p;const x=(p=(d=(c=u.filter(_=>_.platform===h.platform))===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.products)!==null&&p!==void 0?p:[],v=this.find(h.platform);if(!v)return;if(o.info(`${v.name} initializing...`),!v.isSupported){o.info(`${v.name} is not supported.`);return}const b=yield v.initialize();if(v.ready=!0,o.info(`${v.name} initialized. ${b?JSON.stringify(b):""}`),b!=null&&b.code)return b;if(o.info(`${v.name} products: ${JSON.stringify(x)}`),x.length===0)return;let m=[],g=[];v.supportsParallelLoading?[m,g]=yield Promise.all([v.loadProducts(x),v.loadReceipts()]):(m=yield v.loadProducts(x),g=yield v.loadReceipts()),o.info(`${v.name} products loaded: ${JSON.stringify(m)}`);const y=m.filter(_=>_ instanceof t.Product);return r.listener.productsUpdated(h.platform,y),o.info(`${v.name} receipts loaded: ${JSON.stringify(g)}`),m.filter(_=>"code"in _&&"message"in _)[0]})))).filter(h=>h)})}find(s){return this.list.filter(r=>r.id===s)[0]}findReady(s){return this.list.filter(r=>(!s||r.id===s)&&r.ready)[0]}}e.Adapters=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s,r){this.supportedPlatforms=[],this.platformWithReceiptsReady=[],this.lastTransactionState={},this.lastCallTimeForState={},this.updatedReceiptsToProcess=[],this.delegate=s,this.log=r.child("AdapterListener")}static makeTransactionToken(s){return s.platform+"|"+s.transactionId}setSupportedPlatforms(s){this.log.debug(`setSupportedPlatforms: ${s.join(",")} (${this.platformWithReceiptsReady.length} have their receipts ready)`),this.supportedPlatforms=s,this.supportedPlatforms.length===this.platformWithReceiptsReady.length&&(this.log.debug("triggering receiptsReady()"),this.delegate.receiptsReadyCallbacks.trigger(void 0,"adapterListener_setSupportedPlatforms"))}receiptsReady(s){if(this.supportedPlatforms.length>0&&this.platformWithReceiptsReady.length===this.supportedPlatforms.length){this.log.debug("receiptsReady: "+s+"(skipping)");return}this.platformWithReceiptsReady.indexOf(s)<0&&(this.platformWithReceiptsReady.push(s),this.log.debug(`receiptsReady: ${s} (${this.platformWithReceiptsReady.length}/${this.supportedPlatforms.length})`),this.platformWithReceiptsReady.length===this.supportedPlatforms.length&&(this.log.debug("triggering receiptsReady()"),this.delegate.receiptsReadyCallbacks.trigger(void 0,"adapterListener_receiptsReady")))}productsUpdated(s,r){r.forEach(l=>this.delegate.updatedCallbacks.trigger(l,"adapterListener_productsUpdated"))}receiptsUpdated(s,r){this.log.debug("receiptsUpdated: "+JSON.stringify(r.map(l=>({platform:l.platform,transactions:l.transactions}))));for(const l of r)this.updatedReceiptsToProcess.indexOf(l)<0&&this.updatedReceiptsToProcess.push(l);this.updatedReceiptsProcessor!==void 0&&clearTimeout(this.updatedReceiptsProcessor),this.updatedReceiptsProcessor=setTimeout(()=>{this._processUpdatedReceipts()},500)}_processUpdatedReceipts(){this.log.debug("processing "+this.updatedReceiptsToProcess.length+" updated receipts");const s=+new Date,r=this.updatedReceiptsToProcess;this.updatedReceiptsToProcess=[],r.forEach(l=>{this.delegate.updatedReceiptCallbacks.trigger(l,"adapterListener_receiptsUpdated"),l.transactions.forEach(o=>{var u;const f=n.makeTransactionToken(o),h=f+"@"+o.state,c=this.lastTransactionState[f];if(o.state===t.TransactionState.APPROVED){const d=(u=this.lastCallTimeForState[h])!==null&&u!==void 0?u:0;s-d>6e4?(this.lastCallTimeForState[h]=s,this.delegate.approvedCallbacks.trigger(o,"adapterListener_receiptsUpdated_approved")):this.log.debug(`Skipping ${h}, because it has been last called ${d>0?Math.round(s-d)+"ms ago ("+s+"-"+d+")":"never"}`)}else c!==o.state&&(o.state===t.TransactionState.INITIATED?(this.lastCallTimeForState[h]=s,this.delegate.initiatedCallbacks.trigger(o,"adapterListener_receiptsUpdated_initiated")):o.state===t.TransactionState.FINISHED?(this.lastCallTimeForState[h]=s,this.delegate.finishedCallbacks.trigger(o,"adapterListener_receiptsUpdated_finished")):o.state===t.TransactionState.PENDING&&(this.lastCallTimeForState[h]=s,this.delegate.pendingCallbacks.trigger(o,"adapterListener_receiptsUpdated_pending")));this.lastTransactionState[f]=o.state})})}}e.StoreAdapterListener=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s,r,l=!1){this.callbacks=[],this.numTriggers=0,this.logger=s,this.className=r,this.finalStateMode=l}push(s,r){if(this.finalStateMode&&this.numTriggers>0)s(this.lastTriggerArgument);else{for(const l of this.callbacks)if(l.callback===s)throw new Error("REGISTERING THE SAME CALLBACK TWICE? This is indicative of a bug in your integration.");this.callbacks.push({callback:s,callbackName:r})}}trigger(s,r){this.lastTriggerArgument=s,this.numTriggers++;const l=this.callbacks;this.finalStateMode&&(this.callbacks=[]),l.forEach(o=>{t.Utils.safeCall(this.logger,this.className,o.callback,s,o.callbackName,r)})}remove(s){this.callbacks=this.callbacks.filter(r=>r.callback!==s)}}e.Callbacks=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s){this.isReady=!1,this.readyCallbacks=[],this.logger=s}add(s){if(this.isReady)return setTimeout(s,0);this.readyCallbacks.push(s)}trigger(s){this.isReady=!0,this.readyCallbacks.forEach(r=>t.Utils.safeCall(this.logger,"ready()",r,void 0,void 0,s)),this.readyCallbacks=[]}remove(s){this.readyCallbacks=this.readyCallbacks.filter(r=>r!==s)}}e.ReadyCallbacks=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){function n(s){return typeof s!="object"?!1:s.hasOwnProperty("platform")&&s.hasOwnProperty("id")&&s.hasOwnProperty("type")}class i{constructor(){this.list=[]}find(r,l){return this.list.find(o=>o.platform===r&&o.id===l)}add(r){const l=[],u=(Array.isArray(r)?r:[r]).filter(f=>!this.find(f.platform,f.id));for(const f of u)n(f)?this.list.push(f):l.push(t.storeError(t.ErrorCode.LOAD,'Invalid parameter to "register", expected "id", "type" and "platform". Got: '+JSON.stringify(f),null,null));return l}byPlatform(){const r={};return this.list.forEach(l=>{r[l.platform]=(r[l.platform]||[]).concat(l)}),Object.keys(r).map(l=>({platform:l,products:r[l]}))}}e.RegisteredProducts=i})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s){this.monitors=[],this.isListening=!1,this.when=s}findMonitors(s){return this.monitors.filter(r=>r.transaction.platform===s.platform&&r.transaction.transactionId===s.transactionId)}startListening(){this.isListening||(this.isListening=!0,this.when.approved(s=>this.callOnChange(s),"transactionStateMonitors_callOnChange").finished(s=>this.callOnChange(s),"transactionStateMonitors_callOnChange"))}callOnChange(s){this.findMonitors(s).forEach(r=>{r.lastChange!==s.state&&(r.lastChange=s.state,r.onChange(s.state))})}start(s,r){this.startListening();const l=t.Utils.uuidv4();return this.monitors.push({monitorId:l,transaction:s,onChange:r,lastChange:s.state}),setTimeout(r,0,s.state),{transaction:s,stop:()=>this.stop(l)}}stop(s){this.monitors=this.monitors.filter(r=>r.monitorId!==s)}}e.TransactionStateMonitors=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s){this.hasCalledReceiptsVerified=!1,this.controller=s,this.log=s.log.child("ReceiptsMonitor")}callReceiptsVerified(){this.hasCalledReceiptsVerified||(this.hasCalledReceiptsVerified=!0,this.log.info("receiptsVerified()"),this.controller.when().receiptsReady(()=>{setTimeout(()=>{this.controller.receiptsVerified()},0)},"receiptsMonitor_callReceiptsVerified"))}launch(){const s=()=>{this.log.debug(`check(${this.controller.numValidationResponses()}/${this.controller.numValidationRequests()})`),this.controller.numValidationRequests()===this.controller.numValidationResponses()&&(this.intervalChecker!==void 0&&(clearInterval(this.intervalChecker),this.intervalChecker=void 0),this.controller.off(s),this.callReceiptsVerified())};this.controller.when().verified(s,"receiptsMonitor_check").unverified(s,"receiptsMonitor_check").receiptsReady(()=>{this.log.debug("receiptsReady..."),(!this.controller.hasLocalReceipts()||!this.controller.hasValidator())&&setTimeout(()=>{s()},0),this.intervalChecker=setInterval(()=>{this.log.debug("keep checking every 10s..."),s()},1e4)},"receiptsMonitor_setup")}}e.ReceiptsMonitor=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s){this.activePurchases={},this.notifiedPurchases={},this.controller=s}launch(){this.interval=setInterval(()=>{var s,r;const l=+new Date;for(const o of this.controller.verifiedReceipts){const u=(s=n.GRACE_PERIOD_MS[o.platform])!==null&&s!==void 0?s:n.GRACE_PERIOD_MS.DEFAULT;for(const f of o.collection)if(f.expiryDate){const h=f.expiryDate+u,c=(r=f.transactionId)!==null&&r!==void 0?r:`${h}`;h>l&&(this.activePurchases[c]=!0),h<l&&this.activePurchases[c]&&!this.notifiedPurchases[c]&&(this.notifiedPurchases[c]=!0,this.controller.onVerifiedPurchaseExpired(f,o))}}},n.INTERVAL_MS)}}n.INTERVAL_MS=1e4,n.GRACE_PERIOD_MS={DEFAULT:6e4,"ios-appstore":6e4,"android-playstore":3e4},e.ExpiryMonitor=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){t.PLUGIN_VERSION="13.12.1";class e{constructor(){this.adapters=new t.Internal.Adapters,this.registeredProducts=new t.Internal.RegisteredProducts,this.log=new t.Logger(this),this.verbosity=t.LogLevel.ERROR,this._readyCallbacks=new t.Internal.ReadyCallbacks(this.log),this.updatedCallbacks=new t.Internal.Callbacks(this.log,"productUpdated()"),this.updatedReceiptsCallbacks=new t.Internal.Callbacks(this.log,"receiptUpdated()"),this.initiatedCallbacks=new t.Internal.Callbacks(this.log,"initiated()"),this.approvedCallbacks=new t.Internal.Callbacks(this.log,"approved()"),this.finishedCallbacks=new t.Internal.Callbacks(this.log,"finished()"),this.pendingCallbacks=new t.Internal.Callbacks(this.log,"pending()"),this.verifiedCallbacks=new t.Internal.Callbacks(this.log,"verified()"),this.unverifiedCallbacks=new t.Internal.Callbacks(this.log,"unverified()"),this.receiptsReadyCallbacks=new t.Internal.Callbacks(this.log,"receiptsReady()",!0),this.receiptsVerifiedCallbacks=new t.Internal.Callbacks(this.log,"receiptsVerified()",!0),this.errorCallbacks=new t.Internal.Callbacks(this.log,"error()"),this.initializedHasBeenCalled=!1,this.lastUpdate=0,this.minTimeBetweenUpdates=6e5,this.version=t.PLUGIN_VERSION;const i=this;this.listener=new t.Internal.StoreAdapterListener({updatedCallbacks:this.updatedCallbacks,updatedReceiptCallbacks:this.updatedReceiptsCallbacks,initiatedCallbacks:this.initiatedCallbacks,approvedCallbacks:this.approvedCallbacks,finishedCallbacks:this.finishedCallbacks,pendingCallbacks:this.pendingCallbacks,receiptsReadyCallbacks:this.receiptsReadyCallbacks},this.log),this.transactionStateMonitors=new t.Internal.TransactionStateMonitors(this.when()),this._validator=new t.Internal.Validator({adapters:this.adapters,getApplicationUsername:this.getApplicationUsername.bind(this),get localReceipts(){return i.localReceipts},get validator(){return i.validator},get validator_privacy_policy(){return i.validator_privacy_policy},verifiedCallbacks:this.verifiedCallbacks,unverifiedCallbacks:this.unverifiedCallbacks,finish:s=>this.finish(s)},this.log),new t.Internal.ReceiptsMonitor({hasLocalReceipts:()=>this.localReceipts.length>0,hasValidator:()=>!!this.validator,numValidationRequests:()=>this._validator.numRequests,numValidationResponses:()=>this._validator.numResponses,off:this.off.bind(this),when:this.when.bind(this),receiptsVerified:()=>{i.receiptsVerifiedCallbacks.trigger(void 0,"receipts_monitor_controller")},log:this.log}).launch(),this.expiryMonitor=new t.Internal.ExpiryMonitor({get verifiedReceipts(){return i.verifiedReceipts},onVerifiedPurchaseExpired(s,r){i.verify(r.sourceReceipt)}}),this.expiryMonitor.launch()}getAdapter(i){return this.adapters.find(i)}getApplicationUsername(){return this.applicationUsername instanceof Function?this.applicationUsername():this.applicationUsername}register(i){this.registeredProducts.add(i).forEach(r=>{t.store.errorCallbacks.trigger(r,"register_error"),this.log.error(r)})}initialize(i=[this.defaultPlatform()]){return W(this,void 0,void 0,function*(){if(this.initializedHasBeenCalled)return this.log.warn("store.initialized() has been called already."),[];this.log.info("initialize("+JSON.stringify(i)+") v"+t.PLUGIN_VERSION),this.initializedHasBeenCalled=!0,this.lastUpdate=+new Date;const s=this,r=this.adapters.initialize(i,{error:this.triggerError.bind(this),get verbosity(){return s.verbosity},getApplicationUsername(){return s.getApplicationUsername()},get listener(){return s.listener},get log(){return s.log},get registeredProducts(){return s.registeredProducts},apiDecorators:{canPurchase:this.canPurchase.bind(this),owned:this.owned.bind(this),finish:this.finish.bind(this),order:this.order.bind(this),verify:this.verify.bind(this)}});return r.then(()=>{this._readyCallbacks.trigger("initialize_promise_resolved"),this.listener.setSupportedPlatforms(this.adapters.list.filter(l=>l.isSupported).map(l=>l.id))}),r})}refresh(){throw new Error("use store.initialize() or store.update()")}update(){var i;return W(this,void 0,void 0,function*(){if(this.log.info("update()"),!this._readyCallbacks.isReady){this.log.warn("Do not call store.update() at startup! It is meant to reload the price of products (if needed) long after initialization.");return}const s=+new Date;if(this.lastUpdate>s-this.minTimeBetweenUpdates){this.log.info("Skipping store.update() as the last call occurred less than store.minTimeBetweenUpdates millis ago.");return}this.lastUpdate=s;for(const r of this.registeredProducts.byPlatform()){const l=yield(i=this.adapters.findReady(r.platform))===null||i===void 0?void 0:i.loadProducts(r.products);l==null||l.forEach(o=>{o instanceof t.Product&&this.updatedCallbacks.trigger(o,"update_has_loaded_products")})}})}ready(i){this._readyCallbacks.add(i)}get isReady(){return this._readyCallbacks.isReady}when(){const i={productUpdated:(s,r)=>(this.updatedCallbacks.push(s,r),i),receiptUpdated:(s,r)=>(this.updatedReceiptsCallbacks.push(s,r),i),updated:(s,r)=>(this.updatedCallbacks.push(s,r),this.updatedReceiptsCallbacks.push(s,r),i),approved:(s,r)=>(this.approvedCallbacks.push(s,r),i),initiated:(s,r)=>(this.initiatedCallbacks.push(s,r),i),pending:(s,r)=>(this.pendingCallbacks.push(s,r),i),finished:(s,r)=>(this.finishedCallbacks.push(s,r),i),verified:(s,r)=>(this.verifiedCallbacks.push(s,r),i),unverified:(s,r)=>(this.unverifiedCallbacks.push(s,r),i),receiptsReady:(s,r)=>(this.receiptsReadyCallbacks.push(s,r),i),receiptsVerified:(s,r)=>(this.receiptsVerifiedCallbacks.push(s,r),i)};return i}off(i){this.updatedCallbacks.remove(i),this.updatedReceiptsCallbacks.remove(i),this.approvedCallbacks.remove(i),this.finishedCallbacks.remove(i),this.pendingCallbacks.remove(i),this.verifiedCallbacks.remove(i),this.unverifiedCallbacks.remove(i),this.receiptsReadyCallbacks.remove(i),this.receiptsVerifiedCallbacks.remove(i),this.errorCallbacks.remove(i),this._readyCallbacks.remove(i)}monitor(i,s,r){return this.transactionStateMonitors.start(i,t.Utils.safeCallback(this.log,"monitor()",s,r,"transactionStateMonitors_stateChanged"))}get products(){return[].concat(...this.adapters.list.map(i=>i.products))}get(i,s){var r;return(r=this.adapters.findReady(s))===null||r===void 0?void 0:r.products.find(l=>l.id===i)}get localReceipts(){return[].concat(...this.adapters.list.map(i=>i.receipts))}get localTransactions(){const i=[];for(const s of this.localReceipts)i.push(...s.transactions);return i}get verifiedReceipts(){return this._validator.verifiedReceipts}get verifiedPurchases(){return t.Internal.VerifiedReceipts.getVerifiedPurchases(this.verifiedReceipts)}findInVerifiedReceipts(i){return t.Internal.VerifiedReceipts.find(this.verifiedReceipts,i)}findInLocalReceipts(i){return t.Internal.LocalReceipts.find(this.localReceipts,i)}canPurchase(i){const s=i instanceof t.Offer?this.get(i.productId,i.platform):i,r=this.adapters.findReady(i.platform);return r!=null&&r.checkSupport("order")?t.Internal.LocalReceipts.canPurchase(this.localReceipts,s):!1}owned(i){return t.Internal.owned({product:typeof i=="string"?{id:i}:i,verifiedReceipts:this.validator?this.verifiedReceipts:void 0,localReceipts:this.localReceipts})}order(i,s){return W(this,void 0,void 0,function*(){this.log.info(`order(${i.productId})`);const r=this.adapters.findReady(i.platform);if(!r)return t.storeError(t.ErrorCode.PAYMENT_NOT_ALLOWED,"Adapter not found or not ready ("+i.platform+")",i.platform,null);const l=yield r.order(i,s||{});return l&&"isError"in l&&t.store.triggerError(l),l})}requestPayment(i,s){var r,l,o,u,f;const h=this.adapters.findReady(i.platform);if(!h)return t.PaymentRequestPromise.failed(t.ErrorCode.PAYMENT_NOT_ALLOWED,"Adapter not found or not ready ("+i.platform+")",i.platform,null);if(!i.amountMicros){i.amountMicros=0;for(const d of i.items)i.amountMicros+=(l=(r=d==null?void 0:d.pricing)===null||r===void 0?void 0:r.priceMicros)!==null&&l!==void 0?l:0}if(i.currency)for(const d of i.items)if(!((u=d==null?void 0:d.pricing)===null||u===void 0)&&u.currency){if(i.currency!==d.pricing.currency)return t.PaymentRequestPromise.failed(t.ErrorCode.PAYMENT_INVALID,"Currencies do not match",i.platform,d.id)}else d!=null&&d.pricing&&(d.pricing.currency=i.currency);else for(const d of i.items)!((o=d==null?void 0:d.pricing)===null||o===void 0)&&o.currency&&(i.currency=d.pricing.currency);if(i.items.length===1){const d=i.items[0];d&&!d.pricing&&(d.pricing={priceMicros:(f=i.amountMicros)!==null&&f!==void 0?f:0,currency:i.currency})}const c=new t.PaymentRequestPromise;return h.requestPayment(i,s).then(d=>{if(c.trigger(d),d instanceof t.Transaction){const p=v=>{c.trigger(d),d.state===t.TransactionState.FINISHED&&x.stop()},x=this.monitor(d,p,"requestPayment_onStateChange")}}),c}checkSupport(i,s){const r=this.adapters.find(i);return r?r.checkSupport(s):!1}verify(i){return W(this,void 0,void 0,function*(){this.log.info(`verify(${i.className})`),this._validator.add(i),setTimeout(()=>this._validator.run(),200)})}finish(i){return W(this,void 0,void 0,function*(){this.log.info(`finish(${i.className})`),(i instanceof t.VerifiedReceipt?i.sourceReceipt.transactions:i instanceof t.Receipt?i.transactions:[i]).forEach(r=>{var l;(l=this.adapters.findReady(r.platform))===null||l===void 0||l.finish(r)})})}restorePurchases(){return W(this,void 0,void 0,function*(){let i;for(const s of this.adapters.list)s.ready&&(i=i??(yield s.restorePurchases()));return i})}manageSubscriptions(i){return W(this,void 0,void 0,function*(){this.log.info("manageSubscriptions()");const s=this.adapters.findReady(i);return s?s.manageSubscriptions():t.storeError(t.ErrorCode.SETUP,"Found no adapter ready to handle 'manageSubscription'",i??null,null)})}manageBilling(i){return W(this,void 0,void 0,function*(){this.log.info("manageBilling()");const s=this.adapters.findReady(i);return s?s.manageBilling():t.storeError(t.ErrorCode.SETUP,"Found no adapter ready to handle 'manageBilling'",i??null,null)})}defaultPlatform(){switch(t.Utils.platformId()){case"android":return t.Platform.GOOGLE_PLAY;case"ios":return t.Platform.APPLE_APPSTORE;default:return t.Platform.TEST}}error(i){this.errorCallbacks.push(i)}triggerError(i){this.errorCallbacks.trigger(i,"triggerError")}}t.Store=e})(j||(j={}));window.cordova?setTimeout(Qx,0):Qx();function Qx(){var t;console.log("Create CdvPurchase...");const e=(t=window.CdvPurchase)===null||t===void 0?void 0:t.store;window.CdvPurchase=j,e?window.CdvPurchase.store=e:window.CdvPurchase.store=new j.Store,Object.assign(window.CdvPurchase.store,j.LogLevel,j.ProductType,j.ErrorCode,j.Platform)}var j;(function(t){(function(e){e.CONSUMABLE="consumable",e.NON_CONSUMABLE="non consumable",e.FREE_SUBSCRIPTION="free subscription",e.PAID_SUBSCRIPTION="paid subscription",e.NON_RENEWING_SUBSCRIPTION="non renewing subscription",e.APPLICATION="application"})(t.ProductType||(t.ProductType={})),function(e){e.NON_RECURRING="NON_RECURRING",e.FINITE_RECURRING="FINITE_RECURRING",e.INFINITE_RECURRING="INFINITE_RECURRING"}(t.RecurrenceMode||(t.RecurrenceMode={})),function(e){e.PAY_AS_YOU_GO="PayAsYouGo",e.UP_FRONT="UpFront",e.FREE_TRIAL="FreeTrial"}(t.PaymentMode||(t.PaymentMode={})),function(e){e.APPLE_APPSTORE="ios-appstore",e.GOOGLE_PLAY="android-playstore",e.WINDOWS_STORE="windows-store-transaction",e.BRAINTREE="braintree",e.TEST="test"}(t.Platform||(t.Platform={})),function(e){e.INITIATED="initiated",e.PENDING="pending",e.APPROVED="approved",e.CANCELLED="cancelled",e.FINISHED="finished",e.UNKNOWN_STATE=""}(t.TransactionState||(t.TransactionState={})),function(e){e.LAPSE="Lapse",e.RENEW="Renew"}(t.RenewalIntent||(t.RenewalIntent={})),function(e){e.NOTIFIED="Notified",e.AGREED="Agreed"}(t.PriceConsentStatus||(t.PriceConsentStatus={})),function(e){e.NOT_CANCELED="",e.DEVELOPER="Developer",e.SYSTEM="System",e.SYSTEM_REPLACED="System.Replaced",e.SYSTEM_PRODUCT_UNAVAILABLE="System.ProductUnavailable",e.SYSTEM_BILLING_ERROR="System.BillingError",e.SYSTEM_DELETED="System.Deleted",e.CUSTOMER="Customer",e.CUSTOMER_TECHNICAL_ISSUES="Customer.TechnicalIssues",e.CUSTOMER_PRICE_INCREASE="Customer.PriceIncrease",e.CUSTOMER_COST="Customer.Cost",e.CUSTOMER_FOUND_BETTER_APP="Customer.FoundBetterApp",e.CUSTOMER_NOT_USEFUL_ENOUGH="Customer.NotUsefulEnough",e.CUSTOMER_OTHER_REASON="Customer.OtherReason",e.UNKNOWN="Unknown"}(t.CancelationReason||(t.CancelationReason={}))})(j||(j={}));var j;(function(t){class e{constructor(i,s){this.className="Offer",this.id=i.id,this.pricingPhases=i.pricingPhases,Object.defineProperty(this,"productId",{enumerable:!0,get:()=>i.product.id}),Object.defineProperty(this,"productType",{enumerable:!0,get:()=>i.product.type}),Object.defineProperty(this,"productGroup",{enumerable:!0,get:()=>i.product.group}),Object.defineProperty(this,"platform",{enumerable:!0,get:()=>i.product.platform}),Object.defineProperty(this,"order",{enumerable:!1,get:()=>r=>s.order(this,r)}),Object.defineProperty(this,"canPurchase",{enumerable:!1,get:()=>s.canPurchase(this)})}get productId(){return""}get productType(){return t.ProductType.APPLICATION}get productGroup(){}get platform(){return t.Platform.TEST}order(i){return W(this,void 0,void 0,function*(){})}get canPurchase(){return!1}}t.Offer=e})(j||(j={}));var j;(function(t){class e{constructor(){this.failedCallbacks=new t.Internal.PromiseLike,this.initiatedCallbacks=new t.Internal.PromiseLike,this.approvedCallbacks=new t.Internal.PromiseLike,this.finishedCallbacks=new t.Internal.PromiseLike,this.cancelledCallback=new t.Internal.PromiseLike}failed(i){return this.failedCallbacks.push(i),this}initiated(i){return this.initiatedCallbacks.push(i),this}approved(i){return this.approvedCallbacks.push(i),this}finished(i){return this.finishedCallbacks.push(i),this}cancelled(i){return this.cancelledCallback.push(i),this}trigger(i){if(!i)this.cancelledCallback.resolve();else if("isError"in i)this.failedCallbacks.resolve(i);else switch(i.state){case t.TransactionState.INITIATED:this.initiatedCallbacks.resolve(i);break;case t.TransactionState.APPROVED:this.approvedCallbacks.resolve(i);break;case t.TransactionState.FINISHED:this.finishedCallbacks.resolve(i);break}return this}static failed(i,s,r,l){return new e().trigger(t.storeError(i,s,r,l))}static cancelled(){return new e().trigger()}static initiated(i){return new e().trigger(i)}}t.PaymentRequestPromise=e})(j||(j={}));var j;(function(t){class e{constructor(i,s){this.className="Receipt",this.transactions=[],this.platform=i,Object.defineProperty(this,"verify",{enumerable:!1,get(){return()=>s.verify(this)}}),Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>s.finish(this)}})}verify(){return W(this,void 0,void 0,function*(){})}finish(){return W(this,void 0,void 0,function*(){})}hasTransaction(i){return!!this.transactions.find(s=>s===i)}lastTransaction(){return this.transactions[this.transactions.length-1]}}t.Receipt=e})(j||(j={}));var j;(function(t){class e{constructor(i,s,r){this.className="Transaction",this.transactionId="",this.state=t.TransactionState.UNKNOWN_STATE,this.products=[],this.platform=i,Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>r.finish(this)}}),Object.defineProperty(this,"verify",{enumerable:!1,get(){return()=>r.verify(this)}}),Object.defineProperty(this,"parentReceipt",{enumerable:!1,get(){return s}})}finish(){return W(this,void 0,void 0,function*(){})}verify(){return W(this,void 0,void 0,function*(){})}get parentReceipt(){return{}}}t.Transaction=e})(j||(j={}));var j;(function(t){(function(e){class n{static find(s,r){var l,o;if(!r)return;let u;for(const f of s)if(!(r.platform&&f.platform!==r.platform))for(const h of f.transactions)for(const c of h.products)c.id===r.id&&(!u||((l=h.purchaseDate)!==null&&l!==void 0?l:0)<((o=u.purchaseDate)!==null&&o!==void 0?o:1))&&(u=h);return u}static isOwned(s,r){if(!r)return!1;const l=n.find(s,r);return!l||l.isConsumed||l.isPending?!1:l.expirationDate?l.expirationDate.getTime()>+new Date:!0}static canPurchase(s,r){if(!r)return!1;const l=n.find(s,r);return!l||l.isConsumed?!0:l.expirationDate?l.expirationDate.getTime()<=+new Date:!0}}e.LocalReceipts=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){function n(i){return i.verifiedReceipts!==void 0?e.VerifiedReceipts.isOwned(i.verifiedReceipts,i.product):i.localReceipts!==void 0?e.LocalReceipts.isOwned(i.localReceipts,i.product):!1}e.owned=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(){this.resolved=!1,this.callbacks=[]}push(s){this.resolved?setTimeout(s,0,this.resolvedArgument):this.callbacks.push(s)}resolve(s){this.resolved||(this.resolved=!0,this.resolvedArgument=s,this.callbacks.forEach(r=>setTimeout(r,0,s)),this.callbacks=[])}}e.PromiseLike=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(s=5e3,r=12e4){this.maxTimeout=12e4,this.minTimeout=5e3,this.retryTimeout=5e3,this.retries=[],this.minTimeout=s,this.maxTimeout=r,this.retryTimeout=s,document.addEventListener("online",()=>{const l=this.retries;this.retries=[],this.retryTimeout=this.minTimeout;for(var o=0;o<l.length;++o)clearTimeout(l[o].tid),l[o].fn.call(this)},!1)}retry(s){var r=setTimeout(()=>{this.retries=this.retries.filter(function(l){return r!==l.tid}),s()},this.retryTimeout);this.retries.push({tid:r,fn:s}),this.retryTimeout*=2,this.retryTimeout>this.maxTimeout&&(this.retryTimeout=this.maxTimeout)}}e.Retry=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){class n{static find(s,r){var l,o;if(!r)return;let u;for(const f of s)if(!(r.platform&&f.platform!==r.platform))for(const h of f.collection)h.id===r.id&&((l=u==null?void 0:u.purchaseDate)!==null&&l!==void 0?l:0)<((o=h.purchaseDate)!==null&&o!==void 0?o:1)&&(u=h);return u}static isOwned(s,r){if(!r)return!1;const l=n.find(s,r);return!l||l!=null&&l.isExpired?!1:l!=null&&l.expiryDate?l.expiryDate>+new Date:!0}static getVerifiedPurchases(s){var r,l,o,u;const f={};for(const h of s)for(const c of h.collection){const d=h.platform+":"+c.id,p=f[d];(!p||p&&((l=(r=p.lastRenewalDate)!==null&&r!==void 0?r:p.purchaseDate)!==null&&l!==void 0?l:0)<((u=(o=c.lastRenewalDate)!==null&&o!==void 0?o:c.purchaseDate)!==null&&u!==void 0?u:0))&&(f[d]=Object.assign(Object.assign({},c),{platform:h.platform}))}return Object.keys(f).map(h=>f[h])}}e.VerifiedReceipts=n})(t.Internal||(t.Internal={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){n.Name="name",n.EmailAddress="emailAddress",n.PhoneNumber="phoneNumber",n.PostalAddress="postalAddress",n.PhoneticName="phoneticName"})(e.ContactField||(e.ContactField={})),function(n){n.Amex="Amex",n.Barcode="Barcode",n.CartesBancaires="CartesBancaires",n.ChinaUnionPay="ChinaUnionPay",n.Dankort="Dankort",n.Discover="Discover",n.Eftpos="Eftpos",n.Electron="Electron",n.Elo="Elo",n.Girocard="Girocard",n.IDCredit="IDCredit",n.Interac="Interac",n.JCB="JCB",n.Mada="Mada",n.Maestro="Maestro",n.MasterCard="MasterCard",n.Mir="Mir",n.Nanaco="Nanaco",n.PrivateLabel="PrivateLabel",n.QuicPay="QuicPay",n.Suica="Suica",n.Visa="Visa",n.VPay="VPay",n.Waon="Waon"}(e.PaymentNetwork||(e.PaymentNetwork={})),function(n){n.ThreeDS="3DS",n.EMV="EMV",n.Credit="Credit",n.Debit="Debit"}(e.MerchantCapability||(e.MerchantCapability={}))})(t.ApplePay||(t.ApplePay={}))})(j||(j={}));var j;(function(t){(function(e){function n(r){return`virtual.${r}`}class i{constructor(l,o){var u,f;this.id=t.Platform.APPLE_APPSTORE,this.name="AppStore",this.ready=!1,this._canMakePayments=!1,this.forceReceiptReload=!1,this._products=[],this.validProducts={},this._paymentMonitor=()=>{},this.supportsParallelLoading=!0,this._appStoreReceiptLoading=!1,this._appStoreReceiptCallbacks=[],this.context=l,this.bridge=new e.Bridge.Bridge,this.log=l.log.child("AppleAppStore"),this.discountEligibilityDeterminer=o.discountEligibilityDeterminer,this.needAppReceipt=(u=o.needAppReceipt)!==null&&u!==void 0?u:!0,this.autoFinish=(f=o.autoFinish)!==null&&f!==void 0?f:!1,this.pseudoReceipt=new t.Receipt(t.Platform.APPLE_APPSTORE,this.context.apiDecorators),this.receiptsUpdated=t.Utils.createDebouncer(()=>{this._receiptsUpdated()},300)}get products(){return this._products}getProduct(l){return this._products.find(o=>o.id===l)}get receipts(){return this.isSupported?(this._receipt?[this._receipt]:[]).concat(this.pseudoReceipt?this.pseudoReceipt:[]):[]}addValidProducts(l,o){o.forEach(u=>{const f=l.find(h=>h.id===u.id);f&&(this.validProducts[u.id]=Object.assign(Object.assign({},u),f))})}get isSupported(){return t.Utils.platformId()==="ios"}upsertTransactionInProgress(l,o){const u=n(l);return new Promise(f=>{const h=this.pseudoReceipt.transactions.find(c=>c.transactionId===u);if(h)h.state=o,h.refresh(l),f(h);else{const c=new e.SKTransaction(t.Platform.APPLE_APPSTORE,this.pseudoReceipt,this.context.apiDecorators);c.state=o,c.transactionId=u,c.refresh(l),this.pseudoReceipt.transactions.push(c),f(c)}})}removeTransactionInProgress(l){const o=n(l);this.pseudoReceipt.transactions=this.pseudoReceipt.transactions.filter(u=>u.transactionId!==o)}upsertTransaction(l,o,u){return W(this,void 0,void 0,function*(){return new Promise(f=>{this.initializeAppReceipt(()=>{var h;if(!this._receipt){this.log.warn("Failed to load the application receipt, cannot proceed with handling the purchase");return}const c=(h=this._receipt)===null||h===void 0?void 0:h.transactions.find(d=>d.transactionId===o);if(c)c.state=u,c.refresh(l),f(c);else{const d=new e.SKTransaction(t.Platform.APPLE_APPSTORE,this._receipt,this.context.apiDecorators);d.state=u,d.transactionId=o,d.refresh(l),this._receipt.transactions.push(d),f(d)}})})})}removeTransaction(l){this._receipt&&(this._receipt.transactions=this._receipt.transactions.filter(o=>o.transactionId!==l))}_receiptsUpdated(){this._receipt?(this.log.debug("receipt updated and ready."),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this._receipt,this.pseudoReceipt]),this.context.listener.receiptsReady(t.Platform.APPLE_APPSTORE)):(this.log.debug("receipt updated."),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this.pseudoReceipt]))}setPaymentMonitor(l){this._paymentMonitor=l}callPaymentMonitor(l,o,u){this._paymentMonitor(l)}initialize(){return new Promise(l=>{this.log.info("bridge.init");const o=this.log.child("Bridge");this.bridge.init({autoFinish:this.autoFinish,debug:this.context.verbosity===t.LogLevel.DEBUG,log:u=>o.debug(u),error:(u,f,h)=>{if(this.log.error("ERROR: "+u+" - "+f),u===t.ErrorCode.PAYMENT_CANCELLED){this.callPaymentMonitor("cancelled",t.ErrorCode.PAYMENT_CANCELLED,f);return}else this.context.error(s(u,f,(h==null?void 0:h.productId)||null))},ready:()=>{this.log.info("ready")},purchased:(u,f,h,c,d)=>W(this,void 0,void 0,function*(){this.log.info("purchase: id:"+u+" product:"+f+" originalTransaction:"+h+" - date:"+c+" - discount:"+d),(yield this.upsertTransaction(f,u,t.TransactionState.APPROVED)).refresh(f,h,c,d),this.removeTransactionInProgress(f),this.receiptsUpdated.call(),this.callPaymentMonitor("purchased")}),purchaseEnqueued:(u,f)=>W(this,void 0,void 0,function*(){this.log.info("purchaseEnqueued: "+u+" - "+f),yield this.upsertTransactionInProgress(u,t.TransactionState.INITIATED),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this.pseudoReceipt])}),purchaseFailed:(u,f,h)=>{this.log.info("purchaseFailed: "+u+" - "+f+" - "+h),this.removeTransactionInProgress(u),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this.pseudoReceipt]),this.callPaymentMonitor("failed",f,h)},purchasing:u=>W(this,void 0,void 0,function*(){this.log.info("purchasing: "+u),yield this.upsertTransactionInProgress(u,t.TransactionState.INITIATED),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this.pseudoReceipt])}),deferred:u=>W(this,void 0,void 0,function*(){this.log.info("deferred: "+u),yield this.upsertTransactionInProgress(u,t.TransactionState.PENDING),this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[this.pseudoReceipt]),this.callPaymentMonitor("deferred")}),finished:(u,f)=>W(this,void 0,void 0,function*(){yield this.receiptsUpdated.wait(),this.log.info("finish: "+u+" - "+f),this.removeTransactionInProgress(f),yield this.upsertTransaction(f,u,t.TransactionState.FINISHED),this.receiptsUpdated.call()}),restored:(u,f)=>W(this,void 0,void 0,function*(){this.log.info("restore: "+u+" - "+f),yield this.upsertTransaction(f,u,t.TransactionState.APPROVED),this.receiptsUpdated.call()}),receiptsRefreshed:u=>{this.log.info("receiptsRefreshed"),this._receipt&&this._receipt.refresh(u,this.needAppReceipt,this.context.apiDecorators)},restoreFailed:u=>{this.log.info("restoreFailed: "+u),this.onRestoreCompleted&&(this.onRestoreCompleted(s(u,"Restore purchases failed",null)),this.onRestoreCompleted=void 0)},restoreCompleted:()=>{this.log.info("restoreCompleted"),this.onRestoreCompleted&&(this.onRestoreCompleted(void 0),this.onRestoreCompleted=void 0)}},()=>W(this,void 0,void 0,function*(){this.log.info("bridge.init done"),yield this.canMakePayments(),l(void 0)}),(u,f)=>{this.log.info("bridge.init failed: "+u+" - "+f),l(s(u,f,null))})})}loadReceipts(){return new Promise(l=>{setTimeout(()=>{this.initializeAppReceipt(()=>{this.receiptsUpdated.call(),this._receipt?l([this._receipt,this.pseudoReceipt]):l([this.pseudoReceipt])})},300)})}canMakePayments(){return W(this,void 0,void 0,function*(){return new Promise(l=>{this.bridge.canMakePayments(()=>{this._canMakePayments=!0,l(!0)},o=>{this.log.warn(`canMakePayments: ${o}`),this._canMakePayments=!1,l(!1)})})})}initializeAppReceipt(l){return W(this,void 0,void 0,function*(){if(this._receipt)return this.log.debug("initializeAppReceipt() => already initialized."),l(void 0);if(this._appStoreReceiptCallbacks.push(l),this._appStoreReceiptLoading){this.log.debug("initializeAppReceipt() => already loading.");return}this._appStoreReceiptLoading=!0;const o=yield this.loadAppStoreReceipt(),u=f=>{const h=this._appStoreReceiptCallbacks;this._appStoreReceiptCallbacks=[],h.forEach(c=>{c(f)})};if(!(o!=null&&o.appStoreReceipt)){this.log.warn("no appStoreReceipt"),this._appStoreReceiptLoading=!1,u(s(t.ErrorCode.REFRESH,"No appStoreReceipt",null));return}this._receipt=new e.SKApplicationReceipt(o,this.needAppReceipt,this.context.apiDecorators),u(void 0)})}prepareReceipt(l){l!=null&&l.appStoreReceipt&&(this._receipt?this._receipt.refresh(l,this.needAppReceipt,this.context.apiDecorators):this._receipt=new e.SKApplicationReceipt(l,this.needAppReceipt,this.context.apiDecorators))}loadAppStoreReceipt(){return W(this,void 0,void 0,function*(){let l=!1;return new Promise(o=>{var u;if(!((u=this.bridge.appStoreReceipt)===null||u===void 0)&&u.appStoreReceipt&&!this.forceReceiptReload)return this.log.debug("using cached appstore receipt"),o(this.bridge.appStoreReceipt);this.log.debug("loading appstore receipt..."),this.forceReceiptReload=!1,this.bridge.loadReceipts(f=>{this.log.debug("appstore receipt loaded"),l||o(f),l=!0},(f,h)=>{this.log.warn("Failed to load appStoreReceipt: "+f+" - "+h),l||o(void 0),l=!0}),setTimeout(function(){l||o(void 0),l=!0},5e3)}).then(o=>(this.context.listener.receiptsReady(t.Platform.APPLE_APPSTORE),o)).catch(o=>(this.context.listener.receiptsReady(t.Platform.APPLE_APPSTORE),o))})}loadEligibility(l){return W(this,void 0,void 0,function*(){if(this.log.debug("load eligibility: "+JSON.stringify(l)),!this.discountEligibilityDeterminer)return this.log.debug("No discount eligibility determiner, skipping..."),new e.Internal.DiscountEligibilities([],[]);const o=[];if(l.forEach(u=>{var f,h,c;(f=u.discounts)===null||f===void 0||f.forEach(d=>{o.push({productId:u.id,discountId:d.id,discountType:d.type})}),((c=(h=u.discounts)===null||h===void 0?void 0:h.length)!==null&&c!==void 0?c:0)===0&&u.introPrice&&o.push({productId:u.id,discountId:"intro",discountType:"Introductory"})}),o.length>0){const u=yield this.loadAppStoreReceipt();if(!u||!u.appStoreReceipt)return this.log.debug("no receipt, assuming introductory price are available."),new e.Internal.DiscountEligibilities(o,o.map(f=>f.discountType==="Introductory"));{this.log.debug("calling discount eligibility determiner.");const f=yield this.callDiscountEligibilityDeterminer(u,o);return this.log.debug("response: "+JSON.stringify(f)),new e.Internal.DiscountEligibilities(o,f)}}else return new e.Internal.DiscountEligibilities([],[])})}callDiscountEligibilityDeterminer(l,o){return new Promise(u=>{if(!this.discountEligibilityDeterminer)return u([]);this.discountEligibilityDeterminer(l,o,u)})}loadProducts(l){return new Promise(o=>{this.log.info("bridge.load"),this.bridge.load(l.map(u=>u.id),(u,f)=>W(this,void 0,void 0,function*(){this.log.info("bridge.loaded: "+JSON.stringify({validProducts:u,invalidProducts:f})),this.addValidProducts(l,u);const h=yield this.loadEligibility(u);this.log.info("eligibilities ready: "+JSON.stringify(h));const c=l.map(d=>{if(f.indexOf(d.id)>=0)return this.log.debug(`${d.id} is invalid`),s(t.ErrorCode.INVALID_PRODUCT_ID,"Product not found in AppStore. #400",d.id);{const p=u.find(v=>v.id===d.id);if(this.log.debug(`${d.id} is valid: ${JSON.stringify(p)}`),!p)return s(t.ErrorCode.INVALID_PRODUCT_ID,"Product not found in AppStore. #404",d.id);let x=this.getProduct(d.id);return x?(this.log.debug("refreshing existing product"),x==null||x.refresh(p,this.context.apiDecorators,h)):(this.log.debug("registering new product"),x=new e.SKProduct(p,d,this.context.apiDecorators,h),this._products.push(x)),x}});this.log.debug(`Products loaded: ${JSON.stringify(c)}`),o(c)}),(u,f)=>l.map(h=>s(u,f,null)))})}order(l,o){return W(this,void 0,void 0,function*(){let u=!1;return new Promise(f=>{var h;const c=b=>{u||(this.setPaymentMonitor(()=>{}),u=!0,f(b))};this.log.info("order");const d=l.id!==e.DEFAULT_OFFER_ID?l.id:void 0,p=(h=o==null?void 0:o.appStore)===null||h===void 0?void 0:h.discount;if(d&&!p)return c(s(t.ErrorCode.MISSING_OFFER_PARAMS,"Missing additionalData.appStore.discount when ordering a discount offer",l.productId));if(d&&(p==null?void 0:p.id)!==d)return c(s(t.ErrorCode.INVALID_OFFER_IDENTIFIER,"Offer identifier does not match additionalData.appStore.discount.id",l.productId));this.setPaymentMonitor((b,m,g)=>{if(this.log.info("order.paymentMonitor => "+b+" "+(m??"")+" "+(g??"")),!u)switch(b){case"cancelled":c(s(m??t.ErrorCode.PAYMENT_CANCELLED,g??"The user cancelled the order.",l.productId));break;case"failed":setTimeout(()=>{c(s(m??t.ErrorCode.PURCHASE,g??"Purchase failed",l.productId))},500);break;case"purchased":case"deferred":c(void 0);break}});const x=()=>{this.log.info("order.success")},v=()=>{this.log.info("order.error"),c(s(t.ErrorCode.PURCHASE,"Failed to place order",l.productId))};this.forceReceiptReload=!0,this.bridge.purchase(l.productId,1,this.context.getApplicationUsername(),p,x,v)})})}finish(l){return new Promise(o=>{if(this.log.info("finish("+l.transactionId+")"),l.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID||l.transactionId===n(l.products[0].id))return l.state=t.TransactionState.FINISHED,this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[l.parentReceipt]),o(void 0);const u=()=>{l.state=t.TransactionState.FINISHED,this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[l.parentReceipt]),o(void 0)},f=h=>{var c,d;h!=null&&h.includes("[#CdvPurchase:100]")?u():o(s(t.ErrorCode.FINISH,"Failed to finish transaction",(d=(c=l.products[0])===null||c===void 0?void 0:c.id)!==null&&d!==void 0?d:null))};this.bridge.finish(l.transactionId,u,f)})}refreshReceipt(){return new Promise(l=>{const o=f=>{l(f)},u=(f,h)=>{l(s(f,h,null))};this.bridge.refreshReceipts(o,u)})}receiptValidationBody(l){return W(this,void 0,void 0,function*(){if(l.platform!==t.Platform.APPLE_APPSTORE||l!==this._receipt)return;const o=l;let u=o.nativeData;if(this.forceReceiptReload){const h=yield this.loadAppStoreReceipt();this.forceReceiptReload=!1,h&&(u=h,this.prepareReceipt(h))}if(!o.nativeData.appStoreReceipt){this.log.info("Cannot prepare the receipt validation body, because appStoreReceipt is missing. Refreshing...");const h=yield this.refreshReceipt();if(!h||"isError"in h){this.log.warn("Failed to refresh receipt, cannot run receipt validation."),h&&this.log.error(h);return}this.log.info("Receipt refreshed."),u=h}const f=o.transactions.slice(-1)[0];return{id:u.bundleIdentifier,type:t.ProductType.APPLICATION,products:t.Utils.objectValues(this.validProducts).map(h=>new e.SKProduct(h,h,this.context.apiDecorators,{isEligible:()=>!0})),transaction:{type:"ios-appstore",id:f==null?void 0:f.transactionId,appStoreReceipt:u.appStoreReceipt}}})}handleReceiptValidationResponse(l,o){var u,f;return W(this,void 0,void 0,function*(){let h=!1;if(o.ok){const c=(u=o.data)===null||u===void 0?void 0:u.transaction;(c==null?void 0:c.type)==="ios-appstore"&&"original_application_version"in c&&((f=this._receipt)===null||f===void 0||f.transactions.forEach(d=>{d.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID&&c.original_purchase_date_ms&&(d.purchaseDate=new Date(parseInt(c.original_purchase_date_ms)),h=!0)}))}h&&this.context.listener.receiptsUpdated(t.Platform.APPLE_APPSTORE,[l])})}requestPayment(l,o){return W(this,void 0,void 0,function*(){return s(t.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return W(this,void 0,void 0,function*(){this.bridge.manageSubscriptions()})}manageBilling(){return W(this,void 0,void 0,function*(){this.bridge.manageBilling()})}checkSupport(l){return l==="order"?this._canMakePayments:["order","manageBilling","manageSubscriptions"].indexOf(l)>=0}restorePurchases(){return new Promise(l=>{this.onRestoreCompleted=o=>{this.onRestoreCompleted=void 0,this.bridge.refreshReceipts(u=>{l(o)},(u,f)=>{l(o||s(u,f,null))})},this.forceReceiptReload=!0,this.bridge.restore()})}presentCodeRedemptionSheet(){return new Promise(l=>{this.bridge.presentCodeRedemptionSheet(l)})}}e.Adapter=i;function s(r,l,o){return t.storeError(r,l,t.Platform.APPLE_APPSTORE,o)}})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){const i=u=>{};let s=i;function r(u,f,h,c){window.cordova.exec(h,c,"InAppPurchase",u,f)}function l(u,f,...h){if(u)try{u.apply(this,h)}catch(c){s("exception in "+f+': "'+c+'"')}}class o{constructor(){this.transactionsForProduct={},this.initialized=!1,this.registeredProducts=[],this.needRestoreNotification=!1,this.pendingUpdates=[],this.onPurchased=!1,this.onFailed=!1,this.onRestored=!1,window.storekit=this,this.options={error:i,ready:i,purchased:i,purchaseEnqueued:i,purchasing:i,purchaseFailed:i,deferred:i,finished:i,restored:i,receiptsRefreshed:i,restoreFailed:i,restoreCompleted:i}}init(f,h,c){this.options={error:f.error||i,ready:f.ready||i,purchased:f.purchased||i,purchaseEnqueued:f.purchaseEnqueued||i,purchasing:f.purchasing||i,purchaseFailed:f.purchaseFailed||i,deferred:f.deferred||i,finished:f.finished||i,restored:f.restored||i,receiptsRefreshed:f.receiptsRefreshed||i,restoreFailed:f.restoreFailed||i,restoreCompleted:f.restoreCompleted||i},f.debug&&(r("debug",[],i,i),s=f.log||function(x){console.log("[CdvPurchase.AppAppStore.Bridge] "+x)}),f.autoFinish&&r("autoFinish",[],i,i),r("setup",[],()=>{s("setup ok"),l(this.options.ready,"options.ready"),l(h,"init.success"),this.initialized=!0,setTimeout(()=>this.processPendingTransactions(),50)},x=>{s("setup failed"),l(c,"init.error",t.ErrorCode.SETUP,"Setup failed: "+x)})}processPendingTransactions(){s("processing pending transactions"),r("processPendingTransactions",[],()=>{this.finalizeTransactionUpdates()},void 0)}purchase(f,h,c,d,p,x){h=h|0||1;const v=this.options;if(this.registeredProducts.indexOf(f)<0){const g="Purchasing "+f+" failed.  Ensure the product was loaded first with Bridge.load(...)!";s(g),typeof v.error=="function"&&l(v.error,"options.error",t.ErrorCode.PURCHASE,"Trying to purchase a unknown product.",{productId:f,quantity:h});return}r("purchase",[f,h,c,d||{}],()=>{s("Purchase enqueued "+f),typeof v.purchaseEnqueued=="function"&&l(v.purchaseEnqueued,"options.purchaseEnqueued",f,h),l(p,"purchase.success")},()=>{const g="Purchase failed: "+f;s(g),typeof v.error=="function"&&l(v.error,"options.error",t.ErrorCode.PURCHASE,g,{productId:f,quantity:h}),l(x,"purchase.error")})}canMakePayments(f,h){return r("canMakePayments",[],f,h)}restore(f){this.needRestoreNotification=!0,r("restoreCompletedTransactions",[],f,f)}manageSubscriptions(f){r("manageSubscriptions",[],f,f)}manageBilling(f){r("manageBilling",[],f,f)}presentCodeRedemptionSheet(f){r("presentCodeRedemptionSheet",[],f,f)}load(f,h,c){const d=this.options;if(typeof f=="string"&&(f=[f]),!f)l(h,"load.success",[],[]);else if(!f.length)l(h,"load.success",[],[]);else{if(typeof f[0]!="string"){const v="invalid productIds given to store.load: "+JSON.stringify(f);s(v),l(d.error,"options.error",t.ErrorCode.LOAD,v),l(c,"load.error",t.ErrorCode.LOAD,v);return}s("load "+JSON.stringify(f));const p=v=>{const b=v[0],m=v[1];s("load ok: { valid:"+JSON.stringify(b)+" invalid:"+JSON.stringify(m)+" }"),l(h,"load.success",b,m)},x=v=>{s("load failed"),s(v);const b="Load failed: "+v;l(d.error,"options.error",t.ErrorCode.LOAD,b),l(c,"load.error",t.ErrorCode.LOAD,b)};this.registeredProducts=this.registeredProducts.concat(f),r("load",[f],p,x)}}finish(f,h,c){r("finishTransaction",[f],h,c)}finalizeTransactionUpdates(){for(let f=0;f<this.pendingUpdates.length;++f){const h=this.pendingUpdates[f];this.transactionUpdated(h.state,h.errorCode,h.errorText,h.transactionIdentifier,h.productId,h.transactionReceipt,h.originalTransactionIdentifier,h.transactionDate,h.discountId)}this.pendingUpdates=[]}lastTransactionUpdated(){}transactionUpdated(f,h,c,d,p,x,v,b,m){if(!this.initialized){this.pendingUpdates.push({state:f,errorCode:h,errorText:c,transactionIdentifier:d,productId:p,transactionReceipt:x,originalTransactionIdentifier:v,transactionDate:b,discountId:m});return}switch(s("transaction updated:"+d+" state:"+f+" product:"+p),p&&d&&(this.transactionsForProduct[p]?this.transactionsForProduct[p].push(d):this.transactionsForProduct[p]=[d]),f){case"PaymentTransactionStatePurchasing":l(this.options.purchasing,"options.purchasing",p);return;case"PaymentTransactionStatePurchased":l(this.options.purchased,"options.purchase",d,p,v,b,m);return;case"PaymentTransactionStateDeferred":l(this.options.deferred,"options.deferred",p);return;case"PaymentTransactionStateFailed":l(this.options.purchaseFailed,"options.purchaseFailed",p,h||t.ErrorCode.UNKNOWN,c||"ERROR"),l(this.options.error,"options.error",h||t.ErrorCode.UNKNOWN,c||"ERROR",{productId:p});return;case"PaymentTransactionStateRestored":l(this.options.restored,"options.restore",d,p);return;case"PaymentTransactionStateFinished":l(this.options.finished,"options.finish",d,p);return}}restoreCompletedTransactionsFinished(){this.needRestoreNotification&&(this.needRestoreNotification=!1,l(this.options.restoreCompleted,"options.restoreCompleted"))}restoreCompletedTransactionsFailed(f){this.needRestoreNotification&&(this.needRestoreNotification=!1,l(this.options.restoreFailed,"options.restoreFailed",f))}parseReceiptArgs(f){const h=f[0],c=f[1],d=f[2],p=f[3],x=f[4];return s("infoPlist: "+c+","+d+","+p+","+x),{appStoreReceipt:h,bundleIdentifier:c,bundleShortVersion:d,bundleNumericVersion:p,bundleSignature:x}}refreshReceipts(f,h){const c=p=>{const x=this.parseReceiptArgs(p);this.appStoreReceipt=x,l(this.options.receiptsRefreshed,"options.receiptsRefreshed",x),l(f,"refreshReceipts.success",x)},d=p=>{s("refresh receipt failed: "+p),p.includes("(@AMSErrorDomain:100)")&&s('authentication failed, indicated by the string "(@AMSErrorDomain:100)"'),l(this.options.error,"options.error",t.ErrorCode.REFRESH_RECEIPTS,"Failed to refresh receipt: "+p),l(h,"refreshReceipts.error",t.ErrorCode.REFRESH_RECEIPTS,"Failed to refresh receipt: "+p)};this.appStoreReceipt=null,s("refreshing appStoreReceipt"),r("appStoreRefreshReceipt",[],c,d)}loadReceipts(f,h){const c=p=>{const x=this.parseReceiptArgs(p);this.appStoreReceipt=x,l(f,"loadReceipts.callback",x)},d=p=>{};s("loading appStoreReceipt"),r("appStoreReceipt",[],c,d)}}n.Bridge=o})(e.Bridge||(e.Bridge={}))})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){class i{constructor(r,l){this.request=r,this.response=l}isEligible(r,l,o){var u;for(let f=0;f<this.request.length;++f){const h=this.request[f];if(h.productId===r&&h.discountId===o&&h.discountType===l)return(u=this.response[f])!==null&&u!==void 0?u:!1}return!0}}n.DiscountEligibilities=i})(e.Internal||(e.Internal={}))})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){e.DEFAULT_OFFER_ID="$";class n extends t.Offer{constructor(r,l){super(r,l),this.offerType=r.offerType}}e.SKOffer=n;class i extends t.Product{constructor(r,l,o,u){super(l,o),this.raw=r,this.refresh(r,o,u)}removeIneligibleDiscounts(r){this.offers=this.offers.filter(l=>{const o=l;return o.offerType==="Default"?!0:r.isEligible(this.id,o.offerType,l.id)})}refresh(r,l,o){var u;this.raw=r,this.title=r.title,this.description=r.description,this.countryCode=r.countryCode,r.group&&(this.group=r.group),this.removeIneligibleDiscounts(o);const f={price:r.price,priceMicros:r.priceMicros,currency:r.currency,billingPeriod:c(r.billingPeriod,r.billingPeriodUnit),paymentMode:this.type===t.ProductType.PAID_SUBSCRIPTION?t.PaymentMode.PAY_AS_YOU_GO:t.PaymentMode.UP_FRONT,recurrenceMode:this.type===t.ProductType.PAID_SUBSCRIPTION?t.RecurrenceMode.INFINITE_RECURRING:t.RecurrenceMode.NON_RECURRING};if((u=r.discounts)===null||u===void 0||u.forEach(d=>{if(o.isEligible(r.id,d.type,d.id)){const p=[],x=d.paymentMode===t.PaymentMode.PAY_AS_YOU_GO?d.period:1,v=d.paymentMode===t.PaymentMode.PAY_AS_YOU_GO?1:d.period,b={price:d.price,priceMicros:d.priceMicros,currency:r.currency,billingPeriod:c(v,d.periodUnit),billingCycles:x,paymentMode:d.paymentMode,recurrenceMode:t.RecurrenceMode.FINITE_RECURRING};p.push(b),p.push(f),this.addOffer(new n({id:d.id,product:this,pricingPhases:p,offerType:d.type},l))}}),!h(this)){const d=[];if(r.introPrice&&r.introPriceMicros!==void 0&&o.isEligible(r.id,"Introductory","intro")){const p={price:r.introPrice,priceMicros:r.introPriceMicros,currency:r.currency,billingPeriod:c(r.introPricePeriod,r.introPricePeriodUnit),paymentMode:r.introPricePaymentMode,recurrenceMode:t.RecurrenceMode.FINITE_RECURRING,billingCycles:1};d.push(p)}d.push(f),this.addOffer(new n({id:e.DEFAULT_OFFER_ID,product:this,pricingPhases:d,offerType:"Default"},l))}function h(d){return d.offers.filter(p=>{const x=p;return x.offerType==="Introductory"||x.offerType==="Default"&&x.pricingPhases.length>1}).length>0}function c(d,p){if(d&&p)return`P${d}${p[0]}`}}}e.SKProduct=i})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){e.APPLICATION_VIRTUAL_TRANSACTION_ID="appstore.application";class n extends t.Receipt{constructor(r,l,o){super(t.Platform.APPLE_APPSTORE,o),this.nativeData=r,this.refresh(this.nativeData,l,o)}refresh(r,l,o){if(this.nativeData=r,l){if(this.transactions.find(h=>h.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID))return;const f=new t.Transaction(t.Platform.APPLE_APPSTORE,this,o);f.transactionId=e.APPLICATION_VIRTUAL_TRANSACTION_ID,f.state=t.TransactionState.APPROVED,f.products.push({id:r.bundleIdentifier}),this.transactions.push(f)}}}e.SKApplicationReceipt=n;class i extends t.Transaction{refresh(r,l,o,u){r&&(this.products=[{id:r,offerId:u}]),l&&(this.originalTransactionId=l),o&&(this.purchaseDate=new Date(+o))}}e.SKTransaction=i})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i.CANCELED="1",i.BILLING_ERROR="2",i.PRICE_INCREASE="3",i.PRODUCT_NOT_AVAILABLE="4",i.UNKNOWN="5"})(n.AppleExpirationIntent||(n.AppleExpirationIntent={}))})(e.VerifyReceipt||(e.VerifyReceipt={}))})(t.AppleAppStore||(t.AppleAppStore={}))})(j||(j={}));var j;(function(t){(function(e){class n extends t.Receipt{constructor(h,c,d){var p,x,v;super(t.Platform.BRAINTREE,d);const b=new t.Transaction(t.Platform.BRAINTREE,this,d);b.purchaseDate=new Date,b.products=((p=h.items)===null||p===void 0?void 0:p.filter(m=>m).map(m=>({id:(m==null?void 0:m.id)||""})))||[],b.state=t.TransactionState.APPROVED,b.transactionId=(v=(x=c.paymentMethodNonce)===null||x===void 0?void 0:x.nonce)!==null&&v!==void 0?v:`UNKNOWN_${c.paymentMethodType}_${c.paymentDescription}`,this.transactions=[b],this.dropInResult=c,this.paymentRequest=h,this.refresh(h,c,d)}refresh(h,c,d){var p,x;this.dropInResult=c,this.paymentRequest=h;const v=new t.Transaction(t.Platform.BRAINTREE,this,d);v.products=h.items.filter(b=>b).map(b=>({id:(b==null?void 0:b.id)||""})),v.state=t.TransactionState.APPROVED,v.transactionId=(x=(p=c.paymentMethodNonce)===null||p===void 0?void 0:p.nonce)!==null&&x!==void 0?x:`UNKNOWN_${c.paymentMethodType}_${c.paymentDescription}`,v.amountMicros=h.amountMicros,v.currency=h.currency,this.transactions=[v]}}e.BraintreeReceipt=n;class i{constructor(h,c){this.id=t.Platform.BRAINTREE,this.name="BrainTree",this.ready=!1,this.products=[],this._receipts=[],this.supportsParallelLoading=!1,this.context=h,this.log=h.log.child("Braintree"),this.options=c}get receipts(){return this._receipts}get isSupported(){return e.IosBridge.Bridge.isSupported()||e.AndroidBridge.Bridge.isSupported()}initialize(){return new Promise(h=>{if(this.log.info("initialize()"),e.IosBridge.Bridge.isSupported())this.log.info("instantiating ios bridge..."),this.iosBridge=new e.IosBridge.Bridge(this.log,c=>{this.options.tokenizationKey?c(this.options.tokenizationKey):this.options.clientTokenProvider?this.options.clientTokenProvider(c):c(u(t.ErrorCode.CLIENT_INVALID,"Braintree iOS Bridge requires a clientTokenProvider or tokenizationKey"))},this.options.applePay),this.iosBridge.initialize(this.context,h);else if(e.AndroidBridge.Bridge.isSupported()&&!this.androidBridge){this.log.info("instantiating android bridge..."),this.androidBridge=new e.AndroidBridge.Bridge(this.log),this.log.info("calling android bridge -> initialize...");const c=this.options.tokenizationKey?this.options.tokenizationKey:this.options.clientTokenProvider?this.options.clientTokenProvider:"";this.androidBridge.initialize(c,h)}else this.log.info("platform not supported..."),h(void 0);this.context.listener.receiptsReady(t.Platform.BRAINTREE)})}loadProducts(h){return W(this,void 0,void 0,function*(){return h.map(c=>u(t.ErrorCode.PRODUCT_NOT_AVAILABLE,"N/A"))})}loadReceipts(){return W(this,void 0,void 0,function*(){return this.context.listener.receiptsReady(t.Platform.BRAINTREE),[]})}order(h){return W(this,void 0,void 0,function*(){return u(t.ErrorCode.UNKNOWN,"N/A: Not implemented with Braintree")})}finish(h){return W(this,void 0,void 0,function*(){h.state=t.TransactionState.FINISHED,this.context.listener.receiptsUpdated(t.Platform.TEST,[h.parentReceipt])})}manageSubscriptions(){return W(this,void 0,void 0,function*(){this.log.info("N/A: manageSubscriptions() is not available with Braintree")})}manageBilling(){return W(this,void 0,void 0,function*(){this.log.info("N/A: manageBilling() is not available with Braintree")})}launchDropIn(h,c){return W(this,void 0,void 0,function*(){return this.androidBridge?this.androidBridge.launchDropIn(c):this.iosBridge?this.iosBridge.launchDropIn(h,c):u(t.ErrorCode.PURCHASE,"Braintree is not available")})}requestPayment(h,c){var d,p,x,v,b,m,g,y,_;return W(this,void 0,void 0,function*(){this.log.info("requestPayment()"+JSON.stringify(h));const E=((d=c==null?void 0:c.braintree)===null||d===void 0?void 0:d.dropInRequest)||{};if((yield e.IosBridge.ApplePayPlugin.isSupported(this.log))||(this.log.info("Apple Pay is not supported."),E.applePayDisabled=!0),this.options.googlePay||E.googlePayRequest){const T=Object.assign(Object.assign({},(p=this.options.googlePay)!==null&&p!==void 0?p:{}),(x=E.googlePayRequest)!==null&&x!==void 0?x:{});T.transactionInfo||(T.transactionInfo={currencyCode:(v=h.currency)!==null&&v!==void 0?v:"",totalPrice:((b=h.amountMicros)!==null&&b!==void 0?b:0)/1e6,totalPriceStatus:e.GooglePay.TotalPriceStatus.FINAL}),E.googlePayRequest=T}if(this.options.threeDSecure||E.threeDSecureRequest){const T=Object.assign(Object.assign({},(m=this.options.threeDSecure)!==null&&m!==void 0?m:{}),(g=E.threeDSecureRequest)!==null&&g!==void 0?g:{});T.amount||(T.amount=s((y=h.amountMicros)!==null&&y!==void 0?y:0)),!T.billingAddress&&h.billingAddress&&(T.billingAddress={givenName:h.billingAddress.givenName,surname:h.billingAddress.surname,countryCodeAlpha2:h.billingAddress.countryCode,postalCode:h.billingAddress.postalCode,locality:h.billingAddress.locality,streetAddress:h.billingAddress.streetAddress1,extendedAddress:h.billingAddress.streetAddress2,line3:h.billingAddress.streetAddress3,phoneNumber:h.billingAddress.phoneNumber,region:h.billingAddress.region}),T.email||(T.email=h.email),E.threeDSecureRequest=T}const S=yield this.launchDropIn(h,E);if(!l(S))return o(this.log,S);const N=S;if(this.log.info("launchDropIn success: "+JSON.stringify({paymentRequest:h,dropInResult:N})),!(!((_=N.paymentMethodNonce)===null||_===void 0)&&_.nonce))return u(t.ErrorCode.BAD_RESPONSE,"launchDropIn returned no paymentMethodNonce");let A=this._receipts.find(T=>{var k,C;return((k=T.dropInResult.paymentMethodNonce)===null||k===void 0?void 0:k.nonce)===((C=N.paymentMethodNonce)===null||C===void 0?void 0:C.nonce)});return A?A.refresh(h,N,this.context.apiDecorators):(A=new n(h,N,this.context.apiDecorators),this.receipts.push(A)),this.context.listener.receiptsUpdated(t.Platform.BRAINTREE,[A]),A.transactions[0]})}receiptValidationBody(h){var c,d,p,x,v;return W(this,void 0,void 0,function*(){if(!r(h)){this.log.error("Unexpected error, expecting a BraintreeReceipt: "+JSON.stringify(h));return}return this.log.info("create receiptValidationBody for: "+JSON.stringify(h)),{id:(p=(d=(c=h.paymentRequest.items)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.id)!==null&&p!==void 0?p:"unknown",type:t.ProductType.CONSUMABLE,priceMicros:h.paymentRequest.amountMicros,currency:h.paymentRequest.currency,products:[],transaction:{type:t.Platform.BRAINTREE,deviceData:h.dropInResult.deviceData,id:"nonce",paymentMethodNonce:(v=(x=h.dropInResult.paymentMethodNonce)===null||x===void 0?void 0:x.nonce)!==null&&v!==void 0?v:"",paymentDescription:h.dropInResult.paymentDescription,paymentMethodType:h.dropInResult.paymentMethodType}}})}handleReceiptValidationResponse(h,c){var d;return W(this,void 0,void 0,function*(){if(this.log.info("receipt validation response: "+JSON.stringify(c)),c!=null&&c.data&&"transaction"in c.data&&c.data.transaction.type==="braintree"){const p=(d=c.data.transaction.data.transaction)===null||d===void 0?void 0:d.customer.id;p&&!e.customerId&&(this.log.info("customerId updated: "+p),e.customerId=p)}})}checkSupport(h){return h==="requestPayment"}restorePurchases(){return W(this,void 0,void 0,function*(){})}}e.Adapter=i;function s(f){const h=""+f/1e4;return(h.slice(0,-2)||"0")+"."+(h.slice(-2,-1)||"0")+(h.slice(-1)||"0")}function r(f){return f.platform===t.Platform.BRAINTREE}const l=f=>!!f&&!("code"in f&&"message"in f),o=(f,h)=>{if(h){if(h.code===t.ErrorCode.PAYMENT_CANCELLED){f.info("User cancelled the payment request");return}return f.warn("launchDropIn failed: "+JSON.stringify(h)),h}else return f.warn("launchDropIn failed: no response"),u(t.ErrorCode.BAD_RESPONSE,"Braintree failed to launch drop in")};function u(f,h){return t.storeError(f,h,t.Platform.BRAINTREE,null)}e.braintreeError=u})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){const n="BraintreePlugin";(function(i){class s{constructor(l){this.log=l.child("AndroidBridge")}listener(l){this.log.debug("listener: "+JSON.stringify(l)),!(!l||!l.type)&&(l.type==="getClientToken"?this.getClientToken():l.type)}initialize(l,o){try{if(typeof l=="string"){const f=l;this.clientTokenProvider=h=>{h(f)}}else this.clientTokenProvider=l;this.log.info("exec.setListener()");const u=this.listener.bind(this);window.cordova.exec(u,null,n,"setListener",[]),o(void 0)}catch(u){this.log.warn("initialization failed: "+(u==null?void 0:u.message)),o(e.braintreeError(t.ErrorCode.SETUP,"Failed to initialize Braintree Android Bridge: "+(u==null?void 0:u.message)))}}getClientToken(){this.log.info("getClientToken()"),this.clientTokenProvider?(this.log.debug("clientTokenProvider set, calling."),this.clientTokenProvider(l=>{typeof l=="string"?window.cordova.exec(null,null,n,"onClientTokenSuccess",[l]):window.cordova.exec(null,null,n,"onClientTokenFailure",[l.code,l.message])})):(this.log.debug("clientTokenProvider not set, retrying later..."),setTimeout(()=>this.getClientToken(),1e3))}static isSupported(){return t.Utils.platformId()==="android"}isApplePaySupported(){return W(this,void 0,void 0,function*(){return!1})}launchDropIn(l){return new Promise(o=>{window.cordova.exec(u=>{this.log.info("dropInSuccess: "+JSON.stringify(u)),o(u)},u=>{this.log.info("dropInFailure: "+u);const f=u.split("|")[0],h=u.split("|").slice(1).join("");o(f==="UserCanceledException"?e.braintreeError(t.ErrorCode.PAYMENT_CANCELLED,h):f==="AuthorizationException"?e.braintreeError(t.ErrorCode.UNAUTHORIZED_REQUEST_DATA,h):e.braintreeError(t.ErrorCode.UNKNOWN,u))},n,"launchDropIn",[l])})}}i.Bridge=s})(e.AndroidBridge||(e.AndroidBridge={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){const i="BraintreeApplePayPlugin";class s{static get(){return window.CdvPurchaseBraintreeApplePay}static requestPayment(l){return new Promise(o=>{var u;if(!((u=s.get())===null||u===void 0)&&u.installed){const f=c=>{o(c)},h=c=>{const d=c??"payment request failed";o(e.braintreeError(t.ErrorCode.PURCHASE,"Braintree+ApplePay ERROR: "+d))};window.cordova.exec(f,h,i,"presentDropInPaymentUI",[l])}else return o(e.braintreeError(t.ErrorCode.SETUP,"cordova-plugin-purchase-braintree-applepay does not appear to be installed."))})}static isSupported(l){return new Promise(o=>{var u;if(t.Utils.platformId()!=="ios")return l.info("BraintreeApplePayPlugin is only available for ios."),o(!1);if(!(!((u=s.get())===null||u===void 0)&&u.installed))return l.info("BraintreeApplePayPlugin does not appear to be installed."),o(!1);try{window.cordova.exec(f=>{o(f)},()=>{l.info("BraintreeApplePayPlugin is not available."),o(!1)},i,"isApplePaySupported",[])}catch{l.info("BraintreeApplePayPlugin is not installed."),o(!1)}})}}n.ApplePayPlugin=s})(e.IosBridge||(e.IosBridge={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){class i{constructor(r,l,o){this.log=r.child("IosBridge"),this.clientTokenProvider=l,this.applePayOptions=o}initialize(r,l){window.cordova.exec(null,null,"BraintreePlugin","setVerbosity",[r.verbosity]),window.cordova.exec(o=>this.log.debug("(Native) "+o),null,"BraintreePlugin","setLogger",[]),setTimeout(()=>l(void 0),0)}continueDropInForApplePay(r,l,o){var u,f,h,c,d,p,x,v,b;return W(this,void 0,void 0,function*(){const m=((f=(u=this.applePayOptions)===null||u===void 0?void 0:u.preparePaymentRequest)===null||f===void 0?void 0:f.call(u,r))||{merchantCapabilities:[t.ApplePay.MerchantCapability.ThreeDS]};if(!m.paymentSummaryItems){const y=r.items.filter(E=>E).map((E,S)=>{var N,A,T;return{type:"final",label:(E==null?void 0:E.title)||(E==null?void 0:E.id)||`Item #${S+1}`,amount:`${Math.round(((T=(A=(N=E==null?void 0:E.pricing)===null||N===void 0?void 0:N.priceMicros)!==null&&A!==void 0?A:r.amountMicros)!==null&&T!==void 0?T:0)/1e4)/100}`}}),_={type:"final",label:(c=(h=this.applePayOptions)===null||h===void 0?void 0:h.companyName)!==null&&c!==void 0?c:"Total",amount:`${Math.round(((d=r.amountMicros)!==null&&d!==void 0?d:0)/1e4)/100}`};m.paymentSummaryItems=[...y,_]}const g=yield n.ApplePayPlugin.requestPayment(m);return this.log.info("Result from Apple Pay: "+JSON.stringify(g)),"isError"in g?g:g.userCancelled?e.braintreeError(t.ErrorCode.PAYMENT_CANCELLED,"User cancelled the payment request"):{paymentMethodNonce:{isDefault:!1,nonce:(x=(p=g.applePayCardNonce)===null||p===void 0?void 0:p.nonce)!==null&&x!==void 0?x:"",type:(b=(v=g.applePayCardNonce)===null||v===void 0?void 0:v.type)!==null&&b!==void 0?b:""},paymentMethodType:o.paymentMethodType,deviceData:o.deviceData,paymentDescription:o.paymentDescription}})}launchDropIn(r,l){return new Promise(o=>W(this,void 0,void 0,function*(){const u=h=>{this.log.info("dropInSuccess: "+JSON.stringify(h)),h.paymentMethodType===e.DropIn.PaymentMethod.APPLE_PAY?(this.log.info("it's an ApplePay request, we have to process it."),this.continueDropInForApplePay(r,l,h).then(o)):o(h)},f=h=>{this.log.info("dropInFailure: "+h);const[c,d]=h.split("|");o(c==="UserCanceledException"?e.braintreeError(t.ErrorCode.PAYMENT_CANCELLED,d):e.braintreeError(t.ErrorCode.UNKNOWN,"ERROR "+c+": "+d))};this.clientTokenProvider(h=>{typeof h=="string"?window.cordova.exec(u,f,"BraintreePlugin","launchDropIn",[h,l]):o(h)})}))}braintreePlugin(){return window.CdvPurchaseBraintree}static isSupported(){return t.Utils.platformId()==="ios"}}n.Bridge=i})(e.IosBridge||(e.IosBridge={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i[i.DISABLED=0]="DISABLED",i[i.OPTIONAL=1]="OPTIONAL",i[i.REQUIRED=2]="REQUIRED"})(n.CardFormFieldStatus||(n.CardFormFieldStatus={}))})(e.DropIn||(e.DropIn={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i.GOOGLE_PAY="GOOGLE_PAY",i.LASER="LASER",i.UK_MAESTRO="UK_MAESTRO",i.SWITCH="SWITCH",i.SOLOR="SOLO",i.APPLE_PAY="APPLE_PAY",i.AMEX="AMEX",i.DINERS_CLUB="DINERS_CLUB",i.DISCOVER="DISCOVER",i.JCB="JCB",i.MAESTRO="MAESTRO",i.MASTERCARD="MASTERCARD",i.PAYPAL="PAYPAL",i.VISA="VISA",i.VENMO="VENMO",i.UNIONPAY="UNIONPAY",i.HIPER="HIPER",i.HIPERCARD="HIPERCARD",i.UNKNOWN="UNKNOWN"})(n.PaymentMethod||(n.PaymentMethod={}))})(e.DropIn||(e.DropIn={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i[i.MIN=0]="MIN",i[i.FULL=1]="FULL"})(n.BillingAddressFormat||(n.BillingAddressFormat={})),function(i){i[i.NOT_CURRENTLY_KNOWN=1]="NOT_CURRENTLY_KNOWN",i[i.ESTIMATED=2]="ESTIMATED",i[i.FINAL=3]="FINAL"}(n.TotalPriceStatus||(n.TotalPriceStatus={}))})(e.GooglePay||(e.GooglePay={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i.UNSPECIFIED="00",i.CREDIT="01",i.DEBIT="02"})(n.AccountType||(n.AccountType={})),function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.SAME_DAY=1]="SAME_DAY",i[i.EXPEDITED=2]="EXPEDITED",i[i.PRIORITY=3]="PRIORITY",i[i.GROUND=4]="GROUND",i[i.ELECTRONIC_DELIVERY=5]="ELECTRONIC_DELIVERY",i[i.SHIP_TO_STORE=6]="SHIP_TO_STORE"}(n.ShippingMethod||(n.ShippingMethod={})),function(i){i[i.V1=0]="V1",i[i.V2=1]="V2"}(n.Version||(n.Version={}))})(e.ThreeDSecure||(e.ThreeDSecure={}))})(t.Braintree||(t.Braintree={}))})(j||(j={}));var j;(function(t){(function(e){class n extends t.Transaction{constructor(o,u,f){super(t.Platform.GOOGLE_PLAY,u,f),this.nativePurchase=o,this.refresh(o,!0)}static toState(o,u,f,h){switch(u){case e.Bridge.PurchaseState.PENDING:return t.TransactionState.INITIATED;case e.Bridge.PurchaseState.PURCHASED:return h?t.TransactionState.FINISHED:f?t.TransactionState.APPROVED:o?t.TransactionState.INITIATED:t.TransactionState.APPROVED;case e.Bridge.PurchaseState.UNSPECIFIED_STATE:return t.TransactionState.UNKNOWN_STATE}}refresh(o,u){var f,h;this.nativePurchase=o,this.transactionId=`${o.orderId||o.purchaseToken}`,this.purchaseId=`${o.purchaseToken}`,this.products=o.productIds.map(c=>({id:c})),o.purchaseTime&&(this.purchaseDate=new Date(o.purchaseTime)),this.isPending=o.getPurchaseState===e.Bridge.PurchaseState.PENDING,typeof o.acknowledged<"u"&&(this.isAcknowledged=o.acknowledged),typeof o.consumed<"u"&&(this.isConsumed=o.consumed),typeof o.autoRenewing<"u"&&(this.renewalIntent=o.autoRenewing?t.RenewalIntent.RENEW:t.RenewalIntent.LAPSE),this.state=n.toState(u??!1,o.getPurchaseState,(f=this.isAcknowledged)!==null&&f!==void 0?f:!1,(h=this.isConsumed)!==null&&h!==void 0?h:!1)}}e.Transaction=n;class i extends t.Receipt{constructor(o,u){super(t.Platform.GOOGLE_PLAY,u),this.transactions=[new n(o,this,u)],this.purchaseToken=o.purchaseToken,this.orderId=o.orderId}refreshPurchase(o){var u;(u=this.transactions[0])===null||u===void 0||u.refresh(o),this.orderId=o.orderId}}e.Receipt=i;class s{constructor(o,u=1e3*3600*24){if(this.id=t.Platform.GOOGLE_PLAY,this.name="GooglePlay",this.ready=!1,this.supportsParallelLoading=!1,this._receipts=[],this.bridge=new e.Bridge.Bridge,this.initialized=!1,this.retry=new t.Internal.Retry,this.autoRefreshIntervalMillis=0,s._instance)throw new Error("GooglePlay adapter already initialized");this._products=new e.Products(o.apiDecorators),this.autoRefreshIntervalMillis=u,this.context=o,this.log=o.log.child("GooglePlay"),s._instance=this}get products(){return this._products.products}get receipts(){return this._receipts}get isSupported(){return t.Utils.platformId()==="android"}initialize(){return W(this,void 0,void 0,function*(){return this.log.info("Initialize"),this.initializationPromise?this.initializationPromise:this.initializationPromise=new Promise(o=>{const u=this.log.child("Bridge"),f={onSetPurchases:this.onSetPurchases.bind(this),onPurchasesUpdated:this.onPurchasesUpdated.bind(this),onPurchaseConsumed:this.onPurchaseConsumed.bind(this),showLog:this.context.verbosity>=t.LogLevel.DEBUG,log:d=>u.info(d)},h=()=>{this.log.debug("Ready"),this.autoRefreshIntervalMillis>0&&window.setInterval(()=>this.getPurchases(),this.autoRefreshIntervalMillis),o(void 0)},c=d=>{this.initialized=!1,this.context.error(r(t.ErrorCode.SETUP,"Init failed - "+d,null)),this.retry.retry(()=>this.initialize())};this.bridge.init(h,c,f)})})}getSkusOf(o){const u=[],f=[];for(const h of o)h.type===t.ProductType.PAID_SUBSCRIPTION?f.push(h.id):u.push(h.id);return{inAppSkus:u,subsSkus:f}}loadReceipts(){return new Promise(o=>{this.getPurchases().then(u=>{o(this._receipts)})})}loadProducts(o){return new Promise(u=>{this.log.debug("Load: "+JSON.stringify(o));const f=c=>{if(this.log.debug("Loaded: "+JSON.stringify(c)),!Array.isArray(c)){const p=`Invalid product list received: ${JSON.stringify(c)}, retrying later...`;this.log.warn(p),this.retry.retry(h),this.context.error(r(t.ErrorCode.LOAD,p,null));return}const d=o.map(p=>{const x=c.find(v=>v.productId===p.id);return x&&x.productId?this._products.addProduct(p,x):r(t.ErrorCode.INVALID_PRODUCT_ID,`Product with id ${p.id} not found.`,p.id)});u(d)},h=()=>{const{inAppSkus:c,subsSkus:d}=this.getSkusOf(o);this.log.debug("getAvailableProducts: "+JSON.stringify(c)+" | "+JSON.stringify(d)),this.bridge.getAvailableProducts(c,d,f,p=>{this.retry.retry(h),this.context.error(r(t.ErrorCode.LOAD,"Loading product info failed - "+p+" - retrying later...",null))})};h()})}finish(o){return new Promise(u=>{const f=()=>{o.state!==t.TransactionState.FINISHED&&(o.state=t.TransactionState.FINISHED,this.context.listener.receiptsUpdated(t.Platform.GOOGLE_PLAY,[o.parentReceipt])),u(void 0)},h=o.products[0];if(!h)return u(r(t.ErrorCode.FINISH,"Cannot finish a transaction with no product",null));const c=this._products.getProduct(h.id);if(!c)return u(r(t.ErrorCode.FINISH,"Cannot finish transaction, unknown product "+h.id,h.id));const d=this._receipts.find(x=>x.hasTransaction(o));if(!d)return u(r(t.ErrorCode.FINISH,"Cannot finish transaction, linked receipt not found.",c.id));if(!d.purchaseToken)return u(r(t.ErrorCode.FINISH,"Cannot finish transaction, linked receipt contains no purchaseToken.",c.id));const p=(x,v)=>u(r(v||t.ErrorCode.UNKNOWN,x,c.id));if(c.type===t.ProductType.NON_RENEWING_SUBSCRIPTION||c.type===t.ProductType.CONSUMABLE){if(!o.isConsumed)return this.bridge.consumePurchase(f,p,d.purchaseToken)}else if(!o.isAcknowledged)return this.bridge.acknowledgePurchase(f,p,d.purchaseToken);u(void 0)})}onPurchaseConsumed(o){this.log.debug("onPurchaseConsumed: "+o.orderId),o.acknowledged=!0,o.consumed=!0,this.onPurchasesUpdated([o])}onPurchasesUpdated(o){this.log.debug("onPurchaseUpdated: "+o.map(u=>u.orderId).join(", ")),o.forEach(u=>{const f=this.receipts.find(h=>h.purchaseToken===u.purchaseToken);if(f)f.refreshPurchase(u),this.context.listener.receiptsUpdated(t.Platform.GOOGLE_PLAY,[f]);else{const h=new i(u,this.context.apiDecorators);this.receipts.push(h),this.context.listener.receiptsUpdated(t.Platform.GOOGLE_PLAY,[h]),h.transactions[0].state===t.TransactionState.INITIATED&&!h.transactions[0].isPending&&(h.refreshPurchase(u),this.context.listener.receiptsUpdated(t.Platform.GOOGLE_PLAY,[h]))}})}onSetPurchases(o){this.log.debug("onSetPurchases: "+JSON.stringify(o)),this.onPurchasesUpdated(o),this.context.listener.receiptsReady(t.Platform.GOOGLE_PLAY)}onPriceChangeConfirmationResult(o){}getPurchases(){return new Promise(o=>{this.log.debug("getPurchases");const u=()=>{this.log.debug("getPurchases success"),setTimeout(()=>o(void 0),0)},f=(h,c)=>{this.log.warn("getPurchases failed: "+h+" ("+c+")"),setTimeout(()=>o(r(c||t.ErrorCode.UNKNOWN,h,null)),0)};this.bridge.getPurchases(u,f)})}order(o,u){return W(this,void 0,void 0,function*(){return new Promise(f=>{this.log.info("Order - "+JSON.stringify(o));const h=()=>f(void 0),c=(d,p)=>{this.log.warn("Order failed: "+JSON.stringify({message:d,code:p})),f(r(p??t.ErrorCode.UNKNOWN,d,o.productId))};if(o.productType===t.ProductType.PAID_SUBSCRIPTION){const d="token"in o?o.productId+"@"+o.token:o.productId,p=this.findOldPurchaseToken(o.productId,o.productGroup);p&&(u.googlePlay?u.googlePlay.oldPurchaseToken||(u.googlePlay.oldPurchaseToken=p):u.googlePlay={oldPurchaseToken:p}),this.bridge.subscribe(h,c,d,u)}else this.bridge.buy(h,c,o.productId,u)})})}findOldPurchaseToken(o,u){if(!u)return;const f=this._receipts.find(h=>!!h.transactions.find(c=>!!c.products.find(d=>{const p=this._products.getProduct(d.id);return!p||!t.Internal.LocalReceipts.isOwned([h],p)?!1:d.id===o||u&&p.group===u})));return f==null?void 0:f.purchaseToken}receiptValidationBody(o){var u;return W(this,void 0,void 0,function*(){const f=o.transactions[0];if(!f)return;const h=(u=f.products[0])===null||u===void 0?void 0:u.id;if(!h)return;const c=this._products.getProduct(h);if(!c)return;const d=f.nativePurchase;return{id:h,type:c.type,offers:c.offers,products:this._products.products,transaction:{type:t.Platform.GOOGLE_PLAY,id:o.transactions[0].transactionId,purchaseToken:d.purchaseToken,signature:d.signature,receipt:d.receipt}}})}handleReceiptValidationResponse(o,u){var f;return W(this,void 0,void 0,function*(){if(u!=null&&u.ok){const h=(f=u==null?void 0:u.data)===null||f===void 0?void 0:f.transaction;if((h==null?void 0:h.type)!==t.Platform.GOOGLE_PLAY)return;switch(h.kind){}}})}requestPayment(o,u){return W(this,void 0,void 0,function*(){return r(t.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return W(this,void 0,void 0,function*(){this.bridge.manageSubscriptions()})}manageBilling(){return W(this,void 0,void 0,function*(){this.bridge.manageBilling()})}checkSupport(o){return["order","manageBilling","manageSubscriptions"].indexOf(o)>=0}restorePurchases(){return new Promise(o=>{this.bridge.getPurchases(()=>o(void 0),(u,f)=>{this.log.warn("getPurchases() failed: "+(f??"ERROR")+": "+u),o(r(f??t.ErrorCode.UNKNOWN,u,null))})})}}s.trimProductTitles=!0,e.Adapter=s;function r(l,o,u){return t.storeError(l,o,t.Platform.GOOGLE_PLAY,u)}})(t.GooglePlay||(t.GooglePlay={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i.FINITE_RECURRING="FINITE_RECURRING",i.INFINITE_RECURRING="INFINITE_RECURRING",i.NON_RECURRING="NON_RECURRING"})(n.RecurrenceMode||(n.RecurrenceMode={}))})(e.Bridge||(e.Bridge={}))})(t.GooglePlay||(t.GooglePlay={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){n.IMMEDIATE_WITH_TIME_PRORATION="IMMEDIATE_WITH_TIME_PRORATION",n.IMMEDIATE_AND_CHARGE_PRORATED_PRICE="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",n.IMMEDIATE_WITHOUT_PRORATION="IMMEDIATE_WITHOUT_PRORATION",n.DEFERRED="DEFERRED",n.IMMEDIATE_AND_CHARGE_FULL_PRICE="IMMEDIATE_AND_CHARGE_FULL_PRICE"})(e.ProrationMode||(e.ProrationMode={})),function(n){n.WITH_TIME_PRORATION="IMMEDIATE_WITH_TIME_PRORATION",n.CHARGE_PRORATED_PRICE="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",n.WITHOUT_PRORATION="IMMEDIATE_WITHOUT_PRORATION",n.DEFERRED="DEFERRED",n.CHARGE_FULL_PRICE="IMMEDIATE_AND_CHARGE_FULL_PRICE"}(e.ReplacementMode||(e.ReplacementMode={})),function(n){let i=function(f){console.log("InAppBilling[js]: "+f)};(function(u){u[u.UNSPECIFIED_STATE=0]="UNSPECIFIED_STATE",u[u.PURCHASED=1]="PURCHASED",u[u.PENDING=2]="PENDING"})(n.PurchaseState||(n.PurchaseState={}));class s{constructor(){this.options={}}init(f,h,c){c||(c={}),c.log&&(i=c.log),this.options={showLog:c.showLog!==!1,onPurchaseConsumed:c.onPurchaseConsumed,onPurchasesUpdated:c.onPurchasesUpdated,onSetPurchases:c.onSetPurchases},this.options.showLog&&i("setup ok");const d=this.listener.bind(this);window.cordova.exec(d,function(p){},"InAppBillingPlugin","setListener",[]),window.cordova.exec(f,r(h),"InAppBillingPlugin","init",[])}load(f,h,c,d,p){if(typeof c<"u"&&(typeof c=="string"&&(c=[c]),c.length>0)){if(typeof c[0]!="string"){var x="invalid productIds: "+JSON.stringify(c);this.options.showLog&&i(x),h(x,t.ErrorCode.INVALID_PRODUCT_ID);return}this.options.showLog&&i("load "+JSON.stringify(c))}window.cordova.exec(f,r(h),"InAppBillingPlugin","load",[c,d,p])}listener(f){this.options.showLog&&i("listener: "+JSON.stringify(f)),!(!f||!f.type)&&(f.type==="setPurchases"&&this.options.onSetPurchases&&this.options.onSetPurchases(f.data.purchases),f.type==="purchasesUpdated"&&this.options.onPurchasesUpdated&&this.options.onPurchasesUpdated(f.data.purchases),f.type==="purchaseConsumed"&&this.options.onPurchaseConsumed&&this.options.onPurchaseConsumed(f.data.purchase),f.type==="onPriceChangeConfirmationResultOK"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("OK"),f.type==="onPriceChangeConfirmationResultUserCanceled"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("UserCanceled"),f.type==="onPriceChangeConfirmationResultUnknownSku"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("UnknownProduct"))}getPurchases(f,h){return this.options.showLog&&i("getPurchases()"),window.cordova.exec(f,r(h),"InAppBillingPlugin","getPurchases",["null"])}buy(f,h,c,d){return this.options.showLog&&i("buy()"),window.cordova.exec(f,r(h),"InAppBillingPlugin","buy",[c,o(d)])}subscribe(f,h,c,d){var p;return this.options.showLog&&i("subscribe()"),!((p=d.googlePlay)===null||p===void 0)&&p.oldPurchaseToken&&this.options.showLog&&i("subscribe() -> upgrading from an old purchase"),window.cordova.exec(f,r(h),"InAppBillingPlugin","subscribe",[c,o(d)])}consumePurchase(f,h,c){return this.options.showLog&&i("consumePurchase()"),window.cordova.exec(f,r(h),"InAppBillingPlugin","consumePurchase",[c])}acknowledgePurchase(f,h,c){return this.options.showLog&&i("acknowledgePurchase()"),window.cordova.exec(f,r(h),"InAppBillingPlugin","acknowledgePurchase",[c])}getAvailableProducts(f,h,c,d){return this.options.showLog&&i("getAvailableProducts()"),window.cordova.exec(c,r(d),"InAppBillingPlugin","getAvailableProducts",[f,h])}manageSubscriptions(){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","manageSubscriptions",[])}manageBilling(){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","manageBilling",[])}launchPriceChangeConfirmationFlow(f){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","launchPriceChangeConfirmationFlow",[f])}}n.Bridge=s;function r(u){return function(f){if(!u)return;const h=typeof f=="string"?f.split("|"):[];if(h.length>1&&/^[-+]?(\d+)$/.test(h[0])){var c=h[0],d=h[1];u(d,+c)}else u(f)}}function l(u){return u&&u.constructor===Object?u:{}}function o(u){const f=l(u==null?void 0:u.googlePlay);return!f.accountId&&(u!=null&&u.applicationUsername)&&(f.accountId=t.Utils.md5(u.applicationUsername)),f}}(e.Bridge||(e.Bridge={}))})(t.GooglePlay||(t.GooglePlay={}))})(j||(j={}));var j;(function(t){(function(e){class n extends t.Product{}e.GProduct=n;class i extends t.Offer{constructor(){super(...arguments),this.type="inapp"}}e.InAppOffer=i;class s extends t.Offer{constructor(o,u){super(o,u),this.type="subs",this.tags=o.tags,this.token=o.token}}e.SubscriptionOffer=s;class r{constructor(o){this.products=[],this.offers=[],this.decorator=o}getProduct(o){return this.products.find(u=>u.id===o)}getOffer(o){return this.offers.find(u=>u.id===o)}addProduct(o,u){const f=this.getProduct(o.id),h=f??new n(o,this.decorator);return h.title=u.title||u.name||h.title,e.Adapter.trimProductTitles&&(h.title=h.title.replace(/ \(.*\)$/,"")),h.description=u.description||h.description,"product_format"in u&&u.product_format==="v12.0"?u.product_type==="subs"?this.onSubsV12Loaded(h,u):this.onInAppLoaded(h,u):this.onInAppLoaded(h,u),f||this.products.push(h),h}onSubsV12Loaded(o,u){u.offers.forEach(h=>{const c=h.pricing_phases.slice(-1)[0];if((c==null?void 0:c.recurrence_mode)===t.RecurrenceMode.FINITE_RECURRING){const p=f(h.base_plan_id);p&&p!==h&&h.pricing_phases.push(...p.pricing_phases)}const d=this.iabSubsOfferV12Loaded(o,u,h);o.addOffer(d)});function f(h){if(!h)return null;for(const c of u.offers)if(c.base_plan_id===h&&!c.offer_id)return c;return null}return o}makeOfferId(o,u){return u.base_plan_id?u.offer_id?o+"@"+u.base_plan_id+"@"+u.offer_id:o+"@"+u.base_plan_id:o+"@"+u.token}iabSubsOfferV12Loaded(o,u,f){const h=this.makeOfferId(u.productId,f),c=this.getOffer(h),d=f.pricing_phases.map(p=>this.toPricingPhase(p));if(c)return c.pricingPhases=d,c;{const p=new s({id:h,product:o,pricingPhases:d,token:f.token,tags:f.tags},this.decorator);return this.offers.push(p),p}}onInAppLoaded(o,u){var f,h,c,d;const p=this.getOffer(u.productId),x=[{price:(h=(f=u.formatted_price)!==null&&f!==void 0?f:u.price)!==null&&h!==void 0?h:`${((c=u.price_amount_micros)!==null&&c!==void 0?c:0)/1e6} ${u.price_currency_code}`,priceMicros:(d=u.price_amount_micros)!==null&&d!==void 0?d:0,currency:u.price_currency_code,recurrenceMode:t.RecurrenceMode.NON_RECURRING}];if(p)p.pricingPhases=x,o.offers=[p];else{const v=new i({id:u.productId,product:o,pricingPhases:x},this.decorator);this.offers.push(v),o.offers=[v]}return o}toPaymentMode(o){return o.price_amount_micros===0?t.PaymentMode.FREE_TRIAL:o.recurrence_mode===e.Bridge.RecurrenceMode.NON_RECURRING?t.PaymentMode.UP_FRONT:t.PaymentMode.PAY_AS_YOU_GO}toRecurrenceMode(o){switch(o){case e.Bridge.RecurrenceMode.FINITE_RECURRING:return t.RecurrenceMode.FINITE_RECURRING;case e.Bridge.RecurrenceMode.INFINITE_RECURRING:return t.RecurrenceMode.INFINITE_RECURRING;case e.Bridge.RecurrenceMode.NON_RECURRING:return t.RecurrenceMode.NON_RECURRING}}toPricingPhase(o){return{price:o.formatted_price,priceMicros:o.price_amount_micros,currency:o.price_currency_code,billingPeriod:o.billing_period,billingCycles:o.billing_cycle_count,recurrenceMode:this.toRecurrenceMode(o.recurrence_mode),paymentMode:this.toPaymentMode(o)}}}e.Products=r})(t.GooglePlay||(t.GooglePlay={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){(function(i){i.SUBSCRIPTION_NO_LONGER_AVAILABLE="subscriptionPurchaseNoLongerAvailable",i.PURCHASE_TOKEN_NO_LONGER_VALID="purchaseTokenNoLongerValid"})(n.GoogleErrorReason||(n.GoogleErrorReason={})),function(i){i[i.GONE=410]="GONE"}(n.ErrorCode||(n.ErrorCode={}))})(e.PublisherAPI||(e.PublisherAPI={}))})(t.GooglePlay||(t.GooglePlay={}))})(j||(j={}));var j;(function(t){(function(e){const n=t.Platform.TEST;let i=[];function s(o){o.products.forEach(u=>{var f,h,c,d;const p=i.find(v=>u.id===v.id),x={id:u.id,purchaseDate:(f=o.purchaseDate)===null||f===void 0?void 0:f.getTime(),expiryDate:(h=o.expirationDate)===null||h===void 0?void 0:h.getTime(),lastRenewalDate:(c=o.lastRenewalDate)===null||c===void 0?void 0:c.getTime(),renewalIntent:o.renewalIntent,renewalIntentChangeDate:(d=o.renewalIntentChangeDate)===null||d===void 0?void 0:d.getTime()};p?Object.assign(p,x):i.push(x)})}class r{constructor(u){this.id=t.Platform.TEST,this.name="Test",this.ready=!1,this.products=[],this.receipts=[],this.supportsParallelLoading=!0,this.context=u,this.log=u.log.child("Test")}get isSupported(){return!0}initialize(){return W(this,void 0,void 0,function*(){})}loadReceipts(){return W(this,void 0,void 0,function*(){return new Promise(u=>{setTimeout(()=>{this.context.listener.receiptsReady(t.Platform.TEST),u(this.receipts)},600)})})}loadProducts(u){return W(this,void 0,void 0,function*(){return u.map(f=>{if(!e.testProductsArray.find(d=>d.id===f.id&&d.type===f.type))return l(t.ErrorCode.PRODUCT_NOT_AVAILABLE,"This product is not available",f.id);const h=this.products.find(d=>d.id===f.id);if(h)return h;f.id===e.testProducts.PAID_SUBSCRIPTION_ACTIVE.id&&setTimeout(()=>{this.reportActiveSubscription()},500);const c=e.initTestProduct(f.id,this.context.apiDecorators);return c?(this.products.push(c),this.context.listener.productsUpdated(t.Platform.TEST,[c]),c):l(t.ErrorCode.PRODUCT_NOT_AVAILABLE,"Could not load this product",f.id)})})}order(u){return W(this,void 0,void 0,function*(){if(u.id.indexOf("-fail-")>0)return l(t.ErrorCode.PURCHASE,"Purchase failed.",u.productId);const f=this.products.find(p=>p.id===u.productId);if(!t.Internal.LocalReceipts.canPurchase(this.receipts,f))return l(t.ErrorCode.PURCHASE,"Product already owned",u.productId);const h=prompt(`Do you want to purchase ${u.productId} for ${u.pricingPhases[0].price}?
Enter "Y" to confirm.
Enter "E" to fail with an error.Anything else to cancel.`);if((h==null?void 0:h.toUpperCase())==="E")return l(t.ErrorCode.PURCHASE,"Purchase failed",u.productId);if((h==null?void 0:h.toUpperCase())!=="Y")return l(t.ErrorCode.PAYMENT_CANCELLED,"Purchase flow has been cancelled by the user",u.productId);const c=new t.Receipt(n,this.context.apiDecorators),d=new t.Transaction(n,c,this.context.apiDecorators);c.transactions=[d],d.products=[{id:u.productId,offerId:u.id}],d.state=t.TransactionState.APPROVED,d.purchaseDate=new Date,d.transactionId=u.productId+"-"+new Date().getTime(),d.isAcknowledged=!1,u.productType===t.ProductType.PAID_SUBSCRIPTION&&(d.expirationDate=new Date(+new Date+6048e5),d.renewalIntent=t.RenewalIntent.RENEW),s(d),this.receipts.push(c),this.context.listener.receiptsUpdated(t.Platform.TEST,[c])})}finish(u){return new Promise(f=>{setTimeout(()=>{u.state=t.TransactionState.FINISHED,u.isAcknowledged=!0,s(u);const h=this.products.find(d=>u.products[0].id===d.id);(h==null?void 0:h.type)===t.ProductType.CONSUMABLE&&(u.isConsumed=!0);const c=this.receipts.filter(d=>d.hasTransaction(u));this.context.listener.receiptsUpdated(n,c),f(void 0)},500)})}receiptValidationBody(u){return W(this,void 0,void 0,function*(){})}handleReceiptValidationResponse(u,f){return W(this,void 0,void 0,function*(){})}requestPayment(u,f){var h;return W(this,void 0,void 0,function*(){yield t.Utils.asyncDelay(100);const c=prompt(`Mock payment of ${((h=u.amountMicros)!==null&&h!==void 0?h:0)/1e6} ${u.currency}. Enter "Y" to confirm. Enter "E" to trigger an error.`);if((c==null?void 0:c.toUpperCase())==="E")return l(t.ErrorCode.PAYMENT_NOT_ALLOWED,"Payment not allowed",null);if((c==null?void 0:c.toUpperCase())!=="Y")return;const d=new t.Receipt(n,this.context.apiDecorators),p=new t.Transaction(t.Platform.TEST,d,this.context.apiDecorators);return p.purchaseDate=new Date,p.products=u.items.filter(x=>x).map(x=>({id:(x==null?void 0:x.id)||""})),p.state=t.TransactionState.APPROVED,p.transactionId="payment-"+new Date().getTime(),p.amountMicros=u.amountMicros,p.currency=u.currency,d.transactions=[p],this.receipts.push(d),setTimeout(()=>{this.context.listener.receiptsUpdated(n,[d])},400),p})}manageSubscriptions(){return W(this,void 0,void 0,function*(){alert("Pseudo subscription management interface. Close it when you are done.")})}manageBilling(){return W(this,void 0,void 0,function*(){alert("Pseudo billing management interface. Close it when you are done.")})}reportActiveSubscription(){if(this.receipts.find(p=>p.transactions[0].transactionId===c(1)))return;const u=2*6e4,f=new t.Receipt(n,this.context.apiDecorators),h=p=>{var x,v;const b=new t.Transaction(n,f,this.context.apiDecorators);b.products=[{id:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.id,offerId:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.extra.offerId}],b.state=t.TransactionState.APPROVED,b.transactionId=c(p),b.isAcknowledged=p==1,b.renewalIntent=t.RenewalIntent.RENEW;const m=+(((v=(x=f==null?void 0:f.transactions)===null||x===void 0?void 0:x[0])===null||v===void 0?void 0:v.purchaseDate)||new Date);return b.purchaseDate=new Date(m),b.lastRenewalDate=new Date(m+u*(p-1)),b.expirationDate=new Date(m+u*p),s(b),b};f.transactions.push(h(1)),this.receipts.push(f),this.context.listener.receiptsUpdated(t.Platform.TEST,[f]);function c(p){return"test-active-subscription-transaction-"+p}let d=1;setInterval(()=>{this.log.info("auto-renewing the mock subscription"),d+=1,f.transactions.push(h(d)),this.context.listener.receiptsUpdated(t.Platform.TEST,[f])},u)}static verify(u,f){setTimeout(()=>{var h,c;f({receipt:u,payload:{ok:!0,data:{id:(c=(h=u.transactions[0])===null||h===void 0?void 0:h.products[0])===null||c===void 0?void 0:c.id,latest_receipt:!0,transaction:{type:"test"},collection:i}}})},500)}checkSupport(u){return!0}restorePurchases(){return W(this,void 0,void 0,function*(){})}}e.Adapter=r;function l(o,u,f){return t.storeError(o,u,t.Platform.TEST,f)}})(t.Test||(t.Test={}))})(j||(j={}));var j;(function(t){(function(e){const n=t.Platform.TEST;e.testProducts={CONSUMABLE:{platform:n,id:"test-consumable",type:t.ProductType.CONSUMABLE},CONSUMABLE_FAILING:{platform:n,id:"test-consumable-fail",type:t.ProductType.CONSUMABLE},NON_CONSUMABLE:{platform:n,id:"test-non-consumable",type:t.ProductType.NON_CONSUMABLE},PAID_SUBSCRIPTION:{platform:n,id:"test-subscription",type:t.ProductType.PAID_SUBSCRIPTION},PAID_SUBSCRIPTION_ACTIVE:{platform:n,id:"test-subscription-active",type:t.ProductType.PAID_SUBSCRIPTION,extra:{offerId:"test-paid-subscription-active-offer1"}}},e.testProductsArray=t.Utils.objectValues(e.testProducts);function i(s,r){const l=Object.keys(e.testProducts).find(u=>e.testProducts[u]&&e.testProducts[u].id===s);if(!l)return;const o=new t.Product(e.testProducts[l],r);switch(l){case"CONSUMABLE":o.title="Test Consumable",o.description="A consumable product that you can purchase",o.addOffer(new t.Offer({id:"test-consumable-offer1",pricingPhases:[{price:"$4.99",currency:"USD",priceMicros:499e4,paymentMode:t.PaymentMode.UP_FRONT,recurrenceMode:t.RecurrenceMode.NON_RECURRING}],product:o},r));break;case"CONSUMABLE_FAILING":o.title="Failing Consumable",o.description="A consumable product that cannot be purchased",o.addOffer(new t.Offer({id:"test-consumable-fail-offer1",pricingPhases:[{price:"$1.99",currency:"USD",priceMicros:199e4,paymentMode:t.PaymentMode.UP_FRONT,recurrenceMode:t.RecurrenceMode.NON_RECURRING}],product:o},r));break;case"NON_CONSUMABLE":o.title="Non Consumable",o.description="A non consumable product",o.addOffer(new t.Offer({id:"test-non-consumable-offer1",pricingPhases:[{price:"$9.99",currency:"USD",priceMicros:999e4,paymentMode:t.PaymentMode.UP_FRONT,recurrenceMode:t.RecurrenceMode.NON_RECURRING}],product:o},r));break;case"PAID_SUBSCRIPTION":o.title="A subscription product",o.description="An auto-renewing paid subscription with a trial period",o.addOffer(new t.Offer({id:"test-paid-subscription-offer1",product:o,pricingPhases:[{price:"$0.00",currency:"USD",priceMicros:0,paymentMode:t.PaymentMode.FREE_TRIAL,recurrenceMode:t.RecurrenceMode.FINITE_RECURRING,billingCycles:3,billingPeriod:"P1W"},{price:"$4.99",currency:"USD",priceMicros:499e4,paymentMode:t.PaymentMode.PAY_AS_YOU_GO,recurrenceMode:t.RecurrenceMode.INFINITE_RECURRING,billingPeriod:"P1M"}]},r));break;case"PAID_SUBSCRIPTION_ACTIVE":o.title="An owned subscription product",o.description="An active paid subscription",o.addOffer(new t.Offer({id:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.extra.offerId,product:o,pricingPhases:[{price:"$19.99",currency:"USD",priceMicros:1999e4,paymentMode:t.PaymentMode.PAY_AS_YOU_GO,recurrenceMode:t.RecurrenceMode.INFINITE_RECURRING,billingPeriod:"P1Y"}]},r));break;default:const u=l;throw new Error(`Unhandled enum case: ${u}`)}return o}e.initTestProduct=i})(t.Test||(t.Test={}))})(j||(j={}));var j;(function(t){(function(e){class n{constructor(){this.id=t.Platform.WINDOWS_STORE,this.name="WindowsStore",this.ready=!1,this.supportsParallelLoading=!1,this.products=[],this.receipts=[]}initialize(){return W(this,void 0,void 0,function*(){})}get isSupported(){return!1}loadProducts(r){return W(this,void 0,void 0,function*(){return r.map(l=>i(t.ErrorCode.PRODUCT_NOT_AVAILABLE,"TODO",l.id))})}loadReceipts(){return W(this,void 0,void 0,function*(){return[]})}order(r){return W(this,void 0,void 0,function*(){return i(t.ErrorCode.UNKNOWN,"TODO: Not implemented",r.productId)})}finish(r){return W(this,void 0,void 0,function*(){return i(t.ErrorCode.UNKNOWN,"TODO: Not implemented",null)})}handleReceiptValidationResponse(r,l){return W(this,void 0,void 0,function*(){})}receiptValidationBody(r){return W(this,void 0,void 0,function*(){})}requestPayment(r,l){return W(this,void 0,void 0,function*(){return i(t.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return W(this,void 0,void 0,function*(){return i(t.ErrorCode.UNKNOWN,"manageSubscriptions not supported",null)})}manageBilling(){return W(this,void 0,void 0,function*(){return i(t.ErrorCode.UNKNOWN,"manageBilling not supported",null)})}checkSupport(r){return!1}restorePurchases(){return W(this,void 0,void 0,function*(){})}}e.Adapter=n;function i(s,r,l){return t.storeError(s,r,t.Platform.WINDOWS_STORE,l)}})(t.WindowsStore||(t.WindowsStore={}))})(j||(j={}));var j;(function(t){(function(e){let n;(function(r){r.HTTP_REQUEST_TIMEOUT=408})(n=e.Ajax||(e.Ajax={}));function i(r,l){if(typeof window<"u"&&window.cordova&&window.cordova.plugin&&window.cordova.plugin.http)return s(r,l);var o=function(){},u=new XMLHttpRequest;l.timeout&&(u.timeout=l.timeout,u.ontimeout=function(){r.warn("ajax -> request to "+l.url+" timeout"),e.callExternal(r,"ajax.error",l.error,n.HTTP_REQUEST_TIMEOUT,"Timeout")}),u.open(l.method||"POST",l.url,!0),u.onreadystatechange=function(){try{u.readyState===4&&(u.status===200?e.callExternal(r,"ajax.success",l.success,JSON.parse(u.responseText)):(r.warn("ajax -> request to "+l.url+" failed with status "+u.status+" ("+u.statusText+")"),e.callExternal(r,"ajax.error",l.error,u.status,u.statusText)))}catch(h){r.warn("ajax -> request to "+l.url+" failed with an exception: "+h.message),l.error&&l.error(417,h.message,null)}u.readyState===4&&e.callExternal(r,"ajax.done",o)};const f=l.customHeaders;return f&&Object.keys(f).forEach(function(h){r.debug("ajax -> adding custom header: "+h),u.setRequestHeader(h,f[h])}),u.setRequestHeader("Accept","application/json"),r.debug("ajax -> send request to "+l.url),l.data?(u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),u.send(JSON.stringify(l.data))):u.send(),{done:function(h){return o=h,this}}}e.ajax=i;function s(r,l){let o=function(){};const u={method:(l.method||"get").toLowerCase(),data:l.data,serializer:"json"};l.customHeaders&&(r.debug("ajax[http] -> adding custom headers: "+JSON.stringify(l.customHeaders)),u.headers=l.customHeaders),r.debug("ajax[http] -> send request to "+l.url);const f=h=>{try{h.status==200?e.callExternal(r,"ajax.success",l.success,JSON.parse(h.data)):(r.warn("ajax[http] -> request to "+l.url+" failed with status "+h.status+" ("+h.error+")"),e.callExternal(r,"ajax.error",l.error,h.status,h.error))}catch(c){r.warn("ajax[http] -> request to "+l.url+" failed with an exception: "+c.message),l.error&&e.callExternal(r,"ajax.error",l.error,417,c.message)}e.callExternal(r,"ajax.done",o)};return window.cordova.plugin.http.sendRequest(l.url,u,f,f),{done:function(h){return o=h,this}}}})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(i,s,r,...l){try{const o=Array.prototype.slice.call(arguments,3);r&&r.apply(t.store,o)}catch(o){i.logCallbackException(s,o)}}e.callExternal=n})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(l,o){return setTimeout(l,o)}e.delay=n;function i(l,o){return s(l,o).call}e.debounce=i;function s(l,o){let u=null,f=[];const h=function(d,p){const x=f;f=[],u=null,l(),x.forEach(v=>v())};return{call:function(){u&&window.clearTimeout(u),u=setTimeout(h,o)},wait:()=>new Promise(d=>{u?f.push(d):d()})}}e.createDebouncer=s;function r(l){return new Promise(o=>setTimeout(o,l))}e.asyncDelay=r})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(s){switch(i(s)){case t.RecurrenceMode.FINITE_RECURRING:return`${s.billingCycles}x ${e.formatDurationEN(s.billingPeriod)}`;case t.RecurrenceMode.NON_RECURRING:return"for "+e.formatDurationEN(s.billingPeriod);default:return"every "+e.formatDurationEN(s.billingPeriod,{omitOne:!0})}}e.formatBillingCycleEN=n;function i(s){var r;const l=(r=s.billingCycles)!==null&&r!==void 0?r:0;if(s.recurrenceMode===t.RecurrenceMode.FINITE_RECURRING){if(l==1)return t.RecurrenceMode.NON_RECURRING;if(l<=0)return t.RecurrenceMode.INFINITE_RECURRING}return s.recurrenceMode}})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(i,s){if(!i)return"";const r=i.length,l=i.slice(1,r-1);if(l==="1")return s!=null&&s.omitOne?{D:"day",W:"week",M:"month",Y:"year"}[i[r-1]]||i[r-1]:{D:"1 day",W:"1 week",M:"1 month",Y:"1 year"}[i[r-1]]||i[r-1];{const o={D:"days",W:"weeks",M:"months",Y:"years"}[i[r-1]]||i[r-1];return`${l} ${o}`}}e.formatDurationEN=n})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){const n="0123456789abcdef".split("");function i(v){for(var b="",m=0;m<4;m++)b+=n[v>>8*m+4&15]+n[v>>8*m&15];return b}function s(v){const b=[];for(var m=v.length,g=0;g<m;g++)b.push(i(v[g]));return b.join("")}function r(v,b){return v+b&4294967295}function l(v,b,m,g,y,_,E){function S(A,T,k){return r(A<<T|A>>>32-T,k)}function N(A,T,k,C){return r(r(T,A),r(k,C))}return S(N(v,b,g,_),y,m)}var o=function(v,b,m,g,y,_,E,S){return l(m&g|~m&y,b,m,_,E,S)},u=function(v,b,m,g,y,_,E,S){return l(m&y|g&~y,b,m,_,E,S)},f=function(v,b,m,g,y,_,E,S){return l(m^g^y,b,m,_,E,S)},h=function(v,b,m,g,y,_,E,S){return l(g^(m|~y),b,m,_,E,S)};function c(v,b,m){m||(m=r);let g=v[0],y=v[1],_=v[2],E=v[3];var S=o.bind(null,m);g=S(g,y,_,E,b[0],7,-680876936),E=S(E,g,y,_,b[1],12,-389564586),_=S(_,E,g,y,b[2],17,606105819),y=S(y,_,E,g,b[3],22,-1044525330),g=S(g,y,_,E,b[4],7,-176418897),E=S(E,g,y,_,b[5],12,1200080426),_=S(_,E,g,y,b[6],17,-1473231341),y=S(y,_,E,g,b[7],22,-45705983),g=S(g,y,_,E,b[8],7,1770035416),E=S(E,g,y,_,b[9],12,-1958414417),_=S(_,E,g,y,b[10],17,-42063),y=S(y,_,E,g,b[11],22,-1990404162),g=S(g,y,_,E,b[12],7,1804603682),E=S(E,g,y,_,b[13],12,-40341101),_=S(_,E,g,y,b[14],17,-1502002290),y=S(y,_,E,g,b[15],22,1236535329);var N=u.bind(null,m);g=N(g,y,_,E,b[1],5,-165796510),E=N(E,g,y,_,b[6],9,-1069501632),_=N(_,E,g,y,b[11],14,643717713),y=N(y,_,E,g,b[0],20,-373897302),g=N(g,y,_,E,b[5],5,-701558691),E=N(E,g,y,_,b[10],9,38016083),_=N(_,E,g,y,b[15],14,-660478335),y=N(y,_,E,g,b[4],20,-405537848),g=N(g,y,_,E,b[9],5,568446438),E=N(E,g,y,_,b[14],9,-1019803690),_=N(_,E,g,y,b[3],14,-187363961),y=N(y,_,E,g,b[8],20,1163531501),g=N(g,y,_,E,b[13],5,-1444681467),E=N(E,g,y,_,b[2],9,-51403784),_=N(_,E,g,y,b[7],14,1735328473),y=N(y,_,E,g,b[12],20,-1926607734);var A=f.bind(null,m);g=A(g,y,_,E,b[5],4,-378558),E=A(E,g,y,_,b[8],11,-2022574463),_=A(_,E,g,y,b[11],16,1839030562),y=A(y,_,E,g,b[14],23,-35309556),g=A(g,y,_,E,b[1],4,-1530992060),E=A(E,g,y,_,b[4],11,1272893353),_=A(_,E,g,y,b[7],16,-155497632),y=A(y,_,E,g,b[10],23,-1094730640),g=A(g,y,_,E,b[13],4,681279174),E=A(E,g,y,_,b[0],11,-358537222),_=A(_,E,g,y,b[3],16,-722521979),y=A(y,_,E,g,b[6],23,76029189),g=A(g,y,_,E,b[9],4,-640364487),E=A(E,g,y,_,b[12],11,-421815835),_=A(_,E,g,y,b[15],16,530742520),y=A(y,_,E,g,b[2],23,-995338651);var T=h.bind(null,m);g=T(g,y,_,E,b[0],6,-198630844),E=T(E,g,y,_,b[7],10,1126891415),_=T(_,E,g,y,b[14],15,-1416354905),y=T(y,_,E,g,b[5],21,-57434055),g=T(g,y,_,E,b[12],6,1700485571),E=T(E,g,y,_,b[3],10,-1894986606),_=T(_,E,g,y,b[10],15,-1051523),y=T(y,_,E,g,b[1],21,-2054922799),g=T(g,y,_,E,b[8],6,1873313359),E=T(E,g,y,_,b[15],10,-30611744),_=T(_,E,g,y,b[6],15,-1560198380),y=T(y,_,E,g,b[13],21,1309151649),g=T(g,y,_,E,b[4],6,-145523070),E=T(E,g,y,_,b[11],10,-1120210379),_=T(_,E,g,y,b[2],15,718787259),y=T(y,_,E,g,b[9],21,-343485551),v[0]=m(g,v[0]),v[1]=m(y,v[1]),v[2]=m(_,v[2]),v[3]=m(E,v[3])}function d(v){for(var b=[],m=0;m<64;m+=4)b[m>>2]=v.charCodeAt(m)+(v.charCodeAt(m+1)<<8)+(v.charCodeAt(m+2)<<16)+(v.charCodeAt(m+3)<<24);return b}function p(v,b){let m;const g=v.length,y=[1732584193,-271733879,-1732584194,271733878];for(m=64;m<=g;m+=64)c(y,d(v.substring(m-64,m)),b);const _=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=(v=v.substring(m-64)).length;let S;for(S=0;S<E;S++)_[S>>2]|=v.charCodeAt(S)<<(S%4<<3);if(_[S>>2]|=128<<(S%4<<3),S>55)for(c(y,_,b),S=16;S--;)_[S]=0;return _[14]=8*g,c(y,_,b),y}function x(v){if(!v)return"";let b;return s(p("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(b=function(m,g){const y=(65535&m)+(65535&g);return(m>>16)+(g>>16)+(y>>16)<<16|65535&y}),s(p(v,b))}e.md5=x})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(){var i,s,r;return!((i=window.cordova)===null||i===void 0)&&i.platformId?(s=window.cordova)===null||s===void 0?void 0:s.platformId:!((r=window.Capacitor)===null||r===void 0)&&r.getPlatform?window.Capacitor.getPlatform():"web"}e.platformId=n})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(s,r,l,o,u){return function(f){i(s,r,l,f,o,u)}}e.safeCallback=n;function i(s,r,l,o,u,f){l&&(u||(u=l.name||"#"+e.md5(l.toString())),setTimeout(()=>{try{s.debug(`Calling callback: type=${r} name=${u} reason=${f}`),l(o)}catch(h){s.error(`Error in callback: type=${r} name=${u} reason=${f}`),s.debug(l.toString());const c=h;"message"in c&&s.error(c.message),"fileName"in h&&s.error("in "+h.fileName+":"+h.lineNumber),"stack"in c&&s.error(c.stack)}},0))}e.safeCall=i})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){function n(){return window.crypto||window.msCrypto}function i(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(s){return(s^n().getRandomValues(new Uint8Array(1))[0]&15>>s/4).toString(16)})}e.uuidv4=i})(t.Utils||(t.Utils={}))})(j||(j={}));var j;(function(t){(function(e){(function(n){function i(o){return Object.prototype.toString.call(o)==="[object Array]"}function s(o){return Object.prototype.toString.call(o)==="[object Object]"}function r(o){return typeof o.validator_privacy_policy=="string"?o.validator_privacy_policy.split(","):i(o.validator_privacy_policy)?o.validator_privacy_policy:["analytics","support","fraud"]}function l(o){const u=r(o);function f(x){return u.indexOf(x)>=0}const h={plugin:"cordova-plugin-purchase/"+t.PLUGIN_VERSION},c=window,d=s(c.device)?c.device:{};if(f("analytics")||f("support")){const x=c.Ionic||c.ionic;x&&x.version&&(h.ionic=x.version),d.cordova&&(h.cordova=d.cordova),d.model&&(h.model=d.model),d.platform&&(h.platform=d.platform),d.version&&(h.version=d.version),d.manufacturer&&(h.manufacturer=d.manufacturer)}if(f("tracking")&&(d.serial&&(h.serial=d.serial),d.uuid&&(h.uuid=d.uuid)),d.isVirtual&&(h.isVirtual=d.isVirtual),f("fraud")){var p="";d.serial?p="serial:"+d.serial:d.uuid?p="uuid:"+d.uuid:(d.model&&(p+="/"+d.model),d.manufacturer&&(p="/"+d.manufacturer)),p&&(h.fingerprint=t.Utils.md5(p))}return h}n.getDeviceInfo=l})(e.Internal||(e.Internal={}))})(t.Validator||(t.Validator={}))})(j||(j={}));var j;(function(t){(function(e){e.Request||(e.Request={})})(t.Validator||(t.Validator={}))})(j||(j={}));var j;(function(t){class e{constructor(i,s,r){var l;this.className="VerifiedReceipt",this.id=s.id,this.sourceReceipt=i,this.collection=(l=s.collection)!==null&&l!==void 0?l:[],this.latestReceipt=s.latest_receipt,this.nativeTransactions=[s.transaction],this.warning=s.warning,this.validationDate=s.date?new Date(s.date):new Date,Object.defineProperty(this,"raw",{enumerable:!1,get(){return s}}),Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>r.finish(this)}})}get platform(){return this.sourceReceipt.platform}get raw(){return{}}set(i,s){var r;this.id=s.id,this.sourceReceipt=i,this.collection=(r=s.collection)!==null&&r!==void 0?r:[],this.latestReceipt=s.latest_receipt,this.nativeTransactions=[s.transaction],this.warning=s.warning}finish(){return W(this,void 0,void 0,function*(){})}}t.VerifiedReceipt=e})(j||(j={}));const Rn={GOLD_MINI:"gold_mini",GOLD_100:"gold_100",GOLD_BAG:"gold_bag",GOLD_500:"gold_500",GOLD_VAULT:"gold_vault",ENERGY_COFFEE:"energy_coffee",ENERGY_REFILL:"energy_refill",ENERGY_BULK:"energy_bulk",VIP_SUB:"vip_sub",VERIFIED_TICK:"verified_tick"};class wI{constructor(){La(this,"store",null);qt.isNativePlatform()&&window.CdvPurchase&&(this.store=window.CdvPurchase.store,this.initialize())}initialize(){if(!this.store)return;const e=window.CdvPurchase,n=[{id:Rn.GOLD_MINI,type:e.ProductType.CONSUMABLE},{id:Rn.GOLD_100,type:e.ProductType.CONSUMABLE},{id:Rn.GOLD_BAG,type:e.ProductType.CONSUMABLE},{id:Rn.GOLD_500,type:e.ProductType.CONSUMABLE},{id:Rn.GOLD_VAULT,type:e.ProductType.CONSUMABLE},{id:Rn.ENERGY_COFFEE,type:e.ProductType.CONSUMABLE},{id:Rn.ENERGY_REFILL,type:e.ProductType.CONSUMABLE},{id:Rn.ENERGY_BULK,type:e.ProductType.CONSUMABLE},{id:Rn.VERIFIED_TICK,type:e.ProductType.NON_CONSUMABLE},{id:Rn.VIP_SUB,type:e.ProductType.PAID_SUBSCRIPTION}];this.store.register(n.flatMap(i=>[{...i,platform:e.Platform.GOOGLE_PLAY},{...i,platform:e.Platform.APPLE_APPSTORE}])),this.store.when().approved(i=>{console.log("Transaction approved:",i),i.verify()}),this.store.when().verified(i=>{console.log("Transaction verified, finishing..."),i.finish()}),this.store.initialize([e.Platform.GOOGLE_PLAY,e.Platform.APPLE_APPSTORE])}async purchase(e){if(!this.store)return console.warn("Store not available"),new Promise(n=>setTimeout(()=>n({success:!0}),1e3));try{const n=this.store.get(e);if(n&&n.canPurchase)return{success:!!await this.store.order(e)}}catch(n){console.error("Purchase error",n)}return{success:!1}}async restore(){this.store&&this.store.restorePurchases()}}const Hh=new wI;var is={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||n;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||n;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,n.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var x=d._howls[p]._getSoundIds(),v=0;v<x.length;v++){var b=d._howls[p]._soundById(x[v]);b&&b._node&&(b._node.volume=b._volume*c)}return d}return d._volume},mute:function(c){var d=this||n;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,n.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var x=d._howls[p]._getSoundIds(),v=0;v<x.length;v++){var b=d._howls[p]._soundById(x[v]);b&&b._node&&(b._node.muted=c?!0:b._muted)}return d},stop:function(){for(var c=this||n,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||n,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||n)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||n;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||n,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),x=c._navigator?c._navigator.userAgent:"",v=x.match(/OPR\/(\d+)/g),b=v&&parseInt(v[0].split("/")[1],10)<33,m=x.indexOf("Safari")!==-1&&x.indexOf("Chrome")===-1,g=x.match(/Version\/(.*?) /),y=m&&g&&parseInt(g[1],10)<15;return c._codecs={mp3:!!(!b&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||n;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(p){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var x=new Audio;x._unlocked=!0,c._releaseHtml5Audio(x)}catch{c.noAudio=!0;break}for(var v=0;v<c._howls.length;v++)if(!c._howls[v]._webAudio)for(var b=c._howls[v]._getSoundIds(),m=0;m<b.length;m++){var g=c._howls[v]._soundById(b[m]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}c._autoResume();var y=c.ctx.createBufferSource();y.buffer=c._scratchBuffer,y.connect(c.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),y.onended=function(){y.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var _=0;_<c._howls.length;_++)c._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||n;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||n;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!n.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var p=0;p<c._howls[d]._sounds.length;p++)if(!c._howls[d]._sounds[p]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var x=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(x,x)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!n.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var n=new e,i=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};i.prototype={init:function(c){var d=this;return n.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=n.usingWebAudio&&!d._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(n.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var p=0;p<c._src.length;p++){var x,v;if(c._format&&c._format[p])x=c._format[p];else{if(v=c._src[p],typeof v!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}x=/^data:audio\/([^;,]+);/i.exec(v),x||(x=/\.([^.]+)$/.exec(v.split("?",1)[0])),x&&(x=x[1].toLowerCase())}if(x||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),x&&n.codecs(x)){d=c._src[p];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new s(c),c._webAudio&&l(c),c},play:function(c,d){var p=this,x=null;if(typeof c=="number")x=c,c=null;else{if(typeof c=="string"&&p._state==="loaded"&&!p._sprite[c])return null;if(typeof c>"u"&&(c="__default",!p._playLock)){for(var v=0,b=0;b<p._sounds.length;b++)p._sounds[b]._paused&&!p._sounds[b]._ended&&(v++,x=p._sounds[b]._id);v===1?c=null:x=null}}var m=x?p._soundById(x):p._inactiveSound();if(!m)return null;if(x&&!c&&(c=m._sprite||"__default"),p._state!=="loaded"){m._sprite=c,m._ended=!1;var g=m._id;return p._queue.push({event:"play",action:function(){p.play(g)}}),g}if(x&&!m._paused)return d||p._loadQueue("play"),m._id;p._webAudio&&n._autoResume();var y=Math.max(0,m._seek>0?m._seek:p._sprite[c][0]/1e3),_=Math.max(0,(p._sprite[c][0]+p._sprite[c][1])/1e3-y),E=_*1e3/Math.abs(m._rate),S=p._sprite[c][0]/1e3,N=(p._sprite[c][0]+p._sprite[c][1])/1e3;m._sprite=c,m._ended=!1;var A=function(){m._paused=!1,m._seek=y,m._start=S,m._stop=N,m._loop=!!(m._loop||p._sprite[c][2])};if(y>=N){p._ended(m);return}var T=m._node;if(p._webAudio){var k=function(){p._playLock=!1,A(),p._refreshBuffer(m);var B=m._muted||p._muted?0:m._volume;T.gain.setValueAtTime(B,n.ctx.currentTime),m._playStart=n.ctx.currentTime,typeof T.bufferSource.start>"u"?m._loop?T.bufferSource.noteGrainOn(0,y,86400):T.bufferSource.noteGrainOn(0,y,_):m._loop?T.bufferSource.start(0,y,86400):T.bufferSource.start(0,y,_),E!==1/0&&(p._endTimers[m._id]=setTimeout(p._ended.bind(p,m),E)),d||setTimeout(function(){p._emit("play",m._id),p._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?k():(p._playLock=!0,p.once("resume",k),p._clearTimer(m._id))}else{var C=function(){T.currentTime=y,T.muted=m._muted||p._muted||n._muted||T.muted,T.volume=m._volume*n.volume(),T.playbackRate=m._rate;try{var B=T.play();if(B&&typeof Promise<"u"&&(B instanceof Promise||typeof B.then=="function")?(p._playLock=!0,A(),B.then(function(){p._playLock=!1,T._unlocked=!0,d?p._loadQueue():p._emit("play",m._id)}).catch(function(){p._playLock=!1,p._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):d||(p._playLock=!1,A(),p._emit("play",m._id)),T.playbackRate=m._rate,T.paused){p._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||m._loop?p._endTimers[m._id]=setTimeout(p._ended.bind(p,m),E):(p._endTimers[m._id]=function(){p._ended(m),T.removeEventListener("ended",p._endTimers[m._id],!1)},T.addEventListener("ended",p._endTimers[m._id],!1))}catch($){p._emit("playerror",m._id,$)}};T.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(T.src=p._src,T.load());var L=window&&window.ejecta||!T.readyState&&n._navigator.isCocoonJS;if(T.readyState>=3||L)C();else{p._playLock=!0,p._state="loading";var D=function(){p._state="loaded",C(),T.removeEventListener(n._canPlayEvent,D,!1)};T.addEventListener(n._canPlayEvent,D,!1),p._clearTimer(m._id)}}return m._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var p=d._getSoundIds(c),x=0;x<p.length;x++){d._clearTimer(p[x]);var v=d._soundById(p[x]);if(v&&!v._paused&&(v._seek=d.seek(p[x]),v._rateSeek=0,v._paused=!0,d._stopFade(p[x]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(c)}}),p;for(var x=p._getSoundIds(c),v=0;v<x.length;v++){p._clearTimer(x[v]);var b=p._soundById(x[v]);b&&(b._seek=b._start||0,b._rateSeek=0,b._paused=!0,b._ended=!0,p._stopFade(x[v]),b._node&&(p._webAudio?b._node.bufferSource&&(typeof b._node.bufferSource.stop>"u"?b._node.bufferSource.noteOff(0):b._node.bufferSource.stop(0),p._cleanBuffer(b._node)):(!isNaN(b._node.duration)||b._node.duration===1/0)&&(b._node.currentTime=b._start||0,b._node.pause(),b._node.duration===1/0&&p._clearSound(b._node))),d||p._emit("stop",b._id))}return p},mute:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(c,d)}}),p;if(typeof d>"u")if(typeof c=="boolean")p._muted=c;else return p._muted;for(var x=p._getSoundIds(d),v=0;v<x.length;v++){var b=p._soundById(x[v]);b&&(b._muted=c,b._interval&&p._stopFade(b._id),p._webAudio&&b._node?b._node.gain.setValueAtTime(c?0:b._volume,n.ctx.currentTime):b._node&&(b._node.muted=n._muted?!0:c),p._emit("mute",b._id))}return p},volume:function(){var c=this,d=arguments,p,x;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=c._getSoundIds(),b=v.indexOf(d[0]);b>=0?x=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),x=parseInt(d[1],10));var m;if(typeof p<"u"&&p>=0&&p<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof x>"u"&&(c._volume=p),x=c._getSoundIds(x);for(var g=0;g<x.length;g++)m=c._soundById(x[g]),m&&(m._volume=p,d[2]||c._stopFade(x[g]),c._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(p,n.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=p*n.volume()),c._emit("volume",m._id))}else return m=x?c._soundById(x):c._sounds[0],m?m._volume:0;return c},fade:function(c,d,p,x){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(c,d,p,x)}}),v;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),v.volume(c,x);for(var b=v._getSoundIds(x),m=0;m<b.length;m++){var g=v._soundById(b[m]);if(g){if(x||v._stopFade(b[m]),v._webAudio&&!g._muted){var y=n.ctx.currentTime,_=y+p/1e3;g._volume=c,g._node.gain.setValueAtTime(c,y),g._node.gain.linearRampToValueAtTime(d,_)}v._startFadeInterval(g,c,d,p,b[m],typeof x>"u")}}return v},_startFadeInterval:function(c,d,p,x,v,b){var m=this,g=d,y=p-d,_=Math.abs(y/.01),E=Math.max(4,_>0?x/_:x),S=Date.now();c._fadeTo=p,c._interval=setInterval(function(){var N=(Date.now()-S)/x;S=Date.now(),g+=y*N,g=Math.round(g*100)/100,y<0?g=Math.max(p,g):g=Math.min(p,g),m._webAudio?c._volume=g:m.volume(g,c._id,!0),b&&(m._volume=g),(p<d&&g<=p||p>d&&g>=p)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,m.volume(p,c._id),m._emit("fade",c._id))},E)},_stopFade:function(c){var d=this,p=d._soundById(c);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,c),p._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,p,x,v;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],c._loop=p;else return v=c._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(p=d[0],x=parseInt(d[1],10));for(var b=c._getSoundIds(x),m=0;m<b.length;m++)v=c._soundById(b[m]),v&&(v._loop=p,c._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=p,p&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,c.playing(b[m])&&(c.pause(b[m],!0),c.play(b[m],!0)))));return c},rate:function(){var c=this,d=arguments,p,x;if(d.length===0)x=c._sounds[0]._id;else if(d.length===1){var v=c._getSoundIds(),b=v.indexOf(d[0]);b>=0?x=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),x=parseInt(d[1],10));var m;if(typeof p=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof x>"u"&&(c._rate=p),x=c._getSoundIds(x);for(var g=0;g<x.length;g++)if(m=c._soundById(x[g]),m){c.playing(x[g])&&(m._rateSeek=c.seek(x[g]),m._playStart=c._webAudio?n.ctx.currentTime:m._playStart),m._rate=p,c._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(p,n.ctx.currentTime):m._node&&(m._node.playbackRate=p);var y=c.seek(x[g]),_=(c._sprite[m._sprite][0]+c._sprite[m._sprite][1])/1e3-y,E=_*1e3/Math.abs(m._rate);(c._endTimers[x[g]]||!m._paused)&&(c._clearTimer(x[g]),c._endTimers[x[g]]=setTimeout(c._ended.bind(c,m),E)),c._emit("rate",m._id)}}else return m=c._soundById(x),m?m._rate:c._rate;return c},seek:function(){var c=this,d=arguments,p,x;if(d.length===0)c._sounds.length&&(x=c._sounds[0]._id);else if(d.length===1){var v=c._getSoundIds(),b=v.indexOf(d[0]);b>=0?x=parseInt(d[0],10):c._sounds.length&&(x=c._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),x=parseInt(d[1],10));if(typeof x>"u")return 0;if(typeof p=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var m=c._soundById(x);if(m)if(typeof p=="number"&&p>=0){var g=c.playing(x);g&&c.pause(x,!0),m._seek=p,m._ended=!1,c._clearTimer(x),!c._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=p);var y=function(){g&&c.play(x,!0),c._emit("seek",x)};if(g&&!c._webAudio){var _=function(){c._playLock?setTimeout(_,0):y()};setTimeout(_,0)}else y()}else if(c._webAudio){var E=c.playing(x)?n.ctx.currentTime-m._playStart:0,S=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(S+E*Math.abs(m._rate))}else return m._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var p=d._soundById(c);return p?!p._paused:!1}for(var x=0;x<d._sounds.length;x++)if(!d._sounds[x]._paused)return!0;return!1},duration:function(c){var d=this,p=d._duration,x=d._soundById(c);return x&&(p=d._sprite[x._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,p=0;p<d.length;p++)d[p]._paused||c.stop(d[p]._id),c._webAudio||(c._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(n._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),n._releaseHtml5Audio(d[p]._node)),delete d[p]._node,c._clearTimer(d[p]._id);var x=n._howls.indexOf(c);x>=0&&n._howls.splice(x,1);var v=!0;for(p=0;p<n._howls.length;p++)if(n._howls[p]._src===c._src||c._src.indexOf(n._howls[p]._src)>=0){v=!1;break}return r&&v&&delete r[c._src],n.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,p,x){var v=this,b=v["_on"+c];return typeof d=="function"&&b.push(x?{id:p,fn:d,once:x}:{id:p,fn:d}),v},off:function(c,d,p){var x=this,v=x["_on"+c],b=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(b=0;b<v.length;b++){var m=p===v[b].id;if(d===v[b].fn&&m||!d&&m){v.splice(b,1);break}}else if(c)x["_on"+c]=[];else{var g=Object.keys(x);for(b=0;b<g.length;b++)g[b].indexOf("_on")===0&&Array.isArray(x[g[b]])&&(x[g[b]]=[])}return x},once:function(c,d,p){var x=this;return x.on(c,d,p,1),x},_emit:function(c,d,p){for(var x=this,v=x["_on"+c],b=v.length-1;b>=0;b--)(!v[b].id||v[b].id===d||c==="load")&&(setTimeout((function(m){m.call(this,d,p)}).bind(x,v[b].fn),0),v[b].once&&x.off(c,v[b].fn,v[b].id));return x._loadQueue(c),x},_loadQueue:function(c){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===c&&(d._queue.shift(),d._loadQueue()),c||p.action()}return d},_ended:function(c){var d=this,p=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var x=!!(c._loop||d._sprite[p][2]);if(d._emit("end",c._id),!d._webAudio&&x&&d.stop(c._id,!0).play(c._id),d._webAudio&&x){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=n.ctx.currentTime;var v=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),v)}return d._webAudio&&!x&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),n._autoSuspend()),!d._webAudio&&!x&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var p=d._soundById(c);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,p=0;p<d._sounds.length;p++)if(c===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new s(c)},_drain:function(){var c=this,d=c._pool,p=0,x=0;if(!(c._sounds.length<d)){for(x=0;x<c._sounds.length;x++)c._sounds[x]._ended&&p++;for(x=c._sounds.length-1;x>=0;x--){if(p<=d)return;c._sounds[x]._ended&&(c._webAudio&&c._sounds[x]._node&&c._sounds[x]._node.disconnect(0),c._sounds.splice(x,1),p--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var p=[],x=0;x<d._sounds.length;x++)p.push(d._sounds[x]._id);return p}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=n.ctx.createBufferSource(),c._node.bufferSource.buffer=r[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,n.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,p=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(n._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),p))try{c.bufferSource.buffer=n._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(c){this._parent=c,this.init()};s.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++n._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,p=n._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),c._node.gain.setValueAtTime(p,n.ctx.currentTime),c._node.paused=!0,c._node.connect(n.masterGain)):n.noAudio||(c._node=n._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(n._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=p*n.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++n._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(n._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var r={},l=function(c){var d=c._src;if(r[d]){c._duration=r[d].duration,f(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),x=new Uint8Array(p.length),v=0;v<p.length;++v)x[v]=p.charCodeAt(v);u(x.buffer,c)}else{var b=new XMLHttpRequest;b.open(c._xhr.method,d,!0),b.withCredentials=c._xhr.withCredentials,b.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(m){b.setRequestHeader(m,c._xhr.headers[m])}),b.onload=function(){var m=(b.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+b.status+".");return}u(b.response,c)},b.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete r[d],c.load())},o(b)}},o=function(c){try{c.send()}catch{c.onerror()}},u=function(c,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},x=function(v){v&&d._sounds.length>0?(r[d._src]=v,f(d,v)):p()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(c).then(x).catch(p):n.ctx.decodeAudioData(c,x,p)},f=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),d=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(c&&p&&p<9){var x=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!x&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=i,typeof js<"u"?(js.HowlerGlobal=e,js.Howler=n,js.Howl=i,js.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=i,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var s=i._howls.length-1;s>=0;s--)i._howls[s].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,s){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(i=typeof i!="number"?r._pos[1]:i,s=typeof s!="number"?r._pos[2]:s,typeof n=="number")r._pos=[n,i,s],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(n,i,s,r,l,o){var u=this;if(!u.ctx||!u.ctx.listener)return u;var f=u._orientation;if(i=typeof i!="number"?f[1]:i,s=typeof s!="number"?f[2]:s,r=typeof r!="number"?f[3]:r,l=typeof l!="number"?f[4]:l,o=typeof o!="number"?f[5]:o,typeof n=="number")u._orientation=[n,i,s,r,l,o],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,i,s,r,l,o);else return f;return u},Howl.prototype.init=function(n){return function(i){var s=this;return s._orientation=i.orientation||[1,0,0],s._stereo=i.stereo||null,s._pos=i.pos||null,s._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},s._onstereo=i.onstereo?[{fn:i.onstereo}]:[],s._onpos=i.onpos?[{fn:i.onpos}]:[],s._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,i)}}),s;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var l=s._getSoundIds(i),o=0;o<l.length;o++){var u=s._soundById(l[o]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,r),r==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",u._id);else return u._stereo}return s},Howl.prototype.pos=function(n,i,s,r){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(n,i,s,r)}}),l;if(i=typeof i!="number"?0:i,s=typeof s!="number"?-.5:s,typeof r>"u")if(typeof n=="number")l._pos=[n,i,s];else return l._pos;for(var o=l._getSoundIds(r),u=0;u<o.length;u++){var f=l._soundById(o[u]);if(f)if(typeof n=="number")f._pos=[n,i,s],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):f._panner.setPosition(n,i,s)),l._emit("pos",f._id);else return f._pos}return l},Howl.prototype.orientation=function(n,i,s,r){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(n,i,s,r)}}),l;if(i=typeof i!="number"?l._orientation[1]:i,s=typeof s!="number"?l._orientation[2]:s,typeof r>"u")if(typeof n=="number")l._orientation=[n,i,s];else return l._orientation;for(var o=l._getSoundIds(r),u=0;u<o.length;u++){var f=l._soundById(o[u]);if(f)if(typeof n=="number")f._orientation=[n,i,s],f._node&&(f._panner||(f._pos||(f._pos=l._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):f._panner.setOrientation(n,i,s)),l._emit("orientation",f._id);else return f._orientation}return l},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,s,r,l;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")s=i[0],typeof r>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return l=n._soundById(parseInt(i[0],10)),l?l._pannerAttr:n._pannerAttr;else i.length===2&&(s=i[0],r=parseInt(i[1],10));for(var o=n._getSoundIds(r),u=0;u<o.length;u++)if(l=n._soundById(o[u]),l){var f=l._pannerAttr;f={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:f.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:f.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:f.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:f.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:f.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:f.panningModel};var h=l._panner;h||(l._pos||(l._pos=n._pos||[0,0,-.5]),e(l,"spatial"),h=l._panner),h.coneInnerAngle=f.coneInnerAngle,h.coneOuterAngle=f.coneOuterAngle,h.coneOuterGain=f.coneOuterGain,h.distanceModel=f.distanceModel,h.maxDistance=f.maxDistance,h.refDistance=f.refDistance,h.rolloffFactor=f.rolloffFactor,h.panningModel=f.panningModel}return n},Sound.prototype.init=function(n){return function(){var i=this,s=i._parent;i._orientation=s._orientation,i._stereo=s._stereo,i._pos=s._pos,i._pannerAttr=s._pannerAttr,n.call(this),i._stereo?s.stereo(i._stereo):i._pos&&s.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,s=i._parent;return i._orientation=s._orientation,i._stereo=s._stereo,i._pos=s._pos,i._pannerAttr=s._pannerAttr,i._stereo?s.stereo(i._stereo):i._pos?s.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,s._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var e=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(is);const hf="flowify-assets-v1",Xx={cacheAssets:async t=>{try{const e=await caches.open(hf),n=t.map(async i=>{if(!await e.match(i))try{await e.add(i),console.log(`[Cache] Added: ${i}`)}catch(r){console.warn(`[Cache] Failed to add ${i}`,r)}});await Promise.all(n)}catch(e){console.error("[Cache] Error opening cache",e)}},isCached:async t=>{try{return!!await(await caches.open(hf)).match(t)}catch{return!1}},getAssetUrl:async t=>{try{const n=await(await caches.open(hf)).match(t);if(n){const i=await n.blob();return URL.createObjectURL(i)}}catch{console.warn(`[Cache] Cache miss for ${t}`)}return t}},pf={click:"https://files.catbox.moe/tk3jff.mp3",back:"https://assets.mixkit.co/active_storage/sfx/212/212-preview.mp3",money:"https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3",success:"https://files.catbox.moe/ilrtul.mp3",error:"https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3",go:"https://files.catbox.moe/cl4379.mp3",tick:"https://files.catbox.moe/x98144.mp3",rhythm_twister:"https://files.catbox.moe/i8utl5.mp3",correct:"https://files.catbox.moe/ilrtul.mp3",wrong:"https://files.catbox.moe/ovzrlt.mp3",scratch:"https://files.catbox.moe/npwc6x.mp3"},tN={},NI=async t=>{const e=Object.keys(pf),n=Object.values(pf),i=e.length;let s=0;return await Xx.cacheAssets(n),new Promise(r=>{if(i===0){r();return}const l=async(o,u)=>{const f=await Xx.getAssetUrl(u);tN[o]=new is.Howl({src:[f],preload:!0,html5:!1,loop:!1,volume:1,format:["mp3"],onload:()=>{s++,s===i&&r()},onloaderror:(h,c)=>{console.warn(`[SFX] Failed to load ${o}:`,c),s++,s===i&&r()}})};e.forEach(o=>{const u=pf[o];l(o,u)}),setTimeout(()=>{s<i&&(console.warn("[SFX] Timeout reached, forcing start."),r())},3e3)})},EI=()=>{is.Howler.ctx&&is.Howler.ctx.state==="suspended"&&is.Howler.ctx.resume()},_i=(t,e=1)=>{is.Howler.ctx&&is.Howler.ctx.state==="suspended"&&is.Howler.ctx.resume();const n=tN[t];if(n)if(n.volume(e),t==="scratch"){const i=n.play();n.rate(.8+Math.random()*.4,i)}else n.play()},Y=()=>_i("click",.5),SI=()=>_i("money",.6),nn=()=>_i("success",.6),ct=()=>_i("error",.4),Ca=()=>_i("go",.7),hs=()=>_i("tick",.5),So=()=>_i("correct",.7),da=()=>_i("wrong",.5),AI=()=>_i("scratch",.4),kI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),vi=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),a.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),a.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),a.jsx("line",{x1:"8",y1:"22",x2:"16",y2:"22"})]}),Ot=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),a.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),a.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),Ia=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Gi=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),vn=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),ud=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),Vm=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),a.jsx("path",{d:"M2 12h20"})]}),Ao=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),a.jsx("path",{d:"M12 18V6"})]}),Ym=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"9",cy:"12",r:"1"}),a.jsx("circle",{cx:"15",cy:"12",r:"1"}),a.jsx("path",{d:"M8 20v2h8v-2"}),a.jsx("path",{d:"m12.5 17-.5-1-.5 1h1z"}),a.jsx("path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20"})]}),ku=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}),a.jsx("line",{x1:"13",y1:"19",x2:"19",y2:"13"}),a.jsx("line",{x1:"16",y1:"16",x2:"20",y2:"20"}),a.jsx("line",{x1:"19",y1:"21",x2:"21",y2:"19"})]}),TI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),RI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),jI=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),Tu=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:a.jsx("path",{d:"M4 2C2.89543 2 2 2.89543 2 4V20C2 21.1046 2.89543 22 4 22H20C21.1046 22 22 21.1046 22 20V4C22 2.89543 21.1046 2 20 2H4ZM12 6C12 6 15 10 15 12.5C15 14.5 13.5 15.5 12.5 15.5H13.5L14 17.5H10L10.5 15.5H11.5C10.5 15.5 9 14.5 9 12.5C9 10 12 6 12 6ZM5.5 5.5H7.5V7.5H5.5V5.5ZM16.5 16.5H18.5V18.5H16.5V16.5Z"})}),Ko=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:[a.jsx("path",{d:"M12 2L16 6H13V12H11V6H8L12 2Z"}),a.jsx("path",{d:"M12 22L8 18H11V12H13V18H16L12 22Z"})]}),CI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:[a.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),a.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),nN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M19 6h-14c-2.2 0-4 1.8-4 4v4c0 2.2 1.8 4 4 4h14c2.2 0 4-1.8 4-4v-4c0-2.2-1.8-4-4-4z"}),a.jsx("path",{d:"M8 10v4"}),a.jsx("path",{d:"M6 12h4"}),a.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),a.jsx("circle",{cx:"18",cy:"10",r:"1",fill:"currentColor",stroke:"none"}),a.jsx("path",{d:"M12 6v-1a2 2 0 0 1 2-2h-4a2 2 0 0 1 2 2v1",opacity:"0.6"})]}),II=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:[a.jsx("path",{d:"M12 2C10.3431 2 9 3.34315 9 5V11C9 12.6569 10.3431 14 12 14C13.6569 14 15 12.6569 15 11V5C15 3.34315 13.6569 2 12 2Z"}),a.jsx("path",{d:"M5 10C5 9.44772 5.44772 9 6 9C6.55228 9 7 9.44772 7 10C7 12.7614 9.23858 15 12 15C14.7614 15 17 12.7614 17 10C17 9.44772 17.4477 9 18 9C18.5523 9 19 9.44772 19 10C19 13.5362 16.3768 16.4576 13 16.92V19H15C15.5523 19 16 19.4477 16 20C16 20.5523 15.5523 21 15 21H9C8.44772 21 8 20.5523 8 20C8 19.4477 8.44772 19 9 19H11V16.92C7.62319 16.4576 5 13.5362 5 10Z"})]}),OI=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:a.jsx("path",{d:"M7 6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6V18C17 20.7614 14.7614 23 12 23C9.23858 23 7 20.7614 7 18V6ZM12 3C10.3431 3 9 4.34315 9 6V18C9 19.6569 10.3431 21 12 21C13.6569 21 15 19.6569 15 18V6C15 4.34315 13.6569 3 12 3Z"})}),LI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"black"})]}),MI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:[a.jsx("path",{d:"M9 11h6v8h-6z"}),a.jsx("path",{d:"M12 2l-2 3h4z"})]}),yc=({className:t,dir:e})=>{let n="";switch(e){case"left":n="-rotate-90";break;case"right":n="rotate-90";break;case"down":n="rotate-180";break;default:n=""}return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`${t} transform ${n}`,children:a.jsx("path",{d:"M12 2L2 12h7v10h6V12h7L12 2z"})})},Km=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:a.jsx("path",{d:"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5ZM19 19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V18H19V19Z"})}),iN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:a.jsx("path",{d:"M4.82397 12L12 19.176L19.176 12L12 4.82397L4.82397 12ZM2.55673 10.4433C1.69677 11.3032 1.69677 12.6968 2.55673 13.5567L10.4433 21.4433C11.3032 22.3032 12.6968 22.3032 13.5567 21.4433L21.4433 13.5567C22.3032 12.6968 22.3032 11.3032 21.4433 10.4433L13.5567 2.55673C12.6968 1.69677 11.3032 1.69677 10.4433 2.55673L2.55673 10.4433Z"})}),DI=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 9V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"}),a.jsx("path",{d:"M2 9h20v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9Z"}),a.jsx("circle",{cx:"8",cy:"15",r:"2"}),a.jsx("circle",{cx:"16",cy:"15",r:"2"}),a.jsx("path",{d:"M12 12h.01"}),a.jsx("path",{d:"M12 18h.01"})]}),Gh=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 14v-4"}),a.jsx("path",{d:"M7 17v-10"}),a.jsx("path",{d:"M11 20v-16"}),a.jsx("path",{d:"M15 17v-10"}),a.jsx("path",{d:"M19 14v-4"})]}),$o=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"7",r:"2"}),a.jsx("path",{d:"M12 9v4l-3 3-2-2"}),a.jsx("path",{d:"M12 13l3 3 2-2"}),a.jsx("path",{d:"M5 21l3-3"}),a.jsx("path",{d:"M19 21l-3-3"}),a.jsx("path",{d:"M9 14l-4-4"}),a.jsx("path",{d:"M15 14l4-4"})]}),Jx=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("path",{d:"M12 17h.01"})]}),eb=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})}),fa=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),a.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),a.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),a.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),sN=w.createContext(void 0),rr=()=>{const t=w.useContext(sN);if(!t)throw new Error("useGameUI must be used within UIProvider");return t},PI=({toast:t})=>t?a.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"pointer-events-auto w-[90%] max-w-[320px] animate-zoom-in transition-all duration-200",children:a.jsxs("div",{className:`bg-[#121212]/95 backdrop-blur-xl border-2 rounded-2xl p-6 shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col items-center gap-4 text-center relative overflow-hidden ${t.type==="success"?"border-[#1ed760] shadow-[#1ed760]/20":t.type==="error"?"border-red-500 shadow-red-500/20":"border-blue-500 shadow-blue-500/20"}`,children:[a.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${t.type==="success"?"bg-[#1ed760]":t.type==="error"?"bg-red-500":"bg-blue-500"}`}),a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center shrink-0 border-4 border-black shadow-inner ${t.type==="success"?"bg-[#1ed760] text-black":t.type==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:t.type==="success"?a.jsx(ud,{className:"w-6 h-6"}):t.type==="error"?a.jsx(Ym,{className:"w-6 h-6"}):a.jsx("span",{className:"font-black text-2xl",children:"i"})}),a.jsxs("div",{children:[a.jsx("div",{className:`text-[10px] font-black uppercase tracking-[0.2em] mb-1 ${t.type==="success"?"text-[#1ed760]":t.type==="error"?"text-red-500":"text-blue-500"}`,children:t.type==="success"?"BAARILI":t.type==="error"?"HATA":"BLG"}),a.jsx("div",{className:"text-white text-sm font-bold leading-snug",children:t.message})]})]})},t.id)}):null,UI=({data:t,onClose:e})=>!t||!t.isOpen?null:a.jsx("div",{className:"fixed inset-0 z-[600] flex items-center justify-center pointer-events-none transition-all duration-300 ease-out",children:a.jsxs("div",{className:"pointer-events-auto bg-[#121212]/95 backdrop-blur-xl border-2 border-yellow-500 shadow-[0_0_50px_rgba(234,179,8,0.4)] rounded-2xl p-6 flex flex-col items-center gap-4 min-w-[280px] max-w-[320px] text-center shadow-2xl relative overflow-hidden animate-zoom-in",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-yellow-500 animate-[pulse_2s_infinite]"}),a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center shrink-0 shadow-inner border-4 border-[#000] bg-yellow-500",children:a.jsx("span",{className:"text-3xl font-black text-black",children:"?"})}),a.jsxs("div",{className:"mb-2",children:[a.jsx("h4",{className:"text-sm font-black tracking-[0.2em] uppercase mb-2 text-yellow-500",children:t.title}),a.jsx("p",{className:"text-white font-bold text-sm leading-snug",children:t.message})]}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:e,className:"flex-1 py-3 bg-transparent border border-white/20 text-neutral-400 font-bold rounded-xl hover:bg-white/10 transition-colors uppercase text-[10px] tracking-widest",children:"PTAL"}),a.jsx("button",{onClick:()=>{t.onConfirm(),e()},className:"flex-1 py-3 bg-yellow-500 text-black font-black rounded-xl hover:scale-[1.02] active:scale-95 transition-all shadow-[0_0_20px_rgba(234,179,8,0.3)] uppercase text-[10px] tracking-widest",children:"ONAYLA"})]})]})}),zI=({children:t})=>{const[e,n]=w.useState(null),[i,s]=w.useState(null),r=w.useRef(0),l=w.useRef(null),o=w.useCallback((h,c)=>{l.current&&clearTimeout(l.current);const d=r.current++;n({id:d,message:h,type:c}),l.current=setTimeout(()=>{n(null)},2500)},[]),u=w.useCallback((h,c,d)=>{s({title:h,message:c,onConfirm:d,isOpen:!0})},[]),f=w.useCallback(()=>{s(h=>h?{...h,isOpen:!1}:null)},[]);return a.jsxs(sN.Provider,{value:{showToast:o,showConfirm:u,closeConfirm:f},children:[t,a.jsx(PI,{toast:e}),a.jsx(UI,{data:i,onClose:f})]})},qo=({children:t,className:e=""})=>a.jsx("div",{className:`flex-1 flex flex-col overflow-hidden w-full h-full relative ${e}`,children:t}),BI=({activeTab:t,setTab:e})=>{const n=[{id:"hub",label:"PROFL",Icon:kI,activeBg:"bg-yellow-500",activeShadow:"shadow-[0_0_20px_rgba(234,179,8,0.6)]"},{id:"arcade",label:"ARCADE",Icon:nN,activeBg:"bg-purple-600",activeShadow:"shadow-[0_0_20px_rgba(147,51,234,0.6)]"},{id:"online",label:"ONLINE",Icon:Vm,activeBg:"bg-blue-600",activeShadow:"shadow-[0_0_20px_rgba(37,99,235,0.6)]"},{id:"nightlife",label:"CASINO",Icon:jI,activeBg:"bg-[#1ed760]",activeShadow:"shadow-[0_0_20px_rgba(30,215,96,0.6)]"},{id:"social",label:"SOSYAL",Icon:Ia,activeBg:"bg-pink-600",activeShadow:"shadow-[0_0_20px_rgba(219,39,119,0.6)]"}],i=s=>{Y(),e(s)};return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[100] flex justify-center pointer-events-none pb-[env(safe-area-inset-bottom)]",children:a.jsx("div",{className:"pointer-events-auto bg-[#141414]/90 backdrop-blur-[2px] border border-white/5 rounded-full shadow-[0_5px_20px_rgba(0,0,0,0.8)] flex justify-between items-center px-4 py-2 mb-6 w-full max-w-md mx-2 transition-all duration-300 ring-1 ring-white/5",children:n.map(s=>{const r=t===s.id;return a.jsxs("button",{onClick:()=>i(s.id),className:"flex flex-col items-center justify-center flex-1 relative min-w-[3rem]",children:[a.jsx("div",{className:`p-2.5 rounded-full transition-all duration-300 ease-out ${r?`${s.activeBg} text-white -translate-y-3 scale-110 ${s.activeShadow}`:"bg-transparent text-neutral-500 hover:text-neutral-300"}`,children:a.jsx(s.Icon,{className:"w-5 h-5"})}),a.jsx("span",{className:`text-[8px] font-black tracking-wider transition-all duration-300 absolute -bottom-1 whitespace-nowrap ${r?"text-white opacity-100 translate-y-0":"text-neutral-600 opacity-0 translate-y-2"}`,children:s.label})]},s.id)})})})},Xl=({appearance:t,gender:e="male",className:n,size:i=300})=>{const s=t||{headIndex:0,skinColor:"#f1c27d",shirtColor:"#333333",pantsColor:"#1a1a1a",shoesColor:"#ffffff",clothingStyle:0,pantsStyle:0,hatIndex:0,chainIndex:0,shoeStyle:0},{headIndex:r,skinColor:l,shirtColor:o,pantsColor:u,shoesColor:f,clothingStyle:h,pantsStyle:c,hatIndex:d=0,chainIndex:p=0,shoeStyle:x=0}=s,v=typeof h=="number"?h:0,b=typeof c=="number"?c:0,m=typeof x=="number"?x:0,g=kt[r]||kt[0],y=w.useMemo(()=>"grad-"+Math.random().toString(36).substr(2,9),[]),E=-110+(S=>S===1?10:S===5?8:0)(r);return a.jsx("div",{className:`relative flex flex-col items-center justify-end ${n}`,style:{height:i,width:i*.8,filter:"drop-shadow(0px 10px 15px rgba(0,0,0,0.6))"},children:a.jsxs("svg",{viewBox:"0 0 200 400",className:"w-full h-full",preserveAspectRatio:"xMidYMax meet",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:`skin-${y}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:l,style:{filter:"brightness(0.9)"}}),a.jsx("stop",{offset:"40%",stopColor:l,style:{filter:"brightness(1.1)"}}),a.jsx("stop",{offset:"100%",stopColor:l,style:{filter:"brightness(0.8)"}})]}),a.jsxs("linearGradient",{id:`gold-${y}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FFD700"}),a.jsx("stop",{offset:"50%",stopColor:"#FDB931"}),a.jsx("stop",{offset:"100%",stopColor:"#996515"})]}),a.jsxs("linearGradient",{id:`silver-${y}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#fff"}),a.jsx("stop",{offset:"50%",stopColor:"#e0e0e0"}),a.jsx("stop",{offset:"100%",stopColor:"#757575"})]}),a.jsxs("filter",{id:`lighting-${y}`,children:[a.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1.5",result:"blur"}),a.jsx("feSpecularLighting",{in:"blur",surfaceScale:"3",specularConstant:".5",specularExponent:"15",lightingColor:"#ffffff",result:"specOut",children:a.jsx("fePointLight",{x:"-5000",y:"-10000",z:"20000"})}),a.jsx("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.jsx("feComposite",{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"0.8",k4:"0"})]})]}),a.jsx("ellipse",{cx:"100",cy:"380",rx:"60",ry:"10",fill:"black",opacity:"0.5",filter:"blur(4px)"}),a.jsx("g",{transform:"translate(100, 390) scale(0.75)",children:a.jsxs("g",{className:"animate-breathe",children:[a.jsxs("g",{transform:"translate(0, -140)",children:[b===0&&a.jsxs("g",{children:[a.jsx("path",{d:"M -38 0 L 0 0 L -5 35 L -22 135 L -48 135 L -38 0 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M 38 0 L 0 0 L 5 35 L 22 135 L 48 135 L 38 0 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -5 30 L 5 30 L 0 40 Z",fill:u}),a.jsx("path",{d:"M -35 45 L -10 50",stroke:"black",strokeOpacity:"0.2",fill:"none"}),a.jsx("path",{d:"M 35 45 L 10 50",stroke:"black",strokeOpacity:"0.2",fill:"none"})]}),b===1&&a.jsxs("g",{children:[a.jsx("path",{d:"M -42 0 L 0 0 L -8 40 L -18 125 Q -30 140 -50 125 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M 42 0 L 0 0 L 8 40 L 18 125 Q 30 140 50 125 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -8 35 Q 0 50 8 35",fill:u}),a.jsx("rect",{x:"-48",y:"123",width:"28",height:"14",rx:"3",fill:u,stroke:"black",strokeWidth:"0.5"}),a.jsx("rect",{x:"20",y:"123",width:"28",height:"14",rx:"3",fill:u,stroke:"black",strokeWidth:"0.5"}),a.jsx("path",{d:"M -4 0 L -4 25",stroke:"white",strokeWidth:"2"}),a.jsx("path",{d:"M 4 0 L 4 25",stroke:"white",strokeWidth:"2"})]}),b===2&&a.jsxs("g",{children:[a.jsx("path",{d:"M -45 0 L 0 0 L -8 45 L -25 130 L -55 130 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M 45 0 L 0 0 L 8 45 L 25 130 L 55 130 Z",fill:u,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -8 40 Q 0 55 8 40",fill:u}),a.jsx("rect",{x:"-58",y:"45",width:"16",height:"40",rx:"3",fill:u,stroke:"black",strokeWidth:"0.5",filter:"brightness(0.9)"}),a.jsx("rect",{x:"42",y:"45",width:"16",height:"40",rx:"3",fill:u,stroke:"black",strokeWidth:"0.5",filter:"brightness(0.9)"})]}),a.jsxs("g",{transform:"translate(0, 10)",children:[m===0&&a.jsxs("g",{children:[a.jsx("path",{d:"M -50 120 L -20 120 L -20 138 Q -22 145 -50 142 Z",fill:f}),a.jsx("path",{d:"M -52 140 L -18 140 L -18 148 L -52 148 Z",fill:"#eee"}),a.jsx("path",{d:"M -45 122 L -30 122 M -45 126 L -30 126 M -45 130 L -30 130",stroke:"#ccc",strokeWidth:"2"}),a.jsx("path",{d:"M 20 120 L 50 120 L 50 138 Q 22 145 20 142 Z",fill:f}),a.jsx("path",{d:"M 18 140 L 52 140 L 52 148 L 18 148 Z",fill:"#eee"}),a.jsx("path",{d:"M 30 122 L 45 122 M 30 126 L 45 126 M 30 130 L 45 130",stroke:"#ccc",strokeWidth:"2"})]}),m===1&&a.jsxs("g",{children:[a.jsx("path",{d:"M -52 115 L -18 115 L -16 145 L -54 145 Z",fill:f,stroke:"black",strokeWidth:"0.5"}),a.jsx("path",{d:"M -55 145 L -15 145 L -15 152 L -55 152 Z",fill:"#333"}),a.jsx("path",{d:"M 18 115 L 52 115 L 54 145 L 16 145 Z",fill:f,stroke:"black",strokeWidth:"0.5"}),a.jsx("path",{d:"M 15 145 L 55 145 L 55 152 L 15 152 Z",fill:"#333"})]}),m===2&&a.jsxs("g",{children:[a.jsx("path",{d:"M -48 125 L -20 125 L -18 142 L -50 142 Z",fill:f,filter:"brightness(1.3)"}),a.jsx("rect",{x:"-42",y:"125",width:"14",height:"5",fill:"#ffd700"}),a.jsx("path",{d:"M 20 125 L 48 125 L 50 142 L 18 142 Z",fill:f,filter:"brightness(1.3)"}),a.jsx("rect",{x:"28",y:"125",width:"14",height:"5",fill:"#ffd700"})]})]})]}),a.jsxs("g",{transform:"translate(0, -250)",children:[v===0&&a.jsxs("g",{children:[a.jsx("path",{d:"M -48 0 L 48 0 L 42 125 L -42 125 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -20 0 Q 0 20 20 0",stroke:"black",strokeOpacity:"0.2",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M -30 30 Q -20 50 -35 70",stroke:"black",strokeOpacity:"0.1",fill:"none"}),a.jsx("path",{d:"M 30 30 Q 20 50 35 70",stroke:"black",strokeOpacity:"0.1",fill:"none"})]}),v===1&&a.jsxs("g",{children:[a.jsx("path",{d:"M -28 -12 L 28 -12 L 40 10 L -40 10 Z",fill:o,filter:"brightness(0.8)"}),a.jsx("path",{d:"M -52 0 L 52 0 L 46 122 L -46 122 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -28 75 L 28 75 L 32 105 L -32 105 Z",fill:"black",fillOpacity:"0.2"}),a.jsx("path",{d:"M -12 5 Q -15 35 -12 50",stroke:"#ddd",strokeWidth:"2.5",fill:"none"}),a.jsx("path",{d:"M 12 5 Q 15 35 12 50",stroke:"#ddd",strokeWidth:"2.5",fill:"none"})]}),v===2&&a.jsxs("g",{children:[a.jsx("path",{d:"M -32 0 L 32 0 L 30 115 L -30 115 Z",fill:"#eee"}),a.jsx("path",{d:"M -55 -5 L -18 -5 L -20 120 L -48 115 Q -60 50 -55 -5 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M 55 -5 L 18 -5 L 20 120 L 48 115 Q 60 50 55 -5 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("line",{x1:"-55",y1:"30",x2:"-18",y2:"35",stroke:"black",strokeOpacity:"0.2",strokeWidth:"2"}),a.jsx("line",{x1:"-53",y1:"70",x2:"-19",y2:"75",stroke:"black",strokeOpacity:"0.2",strokeWidth:"2"}),a.jsx("line",{x1:"55",y1:"30",x2:"18",y2:"35",stroke:"black",strokeOpacity:"0.2",strokeWidth:"2"}),a.jsx("line",{x1:"53",y1:"70",x2:"19",y2:"75",stroke:"black",strokeOpacity:"0.2",strokeWidth:"2"})]}),v===3&&a.jsxs("g",{children:[a.jsx("path",{d:"M -45 0 L 45 0 L 40 125 L -40 125 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("rect",{x:"-3",y:"0",width:"6",height:"125",fill:"black",fillOpacity:"0.1"}),a.jsx("circle",{cx:"0",cy:"20",r:"2",fill:"white"}),a.jsx("circle",{cx:"0",cy:"50",r:"2",fill:"white"}),a.jsx("circle",{cx:"0",cy:"80",r:"2",fill:"white"}),a.jsx("path",{d:"M -22 0 L -10 18 L 0 8 L 10 18 L 22 0",fill:o,stroke:"black",strokeWidth:"0.5",filter:"brightness(1.2)"})]}),v===4&&a.jsxs("g",{children:[a.jsx("path",{d:"M -48 0 L -42 20 L -30 0 Z",fill:`url(#skin-${y})`}),a.jsx("path",{d:"M 48 0 L 42 20 L 30 0 Z",fill:`url(#skin-${y})`}),a.jsx("path",{d:"M -45 0 L 45 0 L 42 125 L -42 125 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -22 0 Q 0 25 22 0",stroke:"white",strokeWidth:"3",fill:"none"}),a.jsx("path",{d:"M -45 0 L -45 35",stroke:"white",strokeWidth:"3"}),a.jsx("path",{d:"M 45 0 L 45 35",stroke:"white",strokeWidth:"3"}),a.jsx("text",{x:"0",y:"80",textAnchor:"middle",fontSize:"48",fontWeight:"900",fill:"white",fontFamily:"Arial",opacity:"0.9",style:{filter:"drop-shadow(2px 2px 0px rgba(0,0,0,0.3))"},children:"23"})]}),v===5&&a.jsxs("g",{children:[a.jsx("path",{d:"M -22 0 L 22 0 L 22 115 L -22 115 Z",fill:"#1a1a1a"}),a.jsx("path",{d:"M -55 -5 L -12 -5 L -18 110 L -50 105 Q -58 50 -55 -5 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M 55 -5 L 12 -5 L 18 110 L 50 105 Q 58 50 55 -5 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{d:"M -38 0 L -18 25 L -48 30 Z",fill:o,stroke:"#111",strokeWidth:"1",filter:"brightness(1.3)"}),a.jsx("path",{d:"M 38 0 L 18 25 L 48 30 Z",fill:o,stroke:"#111",strokeWidth:"1",filter:"brightness(1.3)"}),a.jsx("line",{x1:"15",y1:"25",x2:"-15",y2:"110",stroke:"#ccc",strokeWidth:"2.5",strokeDasharray:"2,1"}),a.jsx("circle",{cx:"15",cy:"25",r:"3",fill:"#fff"})]})]}),a.jsx("g",{transform:"translate(0, -245)",children:v===4?a.jsxs("g",{children:[a.jsx("path",{transform:"rotate(5, -45, 10)",d:"M -45 5 L -65 5 L -60 95 L -40 95 Z",fill:`url(#skin-${y})`,filter:`url(#lighting-${y})`}),a.jsx("path",{transform:"rotate(5, -45, 10)",d:"M -60 95 L -40 95 L -42 115 L -58 115 Z",fill:`url(#skin-${y})`}),a.jsx("path",{transform:"rotate(-5, 45, 10)",d:"M 45 5 L 65 5 L 60 95 L 40 95 Z",fill:`url(#skin-${y})`,filter:`url(#lighting-${y})`}),a.jsx("path",{transform:"rotate(-5, 45, 10)",d:"M 60 95 L 40 95 L 42 115 L 58 115 Z",fill:`url(#skin-${y})`})]}):v===5||v===2?a.jsxs("g",{children:[a.jsx("path",{transform:"rotate(8, -45, 10)",d:"M -48 -5 L -75 0 L -70 95 L -42 90 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{transform:"rotate(-8, 45, 10)",d:"M 48 -5 L 75 0 L 70 95 L 42 90 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("rect",{x:"-70",y:"85",width:"28",height:"12",transform:"rotate(8, -45, 10)",fill:`url(#skin-${y})`}),a.jsx("rect",{x:"42",y:"85",width:"28",height:"12",transform:"rotate(-8, 45, 10)",fill:`url(#skin-${y})`})]}):a.jsxs("g",{children:[a.jsx("path",{transform:"rotate(5, -45, 10)",d:"M -48 0 L -68 0 L -62 90 L -42 90 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{transform:"rotate(5, -45, 10)",d:"M -62 90 L -42 90 L -44 110 L -60 110 Z",fill:`url(#skin-${y})`}),a.jsx("path",{transform:"rotate(-5, 45, 10)",d:"M 48 0 L 68 0 L 62 90 L 42 90 Z",fill:o,filter:`url(#lighting-${y})`}),a.jsx("path",{transform:"rotate(-5, 45, 10)",d:"M 62 90 L 42 90 L 44 110 L 60 110 Z",fill:`url(#skin-${y})`})]})}),a.jsxs("g",{transform:"translate(0, -250)",children:[p===1&&a.jsx("path",{d:"M -18 0 Q 0 45 18 0",stroke:`url(#gold-${y})`,strokeWidth:"3",fill:"none",filter:"drop-shadow(0 1px 1px black)"}),p===2&&a.jsx("path",{d:"M -22 0 Q 0 55 22 0",stroke:`url(#gold-${y})`,strokeWidth:"7",fill:"none",filter:"drop-shadow(0 2px 2px black)"}),p===3&&a.jsxs("g",{children:[a.jsx("path",{d:"M -24 0 Q 0 65 24 0",stroke:`url(#silver-${y})`,strokeWidth:"6",fill:"none",filter:"drop-shadow(0 2px 2px black)"}),a.jsx("circle",{cx:"0",cy:"35",r:"12",fill:"#b0e0e6",stroke:"#fff",strokeWidth:"1",filter:"url(#lighting-${uid})"})]}),p===4&&a.jsx("path",{d:"M -20 0 Q 0 50 20 0",stroke:"white",strokeWidth:"5",strokeDasharray:"5,2",fill:"none",filter:"drop-shadow(0 1px 1px black)"}),p===5&&a.jsx("path",{d:"M -22 0 Q 0 60 22 0",stroke:"#8b4513",strokeWidth:"5",fill:"none",filter:"drop-shadow(0 1px 1px black)"})]}),a.jsxs("g",{transform:"translate(0, -250)",children:[a.jsx("rect",{x:"-14",y:"-15",width:"28",height:"20",fill:`url(#skin-${y})`,filter:"brightness(0.8)"}),a.jsx("ellipse",{cx:"0",cy:"-5",rx:"14",ry:"5",fill:"black",opacity:"0.4"}),a.jsx("image",{href:g,x:"-55",y:E,width:"110",height:"110",preserveAspectRatio:"xMidYMax meet",style:{filter:"drop-shadow(0px 5px 5px rgba(0,0,0,0.4))"}}),d>0&&a.jsxs("g",{transform:"translate(0, -112) scale(1.65)",children:[d===1&&a.jsxs("g",{children:[a.jsx("path",{d:"M -32 8 Q 0 -35 32 8",fill:"#DC2626"})," ",a.jsx("path",{d:"M -33 8 L 33 8 L 33 20 L -33 20 Z",fill:"#991B1B"})," "]}),d===2&&a.jsxs("g",{transform:"translate(0, 5)",children:[a.jsx("path",{d:"M -25 -10 L 25 -10 L 30 10 L -30 10 Z",fill:"#eee"}),a.jsx("path",{d:"M -40 10 L 40 10 L 32 0 L -32 0 Z",fill:"#ccc"})]}),d===3&&a.jsxs("g",{transform:"translate(18, 15) scale(0.6)",children:[a.jsx("rect",{x:"0",y:"0",width:"20",height:"8",rx:"2",fill:"#ec4899",transform:"rotate(-15)"}),a.jsx("circle",{cx:"2",cy:"4",r:"3",fill:"#db2777",transform:"rotate(-15)"})]})]})]})]})})]})})},tb=({onCreate:t,isEditing:e=!1,initialData:n,ownedUpgrades:i})=>{const[s,r]=w.useState(e?2:1),[l,o]=w.useState(0),[u,f]=w.useState((n==null?void 0:n.name)||""),[h,c]=w.useState((n==null?void 0:n.gender)||"male"),[d,p]=w.useState((n==null?void 0:n.appearance)||{headIndex:0,skinColor:"#f1c27d",shirtColor:"#333333",pantsColor:"#1a1a1a",shoesColor:"#ffffff",clothingStyle:0,pantsStyle:0,hatIndex:0,chainIndex:0,shoeStyle:0}),[x,v]=w.useState(n==null?void 0:n.favoriteSong),[b,m]=w.useState(""),[g,y]=w.useState([]),[_,E]=w.useState(!1),S=R=>R<2?!1:!i||!i[`head_${R}`],N=R=>R<2?!1:!i||!i[`clothing_${R}`],A=R=>R<2?!1:!i||!i[`hat_${R}`],T=R=>R<2?!1:!i||!i[`chain_${R}`],k=(R,I,M)=>{Y();const z=(I+1)%M;p({...d,[R]:z})},C=(R,I,M)=>{Y();const z=(I-1+M)%M;p({...d,[R]:z})},L=()=>{Y(),r(R=>R<3?R+1:R)},D=()=>{Y(),r(R=>R>1?R-1:R)},B=async()=>{if(!b.trim())return;Y(),E(!0);const R=await ca(b);y(R),E(!1)},$=()=>S(d.headIndex)||N(d.clothingStyle)||A(d.hatIndex)||T(d.chainIndex),O=()=>{if($()){ct(),alert("Seili baz eyalar kilitli! Stilden satn almalsn.");return}Y(),u.length>0&&t(u,h,d,x)},H=({current:R,options:I,onSelect:M})=>a.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center max-h-24 overflow-y-auto custom-scrollbar p-1",children:I.map(z=>a.jsx("button",{onClick:()=>{Y(),M(z)},className:`w-6 h-6 rounded-full transition-all border border-white/20 shadow-sm ${R===z?"scale-110 ring-2 ring-white z-10":"opacity-80 hover:opacity-100 hover:scale-105"}`,style:{backgroundColor:z}},z))}),Q=({label:R,value:I,options:M,onNext:z,onPrev:V,isLocked:Z})=>a.jsxs("div",{className:`bg-[#111] p-2 rounded-lg border transition-colors ${Z?"border-red-500/50":"border-white/5"}`,children:[a.jsx("label",{className:`text-[8px] font-bold uppercase mb-1 block text-center tracking-wider ${Z?"text-red-500":"text-neutral-500"}`,children:Z?"KLTL ":R}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:V,className:"w-6 h-6 bg-white/5 rounded flex items-center justify-center text-white text-xs hover:bg-white/10 active:scale-95",children:""}),a.jsx("span",{className:`text-[9px] font-bold uppercase truncate px-2 ${Z?"text-red-500":"text-white"}`,children:M[I]}),a.jsx("button",{onClick:z,className:"w-6 h-6 bg-white/5 rounded flex items-center justify-center text-white text-xs hover:bg-white/10 active:scale-95",children:""})]})]}),P=({label:R,value:I,max:M,onChange:z,options:V})=>a.jsxs("div",{className:"bg-[#111] p-2 rounded-lg border border-white/5",children:[a.jsx("label",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-1 block text-center tracking-wider",children:R}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>{Y(),z(Math.max(0,I-1))},className:"w-6 h-6 bg-white/5 rounded flex items-center justify-center text-white text-xs hover:bg-white/10 active:scale-95",children:""}),a.jsx("span",{className:"text-[9px] font-bold text-white uppercase truncate px-2",children:V?V[I]:I+1}),a.jsx("button",{onClick:()=>{Y(),z(Math.min(M,I+1))},className:"w-6 h-6 bg-white/5 rounded flex items-center justify-center text-white text-xs hover:bg-white/10 active:scale-95",children:""})]})]});return a.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#050505] flex flex-col items-center p-0 font-sans overflow-hidden",children:[a.jsx("div",{className:"pt-safe-top pt-4 w-full flex justify-center shrink-0 z-10 bg-gradient-to-b from-[#050505] to-transparent pb-4",children:a.jsx("div",{className:"flex gap-1.5",children:[1,2,3].map(R=>a.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${R===s?"w-6 bg-white":"w-2 bg-white/20"}`},R))})}),a.jsxs("div",{className:"flex-1 w-full max-w-sm flex flex-col relative overflow-hidden",children:[s===1&&a.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-8 animate-fade-in space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-black text-white italic tracking-tighter mb-1",children:"KMLK"}),a.jsx("p",{className:"text-neutral-500 text-xs",children:"Sahne adn ne olacak?"})]}),a.jsx("input",{type:"text",value:u,onChange:R=>f(R.target.value),className:"w-full bg-transparent border-b-2 border-white/20 text-white text-center text-lg font-bold placeholder-neutral-600 focus:border-white outline-none py-2 uppercase tracking-widest transition-all",placeholder:"Karakter Adn"}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:()=>{Y(),c("male"),p(R=>({...R,headIndex:0}))},className:`flex-1 py-3 rounded-xl border font-bold text-xs uppercase tracking-widest ${h==="male"?"bg-white text-black border-white":"bg-transparent text-neutral-500 border-white/10"}`,children:"ERKEK"}),a.jsx("button",{onClick:()=>{Y(),c("female"),p(R=>({...R,headIndex:1}))},className:`flex-1 py-3 rounded-xl border font-bold text-xs uppercase tracking-widest ${h==="female"?"bg-white text-black border-white":"bg-transparent text-neutral-500 border-white/10"}`,children:"KADIN"})]})]}),s===2&&a.jsxs("div",{className:"flex-1 flex flex-col h-full animate-fade-in relative",children:[a.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[a.jsx("div",{className:"absolute top-[-10%] left-1/2 -translate-x-1/2 w-[120%] h-[80%] bg-gradient-to-b from-white/15 via-white/5 to-transparent blur-xl z-0",style:{clipPath:"polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%)"}}),a.jsx("div",{className:"absolute top-[-50px] left-1/2 -translate-x-1/2 w-40 h-40 bg-white/20 rounded-full blur-[50px] z-0"}),a.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] z-0 animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-[200%] h-[300px] bg-[radial-gradient(circle,rgba(255,255,255,0.1)_0%,transparent_60%)] blur-2xl animate-[smoke-drift_10s_ease-in-out_infinite_alternate] opacity-30 z-0"}),a.jsx("div",{className:"absolute bottom-20 right-[-50%] w-[200%] h-[250px] bg-[radial-gradient(circle,rgba(255,255,255,0.08)_0%,transparent_60%)] blur-3xl animate-[smoke-drift_15s_ease-in-out_infinite_alternate-reverse] opacity-30 z-0"}),a.jsx("div",{className:"absolute bottom-[20%] left-1/2 -translate-x-1/2 w-[200px] h-[40px] bg-white/10 blur-[20px] rounded-[100%] z-0 scale-150"})]}),a.jsxs("div",{className:"flex-shrink-0 relative flex items-end justify-center pb-2 h-[35vh] min-h-[240px] overflow-visible z-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent z-20 pointer-events-none"}),a.jsx("div",{className:"relative z-10",children:a.jsx(Xl,{appearance:d,gender:h,size:300,className:`${$()?"grayscale brightness-75":""} transition-all`})}),$()&&a.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 flex flex-col items-center",children:[a.jsx("div",{className:"text-4xl drop-shadow-lg",children:""}),a.jsx("div",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-1 rounded mt-2 shadow-lg",children:"EYA KLTL"})]})]}),a.jsxs("div",{className:"flex-1 bg-gradient-to-t from-[#050505] via-[#050505]/90 to-transparent p-4 flex flex-col gap-3 z-20 min-h-0 relative",children:[a.jsx("div",{className:"flex bg-[#1a1a1a] p-1 rounded-xl shrink-0 border border-white/5",children:["VCUT","STL","AKSESUAR"].map((R,I)=>a.jsx("button",{onClick:()=>{Y(),o(I)},className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-wider transition-all ${l===I?"bg-white text-black shadow":"text-neutral-500"}`,children:R},I))}),a.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 px-1 custom-scrollbar pb-2",children:[l===0&&a.jsxs(a.Fragment,{children:[a.jsx(Q,{label:"KAFA TP",value:d.headIndex,options:kt.map((R,I)=>`Tip ${I+1}`),onNext:()=>k("headIndex",d.headIndex,kt.length),onPrev:()=>C("headIndex",d.headIndex,kt.length),isLocked:S(d.headIndex)}),a.jsxs("div",{className:"bg-[#111] p-2 rounded-lg border border-white/5",children:[a.jsx("label",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 block text-center",children:"TEN RENG"}),a.jsx(H,{current:d.skinColor,options:hS,onSelect:R=>p({...d,skinColor:R})})]})]}),l===1&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(Q,{label:"ST TARZI",value:d.clothingStyle,options:gl,onNext:()=>k("clothingStyle",d.clothingStyle,gl.length),onPrev:()=>C("clothingStyle",d.clothingStyle,gl.length),isLocked:N(d.clothingStyle)}),a.jsx(P,{label:"ALT TARZI",value:d.pantsStyle||0,max:Sg.length-1,options:Sg,onChange:R=>p({...d,pantsStyle:R})})]}),a.jsxs("div",{className:"bg-[#111] p-2 rounded-lg border border-white/5",children:[a.jsx("label",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 block text-center",children:"ST RENG"}),a.jsx(H,{current:d.shirtColor,options:pS,onSelect:R=>p({...d,shirtColor:R})})]}),a.jsxs("div",{className:"bg-[#111] p-2 rounded-lg border border-white/5",children:[a.jsx("label",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 block text-center",children:"ALT RENG"}),a.jsx(H,{current:d.pantsColor,options:mS,onSelect:R=>p({...d,pantsColor:R})})]})]}),l===2&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(Q,{label:"APKA",value:d.hatIndex,options:pl,onNext:()=>k("hatIndex",d.hatIndex,pl.length),onPrev:()=>C("hatIndex",d.hatIndex,pl.length),isLocked:A(d.hatIndex)}),a.jsx(P,{label:"AYAKKABI",value:d.shoeStyle||0,max:Eg.length-1,options:Eg,onChange:R=>p({...d,shoeStyle:R})})]}),a.jsxs("div",{className:"bg-[#111] p-2 rounded-lg border border-white/5",children:[a.jsx("label",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 block text-center",children:"AYAKKABI RENG"}),a.jsx(H,{current:d.shoesColor,options:gS,onSelect:R=>p({...d,shoesColor:R})})]}),a.jsx(Q,{label:"ZNCR",value:d.chainIndex,options:ml,onNext:()=>k("chainIndex",d.chainIndex,ml.length),onPrev:()=>C("chainIndex",d.chainIndex,ml.length),isLocked:T(d.chainIndex)})]})]})]})]}),s===3&&a.jsxs("div",{className:"flex-1 flex flex-col p-6 animate-fade-in overflow-hidden",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-xl font-black text-white italic tracking-tighter mb-1",children:"IKI PARASI"}),a.jsx("p",{className:"text-neutral-500 text-xs",children:"Favori arkn hangisi?"})]}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("input",{type:"text",value:b,onChange:R=>m(R.target.value),placeholder:"ark veya Sanat...",className:"flex-1 bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3 text-white text-xs font-bold focus:border-white outline-none"}),a.jsx("button",{onClick:B,className:"bg-white text-black font-bold px-4 rounded-xl text-xs uppercase hover:bg-neutral-200",children:_?"...":"ARA"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-4 custom-scrollbar",children:g.map(R=>a.jsxs("button",{onClick:()=>{Y(),v(R)},className:`w-full flex items-center gap-3 p-2 rounded-xl border text-left transition-all ${(x==null?void 0:x.trackId)===R.trackId?"bg-white text-black border-white":"bg-[#111] border-white/5 text-white hover:bg-[#222]"}`,children:[a.jsx("img",{src:R.artworkUrl100,className:"w-10 h-10 rounded-lg bg-black object-cover"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-bold text-xs truncate leading-tight",children:R.trackName}),a.jsx("div",{className:"text-[10px] opacity-70 truncate",children:R.artistName})]})]},R.trackId))})]})]}),a.jsxs("div",{className:"w-full max-w-sm px-6 pb-8 pt-4 bg-gradient-to-t from-[#050505] via-[#050505] to-transparent z-30 shrink-0",children:[a.jsx("button",{onClick:s===3?O:L,disabled:s===1&&u.length===0||s===2&&$(),className:`w-full font-black uppercase tracking-[0.2em] py-4 rounded-xl hover:scale-[1.01] active:scale-95 transition-all text-xs shadow-lg disabled:opacity-50 ${s===2&&$()?"bg-red-600 text-white cursor-not-allowed":"bg-white text-black"}`,children:s===3?e?"KAYDET":"BALA":s===2&&$()?"EYALARI AMALISIN":"DEVAM ET"}),s>1&&!(e&&s===2)&&a.jsx("button",{onClick:D,className:"w-full text-neutral-500 text-[9px] font-bold uppercase tracking-[0.3em] mt-3 hover:text-white pb-2",children:"GER DN"})]}),a.jsx("style",{children:`
        @keyframes smoke-drift {
            0% { transform: translateX(-10%) translateY(0) scale(1); opacity: 0.3; }
            50% { transform: translateX(10%) translateY(-20px) scale(1.1); opacity: 0.5; }
            100% { transform: translateX(-10%) translateY(0) scale(1); opacity: 0.3; }
        }
      `})]})},HI=({onClose:t})=>{const[e,n]=w.useState(0),i=[{icon:a.jsx(Vm,{className:"w-12 h-12 text-blue-400"}),title:"ONLINE HUB",desc:"Buras oyunun rekabet merkezi. Alt menden 'Online' sekmesine geerek gerek oyuncularla eleebilirsin.",tip:"Online oyunlar oynamak iin nce biraz seviye atlamalsn."},{icon:a.jsx(nN,{className:"w-12 h-12 text-purple-400"}),title:"ARCADE SALONU",desc:"Beklemek istemiyor musun? 'Arcade' blmndeki solo oyunlar oyna. Hem kendini gelitir hem de Fan (XP) ve Nakit kazan.",tip:"Reflex veya Hexagon gibi oyunlar hzl geliim iin idealdir."},{icon:a.jsx(Ot,{className:"w-12 h-12 text-yellow-500"}),title:"KUPA & LDERLK",desc:"Online ma kazandka 'Respect' (Kupa) puann artar. En ok kupas olan MC, liderlik tablosunun tepesine oturur.",tip:"Kaybedersen kupalarn der, dikkatli ol!"}],s=i[e];return a.jsx("div",{className:"fixed inset-0 z-[300] bg-black/90 backdrop-blur-md flex flex-col items-center justify-center p-6 animate-fade-in font-sans",children:a.jsxs("div",{className:"relative z-10 w-full max-w-sm bg-[#121212] border border-blue-500/30 rounded-[2rem] p-8 shadow-[0_0_50px_rgba(59,130,246,0.15)] flex flex-col items-center text-center",children:[a.jsx("div",{className:"flex gap-1.5 mb-8",children:i.map((r,l)=>a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${l===e?"w-8 bg-blue-500":"w-2 bg-white/20"}`},l))}),a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-900/50 to-black rounded-full flex items-center justify-center mb-6 ring-2 ring-blue-500/50 shadow-lg",children:s.icon}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-4 uppercase",children:s.title}),a.jsx("p",{className:"text-neutral-300 text-sm font-medium leading-relaxed mb-6 min-h-[80px]",children:s.desc}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 p-3 rounded-lg mb-8 w-full",children:[a.jsx("span",{className:"text-blue-400 text-[9px] font-black uppercase tracking-wider block mb-1",children:"PUCU"}),a.jsx("span",{className:"text-neutral-400 text-xs italic",children:s.tip})]}),a.jsx("button",{onClick:()=>{e<i.length-1?n(r=>r+1):t()},className:"w-full bg-blue-600 text-white font-black py-4 rounded-xl hover:bg-blue-500 active:scale-95 transition-all uppercase tracking-[0.2em] text-xs shadow-lg",children:e<i.length-1?"DEVAM ET":"ANLAILDI"})]})})},GI=({player:t,ownedUpgrades:e,onEditCharacter:n,updateStat:i,updateMultipleStats:s,onOpenShop:r})=>{const[l,o]=w.useState(!1),[u,f]=w.useState([]),[h,c]=w.useState(!0),[d,p]=w.useState(!1),[x,v]=w.useState(!1),[b,m]=w.useState(!1),g=w.useRef(null),y=e&&e.verified_badge&&e.verified_badge>0,_=xS(t.monthly_listeners),E=bS(t.monthly_listeners);w.useEffect(()=>{localStorage.getItem("flowify_hub_seen")||m(!0)},[]);const S=()=>{localStorage.setItem("flowify_hub_seen","true"),m(!1)};w.useEffect(()=>{let k=!0;return(async()=>{c(!0);const L=await sI(100);k&&(f(L),c(!1))})(),()=>{k=!1,g.current&&g.current.pause()}},[]);const N=()=>{var k,C;(k=t.favoriteSong)!=null&&k.previewUrl&&(l?((C=g.current)==null||C.pause(),o(!1)):(g.current||(g.current=new Audio(t.favoriteSong.previewUrl),g.current.volume=.5,g.current.onended=()=>o(!1)),g.current.play(),o(!0)))},A=()=>{v(!0),setTimeout(()=>{p(!1),v(!1)},300)},T=u.length>0?u[0]:null;return a.jsxs("div",{className:"h-full bg-[#121212] relative overflow-hidden flex flex-col",children:[b&&a.jsx(HI,{onClose:S}),a.jsxs("div",{className:"relative w-full h-[40vh] min-h-[300px] flex flex-col justify-end overflow-hidden shrink-0",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 5rem)"},children:[a.jsxs("div",{className:"absolute inset-0 z-0 bg-[#222]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-neutral-800 to-[#121212] opacity-50"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center transform translate-y-[10%] scale-110 opacity-70 filter blur-sm",children:a.jsx(Xl,{appearance:t.appearance,gender:t.gender,size:320,className:"w-full h-full object-contain"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#121212] via-[#121212]/60 to-transparent z-10"})]}),a.jsxs("div",{className:"relative z-20 px-6 pb-6 w-full",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[y&&a.jsx("div",{className:"bg-blue-500 rounded-full p-0.5",title:"Dorulanm Sanat",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"white",className:"w-3 h-3",children:a.jsx("path",{d:"M9 12L11 14L15 10",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("span",{className:`text-[9px] sm:text-[10px] font-bold tracking-widest uppercase drop-shadow-md ${y?"text-white":"text-neutral-400"}`,children:y?"Dorulanm Sanat":"Sanat"})]}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-neutral-400"}),a.jsxs("div",{className:"flex items-center gap-1.5 bg-black/40 backdrop-blur-md px-2 py-0.5 rounded-full border border-white/10",children:[a.jsx(Ot,{className:"w-3 h-3 text-yellow-500"}),a.jsx("span",{className:"text-[10px] font-bold text-yellow-100 tracking-wide",children:t.respect.toLocaleString()})]})]}),a.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter leading-tight mb-2 drop-shadow-2xl origin-left select-none transition-transform truncate pb-1 pr-4",children:t.name}),a.jsxs("div",{className:"mb-6 w-full max-w-[240px]",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsxs("div",{className:"text-[10px] font-black text-[#1ed760] uppercase tracking-widest",children:["SEVYE ",Bi(t.monthly_listeners)]}),a.jsx("div",{className:"text-[8px] font-bold text-neutral-500 uppercase",children:"SONRAK SEVYE"})]}),a.jsx("div",{className:"w-full h-1.5 bg-white/10 rounded-full overflow-hidden backdrop-blur-sm border border-white/5",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#1ed760] to-green-400 rounded-full transition-all duration-500 ease-out shadow-[0_0_10px_rgba(30,215,96,0.5)]",style:{width:`${_}%`}})}),a.jsxs("div",{className:"text-[8px] text-neutral-400 font-bold mt-1.5 flex justify-between items-center",children:[a.jsxs("span",{children:["FAN (XP): ",Ag(t.monthly_listeners)]}),a.jsxs("span",{className:"text-white opacity-60",children:["HEDEF: ",Ag(E)]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[t.favoriteSong?a.jsxs("div",{className:"flex-1 bg-[#181818]/90 backdrop-blur-md border border-white/10 rounded-full p-1.5 pr-4 flex items-center gap-3 max-w-[220px] shadow-xl hover:bg-[#222] transition-colors group cursor-pointer h-12",onClick:N,children:[a.jsxs("div",{className:"relative w-9 h-9 shrink-0",children:[a.jsx("img",{src:t.favoriteSong.artworkUrl100,className:`w-full h-full rounded-full object-cover shadow-lg border border-white/10 ${l?"animate-spin-slow":""}`,alt:"Cover"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l?a.jsx("div",{className:"w-2 h-2 bg-[#1ed760] rounded-sm"}):a.jsx("div",{className:"hidden group-hover:block",children:a.jsx(vn,{className:"w-3 h-3 text-white drop-shadow-md"})})})]}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-[8px] text-[#1ed760] font-black uppercase tracking-wider",children:"MAR"}),a.jsx("span",{className:"text-white font-bold text-[10px] truncate leading-tight",children:t.favoriteSong.trackName})]}),a.jsx("span",{className:"text-neutral-400 text-[9px] truncate leading-tight",children:t.favoriteSong.artistName})]})]}):a.jsx("div",{className:"flex-1 text-neutral-500 text-xs italic",children:"Mar seilmedi."}),a.jsx("button",{onClick:n,className:"h-12 bg-transparent border border-white/20 hover:border-white text-white rounded-full px-4 font-bold text-[9px] uppercase tracking-widest transition-all hover:bg-white/10 active:scale-95 flex items-center justify-center shrink-0",children:"DZENLE"})]})]}),a.jsx("div",{className:"absolute top-20 right-6 z-50 flex flex-col items-end gap-2",children:a.jsxs("button",{onClick:()=>{Y(),r("vip")},className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-yellow-800 border border-yellow-500/50 px-3 py-1.5 rounded-full shadow-[0_0_15px_rgba(234,179,8,0.4)] animate-shimmer hover:scale-105 transition-transform bg-[length:200%_auto]",children:[a.jsx(iN,{className:"w-3 h-3 text-white"}),a.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"PREMIUM"}),a.jsx("span",{className:"bg-red-600 text-white text-[8px] font-bold px-1 rounded ml-1",children:"SALE"})]})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 space-y-6 bg-[#121212]",children:[a.jsxs("div",{className:"bg-[#181818] rounded-2xl p-5 border border-white/5 shadow-xl relative z-20",children:[a.jsxs("h2",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Gi,{className:"w-4 h-4 text-white"}),"DSKOGRAF"]}),a.jsx("div",{className:"space-y-3",children:t.discography&&t.discography.length>0?t.discography.map(k=>a.jsx(FI,{song:k},k.id)):a.jsxs("div",{className:"text-center text-neutral-500 text-xs py-6 italic",children:["Henz ark yaynlamadn.",a.jsx("br",{}),a.jsx("span",{className:"text-[#1ed760] font-bold not-italic",children:"Kariyer blmndeki stdyoya git ve ilk hitini yap!"})]})})]}),a.jsxs("div",{className:"bg-[#181818] rounded-2xl p-5 border border-white/5 shadow-xl",children:[a.jsx("h2",{className:"text-sm font-bold text-white mb-4",children:"YETENEKLER"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Wo,{label:"Flow",value:t.flow,color:"bg-blue-500"}),a.jsx(Wo,{label:"Lirik",value:t.lyrics,color:"bg-green-500"}),a.jsx(Wo,{label:"Ritim",value:t.rhythm,color:"bg-yellow-500"}),a.jsx(Wo,{label:"Karizma",value:t.charisma,color:"bg-purple-500"})]})]})]}),a.jsx("button",{onClick:()=>p(!0),className:"fixed bottom-32 right-4 z-[100] w-14 h-14 bg-gradient-to-br from-yellow-400 via-yellow-600 to-yellow-800 rounded-full shadow-[0_0_20px_rgba(234,179,8,0.6)] flex items-center justify-center border-2 border-white/20 animate-[breathe_3s_infinite] hover:scale-110 active:scale-95 transition-transform",children:a.jsx(Ot,{className:"w-7 h-7 text-white drop-shadow-md"})}),d&&a.jsx("div",{className:`fixed inset-0 z-[200] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center transition-opacity duration-300 ${x?"opacity-0":"opacity-100"}`,onClick:A,children:a.jsxs("div",{onClick:k=>k.stopPropagation(),className:`w-full max-w-md h-[85vh] bg-[#121212] rounded-t-3xl sm:rounded-3xl border-t sm:border border-white/10 flex flex-col relative shadow-2xl overflow-hidden transition-transform duration-300 ease-[cubic-bezier(0.19,1,0.22,1)] ${x?"translate-y-full":"translate-y-0 animate-[slideUp_0.4s_cubic-bezier(0.19,1,0.22,1)]"}`,children:[a.jsx("button",{onClick:A,className:"absolute top-4 right-4 z-50 w-8 h-8 bg-white/10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:""}),a.jsxs("div",{className:"bg-gradient-to-b from-yellow-900/40 to-[#121212] pt-12 pb-8 px-6 text-center border-b border-white/5 shrink-0 relative overflow-hidden",children:[a.jsx("div",{className:"text-[10px] font-black text-yellow-500 uppercase tracking-[0.3em] mb-6 animate-pulse",children:"FLOWIFY TOP 100"}),h?a.jsx("div",{className:"text-neutral-500 text-sm animate-pulse",children:"Sralama Ykleniyor..."}):T?a.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[a.jsx("div",{className:"mb-4 drop-shadow-[0_0_15px_rgba(234,179,8,0.5)]",children:a.jsx(Km,{className:"w-20 h-20 text-yellow-400"})}),a.jsx("h2",{className:"text-4xl sm:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-100 via-yellow-400 to-yellow-600 italic tracking-tighter drop-shadow-2xl mb-4 leading-none pr-4",children:T.name}),a.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/50 px-6 py-2 rounded-full flex items-center gap-2 shadow-[0_0_20px_rgba(234,179,8,0.2)]",children:[a.jsx(Ot,{className:"w-5 h-5 text-yellow-400"}),a.jsx("span",{className:"text-yellow-100 font-black text-lg tracking-wide",children:T.respect.toLocaleString()})]})]}):a.jsx("div",{className:"text-neutral-500 text-sm",children:"Henz Sralama Yok"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:u.slice(1).map((k,C)=>{const L=C+2;let D="bg-[#1a1a1a] border-white/5",B="text-white",$="text-neutral-500";return L===2?(D="bg-gradient-to-r from-gray-800 to-[#1a1a1a] border-gray-500/30",B="text-gray-300",$="text-gray-400"):L===3&&(D="bg-gradient-to-r from-[#451a03] to-[#1a1a1a] border-amber-700/30",B="text-amber-500",$="text-amber-600"),a.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl border ${D}`,children:[a.jsxs("div",{className:`w-8 text-center font-black text-sm ${$}`,children:["#",L]}),a.jsx("div",{className:"w-10 h-10 bg-black rounded-full overflow-hidden shrink-0 border border-white/10 flex items-center justify-center",children:k.appearance?a.jsx(Xl,{appearance:k.appearance,size:160,className:"transform scale-[0.25] origin-top translate-y-1"}):a.jsx("span",{className:`font-bold ${B}`,children:k.name.charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`font-bold text-sm truncate ${B}`,children:k.name}),a.jsxs("div",{className:"text-[10px] text-neutral-500",children:["Lv ",k.level]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`font-bold text-sm ${B}`,children:k.respect}),a.jsx("div",{className:"text-[9px] text-neutral-600 uppercase",children:"Respect"})]})]},k.uid)})})]})})]})},Wo=({label:t,value:e,color:n})=>a.jsxs("div",{className:"bg-[#111] p-3 rounded-xl border border-white/5 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-wider",children:t}),a.jsx("span",{className:"font-mono font-bold text-white text-sm",children:e})]}),a.jsx("div",{className:"h-1.5 bg-[#333] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${n}`,style:{width:`${Math.min(100,e)}%`}})})]}),FI=({song:t})=>{const e=t.id.split("").reduce((s,r)=>s+r.charCodeAt(0),0),n=e%360,i=e%2===0;return a.jsxs("div",{className:"flex items-center gap-3 bg-[#111] p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors group",children:[a.jsxs("div",{className:"w-12 h-12 rounded shadow-lg relative overflow-hidden shrink-0 group-hover:scale-105 transition-transform duration-300",style:{background:`linear-gradient(135deg, hsl(${n}, 60%, ${i?"20%":"30%"}), hsl(${n+40}, 60%, 10%))`},children:[a.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"repeating-radial-gradient(#000 0, #000 2px, transparent 3px, transparent 4px)"}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-black text-white/30 text-xl select-none",children:t.name.charAt(0).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[a.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[a.jsx("div",{className:"text-white font-bold text-xs sm:text-sm truncate pr-2",children:t.name}),a.jsxs("div",{className:`text-[8px] sm:text-[9px] font-bold px-1.5 py-0.5 rounded border ${t.quality>=90?"text-green-400 border-green-500/30 bg-green-500/10":"text-neutral-500 border-white/10 bg-white/5"}`,children:["%",t.quality]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-neutral-400 text-[10px] sm:text-xs font-medium",children:[(t.popularityScore*1e3).toLocaleString()," ",a.jsx("span",{className:"text-[9px] uppercase text-neutral-600 ml-0.5",children:"Dinlenme"})]}),t.totalEarnings>0&&a.jsxs("div",{className:"text-[#1ed760] text-[10px] sm:text-xs font-mono font-bold",children:["+",t.totalEarnings.toLocaleString()]})]})]})]})},_n=({title:t,subtitle:e,icon:n,bgIcon:i,accentColor:s,badge:r,badgeIcon:l,onClick:o,disabled:u})=>a.jsxs("button",{onClick:u?void 0:o,disabled:u,className:`w-full group relative h-24 rounded-2xl overflow-hidden text-left transition-transform duration-200 mb-3 touch-manipulation border border-white/5 shadow-lg ${u?"cursor-default":"active:scale-[0.98] cursor-pointer"}`,children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{background:`linear-gradient(90deg, #050505 0%, #050505 40%, ${s}20 100%)`}}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px]",style:{background:`linear-gradient(90deg, transparent, ${s}80, transparent)`}}),a.jsx("div",{className:"absolute -right-4 -bottom-8 opacity-[0.07] transform rotate-[15deg] scale-[2.0] z-10 pointer-events-none transition-transform duration-500 group-hover:rotate-[5deg] group-hover:scale-[2.2]",style:{color:s},children:i}),a.jsxs("div",{className:"relative z-30 px-5 flex items-center justify-between h-full",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-inner relative overflow-hidden shrink-0 border border-white/10",style:{background:"linear-gradient(135deg, #222 0%, #0a0a0a 100%)"},children:a.jsx("div",{style:{color:s},className:"relative z-10 filter drop-shadow-[0_0_5px_rgba(0,0,0,0.5)]",children:pa.cloneElement(n,{className:"w-7 h-7"})})}),a.jsxs("div",{className:"min-w-0 flex flex-col justify-center",children:[r&&a.jsx("div",{className:"flex mb-1 items-center gap-1",children:a.jsxs("span",{className:"text-[7px] font-black uppercase tracking-[0.2em] px-1.5 py-0.5 rounded border flex items-center gap-1 leading-none",style:{backgroundColor:`${s}10`,borderColor:`${s}30`,color:s},children:[r,l&&l]})}),a.jsx("h2",{className:"text-lg font-black text-white italic tracking-tighter uppercase leading-none mb-0.5 drop-shadow-md",children:t}),a.jsx("p",{className:"text-neutral-500 text-[9px] font-bold uppercase tracking-[0.2em] truncate group-hover:text-white transition-colors",children:e})]})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:shadow-[0_0_15px_rgba(255,255,255,0.3)]",children:a.jsx(vn,{className:"w-3 h-3 text-white group-hover:text-black ml-0.5 transition-colors"})})]})]}),nb=({player:t,onSelectGame:e,mode:n})=>{const i=Bi(t.monthly_listeners),s=n==="online"&&i<2,r=l=>{l.stopPropagation(),ct()};return a.jsxs("div",{className:"h-full w-full bg-black relative flex flex-col",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-0",children:a.jsx("div",{className:`absolute top-[-20%] ${n==="online"?"left-[-20%] bg-blue-900/10":"right-[-20%] bg-purple-900/10"} w-[120vw] h-[120vw] rounded-full blur-[120px]`})}),a.jsxs("div",{className:"px-6 mb-2 relative z-10 shrink-0 pb-4 border-b border-white/5 bg-gradient-to-b from-black via-black/95 to-transparent",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 5rem)"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${n==="online"?"bg-blue-500 shadow-[0_0_15px_#3b82f6]":"bg-purple-500 shadow-[0_0_15px_#a855f7]"}`}),a.jsx("span",{className:"text-[10px] font-black text-neutral-500 uppercase tracking-[0.5em]",children:n==="online"?"GLOBAL ARENA":"ARCADE CENTER"})]}),a.jsx("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-white leading-none drop-shadow-xl",children:n==="online"?"ONLINE ARENA":a.jsxs(a.Fragment,{children:["ARCADE ",a.jsx("span",{className:"text-xl text-purple-500 italic align-top ml-1",children:"(SOLO)"})]})}),n==="online"&&a.jsx("p",{className:"text-[10px] text-neutral-400 font-medium max-w-[80%] mt-2 leading-tight",children:"Kupalar kazan ve liderlik koltuunda en tepeye otur."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pt-4 pb-32 relative z-10 custom-scrollbar",children:[s&&a.jsx("div",{onClick:r,className:"absolute inset-0 z-50 bg-black/40 backdrop-blur-sm flex flex-col items-center justify-center p-6 animate-fade-in",children:a.jsxs("div",{className:"bg-[#121212]/90 border border-white/10 p-8 rounded-[2rem] shadow-2xl flex flex-col items-center text-center relative overflow-hidden max-w-sm w-full",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),a.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-full flex items-center justify-center mb-6 border-2 border-white/10 shadow-[0_0_30px_rgba(59,130,246,0.1)]",children:a.jsx("div",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-2",children:"ERM YASAK"}),a.jsx("p",{className:"text-neutral-400 text-xs font-bold uppercase tracking-widest mb-2",children:"Online Arena'ya girmek iin"}),a.jsx("div",{className:"bg-blue-600 text-white font-black px-6 py-3 rounded-xl uppercase tracking-[0.2em] text-sm shadow-[0_0_20px_rgba(37,99,235,0.4)] animate-pulse",children:"SEVYE 2 GEREKL"}),a.jsxs("div",{className:"mt-6 text-[9px] text-neutral-500 font-bold leading-relaxed",children:["Kariyer Modunda veya Arcade Oyunlarnda",a.jsx("br",{}),a.jsx("span",{className:"text-white uppercase",children:"FAN KAZANARAK SEVYE ATLA"})]})]})}),n==="arcade"&&a.jsxs(a.Fragment,{children:[a.jsx(_n,{title:"FLOW TRAP",subtitle:"Refleks Testi",accentColor:"#a855f7",badge:"YEN",icon:a.jsx(eb,{}),bgIcon:a.jsx(eb,{className:"w-32 h-32"}),onClick:()=>e("hexagon")}),a.jsx(_n,{title:"AAI / YUKARI",subtitle:"Eski mi Yeni mi?",accentColor:"#0077ff",badge:"BLG",icon:a.jsx(Ko,{}),bgIcon:a.jsx(Ko,{className:"w-32 h-32"}),onClick:()=>e("higherlower-solo")}),a.jsx(_n,{title:"RTM OYUNU",subtitle:"Kelimeleri yakala",accentColor:"#00f2ff",badge:"VRAL OYUN",icon:a.jsx(Gh,{}),bgIcon:a.jsx(Gh,{className:"w-32 h-32"}),onClick:()=>e("rhythmtwister")}),a.jsx(_n,{title:"BREAKDANCE",subtitle:"Flow'unu gster",accentColor:"#ff6b00",icon:a.jsx($o,{}),bgIcon:a.jsx($o,{className:"w-32 h-32"}),onClick:()=>e("flowbattle-solo")}),a.jsx(_n,{title:"RAP QUIZ",subtitle:"Kltr testi",accentColor:"#00ff66",badge:"SIRALAMA MEVCUT",badgeIcon:a.jsx(Km,{className:"w-3 h-3"}),icon:a.jsx(Jx,{}),bgIcon:a.jsx(Jx,{className:"w-32 h-32"}),onClick:()=>e("rapquiz")}),a.jsx(_n,{title:"REFLEX",subtitle:"Zamanlama testi",accentColor:"#ff008c",icon:a.jsx(Gi,{}),bgIcon:a.jsx(Gi,{className:"w-32 h-32"}),onClick:()=>e("rhythm")}),a.jsx(_n,{title:"FREESTYLE",subtitle:"evrimd Kapma",accentColor:"#a855f7",badge:"1V1",icon:a.jsx(vi,{}),bgIcon:a.jsx(vi,{className:"w-32 h-32"}),onClick:()=>e("freestyle")}),a.jsx(_n,{title:"FLAPPY DISC",subtitle:"Engelleri a",accentColor:"#1ed760",icon:a.jsx(Gi,{}),bgIcon:a.jsx(Gi,{className:"w-32 h-32"}),onClick:()=>e("flappydisk")})]}),n==="online"&&a.jsxs("div",{className:s?"opacity-20 pointer-events-none filter blur-sm select-none":"",children:[a.jsx(_n,{title:"BREAKDANCE BATTLE",subtitle:"Gerek oyuncular",accentColor:"#ff4d00",badge:"PVP",icon:a.jsx($o,{}),bgIcon:a.jsx($o,{className:"w-32 h-32"}),onClick:()=>e("flowbattle"),disabled:s}),a.jsx(_n,{title:"AAI / YUKARI",subtitle:"Tarihleri tahmin et",accentColor:"#0077ff",badge:"PVP",icon:a.jsx(Ko,{}),bgIcon:a.jsx(Ko,{className:"w-32 h-32"}),onClick:()=>e("higherlower"),disabled:s}),a.jsx(_n,{title:"RAPQUIZ BATTLE",subtitle:"Bilgi yar",accentColor:"#bf00ff",badge:"PVP",icon:a.jsx(Ot,{}),bgIcon:a.jsx(Ot,{className:"w-32 h-32"}),onClick:()=>e("trivia"),disabled:s})]})]})]})},ib=["MC Glge","Lil Vibe","DJ Venom","Rap Lord","Flow King","Beat Master","Young G","Kara Ritim","Sokak airi"],sb=["Stdyoda yeni iler peindeyiz...  #studio","Bu beat ok fena oldu! ","Konser biletleri tkenmek zere!","Yeraltndan selamlar.","Flowify'da zirveye oynuyorum.","Yeni albm yolda, beklemede kaln.","Sokaklar bizimdir.","Mikrofonu verin bana!","Bugn modum efsane."],VI=({player:t,uid:e})=>{const[n,i]=w.useState("feed"),[s,r]=w.useState([]),[l,o]=w.useState([]),[u,f]=w.useState(""),[h,c]=w.useState([]),[d,p]=w.useState([]);w.useEffect(()=>{const m=fS.map((g,y)=>({id:y+100,author:g.author,handle:`@${g.author.toLowerCase().replace(/\s/g,"")}`,avatarUrl:kt[y%kt.length],content:g.content,likes:Math.floor(Math.random()*5e3)+100,retweets:Math.floor(Math.random()*500),replies:Math.floor(Math.random()*200),isLiked:!1,time:`${Math.floor(Math.random()*10)+1}s`,isVerified:Math.random()>.5}));c(m)},[]),w.useEffect(()=>{const m=setInterval(()=>{const g=ib[Math.floor(Math.random()*ib.length)],y=sb[Math.floor(Math.random()*sb.length)],_=kt[Math.floor(Math.random()*kt.length)],E={id:`bot_${Date.now()}`,author:g,handle:`@${g.toLowerCase().replace(/\s/g,"")}`,avatarUrl:_,content:y,likes:Math.floor(Math.random()*100),retweets:Math.floor(Math.random()*10),replies:Math.floor(Math.random()*5),isLiked:!1,time:"imdi",isVerified:Math.random()>.7};c(S=>[E,...S.slice(0,40)])},45e3);return()=>clearInterval(m)},[]),w.useEffect(()=>{const m=WC(g=>{p(y=>y.some(E=>E.id===g.id)?y:[{id:g.id,author:g.author,handle:`@${g.author.toLowerCase().replace(/\s/g,"")}`,avatarUrl:kt[g.avatarIndex||0],content:g.content,likes:g.likes||0,retweets:0,replies:0,isLiked:!1,time:"Yeni",isVerified:!0,isPlayer:!0},...y])});return()=>m()},[]),w.useEffect(()=>{const m=[...d,...h].sort((g,y)=>g.time==="Yeni"&&y.time!=="Yeni"?-1:y.time==="Yeni"&&g.time!=="Yeni"?1:0);o(m)},[d,h]),w.useEffect(()=>{let m;return n==="online"&&(async()=>{try{const y=ve(ye,"public_users");m=Un(y,_=>{const E=_.val();if(E){const S=Object.values(E),N=Date.now(),A=S.filter(T=>N-T.lastActive<12e4);A.sort((T,k)=>k.monthly_listeners-T.monthly_listeners),r(A)}else r([])})}catch(y){console.error("Presence Error",y)}})(),()=>{m&&m()}},[n,e]);const x=m=>{o(g=>g.map(y=>y.id===m?{...y,likes:y.isLiked?y.likes-1:y.likes+1,isLiked:!y.isLiked}:y))},v=()=>{u.trim()&&(Y(),qC(e,t.name,u,t.appearance.headIndex),f(""))},b=m=>{Y(),i(m)};return a.jsxs("div",{className:"h-full w-full bg-black flex flex-col relative",children:[a.jsx("div",{className:"shrink-0 bg-black/95 backdrop-blur border-b border-white/10 z-40",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 5rem)"},children:a.jsxs("div",{className:"flex",children:[a.jsxs("button",{onClick:()=>b("feed"),className:`flex-1 py-4 font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2 ${n==="feed"?"text-blue-400 border-b-2 border-blue-400":"text-neutral-500"}`,children:[a.jsx(Vm,{className:"w-4 h-4"}),"FlowX"]}),a.jsxs("button",{onClick:()=>b("online"),className:`flex-1 py-4 font-bold text-xs uppercase tracking-widest transition-colors ${n==="online"?"text-white border-b-2 border-white":"text-neutral-500"}`,children:["Online (",s.length,")"]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto pb-32",children:[n==="feed"&&a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex gap-3 bg-[#0a0a0a]",children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden shrink-0 border border-white/10",children:a.jsx("img",{src:kt[t.appearance.headIndex],className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("textarea",{value:u,onChange:m=>f(m.target.value),placeholder:"Tm dnyayla payla...",className:"w-full bg-transparent text-white text-sm placeholder-neutral-500 outline-none resize-none h-12 pt-2",maxLength:140}),a.jsx("div",{className:"flex justify-end pt-2 border-t border-white/5",children:a.jsx("button",{onClick:v,disabled:!u.trim(),className:"bg-blue-500 text-white font-bold text-xs px-4 py-1.5 rounded-full disabled:opacity-50 hover:bg-blue-400 transition-colors shadow-[0_0_10px_rgba(59,130,246,0.4)]",children:"PAYLA"})})]})]}),a.jsx("div",{className:"w-full",children:l.map(m=>a.jsxs("div",{className:`border-b border-white/5 p-4 hover:bg-white/[0.02] transition-colors flex gap-3 animate-fade-in-up ${m.isPlayer?"bg-blue-900/10 border-l-2 border-l-blue-500":""}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden shrink-0 bg-[#222]",children:a.jsx("img",{src:m.avatarUrl,alt:m.author,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx("span",{className:`font-bold text-sm truncate ${m.isPlayer?"text-blue-300":"text-white"}`,children:m.author}),m.isVerified&&a.jsx(ud,{className:"w-3 h-3 text-blue-400"}),m.isPlayer&&a.jsx("span",{className:"text-[8px] bg-blue-500/20 text-blue-300 px-1 rounded border border-blue-500/30 font-bold",children:"ONAYLI MC"}),a.jsx("span",{className:"text-neutral-500 text-sm truncate ml-1",children:m.handle}),a.jsx("span",{className:"text-neutral-500 text-sm",children:""}),a.jsx("span",{className:"text-neutral-500 text-sm",children:m.time})]}),a.jsx("p",{className:"text-neutral-200 text-sm leading-snug mb-3 whitespace-pre-wrap",children:m.content}),a.jsxs("div",{className:"flex justify-between text-neutral-500 max-w-xs",children:[a.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-400 transition-colors group",children:[a.jsx("div",{className:"p-1.5 rounded-full group-hover:bg-blue-500/10",children:a.jsx(vi,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs",children:m.replies})]}),a.jsxs("button",{className:"flex items-center gap-1 hover:text-green-400 transition-colors group",children:[a.jsx("div",{className:"p-1.5 rounded-full group-hover:bg-green-500/10",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[a.jsx("path",{d:"M4 12v8h16v-8"}),a.jsx("path",{d:"M12 2L12 16"}),a.jsx("path",{d:"M8 6l4-4 4 4"})]})}),a.jsx("span",{className:"text-xs",children:m.retweets})]}),a.jsxs("button",{onClick:()=>x(m.id),className:`flex items-center gap-1 transition-colors group ${m.isLiked?"text-pink-500":"hover:text-pink-500"}`,children:[a.jsx("div",{className:"p-1.5 rounded-full group-hover:bg-pink-500/10",children:m.isLiked?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),a.jsx("span",{className:"text-xs",children:m.likes})]}),a.jsx("button",{className:"flex items-center gap-1 hover:text-blue-400 transition-colors group",children:a.jsx("div",{className:"p-1.5 rounded-full group-hover:bg-blue-500/10",children:a.jsx(RI,{className:"w-4 h-4"})})})]})]})]},m.id))})]}),n==="online"&&a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"text-xs text-neutral-500 uppercase font-bold mb-4 flex justify-between px-2",children:[a.jsx("span",{children:"Sanat"}),a.jsxs("span",{className:"text-green-500 flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s.length," Aktif"]})]}),s.length===0?a.jsx("div",{className:"text-center text-neutral-500 py-10",children:"Kimse aktif deil."}):s.map(m=>{var g;return a.jsxs("div",{className:`w-full flex items-center p-3 rounded-xl border border-white/5 bg-[#111] transition-all text-left group ${m.uid===e?"opacity-50":"hover:border-white/20"}`,children:[a.jsxs("div",{className:"w-10 h-10 bg-gradient-to-tr from-[#1ed760] to-blue-500 rounded-full flex items-center justify-center font-bold text-black text-sm mr-3 relative shrink-0",children:[m.name[0],a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-[#111] rounded-full"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[a.jsxs("div",{className:"font-bold text-white text-sm truncate leading-normal pb-0.5",children:[m.name," ",m.uid===e&&"(Sen)"]}),((g=m.appearance)==null?void 0:g.headIndex)!==void 0&&m.monthly_listeners>5e4&&a.jsx("div",{className:"bg-blue-500 rounded-full p-0.5 shrink-0",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"white",className:"w-2 h-2",children:a.jsx("path",{d:"M9 12L11 14L15 10",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),a.jsxs("div",{className:"text-[10px] text-neutral-500 uppercase tracking-wider font-bold",children:["Lv ",m.level,"  ",new Intl.NumberFormat("tr-TR",{notation:"compact"}).format(m.monthly_listeners)," Dinleyici"]})]}),a.jsxs("div",{className:"text-right ml-2 shrink-0",children:[a.jsx("div",{className:"text-[10px] text-[#1ed760] font-black uppercase tracking-widest whitespace-nowrap animate-pulse",children:m.currentAction||"Dolanyor..."}),a.jsx("div",{className:"text-[8px] text-neutral-600 font-bold uppercase mt-0.5",children:"U AN"})]})]},m.uid)})]})]})]})},mf=({title:t,subtitle:e,description:n,icon:i,bgIcon:s,accentColor:r,badge:l,onClick:o,disabled:u})=>a.jsxs("button",{onClick:u?void 0:o,disabled:u,className:`w-full group relative h-36 rounded-2xl overflow-hidden text-left transition-all duration-300 mb-4 border border-white/5 shadow-lg ${u?"cursor-default":"active:scale-[0.96] cursor-pointer"}`,children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{background:`linear-gradient(90deg, #050505 0%, #050505 30%, ${r}25 100%)`}}),a.jsx("div",{className:"absolute right-6 bottom-[-20px] opacity-[0.05] transform rotate-[10deg] scale-[2.8] z-10 transition-transform duration-700 group-hover:scale-[3.2] group-hover:rotate-[5deg]",children:s}),a.jsxs("div",{className:"relative z-30 p-5 flex flex-col justify-between h-full",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-inner relative overflow-hidden shrink-0 border border-white/10",style:{background:"linear-gradient(135deg, #222 0%, #0a0a0a 100%)"},children:a.jsx("div",{style:{color:r},children:pa.cloneElement(i,{className:"w-7 h-7 filter drop-shadow-md"})})}),a.jsxs("div",{className:"min-w-0",children:[l&&a.jsx("div",{className:"flex mb-1",children:a.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.25em] px-2 py-0.5 rounded-full border",style:{backgroundColor:`${r}10`,borderColor:`${r}30`,color:r},children:l})}),a.jsx("h2",{className:"text-xl font-black text-white italic tracking-tighter uppercase leading-none mb-1",children:t}),a.jsx("p",{className:"text-neutral-500 text-[9px] font-bold uppercase tracking-[0.15em] group-hover:text-white transition-colors",children:e})]})]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:shadow-[0_0_25px_rgba(255,255,255,0.3)]",children:a.jsx(vn,{className:"w-3 h-3 text-white group-hover:text-black transition-colors ml-0.5"})})]}),a.jsx("p",{className:"text-neutral-400 text-[10px] font-medium leading-relaxed max-w-[85%] line-clamp-2 mt-1",children:n})]})]}),YI=({player:t,onSelectGame:e})=>{const i=Bi(t.monthly_listeners)<5;w.useEffect(()=>{},[]);const s=r=>{r.stopPropagation(),ct()};return a.jsxs("div",{className:"h-full w-full bg-black relative flex flex-col",children:[a.jsxs("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[100vw] h-[100vw] bg-green-900/10 rounded-full blur-[180px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80vw] h-[80vw] bg-emerald-900/10 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"px-6 mb-4 relative z-30 shrink-0 pb-4 border-b border-white/5 bg-gradient-to-b from-black via-black/95 to-transparent",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 5rem)"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse bg-emerald-500 shadow-[0_0_10px_#10b981]"}),a.jsx("span",{className:"text-[9px] font-black text-neutral-500 uppercase tracking-[0.5em]",children:"HIGH STAKES ONLY"})]}),a.jsx("h1",{className:"text-5xl font-black italic tracking-tighter uppercase text-white leading-none",children:"CASINO"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 relative z-20 pb-32 pt-2 custom-scrollbar",children:[i&&a.jsx("div",{onClick:s,className:"absolute inset-0 z-50 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center p-6 animate-fade-in",children:a.jsxs("div",{className:"bg-[#121212]/90 border border-emerald-500/20 p-8 rounded-[2rem] shadow-2xl flex flex-col items-center text-center relative overflow-hidden max-w-sm w-full",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),a.jsx("div",{className:"w-20 h-20 bg-[#1a1a1a] rounded-full flex items-center justify-center mb-6 border-2 border-emerald-500/20 shadow-[0_0_30px_rgba(16,185,129,0.1)]",children:a.jsx("div",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-2 uppercase",children:"VIP GR"}),a.jsx("p",{className:"text-neutral-400 text-xs font-bold uppercase tracking-widest mb-4",children:"Sadece profesyonel oyuncular"}),a.jsx("div",{className:"bg-emerald-600 text-white font-black px-6 py-3 rounded-xl uppercase tracking-[0.2em] text-sm shadow-[0_0_20px_rgba(16,185,129,0.4)] animate-pulse",children:"SEVYE 5 GEREKL"}),a.jsxs("div",{className:"mt-6 text-[9px] text-neutral-500 font-bold leading-relaxed uppercase",children:["Fan kitleni byt ve",a.jsx("br",{}),a.jsx("span",{className:"text-emerald-400",children:"SEVYE ATLA"})]})]})}),a.jsxs("div",{className:i?"opacity-20 pointer-events-none filter blur-sm select-none":"",children:[a.jsx(mf,{title:"BATTLE BET",subtitle:"DELLO TAHMN",description:"ki underground MC kapr, sen kazanan tahmin edersin. Oranlar takip et, doru tarafa oyna.",accentColor:"#f97316",badge:"POPLER",icon:a.jsx(ku,{}),bgIcon:a.jsx("div",{className:"text-[120px] font-black italic text-white/5 select-none -rotate-12",children:"VS"}),onClick:()=>{Y(),e("battlebet")},disabled:i}),a.jsx(mf,{title:"ZEPPELIN",subtitle:"CRASH OYUNU",description:"arpan ykselirken, patlamadan nce paran ek. Ne kadar yksee karsan o kadar ok kazanrsn.",accentColor:"#3b82f6",badge:"YEN",icon:a.jsx(fa,{}),bgIcon:a.jsx(fa,{className:"w-32 h-32"}),onClick:()=>{Y(),e("zeppelin")},disabled:i}),a.jsx(mf,{title:"BLACKJACK",subtitle:"KASAYA KARI",description:"Klasik 21 oyunu rap tarzyla yenilendi. Kartlar ek, 21'e yakla ve kasay batr.",accentColor:"#00ff95",badge:"CASINO",icon:a.jsx(Tu,{}),bgIcon:a.jsx(Tu,{className:"w-32 h-32"}),onClick:()=>{Y(),e("blackjack")},disabled:i})]})]})]})},KI=()=>{const[t,e]=w.useState("welcome"),[n,i]=w.useState(""),[s,r]=w.useState(""),[l,o]=w.useState(""),[u,f]=w.useState(!1),[h,c]=w.useState(localStorage.getItem("last_auth_error")||""),d=async v=>{o(""),f(!0),c("Kimlik dorulanyor...");try{v?await FC(n,s):await VC(n,s),localStorage.removeItem("last_auth_error")}catch(b){const m=b.code?`[${b.code}] ${b.message}`:b.message||"Bir hata olutu.";o(m),c(m),localStorage.setItem("last_auth_error",m),f(!1)}},p=async()=>{f(!0),o(""),c("Balant kuruluyor (Ltfen bekleyin)...");try{const v=GC(),b=new Promise((m,g)=>setTimeout(()=>{g(new Error("TIMEOUT: 30 saniye boyunca Firebase yant vermedi. Ltfen internetinizi ve domain izinlerini kontrol edin."))},3e4));await Promise.race([v,b]),c("Giri Baarl!"),localStorage.removeItem("last_auth_error")}catch(v){console.error("Firebase Auth Detail Error:",v);const b=v!=null&&v.code?`[${v.code}] ${v.message}`:(v==null?void 0:v.message)||(v==null?void 0:v.toString())||"Bilinmeyen hata";o(b),c(b),localStorage.setItem("last_auth_error",b),f(!1)}},x=()=>{e("welcome"),o("")};return a.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black flex flex-col items-center justify-center p-8 font-sans overflow-hidden",children:[h&&a.jsxs("div",{className:"absolute top-10 left-4 right-4 bg-red-950/90 border-2 border-red-600 p-4 rounded-xl text-[10px] text-white font-mono break-all z-[10001] shadow-2xl",children:[a.jsxs("div",{className:"font-black text-red-500 mb-2 flex justify-between",children:[a.jsx("span",{children:" DEBUG LOG"}),a.jsx("button",{onClick:()=>{c(""),localStorage.removeItem("last_auth_error")},className:"text-white bg-red-600 px-2 rounded",children:"KAPAT"})]}),h]}),a.jsxs("div",{className:"relative z-10 w-full max-w-[280px] flex flex-col items-center",children:[a.jsx("div",{className:"mb-16 text-center animate-fade-in-up",children:a.jsx("img",{src:"https://i.ibb.co/XxZ9Ft3Z/logobeyaz2.png",alt:"Flowify Logo",className:"w-36 h-auto mx-auto relative z-10 drop-shadow-[0_0_20px_rgba(255,255,255,0.15)] opacity-90"})}),l&&a.jsxs("div",{className:"w-full text-red-500 text-[10px] font-bold uppercase tracking-widest mb-6 text-center animate-bounce",children:[" ",l]}),t==="welcome"&&a.jsxs("div",{className:"w-full space-y-4 animate-fade-in flex flex-col items-center",children:[a.jsx("button",{onClick:()=>e("login"),className:"w-full bg-white text-black font-black uppercase tracking-[0.2em] py-4 rounded-full hover:scale-105 active:scale-95 transition-all text-xs shadow-[0_0_20px_rgba(255,255,255,0.3)]",children:"GR YAP"}),a.jsx("button",{onClick:()=>e("register"),className:"w-full bg-transparent border border-white/20 text-white font-bold uppercase tracking-[0.2em] py-4 rounded-full hover:bg-white/5 active:scale-95 transition-all text-xs",children:"KAYIT OL"}),a.jsx("button",{onClick:p,disabled:u,className:"mt-4 text-neutral-500 text-[9px] font-bold uppercase tracking-[0.3em] hover:text-white transition-colors",children:u?"YKLENYOR...":"MSAFR GR"})]}),(t==="login"||t==="register")&&a.jsxs("div",{className:"w-full animate-fade-in",children:[a.jsx("h2",{className:"text-white text-sm font-black text-center mb-8 uppercase tracking-[0.4em] opacity-80",children:t==="login"?"Giri":"Kayt"}),a.jsxs("div",{className:"space-y-6 mb-10",children:[a.jsx("input",{type:"email",value:n,onChange:v=>i(v.target.value),placeholder:"E-POSTA",className:"w-full bg-transparent border-b border-white/20 text-white text-center placeholder-neutral-600 focus:border-white focus:outline-none py-3 text-xs font-bold tracking-widest uppercase transition-colors"}),a.jsx("input",{type:"password",value:s,onChange:v=>r(v.target.value),placeholder:"FRE",className:"w-full bg-transparent border-b border-white/20 text-white text-center placeholder-neutral-600 focus:border-white focus:outline-none py-3 text-xs font-bold tracking-widest uppercase transition-colors"})]}),a.jsx("button",{onClick:()=>d(t==="register"),disabled:u,className:"w-full bg-white text-black font-black uppercase tracking-[0.2em] py-4 rounded-full hover:scale-105 active:scale-95 transition-all text-xs shadow-[0_0_20px_rgba(255,255,255,0.3)] disabled:opacity-50",children:u?"BEKLE...":"DEVAM ET"}),a.jsx("button",{onClick:x,className:"w-full text-neutral-600 text-[9px] font-bold uppercase tracking-[0.3em] mt-6 hover:text-white transition-colors text-center block",children:"GER DN"})]})]}),a.jsx("div",{className:"absolute bottom-8 text-[8px] text-neutral-800 font-bold uppercase tracking-[0.3em]",children:"FLOWIFY ENGINE"})]})},$I=({player:t,onSelectMode:e})=>{const[n,i]=w.useState(0),{showConfirm:s}=rr();w.useEffect(()=>{const o=ve(ye,"public_users"),u=Un(o,f=>{if(f.exists()){const h=f.val(),c=Date.now(),d=Object.values(h).filter(p=>c-p.lastActive<12e4).length;i(d)}else i(0)});return()=>u()},[]);const r=o=>{Y(),e(o)},l=()=>{Y(),s("IKI YAP","Hesabndan k yapmak istediine emin misin?",async()=>{await YC(),window.location.reload()})};return a.jsxs("div",{className:"h-full w-full bg-[#050505] flex flex-col relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 p-6 flex justify-between items-center pointer-events-none",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 1.5rem)"},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-[#111] border border-white/10 flex items-center justify-center text-white font-bold shadow-lg",children:t.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-bold text-sm leading-none drop-shadow-md",children:t.name}),a.jsxs("p",{className:"text-neutral-400 text-xs",children:["Seviye ",t.careerLevel||1]})]})]})}),a.jsxs("button",{onClick:()=>r("career"),className:"flex-1 relative w-full group overflow-hidden border-b border-white/5 active:brightness-110 transition-all duration-100",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#1e1b4b] via-[#312e81] to-[#0f172a] opacity-100 group-hover:scale-105 transition-transform duration-1000"}),a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[100px] group-hover:bg-purple-500/30 transition-colors"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[400px] h-[400px] bg-indigo-500/10 rounded-full blur-[80px]"}),a.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 p-6 text-center",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-white/5 backdrop-blur-lg border border-white/10 flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(168,85,247,0.3)] group-hover:scale-110 transition-transform duration-300",children:a.jsx(vi,{className:"w-10 h-10 text-purple-300"})}),a.jsx("h1",{className:"text-4xl xs:text-5xl md:text-6xl font-black text-white italic tracking-tighter mb-2 drop-shadow-2xl pr-4",children:"KARYER"}),a.jsx("p",{className:"text-purple-200 text-[9px] xs:text-[10px] sm:text-xs font-bold uppercase tracking-[0.3em] mb-4 opacity-80",children:"Dnya Turnesi & Albm"}),a.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 text-purple-100 text-[10px] font-bold px-4 py-1.5 rounded-full uppercase tracking-widest shadow-lg backdrop-blur-md",children:[t.week,". Hafta"]})]})]}),a.jsxs("button",{onClick:()=>r("hub"),className:"flex-1 relative w-full group overflow-hidden active:brightness-110 transition-all duration-100",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tl from-[#064e3b] via-[#022c22] to-[#0a0a0a] opacity-100 group-hover:scale-105 transition-transform duration-1000"}),a.jsx("div",{className:"absolute top-[20%] right-[-20%] w-[500px] h-[500px] bg-green-600/10 rounded-full blur-[100px] group-hover:bg-green-500/20 transition-colors"}),a.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 p-6 text-center",children:[a.jsxs("div",{className:"w-24 h-24 rounded-full bg-white/5 backdrop-blur-lg border border-white/10 flex flex-col items-center justify-center mb-6 shadow-[0_0_40px_rgba(34,197,94,0.2)] group-hover:scale-110 transition-transform duration-300 relative",children:[a.jsx(Ia,{className:"w-8 h-8 text-[#1ed760] mb-1"}),a.jsxs("div",{className:"flex items-center gap-1 bg-black/40 px-2 py-0.5 rounded-full border border-white/5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse shadow-[0_0_5px_#22c55e]"}),a.jsx("span",{className:"text-[9px] font-bold text-white",children:n})]})]}),a.jsx("h1",{className:"text-3xl xs:text-4xl sm:text-5xl md:text-6xl font-black text-white italic tracking-tighter mb-2 drop-shadow-2xl pr-4",children:"ONLINE HUB"}),a.jsx("p",{className:"text-green-200 text-[9px] xs:text-[10px] sm:text-xs font-bold uppercase tracking-[0.3em] mb-4 opacity-80",children:"SAVALAR, ONLINE 1V1 VE DAHASI"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"bg-green-900/30 border border-green-500/30 text-green-100 text-[10px] font-bold px-4 py-1.5 rounded-full uppercase tracking-widest shadow-lg flex items-center gap-1 backdrop-blur-md",children:[a.jsx(Ot,{className:"w-3 h-3"}),t.respect," Respect"]})})]})]}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent pointer-events-none"}),a.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 flex items-center gap-2",children:[a.jsx("div",{className:"bg-black border border-white/10 px-4 py-2 rounded-full text-[9px] font-bold text-neutral-500 uppercase tracking-[0.2em] shadow-xl backdrop-blur-xl",children:"MOD SEM"}),a.jsx("button",{onClick:l,className:"w-8 h-8 rounded-full bg-black border border-white/10 flex items-center justify-center text-red-500 hover:bg-red-900/20 hover:border-red-500 transition-colors shadow-xl",title:"k Yap",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})},qI=({onClose:t})=>{const[e,n]=w.useState(0),i=[{icon:"",title:"KARYER YOLCULUU",desc:"Sokaklardan zirveye trman balyor. Eskiehir'de kk bir stdyoda balyorsun. Amacn stanbul'un kral olmak.",tip:"Her ehrin kendine zel bir kilidi vardr (rn: Bursa iin Araba sahibi olmalsn)."},{icon:"",title:"ENERJ & PARA",desc:"Her eylem (Kayt, Konser, Antrenman) enerji harcar. Enerjin biterse Market'ten iecek al veya dinlen.",tip:"Paran dikkatli harca! Kiray deyemezsen borca batarsn."},{icon:"",title:"SAHSNDEN & SWAG",desc:"Araba almak sadece ulam deil, itibar meselesidir. 'Sahisinden' zerinden araba al-sat yaparak kr edebilirsin.",tip:"Daha iyi arabalar = Daha fazla Swag = Daha fazla gelir."},{icon:"",title:"HT ARKI YAPMAK",desc:"Stdyoya girip hit ark yapmadan byk ehirlere gidemezsin. Flow ve Lirik yeteneklerini gelitirerek ansn artr.",tip:"ark yaynladnda pasif gelir elde etmeye balarsn."},{icon:"",title:"KONSER & KRZLER",desc:"En byk gelir kaynan konserlerdir. Sahneye ktnda karna kan krizleri doru ynet.",tip:"Doru kararlar fan kitleni artrr, yanl kararlar konseri iptal ettirir."}],s=i[e];return a.jsxs("div",{className:"fixed inset-0 z-[300] bg-black/95 backdrop-blur-md flex flex-col items-center justify-center p-6 animate-fade-in font-sans",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[500px] h-[500px] bg-purple-900/20 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[500px] h-[500px] bg-green-900/20 rounded-full blur-[100px]"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-sm bg-[#121212] border border-purple-500/30 rounded-[2rem] p-8 shadow-2xl flex flex-col items-center text-center",children:[a.jsx("div",{className:"flex gap-1.5 mb-8",children:i.map((r,l)=>a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${l===e?"w-8 bg-purple-500":"w-2 bg-white/20"}`},l))}),a.jsx("div",{className:"w-24 h-24 bg-gradient-to-tr from-purple-600 to-indigo-600 rounded-full flex items-center justify-center text-5xl shadow-[0_0_40px_rgba(147,51,234,0.5)] mb-6 ring-4 ring-purple-500/20",children:s.icon}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-4 uppercase",children:s.title}),a.jsx("p",{className:"text-neutral-300 text-sm font-medium leading-relaxed mb-6 min-h-[80px]",children:s.desc}),a.jsxs("div",{className:"bg-purple-500/10 border-l-4 border-purple-500 p-4 text-left w-full rounded-r-xl mb-8",children:[a.jsx("span",{className:"text-purple-400 text-[10px] font-black uppercase tracking-wider block mb-1",children:"PUCU"}),a.jsx("span",{className:"text-neutral-400 text-xs italic font-medium",children:s.tip})]}),a.jsx("button",{onClick:()=>{e<i.length-1?n(r=>r+1):t()},className:"w-full bg-purple-600 text-white font-black py-4 rounded-xl hover:bg-purple-500 active:scale-95 transition-all uppercase tracking-[0.2em] text-xs shadow-lg",children:e<i.length-1?"DEVAM ET":"ANLAILDI"})]})]})},cr=["MC Glge","Ritim Kral","Flow Canavar","Yeralt Prens","Sokak airi","Beat Ustas","Lirik Uzman","Kara Ritim","Ghetto Boss","Rhyme Makinesi","Darbe","Nefes","Sancak","Vurgu"],rb=["{attacker} punchline att!","{attacker} annesine laf etti!","{attacker} flowu hzlandrd!","{attacker} ritmi kard...","{attacker} mikrofonu frlatt!","{attacker} sert gnderme yapt.","{attacker} double-time yapt!","{attacker} alk ald."],rN=({player:t,updateStat:e,onExit:n,cashType:i})=>{const[s,r]=w.useState("betting"),[l,o]=w.useState(null),[u,f]=w.useState(null),[h,c]=w.useState(null),[d,p]=w.useState(100),[x,v]=w.useState({f1:1.5,f2:1.5}),[b,m]=w.useState([]),[g,y]=w.useState(null),_=w.useRef(null),E=t[i];w.useEffect(()=>(S(),()=>clearInterval(_.current)),[]);const S=()=>{const T=Math.floor(Math.random()*50)+50,k=Math.floor(Math.random()*50)+50,C=T+k,L=T/C,D=Math.max(1.1,parseFloat((1/L*.9).toFixed(2))),B=Math.max(1.1,parseFloat((1/(1-L)*.9).toFixed(2)));let $=cr[Math.floor(Math.random()*cr.length)],O=cr[Math.floor(Math.random()*cr.length)];for(;$===O;)O=cr[Math.floor(Math.random()*cr.length)];o({id:1,name:$,headIndex:Math.floor(Math.random()*kt.length),power:T,hp:100,maxHp:100}),f({id:2,name:O,headIndex:Math.floor(Math.random()*kt.length),power:k,hp:100,maxHp:100}),v({f1:D,f2:B}),r("betting"),m([]),y(null),c(null)},N=()=>{if(h){if(E<d){alert("Yetersiz bakiye");return}e(i,-d),r("simulation"),_.current=setInterval(()=>{o(D=>D?{...D}:null);const T=Math.random()>.5?1:2,k=Math.floor(Math.random()*20)+5;let C=rb[Math.floor(Math.random()*rb.length)];const L=T===1?l.name:u.name;C=C.replace("{attacker}",L),m(D=>[C,...D].slice(0,3)),T===1?f(D=>{if(!D)return null;const B=Math.max(0,D.hp-k);return B===0&&A(1),{...D,hp:B}}):o(D=>{if(!D)return null;const B=Math.max(0,D.hp-k);return B===0&&A(2),{...D,hp:B}})},800)}},A=T=>{clearInterval(_.current),y(T),r("result");const k=T===h,C=T===1?x.f1:x.f2,L=Math.floor(d*C);k?(e(i,L),m(D=>[` KAZANDIN! +${L}`,...D])):m(D=>[" KAYBETTN...",...D])};return!l||!u?a.jsx("div",{className:"h-full bg-black flex items-center justify-center text-orange-500 font-bold",children:"Ykleniyor..."}):a.jsxs("div",{className:"h-full w-full bg-[#050505] flex flex-col relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[500px] h-[500px] bg-orange-900/10 rounded-full blur-[120px] pointer-events-none"}),a.jsxs("div",{className:"relative z-[150] flex justify-between items-center px-4 pt-6 pb-2 bg-gradient-to-b from-black via-black/80 to-transparent",children:[a.jsx("button",{onClick:n,className:"bg-neutral-800 text-white font-bold text-xs px-4 py-2 rounded-full hover:bg-neutral-700 transition-colors border border-white/10",children:"IKI"}),a.jsx("div",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest",children:"BATTLE BET"}),a.jsxs("div",{className:"flex items-center gap-1 text-white font-mono font-bold bg-[#111] px-2 py-0.5 rounded-full border border-white/10 text-xs",children:[a.jsx(Ao,{className:"w-3 h-3 text-orange-500"}),E.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 relative z-10 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-stretch w-full max-w-md gap-2 h-32",children:[a.jsxs("div",{onClick:()=>s==="betting"&&c(1),className:`flex-1 relative rounded-xl overflow-hidden transition-all duration-300 group cursor-pointer ${h===1?"ring-1 ring-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.2)]":"border border-white/5 bg-[#111]"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/90 z-10"}),a.jsx("img",{src:kt[l.headIndex],className:"absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity"}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 z-20 flex flex-col items-center",children:[a.jsx("div",{className:"font-black text-white text-xs uppercase text-center",children:l.name}),a.jsxs("div",{className:"bg-orange-500 text-black text-[9px] font-bold px-1.5 py-0.5 rounded mt-0.5",children:["x",x.f1]})]}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-neutral-800 z-20",children:a.jsx("div",{className:"h-full bg-orange-500 transition-all duration-500",style:{width:`${l.hp/l.maxHp*100}%`}})})]}),a.jsx("div",{className:"flex flex-col justify-center items-center",children:a.jsx("div",{className:"text-xl font-black text-white italic animate-pulse",children:"VS"})}),a.jsxs("div",{onClick:()=>s==="betting"&&c(2),className:`flex-1 relative rounded-xl overflow-hidden transition-all duration-300 group cursor-pointer ${h===2?"ring-1 ring-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.2)]":"border border-white/5 bg-[#111]"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/90 z-10"}),a.jsx("img",{src:kt[u.headIndex],className:"absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity"}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 z-20 flex flex-col items-center",children:[a.jsx("div",{className:"font-black text-white text-xs uppercase text-center",children:u.name}),a.jsxs("div",{className:"bg-orange-500 text-black text-[9px] font-bold px-1.5 py-0.5 rounded mt-0.5",children:["x",x.f2]})]}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-neutral-800 z-20",children:a.jsx("div",{className:"h-full bg-orange-500 transition-all duration-500",style:{width:`${u.hp/u.maxHp*100}%`}})})]})]}),a.jsx("div",{className:"w-full max-w-md bg-white/5 backdrop-blur-md rounded-xl border border-white/5 p-2 min-h-[80px]",children:b.length===0?a.jsx("div",{className:"text-neutral-600 text-[10px] text-center italic mt-2",children:"Ma bekleniyor..."}):b.map((T,k)=>a.jsxs("div",{className:`text-[10px] mb-1 font-medium tracking-wide ${k===0?"text-white":"text-neutral-500"}`,children:[k===0&&a.jsx("span",{className:"text-orange-500 mr-1",children:""}),T]},k))})]}),a.jsx("div",{className:"bg-[#0a0a0a] border-t border-white/10 p-4 pb-safe z-20",children:s==="betting"?a.jsxs("div",{className:"flex flex-col gap-3 max-w-md mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-black/40 rounded-xl p-1.5 border border-white/5",children:[a.jsx("button",{onClick:()=>p(Math.max(10,d-50)),className:"w-12 h-12 rounded-lg bg-[#222] text-white font-black text-xl hover:bg-[#333] transition-colors active:scale-95 flex items-center justify-center shrink-0 border border-white/5",children:"-"}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0 px-2",children:[a.jsx("span",{className:"text-[7px] text-neutral-500 font-bold uppercase tracking-widest",children:"BAHS"}),a.jsxs("div",{className:"text-2xl font-mono font-black text-white tracking-widest",children:["",d]})]}),a.jsx("button",{onClick:()=>p(Math.min(E,d+50)),className:"w-12 h-12 rounded-lg bg-[#222] text-white font-black text-xl hover:bg-[#333] transition-colors active:scale-95 flex items-center justify-center shrink-0 border border-white/5",children:"+"})]}),a.jsx("button",{onClick:N,disabled:!h,className:`w-full py-4 rounded-xl font-black text-sm uppercase tracking-[0.2em] transition-all shadow-lg ${h?"bg-orange-500 text-black hover:scale-[1.01]":"bg-neutral-800 text-neutral-500 cursor-not-allowed"}`,children:h?`${h===1?l.name:u.name} OYNA`:"TARAF SE"})]}):s==="simulation"?a.jsxs("div",{className:"w-full flex items-center justify-center gap-2 py-4",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce"}),a.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce delay-100"}),a.jsx("div",{className:"text-center text-white font-bold text-xs uppercase tracking-widest ml-1",children:"KAPIMA SRYOR"})]}):a.jsx("button",{onClick:S,className:"w-full bg-white text-black font-black py-4 rounded-xl uppercase tracking-widest text-sm hover:scale-[1.01] transition-transform max-w-md mx-auto block shadow-lg",children:"YEN MA"})})]})},WI=["mic","chain","record","spray"],ZI=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],aN=({player:t,updateStat:e,onExit:n,cashType:i})=>{const[s,r]=w.useState([]),[l,o]=w.useState([]),[u,f]=w.useState([]),[h,c]=w.useState(100),[d,p]=w.useState("betting"),[x,v]=w.useState(""),b=t[i],m=()=>{const T=[];return WI.forEach(k=>{ZI.forEach((C,L)=>{T.push({suit:k,rank:C,value:L+1})})}),T.sort(()=>Math.random()-.5)},g=T=>{let k=0,C=0;for(T.forEach(L=>{L.value===1?(C+=1,k+=11):L.value>=10?k+=10:k+=L.value});k>21&&C>0;)k-=10,C-=1;return k},y=()=>{Y(),p("betting"),f([]),o([])},_=()=>{if(Y(),b<h){alert("Yetersiz bakiye!");return}e(i,-h);const T=m(),k=[T.pop(),T.pop()],C=[T.pop(),T.pop()];r(T),o(k),f(C),p("playing"),g(k)===21&&S(k,C,T)},E=()=>{Y();const T=[...s],k=T.pop(),C=[...l,k];o(C),r(T),g(C)>21&&(p("gameOver"),v("BUST! KAYBETTN"),ct())},S=(T=l,k=u,C=s)=>{Y(),p("dealerTurn");let L=[...k],D=[...C];(async()=>{for(;g(L)<17;){await new Promise(O=>setTimeout(O,800));const $=D.pop();L=[...L,$],f(L)}r(D),A(T,L)})()},N=()=>{if(Y(),b<h){alert("Yetersiz bakiye!");return}e(i,-h),c(L=>L*2);const T=[...s],k=T.pop(),C=[...l,k];o(C),r(T),g(C)>21?(p("gameOver"),v("BUST! KAYBETTN"),ct()):S(C,u,T)},A=(T,k)=>{const C=g(T),L=g(k);p("gameOver"),L>21?(v("KASA PATLADI!"),e(i,h*2),nn()):C>L?(v("KAZANDIN"),e(i,h*2),nn()):C===L?(v("BERABERE"),e(i,h),SI()):(v("KAYBETTN"),ct())};return a.jsxs("div",{className:"h-full w-full bg-[#050505] flex flex-col relative overflow-hidden font-sans",children:[a.jsxs("div",{className:"absolute inset-0 bg-[#0a0a0a] pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/felt.png')]"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000_90%)]"}),a.jsx("div",{className:"absolute inset-4 rounded-[40px] border border-white/5 shadow-[0_0_50px_rgba(255,255,255,0.05)]"})]}),a.jsxs("div",{className:"relative z-[150] flex justify-between items-center px-6 pt-6 pb-4",children:[a.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white hover:bg-white/10 transition-colors",children:""}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"text-[10px] font-black text-[#1ed760] uppercase tracking-[0.3em] drop-shadow-sm mb-1",children:"VIP ROOM"}),a.jsx("div",{className:"text-xl font-black italic text-white tracking-tighter",children:"BLACKJACK 21"})]}),a.jsxs("div",{className:"flex items-center gap-1.5 bg-[#1a1a1a] pl-2 pr-3 py-1.5 rounded-full border border-white/5 shadow-lg",children:[a.jsx(Ao,{className:"w-4 h-4 text-yellow-500"}),a.jsx("span",{className:"text-white font-mono font-bold text-xs",children:b.toLocaleString()})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 relative z-10 pb-48",children:[a.jsxs("div",{className:"w-full flex flex-col items-center justify-center mb-12 transform scale-90",children:[a.jsxs("div",{className:"text-[9px] text-neutral-500 font-bold uppercase mb-3 tracking-[0.2em] flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})," KASA",d==="gameOver"&&a.jsxs("span",{className:"text-white ml-1",children:["(",g(u),")"]})]}),a.jsx("div",{className:"flex -space-x-12 h-36 items-center justify-center",children:d==="betting"?a.jsx("div",{className:"w-24 h-36 rounded-xl border-2 border-white/5 bg-[#111] flex items-center justify-center shadow-inner",children:a.jsx("span",{className:"text-[40px] opacity-10",children:""})}):u.map((T,k)=>a.jsx(ab,{index:k,card:T,hidden:d==="playing"&&k===0},k))})]}),a.jsxs("div",{className:"w-full flex flex-col items-center justify-center transform scale-95",children:[a.jsx("div",{className:"flex -space-x-12 h-36 items-center justify-center mb-4 relative",children:l.map((T,k)=>a.jsx(ab,{index:k,card:T},k))}),d!=="betting"&&a.jsx("div",{className:"bg-[#1ed760] text-black px-4 py-1.5 rounded-full text-sm font-black shadow-[0_0_20px_rgba(30,215,96,0.4)] animate-bounce-subtle",children:g(l)})]})]}),d==="gameOver"&&a.jsx("div",{className:"absolute inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-md px-6 animate-fade-in",children:a.jsxs("div",{className:"bg-[#181818] border border-white/10 p-6 rounded-3xl w-full max-w-xs text-center shadow-2xl relative overflow-hidden transform transition-all scale-100",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl shadow-lg border-4 border-[#181818] ${x.includes("KAZANDIN")||x.includes("PATLADI")?"bg-[#1ed760] text-black":"bg-red-500 text-white"}`,children:x.includes("KAZANDIN")||x.includes("PATLADI")?"":""})}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-1 uppercase",children:x}),x.includes("KAZANDIN")||x.includes("PATLADI")?a.jsxs("div",{className:"text-[#1ed760] font-mono font-bold text-lg mb-6",children:["+",h*2]}):x.includes("BERABERE")?a.jsxs("div",{className:"text-yellow-500 font-mono font-bold text-lg mb-6",children:["ADE: ",h]}):a.jsxs("div",{className:"text-neutral-500 font-mono font-bold text-sm mb-6",children:["-",h]}),a.jsx("button",{onClick:y,className:"w-full bg-white text-black font-black py-3 rounded-xl uppercase tracking-widest text-xs hover:scale-[1.02] active:scale-95 transition-all shadow-lg",children:"TEKRAR OYNA"})]})}),d!=="gameOver"&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[170] p-4 pb-safe bg-[#121212] border-t border-white/10",children:a.jsx("div",{className:"max-w-md mx-auto",children:d==="betting"?a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-black/40 rounded-xl p-1.5 border border-white/5",children:[a.jsx("button",{onClick:()=>{Y(),c(Math.max(10,h-50))},className:"w-12 h-12 rounded-lg bg-[#222] text-white font-black text-xl hover:bg-[#333] transition-colors active:scale-95 flex items-center justify-center shrink-0 border border-white/5",children:"-"}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center min-w-0 px-2",children:[a.jsx("span",{className:"text-[7px] text-neutral-500 font-bold uppercase tracking-widest",children:"BAHS"}),a.jsxs("div",{className:"text-2xl font-mono font-black text-white tracking-widest",children:["",h]})]}),a.jsx("button",{onClick:()=>{Y(),c(Math.min(b,h+50))},className:"w-12 h-12 rounded-lg bg-[#222] text-white font-black text-xl hover:bg-[#333] transition-colors active:scale-95 flex items-center justify-center shrink-0 border border-white/5",children:"+"})]}),a.jsx("button",{onClick:_,className:"w-full bg-[#1ed760] text-black font-black py-4 rounded-xl uppercase tracking-[0.2em] text-sm shadow-lg hover:scale-[1.01] active:scale-95 transition-all",children:"DAIT"})]}):a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:E,disabled:d!=="playing",className:"flex-1 bg-[#222] text-blue-400 border border-blue-500/30 font-black py-4 rounded-xl uppercase tracking-widest shadow-lg active:scale-95 transition-all text-xs hover:bg-blue-900/20",children:"KART STE"}),a.jsx("button",{onClick:()=>S(),disabled:d!=="playing",className:"flex-1 bg-[#222] text-red-400 border border-red-500/30 font-black py-4 rounded-xl uppercase tracking-widest shadow-lg active:scale-95 transition-all text-xs hover:bg-red-900/20",children:"DUR"}),l.length===2&&a.jsx("button",{onClick:N,disabled:d!=="playing",className:"flex-1 bg-[#222] text-yellow-400 border border-yellow-500/30 font-black py-4 rounded-xl uppercase tracking-widest shadow-lg active:scale-95 transition-all text-xs hover:bg-yellow-900/20",children:"2X KATLA"})]})})}),a.jsx("style",{children:`
            @keyframes dealCard {
                from { transform: translateY(-100px) scale(0.8); opacity: 0; }
                to { transform: translateY(0) scale(1); opacity: 1; }
            }
        `})]})},ab=({card:t,hidden:e=!1,index:n})=>{if(e)return a.jsxs("div",{className:"w-24 h-36 rounded-xl border border-white/10 shadow-2xl relative overflow-hidden transition-transform transform hover:-translate-y-2 origin-bottom",style:{background:"linear-gradient(135deg, #111 0%, #222 100%)",animation:"dealCard 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards",animationDelay:`${n*.1}s`,zIndex:n},children:[a.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"repeating-linear-gradient(45deg, #fff 0, #fff 1px, transparent 0, transparent 10px)"}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-white/20 flex items-center justify-center text-white/30 font-black text-xs",children:"F"})})]});const i=t.suit==="mic"||t.suit==="record",s=t.suit==="mic"?II:t.suit==="chain"?OI:t.suit==="record"?LI:MI;return a.jsxs("div",{className:"w-24 h-36 bg-white rounded-xl shadow-[0_5px_15px_rgba(0,0,0,0.5)] relative flex flex-col items-center justify-between p-3 select-none transition-transform transform hover:-translate-y-4 origin-bottom border border-gray-300",style:{animation:"dealCard 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards",animationDelay:`${n*.1}s`,zIndex:n},children:[a.jsxs("div",{className:`self-start text-xl font-black leading-none ${i?"text-red-600":"text-black"}`,children:[t.rank,a.jsx("div",{className:"text-[10px] opacity-50 mt-0.5",children:a.jsx(s,{className:"w-3 h-3"})})]}),a.jsx(s,{className:`w-10 h-10 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-20 ${i?"text-red-600":"text-black"}`}),a.jsx(s,{className:`w-8 h-8 ${i?"text-red-600":"text-black"}`}),a.jsxs("div",{className:`self-end text-xl font-black leading-none transform rotate-180 ${i?"text-red-600":"text-black"}`,children:[t.rank,a.jsx("div",{className:"text-[10px] opacity-50 mt-0.5",children:a.jsx(s,{className:"w-3 h-3"})})]})]})},QI=8,lN=({player:t,updateStat:e,onExit:n,cashType:i})=>{const[s,r]=w.useState("idle"),[l,o]=w.useState(1),[u,f]=w.useState(100),[h,c]=w.useState(0),[d,p]=w.useState([]),[x,v]=w.useState(3),[b,m]=w.useState({x:5,y:80}),[g,y]=w.useState("M 5 80"),[_,E]=w.useState(!1),S=t[i],N=w.useRef(0),A=w.useRef(0),T=w.useRef(0),k=w.useRef(!1),C=w.useRef([]);w.useEffect(()=>(p(Array.from({length:5},()=>1+Math.random()*5)),()=>cancelAnimationFrame(N.current)),[]);const L=()=>{if(S<u){ct(),alert("Yetersiz bakiye!");return}Y(),e(i,-u),r("countdown"),v(3);let R=3;const I=setInterval(()=>{R--,R>0?(v(R),hs()):(clearInterval(I),D())},800)},D=()=>{const R=Math.random(),I=Math.max(1,Math.floor(.96/(1-R)*100)/100);A.current=I,o(1),c(0),r("flying"),Ca(),m({x:5,y:80}),y("M 5 80"),C.current=[{x:5,y:80}],E(!1),k.current=!0,T.current=Date.now(),N.current=requestAnimationFrame(B)},B=()=>{if(!k.current)return;const I=(Date.now()-T.current)/1e3,M=1+I*I*.08+I*.05;M>=A.current?(o(A.current),O()):(o(M),$(I,M),N.current=requestAnimationFrame(B))},$=(R,I)=>{let M=5+R*8,V=80-Math.log10(I)*65;V=Math.max(15,V),M>85&&(M=85),m({x:M,y:V});const Z=C.current[C.current.length-1];(Math.abs(Z.x-M)>.5||Math.abs(Z.y-V)>.5)&&C.current.push({x:M,y:V});let X="M 5 80";C.current.forEach(q=>{X+=` L ${q.x} ${q.y}`}),y(X),I>5&&E(!0)},O=()=>{k.current=!1,r("crashed"),ct(),cancelAnimationFrame(N.current),Q(A.current)},H=()=>{if(s!=="flying")return;k.current=!1,cancelAnimationFrame(N.current),nn();const R=Math.floor(u*l);e(i,R),c(R),r("cashed"),Q(l)},Q=R=>{p(I=>[R,...I].slice(0,QI))},P=s==="flying"||s==="countdown";return a.jsxs("div",{className:"h-full w-full bg-[#020617] flex flex-col font-sans select-none overflow-hidden pb-safe relative",children:[a.jsxs("div",{className:"relative z-50 px-4 pt-6 pb-2 flex justify-between items-center bg-gradient-to-b from-[#020617] to-transparent shrink-0",children:[a.jsx("div",{className:"flex gap-1.5 overflow-hidden h-6 items-center flex-1 mr-4 mask-image-r",children:d.map((R,I)=>a.jsxs("div",{className:`text-[9px] font-mono font-bold px-1.5 py-0.5 rounded backdrop-blur-md border ${R>=2?"bg-green-500/10 text-green-400 border-green-500/30":"bg-white/5 text-neutral-400 border-white/10"}`,children:[R.toFixed(2),"x"]},I))}),a.jsx("button",{onClick:n,disabled:s==="flying",className:"w-8 h-8 rounded-full bg-white/10 border border-white/10 flex items-center justify-center text-white hover:bg-white/20 transition-opacity disabled:opacity-0",children:""})]}),a.jsxs("div",{className:"flex-1 relative w-full overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 transition-colors duration-500 ${s==="crashed"?"bg-red-950/20":""}`,children:a.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(59, 130, 246, 0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.2) 1px, transparent 1px)",backgroundSize:"40px 40px",transform:`perspective(500px) rotateX(20deg) translateY(${s==="flying"?Date.now()%40:0}px)`}})}),a.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"gradArea",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.4)"}),a.jsx("stop",{offset:"100%",stopColor:"rgba(59, 130, 246, 0)"})]})}),a.jsx("line",{x1:"0",y1:"20",x2:"100",y2:"20",stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.2",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.2",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"80",x2:"100",y2:"80",stroke:"rgba(255,255,255,0.1)",strokeWidth:"0.2",strokeDasharray:"2"}),s!=="idle"&&s!=="countdown"&&a.jsxs(a.Fragment,{children:[a.jsx("path",{d:`${g} L ${b.x} 120 L 5 120 Z`,fill:"url(#gradArea)"}),a.jsx("path",{d:g,fill:"none",stroke:"#3b82f6",strokeWidth:"0.8",strokeLinecap:"round",className:"drop-shadow-lg"})]})]}),(s==="flying"||s==="crashed"||s==="cashed")&&a.jsx("div",{className:"absolute w-10 h-10 flex items-center justify-center transition-transform will-change-transform z-10",style:{left:`${b.x}%`,top:`${b.y}%`,transform:"translate(-50%, -50%) rotate(-45deg)"},children:s==="crashed"?a.jsx("div",{className:"text-4xl animate-ping text-red-500 drop-shadow-[0_0_15px_red]",children:""}):a.jsxs("div",{className:"relative",children:[a.jsx(fa,{className:"w-8 h-8 text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.8)]"}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-2 h-8 bg-gradient-to-b from-orange-500 to-transparent blur-[1px] animate-pulse origin-top"})]})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:s==="countdown"?a.jsx("div",{className:"text-8xl font-black text-white animate-ping",children:x}):s==="crashed"?a.jsxs("div",{className:"flex flex-col items-center animate-shake",children:[a.jsxs("div",{className:"text-6xl font-black text-red-500 drop-shadow-[0_0_30px_rgba(220,38,38,0.5)] font-mono",children:[l.toFixed(2),"x"]}),a.jsx("div",{className:"text-sm font-black text-white bg-red-600 px-4 py-1 rounded-full uppercase mt-2 shadow-lg",children:"PATLADI"})]}):s==="cashed"?a.jsxs("div",{className:"flex flex-col items-center animate-bounce-subtle",children:[a.jsxs("div",{className:"text-6xl font-black text-green-400 drop-shadow-[0_0_30px_rgba(74,222,128,0.5)] font-mono",children:[l.toFixed(2),"x"]}),a.jsxs("div",{className:"text-xs font-bold text-black bg-[#1ed760] px-3 py-1 rounded-full uppercase mt-2",children:["KAZAN: ",h.toLocaleString()]})]}):a.jsxs("div",{className:`text-7xl font-black font-mono tracking-tighter drop-shadow-2xl transition-colors ${l>5?"text-yellow-400":"text-white"} ${s==="flying"&&_?"translate-x-0.5":""}`,children:[l.toFixed(2),"x"]})})]}),a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-[#1e293b] border-t border-white/10 rounded-t-3xl p-4 pb-safe shadow-[0_-5px_20px_rgba(0,0,0,0.5)] flex flex-col gap-4",children:[a.jsxs("div",{className:"flex justify-between items-center px-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] text-neutral-400 font-bold uppercase tracking-wider",children:"BAKYE"}),a.jsxs("div",{className:"flex items-center gap-1 text-white font-mono font-bold text-base",children:[a.jsx(Ao,{className:"w-4 h-4 text-yellow-500"}),S.toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center gap-3 bg-black/40 rounded-xl p-1.5 border border-white/5",children:[a.jsx("button",{onClick:()=>{Y(),f(Math.max(10,u-50))},disabled:P,className:"w-10 h-10 rounded-lg bg-[#333] text-white font-black text-lg disabled:opacity-30 hover:bg-[#444] transition-colors active:scale-95 flex items-center justify-center border border-white/5",children:"-"}),a.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[80px]",children:[a.jsx("span",{className:"text-[7px] text-neutral-500 font-bold uppercase",children:"BAHS"}),a.jsxs("div",{className:"text-lg font-mono font-bold text-white tracking-wide",children:["",u]})]}),a.jsx("button",{onClick:()=>{Y(),f(Math.min(S,u+50))},disabled:P,className:"w-10 h-10 rounded-lg bg-[#333] text-white font-black text-lg disabled:opacity-30 hover:bg-[#444] transition-colors active:scale-95 flex items-center justify-center border border-white/5",children:"+"})]})]}),s==="flying"?a.jsxs("button",{onClick:H,className:"w-full h-14 rounded-2xl font-black text-xl uppercase tracking-widest bg-[#1ed760] text-black hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(30,215,96,0.3)] flex items-center justify-center gap-3 border-4 border-[#166534]",children:[a.jsx("span",{children:"BOZDUR"}),a.jsxs("span",{className:"text-base font-mono bg-black/10 px-3 py-0.5 rounded text-black/80",children:["",Math.floor(u*l).toLocaleString()]})]}):a.jsx("button",{onClick:L,disabled:P,className:`w-full h-14 rounded-2xl font-black text-xl uppercase tracking-widest transition-all shadow-xl flex items-center justify-center gap-3 ${P?"bg-white/5 text-white/30 cursor-not-allowed border border-white/5":"bg-blue-600 text-white hover:bg-blue-500 active:scale-95 shadow-blue-600/30 border-t border-blue-400"}`,children:s==="countdown"?a.jsx("span",{className:"animate-pulse text-base",children:"HAZIRLANIYOR..."}):a.jsxs(a.Fragment,{children:[a.jsx(fa,{className:"w-6 h-6"}),a.jsx("span",{children:"BALAT"})]})})]})]})},lb=["DOKTORDAN TEMZ HATASIZ","ACL SATILIK GELEN ZMEM","KEYFE KEDER SATILIK","GARAJ ARABASI NOKTA HATA YOK","HASTASINA ZEL PROJE","FULL + FULL YAPILI","TR'DE TEK BU TEMZLKTE YOK","LK SAHBNDEN ORJNAL","MEMURDAN BAKIMLI ALE ARACI","TAKAS OLMAZ NAKT HTYATAN","KUPON ARA KAMAZ","EV ALACAIM N SATILIK"],ob=["stanbul / Kadky","stanbul / Baclar","stanbul / Esenyurt","stanbul / Etiler","Ankara / ankaya","Ankara / Mamak","zmir / Bornova","zmir / Karyaka","Bursa / Nilfer","Antalya / Muratpaa","Adana / Seyhan","Eskiehir / Odunpazar"],cb=[{id:"scooter",name:"Mondial 50cc",basePrice:35e3,swag:2,img:""},{id:"tofas",name:"Tofa ahin S",basePrice:6e4,swag:10,img:""},{id:"doblo",name:"Fiat Doblo 1.3 Multijet",basePrice:15e4,swag:5,img:""},{id:"honda",name:"Honda Civic 1.6 i-VTEC",basePrice:25e4,swag:25,img:""},{id:"bmw",name:"BMW E30 M-Technic",basePrice:4e5,swag:40,img:""},{id:"passat",name:"VW Passat 1.6 TDI Highline",basePrice:9e5,swag:60,img:""},{id:"range",name:"Range Rover Sport 3.0 SDV6",basePrice:2e6,swag:95,img:""}],XI=({player:t,onClose:e,onVehicleBuy:n,onCityUnlock:i,onOpenShop:s})=>{const{showToast:r,showConfirm:l}=rr(),o=w.useMemo(()=>{const f=t.week*17;return Array.from({length:8}).map((h,c)=>{const d=(f+c*1337)%1e3/1e3,p=Math.floor((f+c)%cb.length),x=cb[p],v=(f+c*3)%lb.length,b=lb[v],m=(f+c*7)%ob.length,g=ob[m],y=.9+d*.2,_=Math.floor(x.basePrice*y),E=`${x.id}_${t.week}_${c}`,S=Math.floor(d*25e4)+2e4,N=2023-Math.floor(d*20),A=d>.5?"Bugn":"Dn";return{uniqueId:E,coreId:x.id,...x,title:b,price:_,km:S,year:N,location:g,date:A}})},[t.week]),u=(f,h)=>{if(f.stopPropagation(),f.preventDefault(),t.inventory.vehicles.includes(h.uniqueId)){r("Bu arac zaten garajnda!","info");return}if(t.careerCash<h.price){ct(),s?s("currency"):r(`Bakiye yetersiz! ${(h.price-t.careerCash).toLocaleString()} eksik.`,"error");return}Y(),l("SATIN ALMA",`${h.name} aracn ${h.price.toLocaleString()} karlnda almak istiyor musun?`,()=>{n&&(nn(),n(h.uniqueId,h.price)),h.coreId,!t.unlockedCities.includes("bursa")&&i?setTimeout(()=>{r("BURSA KLD AILDI! ","success"),i("bursa")},600):r(`${h.name} artk senin! Hayrl olsun.`,"success")})};return a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/80 backdrop-blur-md flex items-center justify-center p-0 md:p-4 animate-zoom-in font-sans",children:a.jsxs("div",{className:"w-full max-w-md bg-[#f2f2f2] h-full md:h-[85vh] flex flex-col md:rounded-xl overflow-hidden shadow-2xl relative border border-gray-400",children:[a.jsxs("div",{className:"bg-[#FFD000] px-4 py-3 flex justify-between items-center shadow-sm z-10 shrink-0 border-b border-[#e6bb00] pt-safe-top",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{className:"text-xl font-black italic tracking-tighter text-black",children:"sahisinden.com"})}),a.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-black/10 rounded-full text-black font-bold hover:bg-black/20",children:""})]}),a.jsxs("div",{className:"bg-[#f8f8f8] border-b border-gray-300 px-4 py-3 flex items-center justify-between text-xs text-blue-600 font-bold shrink-0 shadow-sm relative z-10",children:[a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("span",{className:"flex items-center gap-1",children:["Sralama ",a.jsx("span",{className:"text-[9px]",children:""})]}),a.jsxs("span",{className:"flex items-center gap-1",children:["Filtrele ",a.jsx("span",{className:"text-[9px]",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500 font-normal",children:[a.jsx("span",{className:"font-bold text-black",children:o.length})," ilan"]})]}),a.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex justify-between items-center text-xs shrink-0",children:[a.jsx("span",{className:"text-gray-500 font-bold",children:"Czdanm:"}),a.jsxs("span",{className:"text-green-600 font-black font-mono text-sm",children:["",t.careerCash.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto bg-white",children:[o.map(f=>{const h=t.inventory.vehicles.includes(f.uniqueId);return a.jsxs("div",{className:`border-b border-gray-200 p-3 flex gap-3 relative hover:bg-gray-50 transition-colors active:bg-blue-50 cursor-pointer ${h?"opacity-60 grayscale":""}`,onClick:c=>!h&&u(c,f),children:[a.jsxs("div",{className:"w-32 h-24 bg-gray-200 border border-gray-300 relative flex items-center justify-center text-5xl shrink-0 rounded-sm overflow-hidden",children:[f.img,a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] px-1 py-0.5 text-center font-bold",children:["+",f.swag," SWAG"]}),h&&a.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center z-10",children:a.jsx("span",{className:"bg-red-600 text-white text-[10px] font-black px-2 py-1 transform -rotate-12 rounded shadow-sm border border-white/20",children:"SATILDI"})})]}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[#3b55a8] font-bold text-[13px] truncate leading-tight mb-1",children:f.title}),a.jsx("div",{className:"text-gray-900 text-xs font-semibold truncate",children:f.name}),a.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[f.year,"  ",f.km.toLocaleString()," KM  Beyaz"]})]}),a.jsxs("div",{className:"flex justify-between items-end mt-2",children:[a.jsxs("div",{className:"text-[10px] text-gray-500 font-medium leading-tight",children:[f.location,a.jsx("div",{className:"text-[9px] text-gray-400 mt-0.5",children:f.date})]}),a.jsxs("div",{className:"text-[#d91a1a] font-bold text-sm tracking-tight",children:[f.price.toLocaleString()," TL"]})]})]})]},f.uniqueId)}),a.jsxs("div",{className:"p-6 flex justify-center gap-2 pb-safe",children:[a.jsx("span",{className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded bg-blue-600 text-sm font-bold text-white shadow-sm",children:"1"}),a.jsx("span",{className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded bg-white text-sm text-blue-600",children:"2"}),a.jsx("span",{className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded bg-white text-sm text-blue-600",children:"3"})]})]})]})})},JI=({player:t,onClose:e,updateStat:n,onHitSong:i,onCityUnlock:s,onOpenShop:r})=>{const{showToast:l}=rr(),o=Ne.STUDIO_RENT,u=Ne.COST.STUDIO,f=Math.min(100,Math.floor((t.flow+t.lyrics)/2)),[h,c]=w.useState(!1),[d,p]=w.useState(""),x=()=>{if(!d.trim()){l("ark ismi girmelisin!","error");return}if(t.careerCash<o){ct(),r?r("currency"):l(`Stdyo iin ${o.toLocaleString()} gerekiyor!`,"error");return}if(t.energy<u){ct(),r?r("energy"):l(`ok yorgunsun! (${u} Enerji lazm)`,"error");return}c(!0),Y(),setTimeout(()=>{if(n("careerCash",-o),n("energy",-u),Math.random()*100<=f){nn(),i&&i();const m={id:Date.now().toString(),name:d,quality:100,releasedAt:Date.now(),popularityScore:1e3,totalEarnings:0};window.dispatchEvent(new CustomEvent("songReleased",{detail:{song:m,listenersGained:5e4,initialCash:1e4}})),s&&!t.unlockedCities.includes("izmir")&&s("izmir"),l("TEBRKLER! ark patlad! ZMR KLD AILDI! ","success"),e()}else ct(),l("ark tutmad... Biraz daha almalsn.","info");c(!1)},2e3)};return a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",children:a.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-red-500/30 rounded-3xl p-8 relative shadow-[0_0_50px_rgba(220,38,38,0.2)]",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/50 hover:text-white",children:""}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-[0_0_20px_rgba(220,38,38,0.6)] animate-pulse",children:a.jsx(vi,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter",children:"HIT MAKER"}),a.jsx("p",{className:"text-neutral-400 text-xs font-bold uppercase tracking-widest mt-2",children:"Profesyonel Kayt"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"text-[10px] font-bold text-neutral-500 uppercase block mb-2",children:"ARKI SM"}),a.jsx("input",{type:"text",value:d,onChange:v=>p(v.target.value),placeholder:"rn: Yalan Dnya",className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white text-sm focus:border-red-500 outline-none transition-colors"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 mb-6 border border-white/5",children:[a.jsxs("div",{className:"flex justify-between text-xs text-neutral-400 font-bold mb-2",children:[a.jsx("span",{children:"BAARI ANSI"}),a.jsxs("span",{children:["%",f]})]}),a.jsx("div",{className:"w-full h-2 bg-[#333] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-500 ${f>70?"bg-green-500":f>40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${f}%`}})}),a.jsx("p",{className:"text-[10px] text-neutral-500 mt-2 text-center",children:"Flow ve Lirik yeteneine gre hesaplanr."})]}),a.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-[10px] text-neutral-500 font-bold",children:"MALYET"}),a.jsxs("span",{className:"text-red-400 font-mono font-bold",children:["",o.toLocaleString()]})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-[10px] text-neutral-500 font-bold",children:"ENERJ"}),a.jsxs("span",{className:"text-yellow-400 font-mono font-bold",children:["-",u]})]})]}),a.jsx("button",{onClick:x,disabled:h,className:"w-full bg-white text-black font-black py-4 rounded-xl text-sm uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-lg flex items-center justify-center gap-2",children:h?"KAYIT ALINIYOR...":"KAYDA GR"})]})})},e3=({player:t,onClose:e,updateStat:n,onManagerHire:i,onCityUnlock:s,onOpenShop:r})=>{const{showToast:l,showConfirm:o}=rr(),u=f=>{const h=f==="local"?Ne.MANAGER_TIER_1:Ne.MANAGER_TIER_2,c=f==="local"?1:2;if(t.careerCash<h){ct(),r?r("currency"):l("Paran yetersiz!","error");return}Y(),o("MENAJERLK",f==="pro"?`nl Menajer ile ${h.toLocaleString()} karlnda anlamak istiyor musun?`:`Semt Abisi ile ${h.toLocaleString()} anlamak istiyor musun?`,()=>{n("careerCash",-h),i&&i(c,h),f==="pro"?(s&&s("istanbul"),l("ANLAMA SALANDI! STANBUL KLD AILDI! ","success")):l("Semt abisi arkanda. ler hzlanacak.","success"),e()})};return a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-md flex items-center justify-center p-6 animate-zoom-in font-sans",children:a.jsxs("div",{className:"w-full max-w-lg",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter mb-2",children:"MENAJERLK AJANSI"}),a.jsx("p",{className:"text-neutral-500 text-sm font-bold uppercase tracking-widest",children:"Kariyerini kim ynetecek?"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>u("local"),className:"bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 text-left hover:border-white/30 transition-all group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 grayscale group-hover:grayscale-0 transition-all text-4xl",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"SEMT ABS"}),a.jsx("div",{className:"text-xs text-neutral-400 mb-4 h-10",children:"Mahallede sz geer. Ufak ileri balar."}),a.jsxs("div",{className:"text-green-400 font-mono font-bold text-lg mb-2",children:["",Ne.MANAGER_TIER_1.toLocaleString()]}),a.jsx("div",{className:"text-[10px] bg-white/5 px-2 py-1 rounded inline-block text-neutral-500",children:"Tier 1  Yerel ler"})]}),a.jsxs("button",{onClick:()=>u("pro"),className:"bg-gradient-to-br from-purple-900/40 to-black border border-purple-500/50 rounded-2xl p-6 text-left hover:shadow-[0_0_30px_rgba(168,85,247,0.3)] transition-all group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-100 text-4xl group-hover:scale-110 transition-transform",children:""}),a.jsx("h3",{className:"text-xl font-black text-white mb-1 italic",children:"NL MENAJER"}),a.jsx("div",{className:"text-xs text-purple-200 mb-4 h-10",children:"Sektrn kurdu. stanbul kaplarn aar."}),a.jsxs("div",{className:"text-yellow-400 font-mono font-bold text-lg mb-2",children:["",Ne.MANAGER_TIER_2.toLocaleString()]}),a.jsx("div",{className:"text-[10px] bg-purple-500/20 border border-purple-500/30 px-2 py-1 rounded inline-block text-purple-300 font-bold animate-pulse",children:"Tier 2  STANBUL KLD"})]})]}),a.jsx("button",{onClick:e,className:"mt-8 text-neutral-500 text-xs font-bold uppercase tracking-widest hover:text-white w-full",children:"Vazge"})]})})},ur={eskisehir:{path:"M 100,400 L 140,390 L 150,420 L 110,440 L 90,420 Z",color:"#fbbf24",cx:120,cy:415,labelY:460},bursa:{path:"M 180,300 L 240,280 L 270,320 L 230,350 L 170,330 Z",color:"#22c55e",cx:220,cy:315,labelY:360},ankara:{path:"M 350,250 L 420,230 L 460,260 L 440,310 L 370,320 L 340,280 Z",color:"#ef4444",cx:400,cy:275,labelY:330},izmir:{path:"M 550,350 L 620,330 L 670,360 L 650,400 L 580,410 L 540,380 Z",color:"#00ccff",cx:605,cy:370,labelY:425},istanbul:{path:"M 420,100 L 480,40 L 540,60 L 560,110 L 520,150 L 440,140 Z",color:"#a855f7",cx:490,cy:100,labelY:160}},t3=[{from:"eskisehir",to:"bursa"},{from:"bursa",to:"ankara"},{from:"ankara",to:"izmir"},{from:"izmir",to:"istanbul"}],oN=({player:t,onSelectCity:e,onClose:n})=>{const[i,s]=w.useState(null),r=w.useRef(null);w.useEffect(()=>{const o=t.currentCity||"eskisehir";if(s(o),r.current){const u=ur[o],f=window.innerWidth<768,h=f?1.4:1,c=f?40:64,d=128,p=u.cx*h+c,x=u.cy*h+d,v=window.innerWidth,b=window.innerHeight;r.current.scrollTo({left:p-v/2,top:x-b/2,behavior:"smooth"})}},[]);const l=o=>{const u=t.unlockedCities.includes(o),f=Zd(o,t);u||f?(Y(),i===o&&u?(nn(),e(o)):s(o)):(ct(),s(o))};return a.jsxs("div",{className:"fixed inset-0 z-[200] bg-[#050505] flex flex-col overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1a1a1a_0%,_#000_100%)] pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] pointer-events-none"}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-6 flex justify-between items-start pointer-events-none bg-gradient-to-b from-black/90 to-transparent",children:[a.jsxs("div",{className:"pointer-events-auto max-w-[80%]",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white italic tracking-tighter mb-1 drop-shadow-[0_0_15px_rgba(255,255,255,0.5)] leading-tight",children:"KONSER HANG EHRDE VERECEKSN?"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_10px_#22c55e]"}),a.jsx("span",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-[0.3em]",children:"Uydu Balants"})]})]}),a.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur border border-white/20 text-white font-bold hover:bg-white/20 transition-all flex items-center justify-center pointer-events-auto shadow-lg",children:""})]}),a.jsx("div",{ref:r,className:"flex-1 overflow-auto relative custom-scrollbar touch-auto",children:a.jsx("div",{className:"relative min-w-[200vw] md:min-w-[130vw] min-h-[120vh] origin-top-left p-10 pt-32 pb-48 pl-16 transition-transform duration-300",children:a.jsxs("svg",{viewBox:"0 0 1000 600",className:"w-full h-full overflow-visible pointer-events-auto drop-shadow-2xl transform scale-[1.4] md:scale-100 origin-top-left",preserveAspectRatio:"xMidYMid slice",children:[a.jsx("defs",{children:a.jsxs("filter",{id:"neon-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[a.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),a.jsxs("feMerge",{children:[a.jsx("feMergeNode",{in:"coloredBlur"}),a.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),a.jsxs("g",{className:"opacity-30 pointer-events-none",children:[Array.from({length:20}).map((o,u)=>a.jsx("line",{x1:u*50,y1:0,x2:u*50,y2:600,stroke:"#333",strokeWidth:"1"},`v-${u}`)),Array.from({length:15}).map((o,u)=>a.jsx("line",{x1:0,y1:u*40,x2:1e3,y2:u*40,stroke:"#333",strokeWidth:"1"},`h-${u}`))]}),a.jsx("g",{children:t3.map((o,u)=>{const f=ur[o.from],h=ur[o.to],c=t.unlockedCities.includes(o.to);return a.jsx("path",{d:`M ${f.cx},${f.cy} L ${h.cx},${h.cy}`,stroke:c?h.color:"#333",strokeWidth:"4",strokeDasharray:"15,10",fill:"none",className:c?"animate-[dashFlow_2s_linear_infinite]":"",opacity:c?.8:.2},u)})}),Object.keys(ur).map((o,u)=>{const f=o,h=ur[f],c=t.unlockedCities.includes(f),d=i===f,p=t.currentCity===f,x=!c&&Zd(f,t);let v="rgba(20,20,20,0.9)",b="#444",m="3",g="",y=u%2===0?"animate-[float_6s_ease-in-out_infinite]":"animate-[float_8s_ease-in-out_infinite]";return p?(b="#fff",v=`${h.color}44`,g="url(#neon-glow)",m="6"):c?(b=h.color,v="rgba(20,20,20,0.95)",d&&(v=`${h.color}33`)):x&&(b=h.color,y="animate-[pulse_1.5s_infinite]",g="url(#neon-glow)"),a.jsxs("g",{onClick:_=>{_.stopPropagation(),l(f)},className:`cursor-pointer group transition-all duration-300 ${y}`,style:{animationDelay:`${u*.5}s`,transformOrigin:`${h.cx}px ${h.cy}px`},children:[d&&a.jsx("circle",{cx:h.cx,cy:h.cy,r:"80",fill:h.color,opacity:"0.2",filter:"url(#neon-glow)"}),a.jsx("path",{d:h.path,fill:v,stroke:b,strokeWidth:m,filter:g,className:"transition-all duration-300 group-hover:fill-white/10 group-active:scale-95"}),a.jsxs("g",{transform:`translate(${h.cx}, ${h.cy})`,children:[p&&a.jsxs("g",{children:[a.jsx("circle",{r:"15",fill:h.color,opacity:"0.3",className:"animate-ping"}),a.jsx("circle",{r:"6",fill:"#fff"})]}),!c&&!x&&a.jsx("text",{x:"-12",y:"8",fontSize:"24",fill:"#555",children:""}),a.jsxs("g",{transform:`translate(0, ${h.labelY-h.cy})`,className:"transition-all duration-300",children:[a.jsx("path",{d:"M -45,-12 L 35,-12 L 45,0 L 35,12 L -45,12 L -55,0 Z",fill:"#000",stroke:b,strokeWidth:"1.5",className:`${d?"fill-white/10":""}`}),a.jsx("text",{x:"-5",y:"4",textAnchor:"middle",fill:c||x?"white":"#777",fontSize:"10",fontWeight:"bold",fontFamily:"monospace",className:"uppercase tracking-widest pointer-events-none select-none",children:Vs[f].name})]})]})]},f)})]})})}),a.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-[250] bg-[#0a0a0a]/95 backdrop-blur-md border-t border-white/10 p-6 transition-transform duration-500 ease-[cubic-bezier(0.19,1,0.22,1)] ${i?"translate-y-0":"translate-y-full"}`,children:i&&(()=>{const o=Vs[i],u=t.unlockedCities.includes(i),f=!u&&Zd(i,t),h=t.currentCity===i,c=ur[i].color;let d="GEREKSNMLER KARILA",p=!0,x=a.jsx("span",{className:"text-red-500 font-bold border border-red-500/30 px-2 py-0.5 rounded text-[10px]",children:"KLTL"});return h?(d="BURADASIN",x=a.jsx("span",{className:"text-white font-bold bg-white/10 px-2 py-0.5 rounded text-[10px]",children:"MEVCUT KONUM"})):u?(d="SEYAHAT ET",p=!1,x=a.jsx("span",{className:"text-yellow-500 font-bold border border-yellow-500/30 px-2 py-0.5 rounded text-[10px]",children:"AIK"})):f&&(d="BLGEY A",p=!1,x=a.jsx("span",{className:"text-[#1ed760] font-bold border border-[#1ed760]/30 px-2 py-0.5 rounded text-[10px] animate-pulse",children:"AILABLR"})),a.jsxs("div",{className:"max-w-md mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h2",{className:"text-3xl font-black italic text-white uppercase tracking-tighter leading-none",style:{textShadow:`0 0 20px ${c}`},children:o.name}),x]}),a.jsxs("div",{className:"text-neutral-400 text-xs font-medium",children:[o.name," Blgesi Yeralt A"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-white font-black text-xl",children:["x",o.multiplier," ",a.jsx("span",{className:"text-[10px] font-medium text-neutral-500 uppercase",children:"Gelir"})]}),a.jsxs("div",{className:"text-red-400 font-bold text-xs",children:["-",o.weeklyCost.toLocaleString()," ",a.jsx("span",{className:"text-[9px] text-neutral-500",children:"/Hafta"})]})]})]}),!u&&!f&&a.jsxs("div",{className:"bg-red-900/10 border border-red-500/20 p-3 rounded-lg flex items-start gap-3",children:[a.jsx("div",{className:"text-xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-red-500 font-bold text-[10px] uppercase tracking-wider mb-0.5",children:"Gereksinim"}),a.jsx("div",{className:"text-neutral-300 text-xs",children:o.unlockRequirements.description})]})]}),a.jsx("button",{onClick:()=>!p&&e(i),disabled:p,className:`w-full py-4 rounded-xl font-black uppercase tracking-[0.2em] shadow-lg transition-all ${p?"bg-[#222] text-neutral-600 cursor-not-allowed border border-white/5":f?"bg-[#1ed760] text-black hover:scale-[1.02] animate-pulse":"bg-white text-black hover:scale-[1.02]"}`,children:d})]})})()}),a.jsx("style",{children:`
            @keyframes dashFlow {
                to { stroke-dashoffset: -25; }
            }
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-15px); }
            }
        `})]})},ub=[{id:"cloth_2",name:"ime Mont",price:45e3,category:"lifestyle",type:"appearance",subType:"clothing",index:2,rarity:"rare"},{id:"cloth_3",name:"Oduncu Gmlek",price:35e3,category:"lifestyle",type:"appearance",subType:"clothing",index:3,rarity:"common"},{id:"cloth_4",name:"Basket Formas",price:6e4,category:"lifestyle",type:"appearance",subType:"clothing",index:4,rarity:"epic"},{id:"cloth_5",name:"Deri Ceket",price:12e4,category:"lifestyle",type:"appearance",subType:"clothing",index:5,rarity:"legendary"},{id:"hat_2",name:"Bucket apka",price:15e3,category:"lifestyle",type:"appearance",subType:"hat",index:2,rarity:"common"},{id:"hat_3",name:"Pembe Toka",price:2500,category:"lifestyle",type:"appearance",subType:"hat",index:3,rarity:"common"},{id:"chain_2",name:"Kaln Zincir",price:4e4,category:"lifestyle",type:"appearance",subType:"chain",index:2,rarity:"rare"},{id:"chain_3",name:"Buzlu Zincir",price:15e4,category:"lifestyle",type:"appearance",subType:"chain",index:3,rarity:"legendary"},{id:"chain_4",name:"nci Kolye",price:8e4,category:"lifestyle",type:"appearance",subType:"chain",index:4,rarity:"epic"},{id:"chain_5",name:"Halat Zincir",price:6e4,category:"lifestyle",type:"appearance",subType:"chain",index:5,rarity:"rare"},{id:"head_2",name:"LVBEL C5",price:5e4,category:"lifestyle",type:"appearance",subType:"head",index:2,rarity:"epic"},{id:"head_3",name:"TRAP LORD",price:5e4,category:"lifestyle",type:"appearance",subType:"head",index:3,rarity:"epic"},{id:"head_4",name:"M0T1V3",price:65e3,category:"lifestyle",type:"appearance",subType:"head",index:4,rarity:"epic"},{id:"head_5",name:"K0L0",price:65e3,category:"lifestyle",type:"appearance",subType:"head",index:5,rarity:"epic"},{id:"head_6",name:"C3ZA",price:8e4,category:"lifestyle",type:"appearance",subType:"head",index:6,rarity:"legendary"},{id:"head_7",name:"SAGO K.",price:1e5,category:"lifestyle",type:"appearance",subType:"head",index:7,rarity:"legendary"}],n3=({player:t,updateMultipleStats:e,onBack:n,onOpenShop:i})=>{const[s,r]=w.useState("head"),[l,o]=w.useState(t.appearance),{showToast:u,showConfirm:f}=rr();w.useEffect(()=>{o(t.appearance)},[t.appearance]);const h=(b,m)=>ub.find(g=>g.subType===b&&g.index===m),c=(b,m)=>{var y;if(m<2&&b!=="head"&&b!=="hat"&&b!=="chain"||m<2&&b==="head"||m===0&&(b==="hat"||b==="chain")||m===1&&(b==="hat"||b==="chain"))return!0;const g=`${b}_${m}`;return((y=t.ownedUpgrades)==null?void 0:y[g])>0},d=b=>{const m=c("head",b.index);o(g=>({...g,headIndex:b.index})),Y(),m?e({appearance:{...t.appearance,headIndex:b.index}}):f("SATIN ALMA",`${b.name} kafasn ${b.price.toLocaleString()} karlnda satn almak istiyor musun?`,()=>{if(t.careerCash>=b.price){const g=`head_${b.index}`;e({careerCash:-b.price,ownedUpgrades:{...t.ownedUpgrades,[g]:1},appearance:{...t.appearance,headIndex:b.index}}),nn(),u(`${b.name} satn alnd!`,"success")}else ct(),i("currency")})},p=(b,m,g)=>{Y(),o(y=>{const E=(y[b]+g+m)%m;return{...y,[b]:E}})},x=b=>{const m=b==="clothing"?"clothingStyle":b==="head"?"headIndex":`${b}Index`,g=l[m],y=h(b,g);c(b,g)?(e({appearance:l}),u("Stil gncellendi!","success")):y&&f("SATIN ALMA",`${y.name} rnn ${y.price.toLocaleString()} karlnda almak istiyor musun?`,()=>{if(t.careerCash>=y.price){const E=`${b}_${g}`;e({careerCash:-y.price,ownedUpgrades:{...t.ownedUpgrades,[E]:1},appearance:l}),u(`${y.name} satn alnd!`,"success"),nn()}else i("currency")})},v=(b,m,g,y)=>{const _=l[m],E=h(y,_),S=c(y,_),N=E?E.name:y==="clothing"?gl[_]:y==="hat"?pl[_]:ml[_];return a.jsxs("div",{className:"bg-[#181818] p-3 rounded-xl border border-white/5 mb-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-[10px] text-neutral-500 font-bold uppercase tracking-wider",children:b}),E&&!S&&a.jsxs("span",{className:"text-yellow-400 text-xs font-mono font-bold",children:["",E.price.toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("button",{onClick:()=>p(m,g,-1),className:"w-8 h-8 rounded-full bg-white/5 text-white flex items-center justify-center hover:bg-white/20 active:scale-95",children:""}),a.jsx("div",{className:"flex-1 text-center",children:a.jsx("span",{className:`text-xs font-bold uppercase ${E&&!S?"text-neutral-300":"text-white"}`,children:N})}),a.jsx("button",{onClick:()=>p(m,g,1),className:"w-8 h-8 rounded-full bg-white/5 text-white flex items-center justify-center hover:bg-white/20 active:scale-95",children:""})]}),a.jsx("button",{onClick:()=>x(y),className:`w-full mt-3 py-2 rounded-lg font-black text-[10px] uppercase tracking-widest transition-all ${S?"bg-white/10 text-white hover:bg-white/20":"bg-[#1ed760] text-black hover:scale-[1.01] shadow-lg shadow-green-900/20"}`,children:S?"GYLD":"SATIN AL"})]})};return a.jsxs("div",{className:"h-full bg-[#050505] flex flex-col relative font-sans animate-fade-in overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 pt-safe-top mt-4 px-6 flex justify-between items-start pointer-events-none",children:[a.jsx("button",{onClick:()=>{Y(),n()},className:"w-10 h-10 rounded-full bg-black/50 backdrop-blur border border-white/10 text-white flex items-center justify-center pointer-events-auto active:scale-95 transition-transform",children:""}),a.jsxs("div",{className:"flex flex-col items-end pointer-events-auto",children:[a.jsx("div",{className:"text-xs text-neutral-400 font-bold uppercase tracking-widest",children:"BAKYE"}),a.jsxs("div",{className:"text-[#1ed760] font-mono font-bold text-xl",children:["",t.careerCash.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s==="head"&&a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pt-24 pb-32",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter",children:"PREMIUM KAFALAR"}),a.jsx("p",{className:"text-neutral-500 text-xs font-bold uppercase tracking-widest",children:"Karakterine efsane bir tarz kat"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:ub.filter(b=>b.subType==="head").map(b=>{const m=c("head",b.index),g=t.appearance.headIndex===b.index;return a.jsxs("button",{onClick:()=>d(b),className:`relative group overflow-hidden rounded-3xl border transition-all duration-300 flex flex-col ${g?"border-[#1ed760] bg-[#1ed760]/10 shadow-[0_0_20px_rgba(30,215,96,0.2)]":"border-white/10 bg-[#121212] hover:border-white/30"}`,children:[a.jsxs("div",{className:"aspect-[4/5] relative p-2 flex items-center justify-center w-full bg-gradient-to-b from-white/5 to-transparent",children:[a.jsx("div",{className:`absolute inset-0 opacity-20 bg-gradient-to-tr ${b.rarity==="legendary"?"from-yellow-600 to-red-600":"from-purple-600 to-blue-600"}`}),a.jsx("img",{src:kt[b.index],className:"w-full h-full object-contain filter drop-shadow-xl relative z-10 transition-transform group-hover:scale-105"}),a.jsx("div",{className:`absolute top-3 right-3 text-[7px] font-black uppercase px-2 py-1 rounded-full border shadow-sm ${b.rarity==="legendary"?"bg-yellow-500 text-black border-yellow-300":"bg-purple-600 text-white border-purple-400"}`,children:b.rarity})]}),a.jsxs("div",{className:"p-4 w-full bg-black/60 backdrop-blur-md border-t border-white/5 flex flex-col items-center",children:[a.jsx("div",{className:"text-white font-black text-sm italic uppercase tracking-wider mb-2 text-center truncate",children:b.name}),m?a.jsx("div",{className:`text-center font-bold text-[10px] uppercase tracking-widest px-3 py-1.5 rounded-lg w-full ${g?"bg-[#1ed760] text-black":"bg-white/10 text-neutral-400"}`,children:g?"GYLD":"SAHPSN"}):a.jsxs("div",{className:"text-center font-mono font-bold text-sm text-yellow-400 border border-yellow-500/30 bg-yellow-500/10 px-3 py-1.5 rounded-lg w-full",children:["",b.price.toLocaleString()]})]})]},b.id)})})]}),s==="gear"&&a.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[a.jsxs("div",{className:"h-[40vh] shrink-0 relative flex items-center justify-center bg-gradient-to-b from-[#111] via-[#050505] to-[#0a0a0a]",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-[150px] h-[300px] bg-blue-500/10 blur-[60px] pointer-events-none"}),a.jsx("div",{className:"absolute top-0 right-1/4 w-[150px] h-[300px] bg-purple-500/10 blur-[60px] pointer-events-none"}),a.jsx("div",{className:"relative z-10 transform scale-90 translate-y-4",children:a.jsx(Xl,{appearance:l,gender:t.gender,size:280})})]}),a.jsx("div",{className:"flex-1 bg-[#0a0a0a] border-t border-white/10 p-4 overflow-y-auto custom-scrollbar z-40 relative shadow-[0_-10px_40px_rgba(0,0,0,0.8)] pb-24",children:a.jsxs("div",{className:"grid grid-cols-1 gap-2 pb-4",children:[v("KIYAFET","clothingStyle",gl.length,"clothing"),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v("APKA","hatIndex",pl.length,"hat"),v("ZNCR","chainIndex",ml.length,"chain")]}),a.jsx("div",{className:"h-12"})]})})]})]}),a.jsxs("div",{className:"bg-black border-t border-white/10 p-2 pb-safe flex justify-center gap-4 z-50 fixed bottom-0 left-0 right-0",children:[a.jsx("button",{onClick:()=>{Y(),r("head")},className:`px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${s==="head"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"KAFALAR"}),a.jsx("button",{onClick:()=>{Y(),r("gear")},className:`px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${s==="gear"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"TARZ"})]})]})},gf=({title:t,subtitle:e,description:n,icon:i,bgIcon:s,accentColor:r,badge:l,onClick:o})=>a.jsxs("button",{onClick:o,className:"w-full group relative h-36 rounded-2xl overflow-hidden text-left transition-all duration-300 active:scale-[0.96] mb-4 border border-white/5 shadow-lg",children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{background:`linear-gradient(90deg, #050505 0%, #050505 30%, ${r}25 100%)`}}),a.jsx("div",{className:"absolute right-6 bottom-[-20px] opacity-[0.05] transform rotate-[10deg] scale-[2.8] z-10 transition-transform duration-700 group-hover:scale-[3.2] group-hover:rotate-[5deg]",children:s}),a.jsxs("div",{className:"relative z-30 p-5 flex flex-col justify-between h-full",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-inner relative overflow-hidden shrink-0 border border-white/10",style:{background:"linear-gradient(135deg, #222 0%, #0a0a0a 100%)"},children:a.jsx("div",{style:{color:r},children:pa.cloneElement(i,{className:"w-7 h-7 filter drop-shadow-md"})})}),a.jsxs("div",{className:"min-w-0",children:[l&&a.jsx("div",{className:"flex mb-1",children:a.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.25em] px-2 py-0.5 rounded-full border",style:{backgroundColor:`${r}10`,borderColor:`${r}30`,color:r},children:l})}),a.jsx("h2",{className:"text-xl font-black text-white italic tracking-tighter uppercase leading-none mb-1",children:t}),a.jsx("p",{className:"text-neutral-500 text-[9px] font-bold uppercase tracking-[0.15em] group-hover:text-white transition-colors",children:e})]})]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:shadow-[0_0_25px_rgba(255,255,255,0.3)]",children:a.jsx(vn,{className:"w-3 h-3 text-white group-hover:text-black transition-colors ml-0.5"})})]}),a.jsx("p",{className:"text-neutral-400 text-[10px] font-medium leading-relaxed max-w-[85%] line-clamp-2 mt-1",children:n})]})]}),i3=({player:t,onStartSetup:e,onExit:n,updateStat:i,updateMultipleStats:s,onEditCharacter:r,onOpenShop:l})=>{var P;const[o,u]=w.useState(!1),[f,h]=w.useState("hub"),[c,d]=w.useState(!1),[p,x]=w.useState(!1),[v,b]=w.useState(!1),[m,g]=w.useState("none"),y=((P=t.ownedUpgrades)==null?void 0:P.verified_badge)>0;w.useEffect(()=>{u(!0),localStorage.getItem("flowify_career_intro_seen")||d(!0)},[]);const _=()=>{Y(),localStorage.setItem("flowify_career_intro_seen","true"),d(!1)},E=(R,I="info")=>{window.dispatchEvent(new CustomEvent("flowify-notify",{detail:{message:R,type:I}}))},S=R=>{Y(),h(R)},N=R=>{l?l(R):console.warn("IAP Store not connected via props")},A=(R,I)=>{s({careerCash:-I,inventory:{...t.inventory,vehicles:[...t.inventory.vehicles,R]}})},T=R=>{t.unlockedCities.includes(R)||s({unlockedCities:[...t.unlockedCities,R]})},k=R=>{s({currentCity:R}),g("none")},C=()=>{s({career:{...t.career,hasHitSong:!0}})},L=(R,I)=>{s({career:{...t.career,managerTier:R}})},D=R=>{if(Y(),t.energy<Ne.COST.TRAINING){N("energy");return}if(t.careerCash<Ne.TRAINING_PRICE){N("currency");return}s({energy:-20,careerCash:-2500,[R]:1}),E("Antrenman tamamland! Yeteneklerin geliti.","success")},B=R=>{Y();const I=Ne.TRAINING_PRICE;if(t.energy<Ne.COST.RELATIONSHIP){N("energy");return}if(t.careerCash<I){N("currency");return}if(t[R]>=100){E("likin zaten mkemmel!","info");return}s({energy:-20,careerCash:-I,[R]:5}),E("likiler dzeliyor...","success")},$=({label:R,val:I,colorClass:M})=>a.jsxs("div",{className:"bg-[#111] border border-white/5 rounded-lg p-2 flex flex-col items-center justify-center",children:[a.jsx("div",{className:`text-sm font-black ${M}`,children:I}),a.jsx("div",{className:"text-[7px] text-neutral-500 uppercase font-bold tracking-wider",children:R})]}),O=({label:R,val:I})=>a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex justify-between items-end mb-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-neutral-400 uppercase",children:R}),a.jsxs("span",{className:`text-[8px] font-bold ${I<30?"text-red-500":"text-white"}`,children:[I,"%"]})]}),a.jsx("div",{className:"h-1 bg-[#222] rounded-full overflow-hidden w-full",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${I<30?"bg-red-500":I<70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,I)}%`}})})]}),H=({title:R,subtitle:I,icon:M,action:z,cost:V,energyCost:Z,color:X})=>a.jsxs("button",{onClick:z,className:"w-full flex items-center gap-4 p-3 bg-[#1a1a1a] hover:bg-[#252525] border border-white/5 rounded-xl group transition-all active:scale-[0.98] shadow-sm relative overflow-hidden",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg shadow-lg shrink-0 ${X}`,children:M}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsx("div",{className:"text-white font-bold text-xs truncate group-hover:text-[#1ed760] transition-colors",children:R}),a.jsx("div",{className:"text-[9px] text-neutral-400 font-medium truncate",children:I})]}),a.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[a.jsxs("div",{className:"text-[9px] font-bold bg-black/40 px-2 py-0.5 rounded text-red-400 whitespace-nowrap border border-white/5",children:["-",Z," Enerji"]}),a.jsx("div",{className:"text-[9px] font-bold bg-black/40 px-2 py-0.5 rounded text-yellow-400 whitespace-nowrap border border-white/5",children:V})]})]});if(f==="battlebet")return a.jsx(rN,{player:t,updateStat:i,onExit:()=>h("casino_menu"),cashType:"careerCash"});if(f==="blackjack")return a.jsx(aN,{player:t,updateStat:i,onExit:()=>h("casino_menu"),cashType:"careerCash"});if(f==="zeppelin")return a.jsx(lN,{player:t,updateStat:i,onExit:()=>h("casino_menu"),cashType:"careerCash"});if(f==="casino_menu")return a.jsxs("div",{className:"h-full bg-[#050505] relative flex flex-col",children:[a.jsxs("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[100vw] h-[100vw] bg-green-900/10 rounded-full blur-[180px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[80vw] h-[80vw] bg-emerald-900/10 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"px-6 mb-4 relative z-30 shrink-0 pt-24 pb-4 border-b border-white/5 bg-gradient-to-b from-black via-black/95 to-transparent",children:[a.jsx("div",{className:"absolute top-6 left-6 z-50",children:a.jsx("button",{onClick:()=>h("hub"),className:"bg-[#222] text-white w-10 h-10 rounded-full flex items-center justify-center border border-white/10 hover:bg-[#333] transition-colors",children:""})}),a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse bg-emerald-500 shadow-[0_0_10px_#10b981]"}),a.jsx("span",{className:"text-[9px] font-black text-neutral-500 uppercase tracking-[0.5em]",children:"HIGH STAKES ONLY"})]}),a.jsx("h1",{className:"text-5xl font-black italic tracking-tighter uppercase text-white leading-none",children:"GECE HAYATI"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 relative z-20 pb-32 pt-2 custom-scrollbar",children:[a.jsx(gf,{title:"BATTLE BET",subtitle:"DELLO TAHMN",description:"ki underground MC kapr, sen kazanan tahmin edersin. Oranlar takip et, doru tarafa oyna.",accentColor:"#f97316",badge:"POPLER",icon:a.jsx(ku,{}),bgIcon:a.jsx("div",{className:"text-[120px] font-black italic text-white/5 select-none -rotate-12",children:"VS"}),onClick:()=>{Y(),h("battlebet")}}),a.jsx(gf,{title:"ZEPPELIN",subtitle:"CRASH OYUNU",description:"arpan ykselirken, patlamadan nce paran ek. Ne kadar yksee karsan o kadar ok kazanrsn.",accentColor:"#3b82f6",badge:"YEN",icon:a.jsx(fa,{}),bgIcon:a.jsx(fa,{className:"w-32 h-32"}),onClick:()=>{Y(),h("zeppelin")}}),a.jsx(gf,{title:"BLACKJACK",subtitle:"KASAYA KARI",description:"Klasik 21 oyunu rap tarzyla yenilendi. Kartlar ek, 21'e yakla ve kasay batr.",accentColor:"#00ff95",badge:"CASINO",icon:a.jsx(Tu,{}),bgIcon:a.jsx(Tu,{className:"w-32 h-32"}),onClick:()=>{Y(),h("blackjack")}})]})]});if(f==="shop")return a.jsx(n3,{player:t,updateMultipleStats:s,onBack:()=>S("hub"),onOpenShop:N});const Q=Vs[t.currentCity||"eskisehir"];return a.jsxs("div",{className:`h-full bg-[#090909] flex flex-col relative overflow-hidden font-sans ${o?"animate-slide-in-left":"opacity-0"}`,children:[p&&a.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-xl flex flex-col animate-slide-in-up",children:[a.jsxs("div",{className:"p-6 pt-12 flex justify-between items-center border-b border-white/10",children:[a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter",children:"ANTRENMAN & GELM"}),a.jsx("button",{onClick:()=>x(!1),className:"bg-white/10 w-10 h-10 rounded-full text-white font-bold",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsx("h3",{className:"text-xs text-neutral-500 font-bold uppercase tracking-widest",children:"Kiisel Geliim"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx(H,{title:"Stdyo Antrenman",subtitle:"+1 Flow Yetenei",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.TRAINING,color:"text-blue-400 bg-blue-500/10",action:()=>D("flow"),delay:0}),a.jsx(H,{title:"Kitap Oku",subtitle:"+1 Lirik Yetenei",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.TRAINING,color:"text-green-400 bg-green-500/10",action:()=>D("lyrics"),delay:50}),a.jsx(H,{title:"Stil Danman",subtitle:"+1 Karizma (Swag)",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.TRAINING,color:"text-purple-400 bg-purple-500/10",action:()=>D("charisma"),delay:100})]}),a.jsx("h3",{className:"text-xs text-neutral-500 font-bold uppercase tracking-widest mt-6",children:"Sosyal likiler"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx(H,{title:"Menajer Toplants",subtitle:"+5 Menajer likisi",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.RELATIONSHIP,color:"text-blue-400 bg-blue-500/10",action:()=>B("rel_manager"),delay:150}),a.jsx(H,{title:"Ekip Yemei",subtitle:"+5 Ekip likisi",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.RELATIONSHIP,color:"text-purple-400 bg-purple-500/10",action:()=>B("rel_team"),delay:200}),a.jsx(H,{title:"Fan Bulumas",subtitle:"+5 Fan likisi",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.RELATIONSHIP,color:"text-red-400 bg-red-500/10",action:()=>B("rel_fans"),delay:250}),a.jsx(H,{title:"Romantik Yemek",subtitle:"+5 Ak (Partner likisi)",icon:"",cost:`-${Ne.TRAINING_PRICE}`,energyCost:Ne.COST.RELATIONSHIP,color:"text-pink-400 bg-pink-500/10",action:()=>B("rel_partner"),delay:300})]})]})]}),c&&a.jsx(qI,{onClose:_}),m==="market"&&a.jsx(XI,{player:t,onClose:()=>g("none"),updateStat:i,onVehicleBuy:A,onCityUnlock:T,onOpenShop:N}),m==="studio"&&a.jsx(JI,{player:t,onClose:()=>g("none"),updateStat:i,onHitSong:C,onCityUnlock:T,onOpenShop:N}),m==="agency"&&a.jsx(e3,{player:t,onClose:()=>g("none"),updateStat:i,onManagerHire:L,onCityUnlock:T,onOpenShop:N}),m==="map"&&a.jsx(oN,{player:t,onSelectCity:k,onClose:()=>g("none")}),a.jsxs("div",{className:"relative bg-black pt-safe-top overflow-hidden border-b border-white/10 shrink-0 min-h-[160px] md:min-h-[220px] flex flex-col justify-between shadow-2xl z-20",children:[a.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden",children:[a.jsx("div",{className:"absolute -right-8 -top-6 opacity-60 grayscale-[30%] animate-[breathe_6s_ease-in-out_infinite]",children:a.jsx(Xl,{appearance:t.appearance,gender:t.gender,size:300})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#090909] via-[#090909]/80 to-transparent"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#090909] via-transparent to-transparent"})]}),a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center relative z-20",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{Y(),n()},className:"bg-black/40 backdrop-blur text-white p-2 rounded-full hover:bg-white/10 transition-colors border border-white/10",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:()=>{Y(),r&&r()},className:"bg-black/40 backdrop-blur text-white px-6 py-2 rounded-full hover:bg-white/10 transition-colors border border-white/10 font-black text-[9px] uppercase tracking-widest flex items-center justify-center",children:"DZENLE"})]}),a.jsxs("button",{onClick:()=>N("vip"),className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-yellow-800 border border-yellow-500/50 px-3 py-1.5 rounded-full shadow-[0_0_15px_rgba(234,179,8,0.4)] animate-shimmer hover:scale-105 transition-transform bg-[length:200%_auto]",children:[a.jsx(iN,{className:"w-3 h-3 text-white"}),a.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"PREMIUM"}),a.jsx("span",{className:"bg-red-600 text-white text-[8px] font-bold px-1 rounded ml-1",children:"SALE"})]})]}),a.jsxs("div",{className:`px-6 pb-6 relative z-10 w-full opacity-0 ${o?"animate-[slideInRight_0.6s_ease-out_forwards]":""}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y&&a.jsx("div",{className:"bg-blue-500 rounded-full p-0.5",title:"Dorulanm Sanat",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"white",className:"w-3 h-3",children:a.jsx("path",{d:"M9 12L11 14L15 10",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("span",{className:`text-[9px] font-bold tracking-widest uppercase drop-shadow-md ${y?"text-white":"text-neutral-400"}`,children:y?"Dorulanm Sanat":"Sanat"})]}),a.jsx("h1",{className:"text-3xl xs:text-4xl md:text-5xl font-black text-white italic tracking-tighter leading-none mb-2 drop-shadow-lg select-none transition-transform origin-left",children:t.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.jsxs("span",{className:"bg-white/10 px-2 py-0.5 rounded text-[9px] xs:text-[10px] font-bold text-white border border-white/5 backdrop-blur-md",children:["Hafta ",t.week]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:"text-green-400 font-mono font-bold text-xs flex items-center bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20 backdrop-blur-md",children:["",t.careerCash.toLocaleString()]}),a.jsxs("div",{className:"bg-blue-900/50 border border-blue-500/30 text-blue-300 px-1.5 py-0.5 rounded text-[8px] font-black uppercase tracking-widest flex items-center gap-1 backdrop-blur-md ml-1",children:[a.jsx("span",{children:""}),a.jsx("span",{children:Q.name})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"bg-black/60 p-2 rounded-lg border border-white/10 backdrop-blur-md flex-1 max-w-[180px]",children:[a.jsxs("div",{className:"flex justify-between items-center text-[8px] font-bold text-neutral-400 mb-1 uppercase tracking-wider",children:[a.jsx("span",{children:"Enerji"}),a.jsxs("span",{className:t.energy<20?"text-red-500":"text-white",children:[Math.floor(t.energy)," / ",t.maxEnergy]})]}),a.jsx("div",{className:"flex gap-1",children:[...Array(20)].map((R,I)=>a.jsx("div",{className:`h-1 flex-1 rounded-full transition-all duration-300 ${I<Math.floor(t.energy/5)?t.energy<20?"bg-red-500":"bg-[#1ed760]":"bg-[#333]"}`},I))})]})})]})]}),a.jsx("div",{className:`px-6 mt-4 mb-2 opacity-0 ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"200ms"},children:a.jsxs("button",{onClick:()=>{Y(),e()},className:"w-full bg-[#1ed760] text-black font-black py-4 rounded-full uppercase tracking-widest text-sm hover:scale-[1.02] active:scale-95 transition-all shadow-[0_0_25px_rgba(30,215,96,0.3)] flex items-center justify-center gap-2 border-2 border-[#1ed760]",children:[a.jsx(vi,{className:"w-5 h-5"}),"KONSER VER (-",Ne.COST.CONCERT," Enerji)"]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 pb-12",children:[a.jsxs("div",{className:`opacity-0 ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"250ms"},children:[a.jsxs("button",{onClick:()=>{Y(),b(!v)},className:`flex items-center justify-between w-full mb-3 p-3 rounded-xl border transition-all duration-300 group ${v?"bg-white/10 border-white/20":"bg-[#1a1a1a] border-white/5 hover:border-white/10"}`,children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest ml-1",children:"STATSTKLER"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-neutral-500 uppercase tracking-wider group-hover:text-white transition-colors",children:v?"GZLE":"GSTER"}),a.jsx("div",{className:`transform transition-transform duration-300 text-neutral-400 ${v?"rotate-180 text-white":""}`,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),v&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 animate-fade-in",children:[a.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5",children:[a.jsx("div",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 tracking-wider text-center",children:"YETENEKLER"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx($,{label:"Flow",val:t.flow,colorClass:"text-blue-400"}),a.jsx($,{label:"Lirik",val:t.lyrics,colorClass:"text-green-400"}),a.jsx($,{label:"Ritim",val:t.rhythm,colorClass:"text-yellow-400"}),a.jsx($,{label:"Swag",val:t.charisma,colorClass:"text-purple-400"})]})]}),a.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/5 flex flex-col justify-between",children:[a.jsx("div",{className:"text-[8px] text-neutral-500 font-bold uppercase mb-2 tracking-wider text-center",children:"LKLER"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(O,{label:"Menajer",val:t.rel_manager}),a.jsx(O,{label:"Ekip",val:t.rel_team}),a.jsx(O,{label:"Fanlar",val:t.rel_fans}),a.jsx(O,{label:"Ak",val:t.rel_partner})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-white font-bold text-xs uppercase tracking-widest mb-3 opacity-60 ml-1 opacity-0 ${o?"animate-fade-in":""}`,style:{animationDelay:"400ms"},children:"Kariyer Ynetimi"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsxs("button",{onClick:()=>{Y(),g("market")},className:`w-full bg-[#d97706] border border-yellow-500 text-white p-2 rounded-full flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all opacity-0 shadow-lg ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"420ms"},children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-black flex items-center justify-center font-black text-2xl text-[#ffef00] shrink-0 border-2 border-yellow-500/20",children:"S"}),a.jsxs("div",{className:"text-left flex-1 min-w-0 pr-2",children:[a.jsx("div",{className:"text-white font-black text-xs uppercase tracking-tight",children:"Sahisinden"}),a.jsx("div",{className:"text-white/80 text-[9px] font-bold truncate",children:"Araba Al-Sat"})]})]}),a.jsxs("button",{onClick:()=>{Y(),g("studio")},className:`w-full bg-[#dc2626] border border-red-500 text-white p-2 rounded-full flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all opacity-0 shadow-lg ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"440ms"},children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-black/20 flex items-center justify-center text-xl text-white shrink-0 border-2 border-red-500/20",children:""}),a.jsxs("div",{className:"text-left flex-1 min-w-0 pr-2",children:[a.jsx("div",{className:"text-white font-black text-xs uppercase tracking-tight",children:"Stdyo"}),a.jsx("div",{className:"text-white/80 text-[9px] font-bold truncate",children:"Hit ark Yap"})]})]}),a.jsxs("button",{onClick:()=>{Y(),g("agency")},className:`w-full bg-[#2563eb] border border-blue-500 text-white p-2 rounded-full flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all opacity-0 shadow-lg ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"460ms"},children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-black/20 flex items-center justify-center text-xl text-white shrink-0 border-2 border-blue-500/20",children:""}),a.jsxs("div",{className:"text-left flex-1 min-w-0 pr-2",children:[a.jsx("div",{className:"text-white font-black text-xs uppercase tracking-tight",children:"Menajerlik"}),a.jsx("div",{className:"text-white/80 text-[9px] font-bold truncate",children:" Bala"})]})]}),a.jsxs("button",{onClick:()=>{Y(),g("map")},className:`w-full bg-[#9333ea] border border-purple-500 text-white p-2 rounded-full flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all opacity-0 shadow-lg ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"480ms"},children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-black/20 flex items-center justify-center text-xl text-white shrink-0 border-2 border-purple-500/20",children:""}),a.jsxs("div",{className:"text-left flex-1 min-w-0 pr-2",children:[a.jsx("div",{className:"text-white font-black text-xs uppercase tracking-tight",children:"Turne"}),a.jsx("div",{className:"text-white/80 text-[9px] font-bold truncate",children:"ehir Gez"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-white font-bold text-xs uppercase tracking-widest mb-3 opacity-60 ml-1 opacity-0 ${o?"animate-fade-in":""}`,style:{animationDelay:"550ms"},children:"Yaam Tarz"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsxs("button",{onClick:()=>S("shop"),className:`w-full bg-[#a21caf] border border-fuchsia-500 p-4 rounded-2xl flex flex-col items-center justify-center gap-2 group hover:brightness-110 transition-all shadow-lg opacity-0 active:scale-95 ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"600ms"},children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-black/20 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform",children:""}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-black text-white text-[12px] tracking-wide uppercase",children:"STL"}),a.jsx("div",{className:"text-[8px] text-white/80 font-bold uppercase tracking-wider",children:"majn Yenile"})]})]}),a.jsxs("button",{onClick:()=>S("casino_menu"),className:`w-full bg-[#166534] border border-green-500 p-4 rounded-2xl flex flex-col items-center justify-center gap-2 group hover:brightness-110 transition-all shadow-lg opacity-0 active:scale-95 ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"650ms"},children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-black/20 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform text-green-400",children:""}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-black text-white text-[12px] tracking-wide uppercase",children:"GECE HAYATI"}),a.jsx("div",{className:"text-[8px] text-white/80 font-bold uppercase tracking-wider",children:"Paran Katla"})]})]})]}),a.jsxs("button",{onClick:()=>x(!0),className:`w-full py-4 bg-[#1e3a8a] border border-blue-500/50 text-white rounded-2xl flex items-center justify-center gap-3 font-bold text-sm hover:scale-[1.01] active:scale-95 transition-all group opacity-0 shadow-lg ${o?"animate-[slideUp_0.5s_ease-out_forwards]":""}`,style:{animationDelay:"700ms"},children:[a.jsx("span",{className:"text-blue-300",children:""}),a.jsx("span",{className:"uppercase tracking-widest text-white",children:"ANTRENMAN VE GELM"})]})]})]}),a.jsx("style",{children:`
            @keyframes breathe {
                0%, 100% { transform: scale(1.0) translateY(0); }
                50% { transform: scale(1.02) translateY(-2px); }
            }
            @keyframes slideUp {
                from { transform: translateY(20px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            @keyframes slideInRight {
                from { transform: translateX(20px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes shimmer {
                0% { background-position: 200% center; }
                100% { background-position: -200% center; }
            }
            .animate-shimmer {
                background: linear-gradient(90deg, #ca8a04 0%, #facc15 50%, #ca8a04 100%);
                background-size: 200% auto;
                animation: shimmer 3s linear infinite;
            }
        `})]})},s3=({player:t,onComplete:e,onBack:n})=>{const[i,s]=w.useState(""),[r,l]=w.useState([]),[o,u]=w.useState([]),[f,h]=w.useState(!1),[c,d]=w.useState("hits");w.useEffect(()=>{x()},[]);const p=(_,E="info")=>{window.dispatchEvent(new CustomEvent("flowify-notify",{detail:{message:_,type:E}}))},x=async()=>{h(!0);let _=[];if(t.favoriteSong)try{_=await ca(t.favoriteSong.artistName)}catch{console.warn("Anthem search failed, falling back to hits."),_=await oa()}else _=await oa();const E=Array.from(new Map(_.map(S=>[S.trackId,S])).values()).slice(0,12);l(E),h(!1)},v=async()=>{if(Y(),!i.trim())return;h(!0);const _=await ca(i);l(_),h(!1),d("search")},b=_=>{if(Y(),o.find(S=>S.trackId===_.trackId))u(S=>S.filter(N=>N.trackId!==_.trackId));else{if(o.length>=5){p("Maksimum 5 para seebilirsin!","error"),ct();return}u(S=>[...S,_])}},m=()=>{Y(),n()},g=()=>{Y(),o.length>0?e(o):(p("En az 1 ark semelisin!","error"),ct())},y=_=>o.some(E=>E.trackId===_);return a.jsxs("div",{className:"h-full bg-[#050505] flex flex-col relative overflow-hidden font-sans animate-slide-in-right",children:[a.jsxs("div",{className:"pt-safe-top mt-8 px-6 pb-4 bg-black/80 backdrop-blur-md border-b border-white/10 z-20 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-black text-white italic tracking-tighter",children:"DJ SET-UP"}),a.jsxs("p",{className:"text-xs text-neutral-500 font-bold uppercase tracking-wider",children:["Setlistini Olutur (",o.length,"/5)"]})]}),a.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-full flex items-center justify-center border border-purple-500/50",children:a.jsx(Gi,{className:"w-6 h-6 text-purple-400 animate-spin-slow"})})]}),a.jsxs("div",{className:"px-6 py-4 z-10",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:_=>s(_.target.value),placeholder:"Para ara...",className:"flex-1 bg-[#1a1a1a] border border-white/10 rounded-xl px-4 py-3 text-white text-sm focus:border-purple-500 focus:outline-none transition-colors"}),a.jsx("button",{onClick:v,className:"bg-white text-black font-bold px-4 rounded-xl text-xs uppercase tracking-wide hover:bg-neutral-200",children:"Ara"})]}),t.favoriteSong&&c==="hits"&&a.jsxs("div",{className:"mt-2 text-[10px] text-[#1ed760] font-bold uppercase tracking-wider animate-pulse",children:[" ",t.favoriteSong.artistName," tarz neriliyor"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-32",children:f?a.jsx("div",{className:"flex items-center justify-center h-40",children:a.jsx("div",{className:"w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.map(_=>a.jsxs("button",{onClick:()=>b(_),className:`relative aspect-square rounded-2xl overflow-hidden group transition-all duration-300 ${y(_.trackId)?"ring-4 ring-[#1ed760] scale-95":"hover:scale-[1.02]"}`,children:[a.jsx("img",{src:_.artworkUrl100,className:"w-full h-full object-cover",loading:"lazy"}),a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-3",children:[a.jsx("div",{className:"text-white font-bold text-xs truncate leading-tight",children:_.trackName}),a.jsx("div",{className:"text-neutral-400 text-[10px] truncate",children:_.artistName})]}),y(_.trackId)&&a.jsx("div",{className:"absolute inset-0 bg-[#1ed760]/20 flex items-center justify-center backdrop-blur-[2px]",children:a.jsx("div",{className:"w-10 h-10 bg-[#1ed760] rounded-full flex items-center justify-center shadow-lg",children:a.jsx(ud,{className:"w-6 h-6 text-black"})})})]},_.trackId))})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/95 to-transparent z-30 pb-safe",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:m,className:"flex-1 py-4 bg-[#1a1a1a] text-white font-bold rounded-xl border border-white/10 uppercase tracking-widest text-xs",children:"Geri"}),a.jsxs("button",{onClick:g,disabled:o.length===0,className:`flex-[2] py-4 font-black rounded-xl uppercase tracking-widest text-xs shadow-lg transition-all ${o.length>0?"bg-[#1ed760] text-black hover:scale-[1.02]":"bg-neutral-800 text-neutral-500"}`,children:["SAHNEYE IK (",o.length,")"]})]})})]})},db=["Kulp","Sahne","Arena","Salon","Teras","Stadyum","Park","Meydan","Bar","Hangar"],fb=["Yeralt","Elit","Merkez","Cadde","Yldz","Liman","Kule","Vadi","Sokak","Rhtm"],r3=({player:t,onConfirm:e,onBack:n})=>{const[i,s]=w.useState([]),[r,l]=w.useState(null),[o,u]=w.useState(50);w.useEffect(()=>{f()},[t.careerLevel]);const f=()=>{const b=t.careerLevel||1,m=b*100,g=Array.from({length:3}).map((y,_)=>{const E=1+_*.5,S=Math.floor(m*E*(.8+Math.random()*.4));let N=100*Math.pow(5,_),A=Math.floor(N*(.9+Math.random()*.2));b===1&&_===0&&A>200&&(A=100),t.week>1&&(A*=2);const T=db[Math.floor(Math.random()*db.length)],k=fb[Math.floor(Math.random()*fb.length)];return{id:`venue_${Date.now()}_${_}`,name:`${T} ${k}`,capacity:S,rentCost:A,prestige:Math.min(5,Math.floor(b/5)+_+1),difficulty:_+1}});s(g)},h=()=>{Y();const b=i.find(m=>m.id===r);b&&e(b,o)},c=()=>{Y(),n()},d=b=>{Y(),l(b)},p=i.find(b=>b.id===r);p&&p.capacity*o-p.rentCost;const x=Math.max(.3,Math.min(1,1-(o-50)/200)),v=p?Math.floor(p.capacity*x*o-p.rentCost):0;return a.jsxs("div",{className:"h-full bg-[#050505] flex flex-col relative overflow-hidden animate-slide-in-right font-sans",children:[a.jsxs("div",{className:"pt-safe-top mt-8 px-6 pb-4 bg-black/80 backdrop-blur-md border-b border-white/10 z-20",children:[a.jsx("h1",{className:"text-2xl font-black text-white italic tracking-tighter",children:"MEKAN SEM"}),a.jsxs("p",{className:"text-xs text-neutral-500 font-bold uppercase tracking-wider",children:["Turne Hazrl  Kariyer Btesi: ",t.careerCash.toLocaleString()]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6",children:[a.jsx("div",{className:"space-y-4",children:i.map((b,m)=>{const g=r===b.id;let y="text-green-500";return m===1&&(y="text-yellow-500"),m===2&&(y="text-red-500"),a.jsxs("button",{onClick:()=>d(b.id),className:`w-full text-left p-5 rounded-2xl border transition-all duration-300 relative overflow-hidden group ${g?"bg-white/10 border-[#1ed760] shadow-[0_0_20px_rgba(30,215,96,0.1)]":"bg-[#111] border-white/5 hover:border-white/20"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-black text-white uppercase italic",children:b.name}),a.jsxs("div",{className:"text-[10px] text-neutral-400 font-bold uppercase tracking-wider",children:["Kapasite: ",b.capacity.toLocaleString()," Kii"]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-red-400 font-mono font-bold text-sm",children:["-",b.rentCost.toLocaleString()]}),a.jsx("div",{className:`text-[9px] uppercase font-bold ${y}`,children:m===0?"Normal":m===1?"Zorlu":"Efsane"})]})]}),a.jsx("div",{className:"flex gap-1 relative z-10",children:[...Array(5)].map((_,E)=>a.jsx(pa.Fragment,{children:a.jsx(Ot,{className:`w-3 h-3 ${E<b.prestige?"text-yellow-500":"text-neutral-800"}`})},E))}),g&&a.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:a.jsx(Ia,{className:"w-24 h-24 text-[#1ed760]"})})]},b.id)})}),p&&a.jsxs("div",{className:"bg-[#111] border border-white/10 p-5 rounded-2xl animate-fade-in-up",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"Bilet Fiyat"}),a.jsxs("span",{className:"text-xl font-mono font-black text-[#1ed760]",children:["",o]})]}),a.jsx("input",{type:"range",min:"10",max:"500",step:"10",value:o,onChange:b=>u(parseInt(b.target.value)),className:"w-full accent-[#1ed760] h-2 bg-neutral-800 rounded-lg appearance-none cursor-pointer mb-6"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/5",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] text-neutral-500 uppercase font-bold",children:"Tahmini Doluluk"}),a.jsxs("div",{className:`text-sm font-black ${x>.8?"text-green-500":x>.5?"text-yellow-500":"text-red-500"}`,children:["%",Math.floor(x*100)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-[10px] text-neutral-500 uppercase font-bold",children:"Tahmini Kr"}),a.jsxs("div",{className:`text-sm font-black font-mono ${v>0?"text-green-400":"text-red-500"}`,children:[v>0?"+":"","",v.toLocaleString()]})]})]})]})]}),a.jsxs("div",{className:"p-6 bg-black/90 border-t border-white/10 z-30 flex gap-3",children:[a.jsx("button",{onClick:c,className:"flex-1 bg-[#222] text-white font-bold py-4 rounded-xl text-xs uppercase tracking-widest hover:bg-[#333]",children:"ptal"}),a.jsx("button",{onClick:h,disabled:!p,className:`flex-[2] font-black py-4 rounded-xl text-xs uppercase tracking-widest shadow-lg transition-all ${p?"bg-[#1ed760] text-black hover:scale-[1.02]":"bg-neutral-800 text-neutral-500 cursor-not-allowed"}`,children:"DEVAM ET"})]})]})},a3=({onComplete:t})=>{const e=w.useRef(null),[n,i]=w.useState(0),[s,r]=w.useState(10),[l,o]=w.useState(!1),[u,f]=w.useState(3),h=w.useRef(0),c=w.useRef(0),d=w.useRef(0),p=w.useRef(0),x=w.useRef({amplitude:100,frequency:.01,speed:8,curve:1}),v=120;w.useEffect(()=>{x.current={amplitude:80+Math.random()*60,frequency:.005+Math.random()*.005,speed:7+Math.random()*3,curve:Math.random()>.5?1:-1};const m=setInterval(()=>{f(g=>g<=1?(clearInterval(m),o(!0),0):g-1)},1e3);return()=>clearInterval(m)},[]),w.useEffect(()=>{if(!e.current||!l)return;const m=e.current,g=m.getContext("2d");if(!g)return;h.current=m.width/2;const y=()=>{g.fillStyle="#050505",g.fillRect(0,0,m.width,m.height),g.strokeStyle="#111",g.lineWidth=1,g.beginPath();for(let k=0;k<m.width;k+=40)g.moveTo(k,0),g.lineTo(k,m.height);g.stroke(),c.current+=x.current.speed;const E=k=>{const C=k-c.current,L=x.current,D=Math.sin(C*L.frequency)*L.amplitude*L.curve;return m.width/2+D};g.beginPath(),g.lineWidth=v,g.lineCap="round",g.lineJoin="round",g.strokeStyle="rgba(168, 85, 247, 0.15)";let S=0;const N=m.height-150;for(let k=0;k<m.height;k+=10){const C=E(k);k===0?g.moveTo(C,k):g.lineTo(C,k),Math.abs(k-N)<10&&(S=C)}g.stroke(),g.beginPath(),g.lineWidth=2,g.strokeStyle="#a855f7";for(let k=0;k<m.height;k+=20){const C=E(k);k===0?g.moveTo(C,k):g.lineTo(C,k)}g.stroke(),g.shadowBlur=15,g.shadowColor="#fff",g.fillStyle="#fff",g.beginPath(),g.arc(h.current,N,12,0,Math.PI*2),g.fill(),g.shadowBlur=0;const A=Math.abs(h.current-S),T=v/2;A<T?(d.current+=1,i(Math.floor(d.current/5)),A<20&&(g.strokeStyle="#fff",g.lineWidth=2,g.beginPath(),g.arc(h.current,N,16,0,Math.PI*2),g.stroke())):(g.fillStyle=`rgba(255, 0, 0, ${Math.random()*.2})`,g.fillRect(0,0,m.width,m.height)),p.current=requestAnimationFrame(y)};p.current=requestAnimationFrame(y);const _=setInterval(()=>{r(E=>{if(E<=1){clearInterval(_),o(!1),cancelAnimationFrame(p.current);const S=Math.min(100,Math.floor(d.current/550*100));return t(S),0}return E-1})},1e3);return()=>{cancelAnimationFrame(p.current),clearInterval(_)}},[l]);const b=m=>{if(!e.current)return;const g=e.current.getBoundingClientRect();let y;if("touches"in m&&m.touches&&m.touches.length>0)y=m.touches[0].clientX;else if("clientX"in m)y=m.clientX;else return;const _=y-g.left;h.current=_};return a.jsxs("div",{className:"absolute inset-0 z-50 bg-black flex flex-col items-center justify-center overflow-hidden touch-none select-none",children:[l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute top-6 left-0 right-0 flex justify-between px-6 z-10 pointer-events-none",children:[a.jsxs("div",{className:"text-white font-black text-xl italic flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),"CANLI PERFORMANS"]}),a.jsxs("div",{className:"font-mono text-purple-400 font-bold text-xl",children:[s,"s"]})]}),a.jsxs("div",{className:"absolute top-20 text-center z-10 pointer-events-none",children:[a.jsx("div",{className:"text-[10px] text-neutral-500 uppercase tracking-widest bg-black/50 px-3 py-1 rounded-full",children:"SKOR"}),a.jsx("div",{className:"text-5xl font-black text-white drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]",children:n})]})]}):a.jsxs("div",{className:"absolute inset-0 z-50 bg-black/80 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in text-center p-6",children:[a.jsx("div",{className:"text-6xl font-black text-purple-500 mb-4 animate-ping",children:u}),a.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter mb-2",children:"DETONE OLMA!"}),a.jsxs("p",{className:"text-neutral-300 text-sm uppercase tracking-widest max-w-xs leading-relaxed",children:["Parmanla ses dalgasn takip et. ",a.jsx("br",{}),a.jsx("span",{className:"text-purple-400 font-bold",children:"izginin dna karsan ark bozulur."})]}),a.jsx("div",{className:"mt-8 w-16 h-16 border-t-4 border-purple-500 rounded-full animate-spin"})]}),a.jsx("canvas",{ref:e,width:window.innerWidth,height:window.innerHeight,onMouseMove:b,onTouchMove:b,className:"w-full h-full bg-[#050505] cursor-crosshair"})]})},l3=({onComplete:t})=>{const[e,n]=w.useState(0),[i,s]=w.useState(10),[r,l]=w.useState(!1),[o,u]=w.useState(!1),[f,h]=w.useState(null),c=w.useRef(0),d=w.useRef(0),p=w.useRef(0),x=w.useRef({x:50,y:50}),v=w.useRef({x:50,y:50}),b=w.useRef(null),m=async()=>{if(typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"?(h(!0),window.addEventListener("deviceorientation",g),y()):(h(!1),alert("Jiroskop izni reddedildi. Dokunmatik mod aktif."),y())}catch(N){console.error(N),h(!1),y()}else h(!0),window.addEventListener("deviceorientation",g),y()},g=N=>{if(N.beta===null||N.gamma===null)return;let A=N.beta,T=N.gamma;const k=Math.min(100,Math.max(0,(T+35)/70*100)),C=Math.min(100,Math.max(0,(A-10)/70*100));v.current={x:k,y:C}},y=()=>{u(!0),d.current=Date.now(),c.current=requestAnimationFrame(_)};w.useEffect(()=>()=>{cancelAnimationFrame(c.current),window.removeEventListener("deviceorientation",g)},[]);const _=()=>{const N=Date.now(),A=(N-d.current)/1e3,T=Math.max(0,10-A);if(s(T),T<=0){E();return}const k=N*.001;x.current={x:50+Math.sin(k*1.5)*40,y:40+Math.cos(k*2.3)*20+Math.sin(k*.5)*10};const C=v.current.x-x.current.x,L=v.current.y-x.current.y,B=Math.sqrt(C*C+L*L)<15;if(l(B),B){p.current+=1;const $=Math.min(100,Math.floor(p.current/500*100));n($)}c.current=requestAnimationFrame(_)},E=()=>{cancelAnimationFrame(c.current);const N=Math.min(100,Math.floor(p.current/500*100));t(N)},S=N=>{if(f===!0||!b.current)return;const A=b.current.getBoundingClientRect();if(N.touches&&N.touches.length>0){const T=N.touches[0],k=(T.clientX-A.left)/A.width*100,C=(T.clientY-A.top)/A.height*100;v.current={x:k,y:C}}};return a.jsxs("div",{ref:b,className:"absolute inset-0 z-50 bg-black overflow-hidden touch-none select-none",onTouchMove:S,children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 z-30 flex justify-between items-start pointer-events-none",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-black text-2xl italic tracking-tighter",children:"SPOT III"}),a.jsx("div",{className:"text-neutral-400 text-xs font-bold uppercase",children:f?"Telefonunu evir!":"Parmanla Takip Et!"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-mono font-bold text-white",children:[Math.ceil(i),"s"]}),a.jsxs("div",{className:`text-xl font-black ${r?"text-green-400":"text-neutral-600"}`,children:["%",e]})]})]}),o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute inset-0 bg-[#050505] overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-20 h-[100vh] bg-blue-500/10 blur-[50px] transform -rotate-12 origin-top animate-pulse"}),a.jsx("div",{className:"absolute top-0 right-1/4 w-20 h-[100vh] bg-purple-500/10 blur-[50px] transform rotate-12 origin-top animate-pulse delay-700"})]}),a.jsx("div",{className:"absolute w-20 h-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none transition-transform duration-75 ease-linear z-10 flex items-center justify-center",style:{left:`${x.current.x}%`,top:`${x.current.y}%`},children:a.jsx("div",{className:`text-white transition-transform duration-200 ${r?"scale-125 drop-shadow-[0_0_20px_rgba(34,197,94,0.8)]":"scale-100 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]"}`,children:a.jsx(CI,{className:"w-12 h-12"})})}),a.jsxs("div",{className:"absolute w-full h-full pointer-events-none z-20 transition-transform duration-75 ease-out",style:{background:`radial-gradient(circle 120px at ${v.current.x}% ${v.current.y}%, transparent 0%, rgba(0,0,0,0.95) 100%)`},children:[a.jsx("div",{className:"absolute w-[240px] h-[240px] border-4 border-white/30 rounded-full transform -translate-x-1/2 -translate-y-1/2 box-border",style:{left:`${v.current.x}%`,top:`${v.current.y}%`,boxShadow:r?"0 0 30px 5px rgba(34,197,94,0.5), inset 0 0 20px rgba(34,197,94,0.3)":"0 0 20px 0 rgba(255,255,255,0.2)"}}),r&&a.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 text-green-400 font-black text-xl tracking-[0.2em] animate-bounce drop-shadow-md",style:{left:`${v.current.x}%`,top:`${v.current.y+15}%`},children:"YAKALADIN!"})]})]}):a.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-40 bg-black/90 px-6 text-center",children:a.jsxs("div",{className:"animate-fade-in flex flex-col items-center",children:[a.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:""}),a.jsx("h2",{className:"text-3xl font-black text-white mb-2 uppercase italic",children:"FLALARI YAK!"}),a.jsx("p",{className:"text-neutral-400 font-bold tracking-wider text-sm mb-8",children:"TELEFONU EEREK III TAKP ET"}),a.jsx("button",{onClick:m,className:"bg-white text-black font-black py-4 px-10 rounded-full text-sm uppercase tracking-widest hover:scale-105 transition-transform shadow-[0_0_30px_rgba(255,255,255,0.4)]",children:"BALAT"})]})})]})},o3=({onComplete:t})=>{const[e,n]=w.useState(0),[i,s]=w.useState(10),[r,l]=w.useState("intro"),[o,u]=w.useState(3),f=w.useRef(0),h=w.useRef(0),c=w.useRef(0),d=w.useRef(null),p=w.useRef(!1),x=w.useRef(30),v=w.useRef(0);w.useEffect(()=>{const N=setInterval(()=>{u(A=>A<=1?(clearInterval(N),l("playing"),b(),0):A-1)},1e3);return()=>clearInterval(N)},[]);const b=()=>{c.current=requestAnimationFrame(g);const N=setInterval(()=>{s(A=>A<=1?(clearInterval(N),m(),0):A-1)},1e3)},m=()=>{cancelAnimationFrame(c.current),l("ended"),t(Math.floor(x.current))},g=()=>{if(r==="ended")return;const N=.3+x.current/200;x.current=Math.max(0,x.current-N),p.current||(f.current+=.5),n(x.current),c.current=requestAnimationFrame(g)},y=(N,A)=>{if(!d.current)return 0;const T=d.current.getBoundingClientRect(),k=T.left+T.width/2,C=T.top+T.height/2;return Math.atan2(A-C,N-k)*(180/Math.PI)},_=N=>{p.current=!0;let A,T;"touches"in N&&N.touches&&N.touches.length>0?(A=N.touches[0].clientX,T=N.touches[0].clientY):(A=N.clientX,T=N.clientY),h.current=y(A,T)},E=N=>{if(!p.current||r!=="playing")return;let A,T;if("touches"in N&&N.touches&&N.touches.length>0)A=N.touches[0].clientX,T=N.touches[0].clientY;else if("clientX"in N)A=N.clientX,T=N.clientY;else return;const k=y(A,T);let C=k-h.current;C>180&&(C-=360),C<-180&&(C+=360),f.current+=C,h.current=k;const L=Math.abs(C);if(L>2){x.current=Math.min(100,x.current+L*.5);const D=Date.now();D-v.current>100&&(AI(),v.current=D)}},S=()=>{p.current=!1};return a.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/90 backdrop-blur-xl select-none touch-none overflow-hidden font-sans",children:[r==="intro"&&a.jsxs("div",{className:"absolute inset-0 z-[60] flex flex-col items-center justify-center bg-black/80",children:[a.jsx("div",{className:"text-[120px] font-black text-white animate-ping",children:o}),a.jsx("div",{className:"text-xl font-bold text-neutral-400 mt-8 uppercase tracking-widest animate-pulse",children:"Pla Dndr!"})]}),a.jsxs("div",{className:"absolute top-6 left-0 right-0 px-6 flex justify-between items-start z-[60]",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black italic text-white tracking-tighter",children:"SCRATCH"}),a.jsx("div",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:"Seyirciyi Cotur!"})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-4xl font-mono font-bold text-white",children:[i,"s"]})})]}),a.jsxs("div",{className:"absolute top-24 w-64 h-8 bg-[#1a1a1a] rounded-full border-2 border-white/20 overflow-hidden z-[60] shadow-[0_0_20px_rgba(0,0,0,0.5)]",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-black z-10 text-white mix-blend-difference tracking-[0.2em]",children:"HYPE LEVEL"}),a.jsx("div",{className:`h-full transition-all duration-75 ease-linear ${e>80?"bg-red-500 animate-pulse":e>50?"bg-green-500":"bg-blue-500"}`,style:{width:`${e}%`}})]}),a.jsxs("div",{className:"absolute top-36 text-center z-[60] h-10",children:[e<30&&a.jsx("div",{className:"text-blue-500 font-black text-xl animate-bounce",children:"DAHA HIZLI!"}),e>80&&a.jsx("div",{className:"text-red-500 font-black text-2xl animate-ping",children:"YANIIYOR! "})]}),a.jsxs("div",{className:"relative w-80 h-80 bg-[#1a1a1a] rounded-full border-4 border-neutral-700 shadow-2xl flex items-center justify-center mt-20",children:[a.jsxs("div",{className:"absolute top-[-20px] right-[-20px] w-32 h-64 pointer-events-none z-20 origin-top-right rotate-12",children:[a.jsx("div",{className:"absolute top-4 right-4 w-2 h-48 bg-neutral-400 rounded-full shadow-lg border border-neutral-500"}),a.jsx("div",{className:"absolute bottom-10 right-4 w-8 h-12 bg-neutral-800 rounded border border-white/10"})]}),a.jsx("div",{ref:d,className:"relative w-72 h-72 flex items-center justify-center cursor-grab active:cursor-grabbing z-10 touch-none",onMouseDown:_,onMouseMove:E,onMouseUp:S,onMouseLeave:S,onTouchStart:_,onTouchMove:E,onTouchEnd:S,children:a.jsxs("div",{className:"w-full h-full rounded-full bg-[#0a0a0a] border-2 border-[#222] shadow-2xl relative overflow-hidden",style:{transform:`rotate(${f.current}deg)`},children:[a.jsx("div",{className:"absolute inset-0 opacity-40",style:{background:"repeating-radial-gradient(#111 0, #111 2px, #222 3px, #222 4px)"}}),a.jsx("div",{className:"absolute inset-[30%] bg-gradient-to-br from-red-600 to-orange-600 rounded-full flex items-center justify-center border-4 border-black shadow-inner",children:a.jsx(Gi,{className:"w-12 h-12 text-black/50"})}),a.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-3 h-12 bg-white/90 rounded-full shadow-lg blur-[0.5px]"})]})})]}),a.jsx("div",{className:"absolute bottom-12 text-neutral-500 text-xs font-bold uppercase tracking-widest animate-pulse pointer-events-none",children:"Parmanla leri Geri Yap!"})]})},hb=["BURASI STANBUL BURDA HERKESN BR DERD VAR","SUSAMAM DEDM VE BR SABAH UYANDIM HER EY AYNI","NEYM VAR K RAPTEN GAR BU BR YOLCULUK","SAVA OCUKLARI N BARI HEMEN MD","HAYAT ZOR BR SINAV VE KOPYA EKMEK SERBEST DEL","GLGE HARAMLER BU GECE EHR TESLM ALACAK","BR PESMSTN GZYALARI DER YERE DAMLA DAMLA","YERL PLAKA STNDE MKROFON ELMDE HAZIRIM","KAFAMA SIKAR GDERM DYENLERN HEPS BURADA","BENMLE DANS ETMEK STERSEN RTM YAKALA","SOKAKLARIN DL OLSA DA KONUSA ANLATSA DERDN","RAPN OLU GELD GER EKLN NMDEN","MEDCEZR GELR GDER AKLIMDAKLER H BTMEZ","SAYGI BEKLEME SAYGI GSTER NCE KENDNE","HOLOCAUST GB YAKAR GEERM ALAYINI","BURALAR ESKDEN HEP DUTLUKTU MD BETON","KARANLIK KNCE SOKAKLARIN DL ZLR","HAYAT BR KUMARSA ZARLAR BENM ELMDE","DMEM BEN YNE KALKARIM HER SEFERNDE DAHA GL","GKYZNDE YILDIZLAR KADAR UZAK HAYALLERM","SUSMA SUSTUKA SIRA SANA GELECEK UNUTMA","BU EHR BEN YUTAMAZ BEN BU EHRN KENDSYM","MKROFON BENM SLAHIM KELMELER MERMM","DOSTUNU YAKIN TUT DMANINI DAHA YAKIN","ZAMAN AKIP GDERKEN GERYE SADECE ANILAR KALIR","BR GN HERKES GDER GERYE SADECE ARKILAR KALIR","SOKAK LAMBALARI ALTINDA YAZILDI BU SATIRLAR","HAYALLER PARS GEREKLER EMNN","BZMKS BR AK HKAYES DEL BR YAAM MCADELES","SEN ALAMA DAYANAMAM GZYAIN OLURUM","CEZA SAHASI NDE HERKES KEND KALESN KORUR","YALAN DNYA DNER DURUR BZ SE SADECE ZLERZ","KADERN KENDN YAZ BAKASININ KALEMYLE DEL","BU YOLUN SONU YOK SADECE YEN BALANGILAR VAR","RAP BENM N BR MZK DEL BR YAAM TARZI"],pb=t=>t.replace(//g,"I").replace(//g,"I").replace(//g,"O").replace(//g,"O").replace(//g,"U").replace(//g,"U").replace(//g,"S").replace(//g,"S").replace(//g,"C").replace(//g,"C").replace(//g,"G").replace(//g,"G").toUpperCase(),c3=({onComplete:t})=>{const[e,n]=w.useState(""),[i,s]=w.useState(""),[r,l]=w.useState(15),[o,u]=w.useState(!1),[f,h]=w.useState(!1),c=w.useRef(null),d=w.useRef(null);w.useEffect(()=>{const m=hb[Math.floor(Math.random()*hb.length)];return n(m),setTimeout(()=>{c.current&&c.current.focus()},100),d.current=setInterval(()=>{l(g=>g<=1?(p(),0):g-1)},1e3),()=>clearInterval(d.current)},[]);const p=()=>{clearInterval(d.current),h(!0),setTimeout(()=>{t(0)},1e3)},x=()=>{clearInterval(d.current),u(!0),setTimeout(()=>{t(100)},1e3)},v=m=>{if(o||f)return;const g=m.target.value.toUpperCase();s(g),pb(g)===pb(e)&&x()},b=()=>{c.current&&c.current.focus()};return a.jsxs("div",{className:"absolute inset-0 z-50 bg-black/95 flex flex-col items-center justify-start pt-20 p-6 font-sans",onClick:b,children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 bg-red-600 flex justify-between items-center animate-pulse",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vi,{className:"w-6 h-6 text-white"}),a.jsx("span",{className:"text-white font-black uppercase tracking-widest text-sm",children:"CANLI YAYIN - PROMPTER"})]}),a.jsxs("div",{className:"font-mono text-xl font-black text-white",children:[r,"s"]})]}),a.jsxs("div",{className:"mb-8 text-center mt-8",children:[a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-2",children:"SZLER UNUTMA!"}),a.jsx("p",{className:"text-neutral-400 text-xs font-bold uppercase tracking-widest",children:"Aadaki cmleyi aynen yaz"})]}),a.jsxs("div",{className:"w-full max-w-2xl bg-[#111] border border-white/20 rounded-2xl p-6 text-center mb-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-0 bg-[length:100%_2px,3px_100%]"}),a.jsx("div",{className:"relative z-10 text-xl md:text-2xl font-black text-white/40 tracking-wide select-none filter blur-[0.3px] leading-relaxed break-words",children:e}),a.jsx("div",{className:"absolute inset-0 p-6 flex items-center justify-center pointer-events-none z-20",children:a.jsxs("span",{className:`text-xl md:text-2xl font-black tracking-wide leading-relaxed break-words text-center w-full ${f?"text-red-500":o?"text-green-500":"text-white"}`,children:[i,a.jsx("span",{className:"animate-pulse",children:"|"})]})})]}),a.jsx("input",{ref:c,type:"text",value:i,onChange:v,className:"opacity-0 absolute top-0 left-0 h-full w-full cursor-default",autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),a.jsx("div",{className:"mt-auto mb-safe text-neutral-500 text-xs font-bold uppercase animate-bounce",children:"KLAVYE AIK  YAZMAYA BALA"}),o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-500/20 backdrop-blur-sm z-30",children:a.jsx("div",{className:"bg-green-500 text-black font-black text-4xl px-8 py-4 rounded-xl transform -rotate-6 shadow-2xl",children:"HARKA!"})}),f&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-500/20 backdrop-blur-sm z-30",children:a.jsx("div",{className:"bg-red-600 text-white font-black text-4xl px-8 py-4 rounded-xl transform rotate-6 shadow-2xl",children:"UNUTTUN!"})})]})},$m=({gameType:t,gameName:e,playerId:n,playerName:i,playerFans:s,playerLevel:r,onGameStart:l,onExit:o})=>{const[u,f]=w.useState([]),[h,c]=w.useState([]),[d,p]=w.useState(null),[x,v]=w.useState(""),[b,m]=w.useState(!1),[g,y]=w.useState(!1),[_,E]=w.useState(null);w.useEffect(()=>{(async()=>{try{await XC(t,{id:n,name:i,fans:s,level:r})}catch(D){console.error("Lobby Join Error (Permission?):",D),alert("Lobiye giri yaplamad. nternet balantn kontrol et.")}})();const C=ve(ye,`lobbies/${t}`);Un(C,D=>{const B=D.val();if(B){const $=Object.entries(B).map(([O,H])=>({id:O,...H})).filter(O=>O.id!==n);f($)}else f([])},D=>{console.error("Lobby Listener Error:",D)});const L=ve(ye,`invites/${n}`);return Un(L,D=>{const B=D.val();if(B){const O=Object.entries(B).map(([H,Q])=>({fromId:H,...Q})).filter(H=>H.status==="pending");O.length>0&&h.length===0&&nn(),c(O)}else c([])}),()=>{JC(t,n).catch(D=>console.error("Leave Lobby Error:",D)),Tr(C),Tr(L),d&&Tr(ve(ye,`invites/${d}/${n}`))}},[]);const S=k=>{Y(),E(k),t==="trivia"||t==="higherlower"?y(!0):A(k.id,k.name)},N=k=>{if(!_)return;Y();const C=Bl.find(L=>L.id===k);A(_.id,_.name,C),y(!1),E(null)},A=async(k,C,L)=>{if(b)return;p(k),m(!0),v(`Davet gnderildi: ${C} ${L?`(${L.label})`:""}`);try{await eI(k,{id:n,name:i},t,L)}catch(B){console.error("Invite Send Error:",B),m(!1),v("Hata: Davet gnderilemedi.");return}const D=ve(ye,`invites/${k}/${n}`);Un(D,B=>{const $=B.val();$&&$.status==="accepted"&&$.gameId&&(v("Kabul edildi! Oyuna giriliyor..."),Tr(D),la(D),setTimeout(()=>{l($.gameId)},500))})},T=async k=>{if(!b){Y(),m(!0),v("Oyun verileri hazrlanyor...");try{const C=await tI(k.fromId,{id:n,name:i},t,k.category);C?(v("Balatlyor..."),setTimeout(()=>{l(C)},500)):(m(!1),v("Hata: Veri alnamad veya balant koptu."))}catch(C){console.error(C),m(!1),v("Balant hatas.")}}};return a.jsxs("div",{className:"h-full bg-black flex flex-col p-6 relative font-sans",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 pt-safe-top mt-safe",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-[#1ed760] mb-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[#1ed760] animate-pulse"}),a.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest",children:["Lobi: ",u.length," Kii"]})]}),a.jsx("h1",{className:"text-3xl font-black text-white italic",children:e})]}),a.jsx("button",{onClick:o,className:"w-10 h-10 rounded-full bg-[#222] text-white font-bold flex items-center justify-center border border-white/10",children:""})]}),g&&a.jsxs("div",{className:"fixed inset-0 z-[250] bg-black flex flex-col p-6 animate-fade-in font-sans",children:[a.jsxs("div",{className:"pt-safe-top px-2 pb-6 shrink-0",children:[a.jsx("button",{onClick:()=>y(!1),className:"mb-4 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white",children:""}),a.jsx("h2",{className:"text-3xl font-black text-white italic mb-1",children:"KATEGOR SE"}),a.jsx("p",{className:"text-neutral-500 text-xs font-bold uppercase tracking-widest",children:"Rakibine meydan oku"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pb-safe custom-scrollbar",children:Bl.map((k,C)=>{const L=C*45%360,D=`linear-gradient(135deg, hsl(${L}, 60%, 20%), hsl(${L}, 60%, 5%))`;return a.jsxs("button",{onClick:()=>N(k.id),className:"w-full bg-[#181818] hover:bg-[#282828] p-3 rounded-md flex items-center gap-4 group transition-all active:scale-[0.98] border border-transparent hover:border-[#1ed760]/20",children:[a.jsx("div",{className:"w-12 h-12 rounded bg-[#333] shadow-lg flex items-center justify-center shrink-0 font-black text-white/20 text-lg",style:{background:D},children:k.label.charAt(0)}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsx("div",{className:"text-white font-bold text-sm truncate group-hover:text-[#1ed760] transition-colors leading-tight",children:k.label}),a.jsx("div",{className:"text-neutral-500 text-[10px] font-medium mt-0.5 truncate",children:"Davet Gnder"})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-black/40 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(vn,{className:"w-3 h-3 ml-0.5"})})]},k.id)})})]}),b&&a.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-md flex items-center justify-center flex-col",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[#1ed760] border-t-transparent rounded-full animate-spin mb-6"}),a.jsx("div",{className:"text-white font-black text-xl animate-pulse tracking-widest text-center px-4",children:x}),d&&a.jsx("button",{onClick:()=>{m(!1),la(ve(ye,`invites/${d}/${n}`)),p(null),v("")},className:"mt-8 text-red-500 text-xs font-bold border border-red-500/50 px-6 py-3 rounded-full hover:bg-red-900/20",children:"PTAL ET"})]}),h.length>0&&!b&&a.jsx("div",{className:"fixed top-24 left-0 right-0 z-[100] px-4 animate-slide-in pointer-events-none",children:a.jsxs("div",{className:"bg-[#1a1a1a] border border-[#1ed760] rounded-xl p-4 shadow-[0_0_30px_rgba(30,215,96,0.2)] pointer-events-auto flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-[#1ed760]/20 rounded-full flex items-center justify-center shrink-0",children:a.jsx(ku,{className:"w-5 h-5 text-[#1ed760]"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-bold text-white truncate",children:h[0].challengerName}),a.jsx("div",{className:"text-xs text-neutral-400",children:h[0].category?`${h[0].category.label} kapmas!`:"Seni kapmaya aryor!"})]}),a.jsx("button",{onClick:()=>T(h[0]),className:"bg-[#1ed760] hover:bg-[#1db954] text-black font-bold px-4 py-2 rounded-lg text-xs shrink-0",children:"KABUL ET"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pb-safe",children:u.length===0?a.jsxs("div",{className:"text-center py-20 text-neutral-600",children:[a.jsx(Ia,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),a.jsx("p",{className:"font-bold",children:"Lobi Bo"}),a.jsx("p",{className:"text-xs mt-2 opacity-50",children:'Arkadana "Online" olmasn syle.'})]}):u.map(k=>a.jsxs("div",{className:"bg-[#111] border border-white/5 p-4 rounded-xl flex items-center justify-between group hover:border-[#1ed760]/50 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-neutral-800 to-neutral-900 rounded-lg flex items-center justify-center font-bold text-white text-sm border border-white/5",children:k.name.charAt(0)}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-bold text-white text-sm truncate",children:k.name}),a.jsxs("div",{className:"text-[10px] text-neutral-500 font-bold",children:["LVL ",k.level,"  ",k.fans," FAN"]})]})]}),a.jsxs("button",{onClick:()=>S(k),disabled:b,className:"bg-white text-black font-black px-5 py-2 rounded-lg text-xs flex items-center gap-2 hover:scale-105 transition-transform active:scale-95",children:[a.jsx(ku,{className:"w-3 h-3"}),"DAVET"]})]},k.id))})]})},qm=({result:t,myScore:e,opponentScore:n,opponentName:i,respectChange:s,onContinue:r})=>{const[l,o]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>o(!0),100)},[]);const u=t==="win",f=t==="draw",h=u?"#1ed760":f?"#fbbf24":"#ef4444",c=u?"KAZANDIN":f?"BERABERE":"KAYBETTN",d=u?Ot:Ym;return a.jsx("div",{className:`fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,children:a.jsxs("div",{className:`w-full max-w-[280px] bg-[#0a0a0a] border border-white/10 rounded-3xl relative overflow-hidden shadow-2xl transform transition-transform duration-500 cubic-bezier(0.175, 0.885, 0.32, 1.275) ${l?"scale-100 translate-y-0":"scale-90 translate-y-10"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-current to-transparent opacity-60",style:{color:h}}),a.jsxs("div",{className:"p-8 flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#141414] border border-white/5 flex items-center justify-center shadow-lg mb-4",style:{color:h},children:a.jsx(d,{className:"w-8 h-8"})}),a.jsx("h1",{className:"text-2xl font-black italic tracking-tighter text-white mb-6 uppercase",children:c}),a.jsxs("div",{className:"w-full flex items-center justify-between mb-8 bg-[#141414] rounded-2xl p-4 border border-white/5",children:[a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("span",{className:"text-[8px] font-bold text-neutral-500 uppercase tracking-wider mb-1",children:"SEN"}),a.jsx("span",{className:`text-xl font-black ${u?"text-white":"text-neutral-400"}`,children:e})]}),a.jsx("div",{className:"h-8 w-[1px] bg-white/10 mx-2"}),a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("span",{className:"text-[8px] font-bold text-neutral-500 uppercase tracking-wider mb-1 truncate max-w-[70px]",children:i}),a.jsx("span",{className:`text-xl font-black ${!u&&!f?"text-white":"text-neutral-400"}`,children:n})]})]}),s!==0&&a.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[a.jsxs("div",{className:`text-sm font-black ${s>0?"text-[#1ed760]":"text-red-500"}`,children:[s>0?"+":"",s," RESPECT"]}),a.jsx("div",{className:"text-[8px] text-neutral-500 font-bold uppercase tracking-widest mt-1",children:"LDERLK PUANI"})]}),a.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] bg-white text-black hover:scale-[1.02] active:scale-95 transition-all shadow-lg",children:"DEVAM ET"})]})]})})},u3="https://files.catbox.moe/ksaxm7.mp3",xf=75,d3=9,f3=35,h3=95,p3=.8,Zo=[{id:0,dir:"left",color:"#1ed760",label:"L"},{id:1,dir:"down",color:"#3b82f6",label:"D"},{id:2,dir:"up",color:"#a855f7",label:"U"},{id:3,dir:"right",color:"#f59e0b",label:"R"}],m3=["Sesin kesildi!","Bu kadar m?","Ritim kat!","Sahneyi terk et!"],Fh=({playerName:t,onGameEnd:e,onExit:n,isSolo:i=!1,isMiniGame:s=!1,initialDuration:r})=>{const[l,o]=w.useState("lobby"),[u,f]=w.useState(3),[h,c]=w.useState(r||(s?45:60)),[d,p]=w.useState(0),[x,v]=w.useState(0),[b,m]=w.useState(50),[g,y]=w.useState([]),[_,E]=w.useState(null),[S,N]=w.useState([!1,!1,!1,!1]),[A,T]=w.useState(null),[k,C]=w.useState(null),[L,D]=w.useState(null),[B,$]=w.useState("Rakip"),O=w.useRef(0),[H,Q]=w.useState(0),[P,R]=w.useState(null),[I,M]=w.useState(null),z=w.useRef([]),V=w.useRef(0),Z=w.useRef(0),X=w.useRef(0),q=w.useRef(0),te=w.useRef(0),Pe=w.useRef(0),He=w.useRef(null),Ce=w.useRef(!1),dt=w.useRef(null);w.useEffect(()=>(Et.currentUser&&C(Et.currentUser.uid),(i||s)&&(o("playing"),$(s?"":"MC BOT")),()=>Vn()),[]),w.useEffect(()=>{if(i||s||!A||!k)return;const K=ve(ye,`games/${A}`),ee=Un(K,Te=>{const Je=Te.val();if(Je&&(l==="lobby"&&Je.bpm&&Fn(),Je.players)){const sn=Je.players[k],rn=Object.keys(Je.players).find(an=>an!==k),Tt=rn?Je.players[rn]:null;Tt&&(D(rn),$(Tt.name),O.current=Tt.score,Q(Tt.score)),(sn==null?void 0:sn.status)==="finished"&&(Tt==null?void 0:Tt.status)==="finished"&&l!=="gameover"&&l!=="result_screen"&&G(sn.score,Tt.score,rn)}}),we=QC(A,k,Te=>{da(),M(Te),setTimeout(()=>M(null),2500)});return()=>{ee(),we()}},[A,k,l,i,s]),w.useEffect(()=>(l==="playing"&&i&&!s?(O.current=0,dt.current=setInterval(()=>{const K=Math.random();let ee=0;K>.25?ee=150:K>.1&&(ee=50),ee>0&&(O.current+=ee,Q(O.current))},550)):clearInterval(dt.current),()=>clearInterval(dt.current)),[l,i,s]);const wi=K=>{T(K)},Fn=()=>{o("playing"),f(3),p(0),v(0),m(50),te.current=0,Pe.current=0,O.current=0,Q(0),z.current=[],y([])};w.useEffect(()=>{if(l==="playing"&&u>0){hs();const K=setTimeout(()=>{u===1&&Ca(),f(ee=>ee-1)},1e3);return()=>clearTimeout(K)}else if(l==="playing"&&u===0){!He.current&&!s&&(He.current=new Audio(u3),He.current.volume=.4,He.current.loop=!0,He.current.play().catch(()=>{})),Ce.current=!0,Z.current=performance.now(),X.current=performance.now(),q.current=performance.now(),V.current=requestAnimationFrame(Ke);const K=setInterval(()=>{c(ee=>ee<=1?(clearInterval(K),oe(),0):ee-1)},1e3);return()=>clearInterval(K)}},[u,l]);const Vn=()=>{Ce.current=!1,cancelAnimationFrame(V.current),clearInterval(dt.current),He.current&&(He.current.pause(),He.current=null)},Ke=K=>{if(!Ce.current)return;const ee=(K-Z.current)/1e3;Z.current=K;const we=s?60:f3,Te=(K-q.current)/1e3,Je=Math.min(h3,we+Te*p3),rn=Math.max(250,600-Je*4);K-X.current>rn&&(pe(),X.current=K);const Tt=Je*ee,an=[];z.current.forEach(nt=>{if(!nt.hit&&!nt.missed){nt.y+=Tt;const _s=document.getElementById(`note-${nt.id}`);_s&&(_s.style.top=`${nt.y}%`),nt.y>90&&(nt.missed=!0,an.push(nt.id),At(nt.lane))}}),an.length>0&&(z.current=z.current.filter(nt=>!nt.missed&&!nt.hit),y([...z.current])),V.current=requestAnimationFrame(Ke)},pe=()=>{const K=Math.floor(Math.random()*4),ee={id:Date.now()+Math.random(),lane:K,y:-15,hit:!1,missed:!1};z.current.push(ee),y(we=>[...we,ee])},_e=K=>{if(l!=="playing"||u>0)return;J(K);const ee=z.current.findIndex(we=>we.lane===K&&!we.hit&&!we.missed&&Math.abs(we.y-xf)<d3);if(ee!==-1){const we=z.current[ee],Te=Math.abs(we.y-xf);let Je=50,sn="Y",rn="text-blue-400";Te<4?(Je=150,sn="MKEMMEL!",rn="text-[#1ed760]",m(an=>Math.min(100,an+4))):Te<7?(Je=100,sn="HARKA",rn="text-yellow-400",m(an=>Math.min(100,an+2))):m(an=>Math.min(100,an+1)),te.current+=Je,Pe.current+=1,p(te.current),v(Pe.current),So(),ae(sn,rn),we.hit=!0;const Tt=document.getElementById(`note-${we.id}`);Tt&&(Tt.style.opacity="0"),!i&&!s&&A&&k&&Su(A,k,te.current)}},At=K=>{Pe.current=0,v(0),m(ee=>Math.max(0,ee-8)),ae("KAIRDIN","text-red-500")},J=K=>{N(ee=>{const we=[...ee];return we[K]=!0,we}),setTimeout(()=>N(ee=>{const we=[...ee];return we[K]=!1,we}),100)},ae=(K,ee)=>{E({text:K,color:ee,id:Date.now()}),setTimeout(()=>E(null),600)},Ue=K=>{!A||!L||i||s||(Y(),ZC(A,L,K))},oe=()=>{if(Vn(),s){const K=Math.min(100,Math.floor(te.current/5e3*100));e(K);return}o("waiting_opponent"),!i&&A&&k?Gm(A,k,te.current):G(te.current,O.current,"bot")},G=(K,ee,we)=>{o("gameover");let Te="draw",Je=0;K>ee?(Te="win",Je=34):K<ee&&(Te="loss",Je=-34),!i&&!s&&k&&we&&Te==="win"&&Hm(k,we),R({result:Te,change:Je}),setTimeout(()=>o("result_screen"),1e3)},ie=(()=>{const K=d+H;return K===0?50:Math.min(100,Math.max(0,d/K*100))})();return l==="lobby"&&k&&!i&&!s?a.jsx($m,{gameType:"flowbattle",gameName:"BREAKDANCE BATTLE",playerId:k,playerName:t,playerFans:0,playerLevel:1,onGameStart:wi,onExit:n}):l==="result_screen"&&P?a.jsx(qm,{result:P.result,myScore:d,opponentScore:H,opponentName:B,respectChange:i?0:P.change,onContinue:()=>{e(d),n()}}):l==="waiting_opponent"?a.jsxs("div",{className:"h-full bg-black flex flex-col items-center justify-center text-white",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#1ed760] mb-4"}),a.jsx("h2",{className:"text-xl font-bold",children:"SONULAR BEKLENYOR"})]}):a.jsxs("div",{className:`h-full w-full bg-[#000000] relative overflow-hidden flex flex-col ${s?"z-[100]":""} touch-none select-none font-sans`,children:[a.jsxs("div",{className:"absolute inset-0 z-0 bg-[#000000]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1ed760]/5 to-black"}),a.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#222 1px, transparent 1px), linear-gradient(90deg, #222 1px, transparent 1px)",backgroundSize:"40px 40px"}})]}),!s&&a.jsxs("div",{className:"absolute top-0 left-0 right-0 h-2 z-40 bg-[#333] flex",children:[a.jsx("div",{className:"h-full bg-red-600 transition-all duration-300",style:{width:`${100-ie}%`}}),a.jsx("div",{className:"h-full bg-[#1ed760] transition-all duration-300 shadow-[0_0_10px_#1ed760]",style:{width:`${ie}%`}}),a.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white left-1/2 -translate-x-1/2"})]}),a.jsxs("div",{className:"absolute top-4 left-0 right-0 p-4 pt-safe z-30 flex justify-between items-start pointer-events-none",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(DI,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-md",children:d.toLocaleString()})]}),a.jsx("div",{className:"w-32 h-1.5 bg-[#222] rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${b>50?"bg-[#1ed760]":"bg-red-500"}`,style:{width:`${b}%`}})})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-white font-mono font-bold text-xl",children:[h,"s"]}),!s&&a.jsxs("div",{className:"text-[10px] text-neutral-500 font-bold uppercase",children:[B,": ",H]})]})]}),x>2&&a.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 text-center pointer-events-none",children:a.jsxs("div",{className:"text-5xl font-black text-white/10 italic tracking-tighter animate-pulse scale-150",children:[x,"x"]})}),_&&a.jsx("div",{className:`absolute top-[35%] left-1/2 -translate-x-1/2 -translate-y-1/2 z-40 text-3xl font-black italic tracking-tighter ${_.color} animate-[ping_0.3s_ease-out_forwards] whitespace-nowrap drop-shadow-md`,children:_.text},_.id),u>0&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:a.jsx("div",{className:"text-[120px] font-black text-[#1ed760] animate-ping",children:u})}),a.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col",children:[a.jsx("div",{className:"flex-1 relative flex",children:a.jsxs("div",{className:"w-full max-w-md mx-auto h-full relative flex border-x border-white/5",children:[a.jsx("div",{className:"absolute w-full z-10 flex px-2 pointer-events-none",style:{top:`${xf}%`,transform:"translateY(-50%)"},children:Zo.map((K,ee)=>a.jsx("div",{className:"flex-1 flex justify-center",children:a.jsx("div",{className:`w-16 h-16 rounded-full border-4 flex items-center justify-center transition-all duration-75 shadow-lg ${S[ee]?"scale-110 bg-white/20 border-white":"border-white/20 bg-black/40"}`,children:a.jsx(yc,{dir:K.dir,className:`w-8 h-8 ${S[ee]?"text-white":"text-white/30"}`})})},ee))}),Zo.map((K,ee)=>a.jsx("div",{className:"flex-1 relative border-r border-white/5 last:border-r-0",children:a.jsx("div",{className:`absolute inset-0 bg-gradient-to-b from-transparent to-${K.color} opacity-0 transition-opacity duration-100 ${S[ee]?"!opacity-30":""}`,style:{backgroundColor:S[ee]?K.color:"transparent"}})},ee)),g.map(K=>{const ee=Zo[K.lane];return a.jsx("div",{id:`note-${K.id}`,className:"absolute w-[25%] flex items-center justify-center will-change-transform z-20 pointer-events-none",style:{left:`${K.lane*25}%`,top:0,transform:"translateY(-50%)"},children:a.jsxs("div",{className:"w-14 h-14 rounded-full bg-[#121212] border-2 border-white flex items-center justify-center shadow-lg relative overflow-hidden",style:{borderColor:ee.color},children:[a.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundColor:ee.color}}),a.jsx(yc,{dir:ee.dir,className:"w-8 h-8 text-white drop-shadow-md"})]})},K.id)})]})}),a.jsx("div",{className:"h-40 bg-gradient-to-t from-black via-black to-transparent pb-safe relative z-30 px-4 flex items-center",children:a.jsx("div",{className:"w-full max-w-md mx-auto h-full flex justify-between items-center px-4 gap-4",children:Zo.map((K,ee)=>a.jsxs("button",{onPointerDown:we=>{we.preventDefault(),_e(ee)},className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-[#181818] border-2 flex items-center justify-center group active:scale-95 transition-all shadow-lg active:shadow-none relative overflow-hidden",style:{borderColor:K.color,boxShadow:`0 0 15px ${K.color}40`},children:[a.jsx("div",{className:"absolute inset-0 opacity-0 group-active:opacity-30 transition-opacity",style:{backgroundColor:K.color}}),a.jsx(yc,{dir:K.dir,className:"w-8 h-8 opacity-80 group-active:scale-110 transition-transform text-white drop-shadow-md"})]},ee))})})]}),!s&&a.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-50 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white font-bold hover:bg-white/20 pointer-events-auto",children:""}),!i&&!s&&a.jsx("div",{className:"absolute bottom-40 left-0 right-0 z-50 flex justify-center gap-2 pointer-events-auto px-4 overflow-x-auto scrollbar-hide",children:m3.map((K,ee)=>a.jsx("button",{onClick:()=>Ue(K),className:"bg-[#222] border border-white/20 text-white text-[9px] font-bold px-3 py-1.5 rounded-full hover:bg-[#333] transition-colors whitespace-nowrap shadow-lg",children:K},ee))}),I&&a.jsx("div",{className:"absolute top-1/3 left-0 right-0 z-50 flex justify-center pointer-events-none",children:a.jsxs("div",{className:"bg-white text-black font-black text-xl px-6 py-4 rounded-full shadow-[0_0_50px_rgba(255,255,255,0.5)] transform -rotate-3 animate-bounce border-4 border-black",children:[I," "]})})]})},mb=[{id:"soundcheck_fail",title:"TEKNK ARIZA",desc:'Soundcheck srasnda mikrofon almad. Sesi "kabloda temasszlk var" diyor ama pek gven vermiyor.',options:[{text:"Kendi mikrofonumu kullanrm.",effects:{rel_team:2,charisma:1,energy:-1},outcome:"Profesyonellik kazandrd. Ekip sana sayg duyuyor."},{text:"Sesiye barp ar.",effects:{rel_team:-3,energy:-2},outcome:"Sinirlerin bozuldu, ekip sana gck oldu."},{text:"Bover, playback yaparm.",effects:{rel_fans:-3,rel_manager:-1},outcome:"Kolaya katn. Fanlar bunu fark edecek."}]},{id:"backstage_fan",title:"KULSTE ZYARET",desc:'Gvenlii aan bir hayran kulise girdi. "Sadece bir fotoraf!" diye baryor.',options:[{text:"Fotoraf ekil ve imzala.",effects:{rel_fans:3,energy:-1},outcome:"Hayran mutluluktan alad. Fan kitlen seni seviyor."},{text:"Gvenlii ar, atn bunu!",effects:{rel_fans:-2,rel_manager:1},outcome:"Menajerin gvenlii takdir etti ama fanlar zgn."},{text:"Para karl fotoraf ekil.",effects:{rel_fans:-5,careerCash:100},outcome:"Para kazandn ama paragz damgas yedin."}]},{id:"label_pressure",title:"YAPIMCI BASKISI",desc:'Menajerin arad: "Bu geceki konserde o popler ak arksn sylemezsen szlemeyi yakarm!"',options:[{text:"Tamam, syleyeceim.",effects:{rel_manager:4,charisma:-2,careerCash:250},outcome:"Menajerin mutlu, para geldi ama tarzndan dn verdin."},{text:"Ben rapiyim, pop sylemem!",effects:{rel_manager:-5,rel_fans:2,careerCash:-50},outcome:"Dik duruun fanlar coturdu ama menajerin kplere bindi."}]},{id:"gf_drama",title:"SEVGL TRB",desc:'Konsere dakikalar kala sevgilin mesaj att: "Yine mi konser? Benimle hi ilgilenmiyorsun!"',options:[{text:"Arayp gnln al.",effects:{rel_partner:3,energy:-2,flow:-1},outcome:"likini kurtardn ama konsere yorgun ve konsantrasyonun bozuk kyorsun."},{text:"u an iim var, sonra konuuruz.",effects:{rel_partner:-4,energy:1},outcome:"Kafan rahat sahneye ktn ama evde kavga var."}]},{id:"usb_lost",title:"USB KAYIP",desc:`DJ panik iinde yanna geldi. "Beatlerin olduu USB'yi evde unutmuum abi!"`,options:[{text:"Freestyle yaparm, sorun yok.",effects:{flow:2,energy:-2,rel_fans:1},outcome:"Zorlandn ama yeteneinle durumu kurtardn."},{text:"DJ'i kov, telefondan al.",effects:{rel_team:-5,careerCash:-100},outcome:"Ses kalitesi berbatt, ekip moral olarak kt."},{text:"Acapella syle.",effects:{lyrics:2,charisma:1},outcome:"Cesurca bir hamle. Szlerin daha ok dikkat ekti."}]},{id:"rival_diss",title:"RAKP DISS",desc:"Konser balamadan hemen nce rakibin sana sahnede kfr ettii bir video yaynlad. Telefonun susmuyor.",options:[{text:"Sahnede ona cevap ver.",effects:{rel_fans:3,charisma:1,rel_manager:-1},outcome:"Seyirci kaosu sevdi, hype tavan yapt."},{text:"Umursama, iine bak.",effects:{energy:1,rel_manager:2},outcome:"Profesyonelliini korudun. Menajerin takdir etti."},{text:"Moralim bozuldu, konseri ertele.",effects:{rel_fans:-10,careerCash:-500},outcome:"Byk fiyasko! Fanlar seni korkaklkla suluyor."}]},{id:"vip_guest",title:"VIP LOCA",desc:'ehrin en zengin i adam kulise geldi. "zel bir ark istersen sana sponsor olurum" diyor.',options:[{text:"Kabul et.",effects:{careerCash:1e3,rel_fans:-3},outcome:'Cebin para grd ama "satlm" damgas yedin.'},{text:"Reddet, ben halkn sanatsym.",effects:{rel_fans:4,charisma:2},outcome:"Respect kazandn. Sokak seni konuuyor."}]},{id:"throat_pain",title:"SES TEL",desc:"Boaznda hafif bir yanma var. Sesin atallanyor.",options:[{text:"Bitki ay i, zorlama.",effects:{flow:-2,energy:1},outcome:"Performansn dkt ama sesini korudun."},{text:"Viski i, ses alsn.",effects:{charisma:2,health:-2,energy:-1},outcome:"Sahnede devletin ama yarn konuamayacaksn."},{text:"Autotune'u fulleyin.",effects:{rel_fans:-2,flow:1},outcome:"Robot gibiydin ama en azndan detone olmadn."}]},{id:"costume_rip",title:"KIYAFET KAZASI",desc:"Sahneye karken pantolonun bir yere taklp yrtld!",options:[{text:"Byle k, bu yeni moda de.",effects:{charisma:3,rel_fans:1},outcome:"Herkes inand! Yeni bir akm balattn."},{text:"Yedek eofmanlar giy.",effects:{charisma:-2},outcome:"Tarzn bozuldu ama rezil olmadn."},{text:"Beni dikmeleri iin beklet.",effects:{hype:-10,rel_manager:-2},outcome:"Seyirci beklemekten skld."}]},{id:"police_check",title:"POLS KONTROL",desc:"Kulisi polisler bast. Rutin arama yapyorlar ama bu seni geriyor.",options:[{text:"Sakin kal, ibirliki ol.",effects:{energy:-1},outcome:"Temiz ktn ama modun dt."},{text:"Ters yap, buras benim alanm!",effects:{charisma:2,careerCash:-200},outcome:"Fanlar videoya ekti, viral oldun ama ceza yedin."}]},{id:"ex_lover",title:"ESK SEVGL",desc:"Eski sevgilini en nde, sana kt kt bakarken grdn.",options:[{text:"Ona bakarak hznl ark syle.",effects:{lyrics:2,rel_fans:2,energy:-2},outcome:"Duygusal anlar yaand, herkes alad."},{text:"Grmezden gel, elenmene bak.",effects:{energy:1,flow:1},outcome:"Umurunda deilmi gibi yaptn, sahne akt."},{text:"Gvenlie syle dar atsnlar.",effects:{rel_fans:-3,charisma:-2},outcome:"Kaba hareket. Seyirci yuhalad."}]},{id:"bad_acoustics",title:"KT AKUSTK",desc:"Mekann akustii berbat, ses bouk geliyor.",options:[{text:"Daha yksek sesle bar.",effects:{energy:-3,charisma:2},outcome:"Sesin ksld ama enerjin mekan doldurdu."},{text:"Slow arklara arlk ver.",effects:{hype:-5,flow:1},outcome:"Skc bir konser oldu ama ses anlald."}]},{id:"opening_act",title:"N GRUP",desc:"Senden nce kan grup seyirciyi ok fena coturdu. Beklenti yksek.",options:[{text:"Onlardan daha iyi olduumu gster.",effects:{energy:-2,flow:2,charisma:1},outcome:"Rekabet seni gaza getirdi, efsanevi bir giri yaptn."},{text:"Onlar sahneye geri ar, det yap.",effects:{rel_fans:3,rel_team:2},outcome:"Birlikten kuvvet dodu, gece unutulmaz oldu."}]},{id:"forgot_lyrics",title:"SZLER UNUTTUN",desc:"Sahneye kmadan hemen nce kafan boald. lk arknn szleri aklna gelmiyor.",options:[{text:"Telefondan bak.",effects:{charisma:-3,lyrics:-1},outcome:"Amatrce grnd."},{text:"Doalama gir.",effects:{flow:2,lyrics:1,energy:-1},outcome:"Riskliydi ama tuttu. Kimse anlamad."}]},{id:"rain_outdoor",title:"YAMUR BALADI",desc:"Ak hava konseri ve saanak yamur balad.",options:[{text:"Yamurda devam! Islanalm!",effects:{rel_fans:5,health:-3},outcome:"Efsanevi bir an oldu ama hasta olacaksn."},{text:"Konseri iptal et.",effects:{rel_fans:-5,careerCash:-50},outcome:"Gvenli ama hayal krkl."}]}],gb=[{id:"journalist_q",title:"RPORTAJ",desc:'Magazin muhabiri mikrofonu uzatt: "Rakibiniz X hakknda ne dnyorsunuz? Onun sizden iyi olduu syleniyor."',options:[{text:"O kim tanmyorum.",effects:{charisma:2,rel_fans:1},outcome:"Efsane cevap! Swag seviyen artt."},{text:"Herkesin tarz farkl, sayg duyarm.",effects:{lyrics:1,rel_manager:1},outcome:"Politik bir cevap. Lirik zekan takdir edildi."},{text:"Mikrofonu elinden alp frlat.",effects:{rel_fans:-2,careerCash:-100,rel_partner:-1},outcome:"Skandal! Tazminat deyeceksin ve sevgilin utand."}]},{id:"afterparty",title:"AFTER PARTY",desc:"Konser bitti, ehrin en nl kulbnde after party var. Ekip seni bekliyor.",options:[{text:"Tabii ki! Bu gece datyoruz!",effects:{rel_team:4,rel_partner:-2,careerCash:-200,energy:-4},outcome:"Efsane bir geceydi, ekiple kaynatn ama czdan boald ve bittin."},{text:"Hayr, eve gidip uyuyacam.",effects:{rel_team:-2,energy:2},outcome:"Skc bulundun ama din uyandn."},{text:"Sevgilimi alp yemee gideceim.",effects:{rel_partner:4,rel_team:-1,careerCash:-100},outcome:"Romantik bir akam. likin dzeldi."}]},{id:"viral_video",title:"VRAL VDEO",desc:"Konserde dtn bir an internete dm. Herkes dalga geiyor.",options:[{text:"Kendinle dalga geip payla.",effects:{rel_fans:3,charisma:1},outcome:"zgvenin takdir toplad. Krizi frsata evirdin."},{text:"Videoyu kaldrtmaya al.",effects:{rel_fans:-2,charisma:-1},outcome:'Daha ok yayld. "Streisand etkisi" yaadn.'}]},{id:"lost_voice",title:"SES KISILMASI",desc:"Konser sonras sesin tamamen gitti. Konuamyorsun.",options:[{text:"Doktora git.",effects:{careerCash:-150,energy:2},outcome:"lalar iyi geldi, dinlenmen lazm."},{text:"nemseme, geer.",effects:{flow:-2},outcome:"Ses tellerin zarar grd. Bir sre flow yetenein decek."}]},{id:"fan_gift",title:"HAYRAN HEDYES",desc:"Bir hayran kta sana el yapm bir portreni hediye etti.",options:[{text:"Teekkr edip pe at.",effects:{rel_fans:-5},outcome:"Biri bunu grp videoya ekti. Lin yiyorsun."},{text:"Eve gtrp as.",effects:{rel_fans:2,energy:1},outcome:"Hikayende paylatn, fanlar mest oldu."}]},{id:"collab_offer",title:"DET TEKLF",desc:"Sektrden yeni yetme bir rapi det yapmak iin yalvaryor.",options:[{text:"Kabul et, gence destek ol.",effects:{rel_fans:2,careerCash:-50},outcome:"Abi roln stlendin. Saygnlk kazandn."},{text:"Para verirse olur.",effects:{careerCash:500,rel_fans:-1},outcome:'Paray aldn ama "paragz" dediler.'},{text:"Reddet.",effects:{charisma:1},outcome:"Seviyemi korurum dedin."}]},{id:"hotel_room",title:"OTEL ODASI",desc:"Otel odasnda parti yaparken eyalar krld.",options:[{text:"deyip kapat konuyu.",effects:{careerCash:-300,charisma:1},outcome:"Rockstar hayat pahaldr."},{text:"Ka!",effects:{rel_manager:-3,rel_fans:-2},outcome:"Otel ynetimi basna szdrd. Rezillik."}]},{id:"sponsor_bonus",title:"SPONSOR PRM",desc:"Sponsor firma performans ok beendi, ekstra deme yapmak istiyor.",options:[{text:"Paray al.",effects:{careerCash:400},outcome:"Kasa doldu."},{text:"Paray ekibe dat.",effects:{rel_team:5,charisma:2},outcome:"Ekibin senin iin kurun atar kurun yer artk."}]},{id:"street_fight",title:"SOKAK KAVGASI",desc:"kta sana laf atan bir grup serseri var.",options:[{text:"Kavgaya gir.",effects:{health:-2,charisma:2,energy:-3},outcome:"Gzn morard ama geri vites yapmadn."},{text:"Arabaya binip git.",effects:{energy:1},outcome:"Akllca seim. Zarar grmedin."}]},{id:"inspiration",title:"LHAM GELD",desc:"Adrenalin yznden uyuyamyorsun, aklna harika szler geliyor.",options:[{text:"Hemen yaz.",effects:{lyrics:3,energy:-2},outcome:"Sabahladn ama efsane bir verse yazdn."},{text:"Uyu, yarn yazarsn.",effects:{energy:2},outcome:"Dinlendin ama szleri unuttun."}]},{id:"charity",title:"YARDIM KONSER",desc:"Bir dernek, gelirini balaman iin seni aryor.",options:[{text:"Geliri bala.",effects:{careerCash:-200,rel_fans:5,respect:2},outcome:"Paradan oldun ama kalpleri kazandn."},{text:"Benim de paraya ihtiyacm var.",effects:{careerCash:200,rel_fans:-1},outcome:"Paray cebine attn."}]},{id:"manager_meeting",title:"MENAJER TOPLANTISI",desc:"Menajerin performans deerlendirmek istiyor.",options:[{text:"Dinle ve not al.",effects:{rel_manager:3,flow:1},outcome:"Hatalarndan ders kardn."},{text:"Ben oldum artk, sen kimsin?",effects:{rel_manager:-4,charisma:1},outcome:"Egon tavan yapt, menajer bozuldu."}]}],g3={rel_manager:"Menajer",rel_team:"Ekip",rel_fans:"Fanlar",rel_partner:"Ak",careerCash:"Nakit",energy:"Enerji",charisma:"Karizma",flow:"Flow",lyrics:"Lirik",rhythm:"Ritim"},x3=({scenario:t,onOptionSelect:e})=>a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",children:a.jsxs("div",{className:"bg-[#111] border-2 border-white/10 rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl relative",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-900 to-[#111] p-6 border-b border-white/5 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx("span",{className:"text-6xl",children:""})}),a.jsx("div",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest mb-2",children:"SON DAKKA"}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter leading-none",children:t.title})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-neutral-300 text-sm font-medium leading-relaxed mb-8",children:t.desc}),a.jsx("div",{className:"space-y-3",children:t.options.map((n,i)=>a.jsxs("button",{onClick:()=>e(n),className:"w-full text-left p-4 bg-[#1a1a1a] hover:bg-[#222] border border-white/5 rounded-xl transition-all active:scale-[0.98] group",children:[a.jsx("div",{className:"text-white font-bold text-xs mb-1 group-hover:text-purple-400 transition-colors",children:n.text}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:n.effects&&Object.entries(n.effects).map(([s,r])=>{const l=Number(r)>0,o=s==="careerCash",u=g3[s]||s,f=o?`${Math.abs(Number(r))}`:Math.abs(Number(r));return a.jsxs("span",{className:`text-[9px] font-mono font-bold ${l?"text-green-500":"text-red-500"}`,children:[l?"+":"-",f," ",o?"":u]},s)})})]},i))})]})]})}),b3=({outcome:t,onClose:e})=>a.jsx("div",{className:"fixed inset-0 z-[200] bg-black/90 flex items-center justify-center p-6 animate-fade-in",onClick:e,children:a.jsxs("div",{className:"bg-[#111] border border-green-500/30 rounded-2xl p-8 max-w-sm text-center shadow-[0_0_50px_rgba(34,197,94,0.1)]",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"SONU"}),a.jsx("p",{className:"text-neutral-400 text-sm mb-6",children:t}),a.jsx("button",{className:"text-green-500 font-bold text-xs uppercase tracking-widest animate-pulse",children:"Devam Et "})]})}),xb=35,v3=({player:t,updateStat:e,updateMultipleStats:n,onExit:i,onEditCharacter:s,onOpenShop:r})=>{const[l,o]=w.useState("hub"),[u,f]=w.useState([]),[h,c]=w.useState(0),[d,p]=w.useState(xb),[x,v]=w.useState(0),[b,m]=w.useState(50),[g,y]=w.useState([]),[_,E]=w.useState(0),[S,N]=w.useState(0),[A,T]=w.useState(!1),[k,C]=w.useState(null),[L,D]=w.useState(50),[B,$]=w.useState("none"),[O,H]=w.useState(null),[Q,P]=w.useState([]),[R,I]=w.useState({cash:0,fans:0,reputation:0,success:!0,failReason:""}),[M,z]=w.useState(null),[V,Z]=w.useState(null),X=w.useRef(null),q=w.useRef(null),te=w.useRef(null),Pe=w.useRef(null);w.useEffect(()=>{if(l==="simulation"){if(u.length>0){const G=u[h].previewUrl;if(X.current&&X.current.src===G&&!X.current.paused)return;He(G)}}else Ce();return()=>Ce()},[l,h]);const He=G=>{if(X.current&&X.current.pause(),!G)return;const ne=new Audio(G);ne.volume=.5,ne.loop=!1,ne.onended=()=>{ae(!0)},X.current=ne,ne.play().catch(ie=>console.log("Audio play failed",ie))},Ce=()=>{X.current&&(X.current.pause(),X.current=null)},dt=G=>{n({currentCity:G}),o("venue_select")},wi=(G,ne)=>{C(G),D(ne),e("careerCash",-G.rentCost);const ie=mb[Math.floor(Math.random()*mb.length)];z(ie),o("pre_scenario")},Fn=(G,ne)=>{G&&(Object.keys(G).length>1?n(G):Object.entries(G).forEach(([ie,K])=>{e(ie,Number(K))})),z(null),Z(ne)},Vn=()=>{Z(null),l==="pre_scenario"?o("setup"):l==="post_scenario"&&o("result")},Ke=(G,ne="info")=>{const ie=new Date,K=`${ie.getHours()}:${ie.getMinutes()<10?"0"+ie.getMinutes():ie.getMinutes()}`;y(ee=>[{id:Date.now(),text:G,type:ne,timestamp:K},...ee].slice(0,20))},pe=G=>{f(G),c(0),p(xb),v(0),E(0),N(0);const ne=30+(t.rel_fans||0)*.1+(t.rel_manager||0)*.1;m(Math.min(100,ne)),y([]),P(["rapsurfer","flashlight","scratch","breakdance","prompter"].sort(()=>Math.random()-.5)),o("simulation"),Ke("SAHNEYE IKTIN! HERKES SENN SMN HAYKIRIYOR!","good")};w.useEffect(()=>{if(l==="simulation")return q.current=setInterval(()=>{B!=="none"||O||(p(G=>G<=0?0:(G===6&&Ke("FNAL YAKLAIYOR! SON BR ENERJ!","info"),G-1)),E(G=>Math.max(0,G-1)),N(G=>Math.max(0,G-1)))},1e3),()=>clearInterval(q.current)},[l,B,O]),w.useEffect(()=>{l==="simulation"&&d===0&&oe()},[d,l]),w.useEffect(()=>{if(l==="simulation")return te.current=setInterval(()=>{O||B!=="none"||_e()},2500),()=>clearInterval(te.current)},[l,O,B]);const _e=()=>{const ne=Q.length>0?.35:.08,ie=Math.random();if(ie<ne){At();return}if(ie>.6){m(ee=>Math.min(100,ee+5)),v(ee=>ee+100);const K=["Kalabalk ismini haykryor!","Flashlar geceyi aydnlatt!","Sahneye styen atld!","En ndeki fanlar ldrd!","Bu beat mekan ykar geer!","Nakarat tm salon sylyor!","Enerji tavan yapt, yer yerinden oynuyor!","Sahne senin, yarg datyorsun!"];Ke(K[Math.floor(Math.random()*K.length)],"good")}else if(ie<.3){m(ee=>Math.max(0,ee-5));const K=["Monitrden ses gelmiyor...","Arka taraf kendi arasnda konuuyor.","Ritim biraz aksad sanki.","Sahne klar gzn ald.","Mikrofon kablosuna takldn.","Seyircinin enerjisi dyor.","Birisi sahneye su iesi att!","Sesi uyuyor galiba..."];Ke(K[Math.floor(Math.random()*K.length)],"bad")}else{const K=["Duman efektleri sahneyi kaplad.","Basslar cierleri titretiyor.","Lazer ovu balad.","DJ scratch atyor.","Gvenlik bariyerleri zorlanyor.","Atmosfer snyor...","Herkes ellerini havaya kaldrd."];Ke(K[Math.floor(Math.random()*K.length)],"info")}},At=()=>{let G;if(Q.length>0)G=Q[0],P(ie=>ie.slice(1));else{const ie=["rapsurfer","flashlight","scratch","breakdance","prompter"];G=ie[Math.floor(Math.random()*ie.length)]}const ne={rapsurfer:{label:"SES DALGASI",msg:" SES FREKANSI KAYDI! DZELTMEK N SRF YAP!"},flashlight:{label:"FLALARI YAK",msg:"ARKA TARAF SIKILDI TELEFONLARININ FLASHLARINI ATIR!"},scratch:{label:"BEAT DROP",msg:" DROP GELYOR! SCRATCH AT!"},breakdance:{label:"BREAKDANCE OV",msg:" SEYRC COMAK STYOR! MD BREAKDANCE ZAMANI!"},prompter:{label:"SZLER UNUTTUN",msg:" SZLER AKLINDAN UTU! PROMPTER'I OKU VE YAZ!"},none:{label:"",msg:""}}[G];H({type:G,label:ne.label,msg:ne.msg}),Ke(ne.msg,"crisis")},J=G=>{$("none"),H(null),G>50?(Ke(`KRZ ZLD! EFSANE MDAHALE! (+${G} Puan)`,"good"),v(ne=>ne+G*10),m(ne=>Math.min(100,ne+20))):(Ke("MDAHALE BAARISIZ! SEYRC SOUDU.","bad"),m(ne=>Math.max(0,ne-20)))},ae=(G=!1)=>{if(O||B!=="none")return;if(!G&&_>0){Ke(`ok sk para deitiriyorsun! (${_}s bekle)`,"bad");return}const ne=(h+1)%u.length;c(ne),E(5),Ke(G?`OTOMATK GE: ${u[ne].trackName}`:`YEN PARA GRD: ${u[ne].trackName}`,"info")},Ue=()=>{if(O||B!=="none"||S>0)return;N(16),T(!0),setTimeout(()=>T(!1),50),m(ne=>Math.min(100,ne+5));const G=["Sahne duman alt!","Konfeti yamuru!","Lazer ovu gz alyor!","Alevler ykseliyor!"];Ke(G[Math.floor(Math.random()*G.length)],"good")},oe=()=>{clearInterval(q.current),clearInterval(te.current),Ce();const G=Math.random(),ne=G<.1;let ie=b>=50&&!ne,K=0,ee=0,we="",Te={};if(k){const nt=Math.max(0,(L-50)/500),_s=Math.min(1,Math.max(.1,b/100-nt)),Oa=Math.floor(k.capacity*_s),ws=Oa*L,uN=Math.floor(x*.5),dN=ws+uN;K=kg(dN,t.currentCity||"eskisehir",t),ee=Math.floor(Oa*(b/100)*.5),ne?(we="POLS BASKINI! KONSER PTAL EDLD.",G<.05&&(we="SES SSTEM PATLADI! SEYRC SYAN ETT."),K=-Math.floor(ws*.5),ee=-Math.floor(k.capacity*.2),ie=!1,Te.rel_manager=-10,Te.rel_fans=-10):ie?(Te.rel_fans=5,Te.rel_team=2,Te.rel_manager=2):(we="SEYRC H BEENMED.",K=Math.floor(ws*.2),ee=-Math.floor(ee*.5),Te.rel_fans=-5)}else{const nt=b/50;K=Math.floor(500+x*.5*nt),K=kg(K,t.currentCity||"eskisehir",t)}const Je=Math.floor(K),sn=Math.floor(ee);Te.careerCash=Je,Te.monthly_listeners=sn,ie&&(Te.week=1,Te.flow=-Math.ceil(t.flow*.03),Te.lyrics=-Math.ceil(t.lyrics*.03),Te.charisma=-Math.ceil(t.charisma*.03));const rn={...t,careerCash:t.careerCash+Je},Tt=yS(rn);Object.entries(Tt).forEach(([nt,_s])=>{if(nt==="careerCash"){const ws=_s-t.careerCash;Te.careerCash=ws}else{const Oa=t[nt],ws=_s;Te[nt]=ws-Oa}}),n(Te),I({cash:Je,fans:sn,reputation:0,success:ie,failReason:we});const an=gb[Math.floor(Math.random()*gb.length)];z(an),o("post_scenario")};if(l==="hub")return a.jsx(i3,{player:t,onStartSetup:()=>o("city_select"),onExit:i,updateStat:e,updateMultipleStats:n,onEditCharacter:s,onOpenShop:r});if(l==="city_select")return a.jsx(oN,{player:t,onSelectCity:dt,onClose:()=>o("hub")});if(l==="venue_select")return a.jsx(r3,{player:t,onConfirm:wi,onBack:()=>o("city_select")});if(M)return a.jsx(x3,{scenario:M,onOptionSelect:G=>Fn(G.effects,G.outcome)});if(V)return a.jsx(b3,{outcome:V,onClose:Vn});if(l==="setup")return a.jsx(s3,{player:t,onComplete:pe,onBack:()=>o("venue_select")});if(B==="rapsurfer")return a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(a3,{onComplete:G=>J(G)})});if(B==="flashlight")return a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(l3,{onComplete:G=>J(G)})});if(B==="scratch")return a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(o3,{onComplete:G=>J(G)})});if(B==="prompter")return a.jsx(c3,{onComplete:G=>J(G)});if(B==="breakdance")return a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(Fh,{playerName:t.name,isSolo:!0,isMiniGame:!0,initialDuration:10,onGameEnd:G=>J(G),onExit:()=>$("none")})});if(l==="simulation"){const G=u[h];return a.jsxs("div",{className:"h-full w-full bg-[#050505] flex flex-col relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-purple-900/30 via-black to-black animate-pulse"}),a.jsx("div",{className:"absolute inset-0 z-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"}),a.jsx("div",{className:`absolute inset-0 bg-white z-50 pointer-events-none mix-blend-overlay transition-opacity duration-150 ease-out ${A?"opacity-80":"opacity-0"}`}),a.jsxs("div",{className:"relative z-30 p-4 border-b border-white/5 bg-gradient-to-b from-black/80 to-transparent",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 1rem)"},children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-[#e91429] text-white text-[9px] font-black px-2 py-0.5 rounded animate-pulse shadow-[0_0_10px_#e91429]",children:"CANLI"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ot,{className:"w-4 h-4 text-yellow-500"}),a.jsx("span",{className:"text-white font-black text-xl tracking-tight leading-none",children:x.toLocaleString()})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-white/80 bg-black/40 px-3 py-1 rounded-full border border-white/10",children:[a.jsx(TI,{className:"w-4 h-4 text-neutral-400"}),a.jsxs("span",{className:`font-mono font-bold ${d<10?"text-red-500 animate-pulse":"text-white"}`,children:[d,"s"]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-[9px] font-black uppercase mb-1",children:[a.jsx("span",{className:"text-[#1ed760] tracking-[0.2em] drop-shadow-sm",children:"SEYRC HYPE"}),a.jsxs("span",{className:"text-white",children:[b,"%"]})]}),a.jsx("div",{className:"h-2 bg-[#222] rounded-full overflow-hidden border border-white/5 relative",children:a.jsx("div",{className:`h-full transition-all duration-500 ease-out relative ${b>70?"bg-gradient-to-r from-[#1ed760] to-green-400 shadow-[0_0_15px_#1ed760]":b>30?"bg-yellow-500":"bg-red-600"}`,style:{width:`${b}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})})]})]}),a.jsxs("div",{className:"flex-1 relative p-4 flex flex-col justify-end overflow-hidden z-10",children:[O&&a.jsx("div",{className:"absolute inset-0 z-40 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in p-6",children:a.jsxs("div",{className:"text-center p-6 bg-[#1a1a1a] border border-red-500/50 rounded-3xl shadow-[0_0_50px_rgba(220,38,38,0.4)] w-full max-w-sm relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-red-900/10 animate-pulse"}),a.jsx("h2",{className:"text-2xl font-black text-red-500 italic mb-2 animate-bounce uppercase tracking-wider relative z-10",children:O.label}),a.jsx("p",{className:"text-white text-xs mb-6 font-bold leading-relaxed uppercase tracking-wide relative z-10",children:O.msg}),a.jsx("button",{onClick:()=>$(O.type),className:"w-full bg-red-600 hover:bg-red-500 text-white font-black py-4 rounded-xl text-xs uppercase tracking-[0.2em] transition-transform active:scale-95 shadow-lg relative z-10",children:"MDAHALE ET"})]})}),a.jsx("div",{ref:Pe,className:"w-full h-full overflow-y-auto space-y-2 relative mask-image-b pb-2",children:g.map(ne=>{let ie="border-l-2 border-white/20 bg-black/40 text-neutral-400";return ne.type==="crisis"&&(ie="border-l-4 border-red-500 bg-red-900/30 text-white font-bold shadow-lg"),ne.type==="good"&&(ie="border-l-2 border-[#1ed760] bg-green-900/20 text-[#1ed760] font-medium"),ne.type==="bad"&&(ie="border-l-2 border-orange-500 bg-orange-900/20 text-orange-400"),a.jsxs("div",{className:`p-3 rounded-r-xl backdrop-blur-sm animate-slide-in-left flex gap-3 items-start text-xs leading-snug ${ie}`,children:[a.jsx("span",{className:"font-mono text-[9px] opacity-60 mt-0.5",children:ne.timestamp}),a.jsx("span",{children:ne.text})]},ne.id)})})]}),a.jsx("div",{className:"bg-[#111] border-t border-white/10 p-4 pb-safe relative z-30 shadow-[0_-10px_40px_rgba(0,0,0,0.8)]",children:a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("div",{className:`w-16 h-16 rounded-full bg-[#1a1a1a] p-1 shadow-lg shrink-0 relative ${!O&&B==="none"?"animate-spin-slow":""}`,children:a.jsxs("div",{className:"w-full h-full rounded-full overflow-hidden border-2 border-[#333] relative",children:[a.jsx("img",{src:G.artworkUrl100,className:"w-full h-full object-cover opacity-90"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent to-white/20"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-[#111] rounded-full border border-white/20"})]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[9px] text-[#1ed760] font-black uppercase tracking-wider mb-1 truncate",children:"U AN ALIYOR"}),a.jsx("div",{className:"text-white font-bold text-sm truncate mb-3",children:G.trackName}),a.jsx("button",{onClick:()=>{Y(),ae(!1)},disabled:!!O||B!=="none"||_>0,className:"bg-[#1ed760] text-black px-4 py-2 rounded-full font-bold uppercase tracking-widest text-[10px] hover:scale-105 active:scale-95 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale",children:_>0?a.jsxs("span",{className:"text-neutral-800",children:["BEKLE ",_,"s"]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-3 h-3"}),"SIRADAK PARAYI AL"]})})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("button",{onClick:()=>!O&&B==="none"&&Ke("Seyirciye bardn: 'SES VER!'","good"),className:"bg-[#222] w-12 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white hover:bg-[#1ed760] hover:text-black hover:border-[#1ed760] transition-all active:scale-95",children:a.jsx(vi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ue,disabled:S>0,className:`w-12 h-8 rounded-lg border border-white/10 flex items-center justify-center transition-all active:scale-95 ${S>0?"bg-[#222] opacity-30 cursor-not-allowed":"bg-[#222] hover:bg-purple-600 hover:text-white hover:border-purple-600 text-purple-400"}`,children:a.jsx("span",{className:"text-[9px] font-black tracking-widest",children:S>0?`${S}`:"FX"})})]})]})})]})}return l==="result"?a.jsxs("div",{className:"h-full bg-[#050505] flex flex-col items-center justify-center p-6 animate-fade-in relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-[radial-gradient(circle_at_top,_var(--tw-gradient-stops))] from-[#1ed760]/20 via-black to-black pointer-events-none"}),a.jsxs("div",{className:"relative z-10 w-full max-w-sm text-center",children:[a.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl animate-bounce ${R.success?"bg-[#1ed760] shadow-[#1ed760]/40":"bg-red-500 shadow-red-500/40"}`,children:R.success?a.jsx(Ot,{className:"w-12 h-12 text-black"}):a.jsx("div",{className:"text-4xl",children:""})}),a.jsx("h1",{className:"text-4xl font-black text-white italic tracking-tighter mb-2",children:R.success?"KONSER BTT!":"FYASKO!"}),a.jsx("p",{className:"text-neutral-400 font-medium mb-10 text-sm uppercase tracking-widest",children:R.failReason||"Performans zeti"}),a.jsxs("div",{className:"bg-[#121212] border border-white/5 rounded-3xl p-6 space-y-4 mb-8 backdrop-blur-md shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider",children:"Toplam Skor"}),a.jsx("span",{className:"text-white font-black text-2xl",children:x.toLocaleString()})]}),a.jsx("div",{className:"h-px bg-white/5 w-full"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider",children:"Kariyer Kazanc"}),a.jsxs("span",{className:`font-black text-xl flex items-center gap-1 ${R.cash>=0?"text-[#1ed760]":"text-red-500"}`,children:[R.cash>=0?"+":"","",R.cash.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-neutral-500 text-xs font-bold uppercase tracking-wider",children:"Dinleyici"}),a.jsxs("span",{className:`font-black text-xl flex items-center gap-1 ${R.fans>=0?"text-purple-400":"text-red-500"}`,children:[R.fans>=0?"+":"",R.fans.toLocaleString()]})]})]}),a.jsx("button",{onClick:()=>o("hub"),className:"w-full bg-white text-black font-black py-4 rounded-full uppercase tracking-[0.2em] text-xs hover:scale-[1.02] transition-transform shadow-lg",children:"KULSE DN"})]})]}):null},y3=180,bb=6e4/y3,_3=2600,w3="https://files.catbox.moe/i8utl5.mp3",vb=5,yb=[{id:1,name:"GR",pool:["DOKUZ","DOMUZ","OTUZ","HAVUZ"]},{id:2,name:"A-K UYUMU",pool:["YATAK","TABAK","KABAK","TARAK"]},{id:3,name:"GRSEL TUZAK",pool:["KUTU","KUYU","KOYU","KORU"]},{id:4,name:"KISA SER",pool:["MASA","YASA","KASA","TASA"]},{id:5,name:"S- KARMAASI",pool:["AKA","SAKA","KAKA","YAKA"]},{id:6,name:"TEK HECELLER",pool:["CAM","AM","GAM","DAM"]},{id:7,name:"-K UYUMU",pool:["EZK","ZK","DZK","BZK"]},{id:8,name:"R HARF",pool:["SARI","DARI","YARI","KARI"]},{id:9,name:"ZHN YANILTMACA",pool:["EKMEK","EKME","TEKME","SEKME"]},{id:10,name:"KLASK VRAL",pool:["VUR","TUR","TUT","DUR"]},{id:11,name:"DUDAK TEMBELL",pool:["BABA","PAPA","SOPA","KABA"]},{id:12,name:"L-R AKICILII",pool:["LALE","JALE","KALE","HALE"]},{id:13,name:"--K ZORLUU",pool:["E","E","KE","NEE"]},{id:14,name:"Z-R SESTET",pool:["AZI","BAZI","RAZI","YAZI"]},{id:15,name:"M-N NAZAL FNAL",pool:["MAMA","MANA","NANA","DANA"]},{id:16,name:"SAYILAR",pool:["KIRK","KRK","TRK","ARK"]},{id:17,name:"O- UYUMU",pool:["KO","CO","BO","HO"]},{id:18,name:"YUMUAK G",pool:["DA","BA","SA","YA"]},{id:19,name:"-L UYUMU",pool:["TL","KL","GL","DL"]},{id:20,name:"SERT HECE",pool:["AK","PAK","BAK","AK"]}],_b=["Eminem seni arad, telefonu amadn... ok hzlydn!","Dilin dmlendi mi? Su verelim abime!","Bu hzla konuursan seni kimse anlamaz ama olsun, eklin yeter.","Mikrofon eridi, stdyo yand. Masraf kim deyecek?","Tebrikler! Artk resmi olarak bir Flow Makinesi'sin.","Cierin soldu biliyorum... Ama dedi!","Hz snrn atn, radar cezas arkadan gelir.","Nefes almay unuttun sandk bir an!","Beat sana yetiemedi, o derece..."],N3=({onExit:t})=>{const[e,n]=w.useState({visibleCount:0,activeIdx:-1,words:[],levelName:"HAZIRLAN",currentLevelIndex:0,phase:"IDLE"}),[i,s]=w.useState(null),[r,l]=w.useState(""),[o,u]=w.useState(!1),f=w.useRef({levelQueue:[],currentLvlIdx:0,step16:-1,isRunning:!1,lastTickTime:0}),h=w.useRef(null),c=w.useRef(0);w.useEffect(()=>{h.current=new Audio(w3),h.current.loop=!0,h.current.volume=.6,h.current.preload="auto",h.current.load();const E=yb[0].pool,S=Array(8).fill(null).map(()=>E[Math.floor(Math.random()*E.length)]);return n(N=>({...N,words:S,levelName:"RTM OYUNU"})),()=>{g(),h.current&&(h.current.pause(),h.current=null)}},[]);const d=()=>[...yb].sort(()=>Math.random()-.5).slice(0,vb),p=E=>{const S=E.pool,N=[];for(let A=0;A<8;A++)N.push(S[Math.floor(Math.random()*S.length)]);return N},x=()=>{if(f.current.isRunning)return;Y(),n(A=>({...A,phase:"INTRO"})),h.current&&(h.current.currentTime=0,h.current.play().catch(A=>console.log("Audio block",A))),s(3),hs();let E=3;const S=_3/3,N=setInterval(()=>{E--,E>0?(s(E),hs()):(clearInterval(N),s(null),v())},S)},v=()=>{const E=d();f.current={levelQueue:E,currentLvlIdx:0,step16:-1,isRunning:!0,lastTickTime:performance.now()};const S=E[0],N=p(S);n({words:N,levelName:S.name,currentLevelIndex:1,visibleCount:0,activeIdx:-1,phase:"REVEAL"}),f.current.lastTickTime=performance.now(),m(),c.current=requestAnimationFrame(b)},b=E=>{if(!f.current.isRunning)return;const S=E-f.current.lastTickTime;S>=bb&&(f.current.lastTickTime=E-S%bb,m()),c.current=requestAnimationFrame(b)},m=()=>{let{step16:E,currentLvlIdx:S,levelQueue:N}=f.current;if(u(!0),setTimeout(()=>u(!1),100),E++,E>15){if(E=0,S++,S>=N.length){y();return}const A=N[S],T=p(A);f.current.currentLvlIdx=S,n({visibleCount:1,activeIdx:-1,words:T,levelName:A.name,currentLevelIndex:S+1,phase:"REVEAL"})}else E<8?n(A=>({...A,visibleCount:E+1,activeIdx:-1,phase:"REVEAL"})):n(A=>({...A,visibleCount:8,activeIdx:E-8,phase:"HIGHLIGHT"}));f.current.step16=E},g=()=>{f.current.isRunning=!1,cancelAnimationFrame(c.current),s(null),h.current&&(h.current.pause(),h.current.currentTime=0)},y=()=>{g(),nn();const E=_b[Math.floor(Math.random()*_b.length)];l(E),n(S=>({...S,phase:"FINISHED"}))},_=()=>{n(E=>({...E,phase:"IDLE"})),x()};return a.jsxs("div",{className:"h-full w-full bg-[#050505] flex flex-col relative overflow-hidden font-sans select-none touch-none",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#0a0a0a] to-[#050505]"}),a.jsx("div",{className:`absolute top-[-20%] left-[-20%] w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px] transition-opacity duration-100 will-change-opacity ${o?"opacity-30":"opacity-10"}`}),a.jsx("div",{className:`absolute bottom-[-20%] right-[-20%] w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[120px] transition-opacity duration-100 will-change-opacity ${o?"opacity-30":"opacity-10"}`}),a.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#1a1a1a 1px, transparent 1px), linear-gradient(90deg, #1a1a1a 1px, transparent 1px)",backgroundSize:"40px 40px",transform:"perspective(500px) rotateX(10deg) scale(1.2)"}})]}),a.jsxs("div",{className:"relative z-10 p-6 flex justify-between items-start pt-safe-top",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_5px_cyan]"}),a.jsx("span",{className:"text-[10px] font-black text-cyan-400 uppercase tracking-widest",children:"RITIM OYUNU"})]}),a.jsx("h1",{className:`text-2xl font-black italic tracking-tighter text-white transition-transform duration-100 ${o?"scale-105 text-cyan-200":""}`,children:e.phase==="REVEAL"?"EZBERLE":e.phase==="HIGHLIGHT"?"OKU!":"HAZIRLAN"}),e.phase!=="IDLE"&&e.phase!=="FINISHED"&&a.jsxs("div",{className:"text-[10px] text-neutral-500 font-bold mt-1 tracking-wide",children:["SEVYE ",e.currentLevelIndex," / ",vb]})]}),a.jsx("button",{onClick:()=>{g(),t()},className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white border border-white/10 active:scale-90 transition-transform hover:bg-white/10",children:""})]}),a.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-10 flex gap-1 h-8 items-end opacity-50",children:[...Array(5)].map((E,S)=>a.jsx("div",{className:"w-1.5 rounded-full bg-cyan-500 transition-all duration-75 will-change-transform",style:{height:o?`${40+Math.random()*60}%`:"20%",opacity:o?1:.3}},S))}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative pb-32 z-10",children:[i!==null&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:a.jsx("div",{className:"w-full text-center text-[150px] font-black text-transparent bg-clip-text bg-gradient-to-b from-cyan-300 to-cyan-600 italic animate-ping drop-shadow-[0_0_30px_rgba(6,182,212,0.5)] leading-none pr-4",children:i})}),e.phase==="FINISHED"&&a.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/90 backdrop-blur-md p-8 text-center animate-fade-in",children:[a.jsx(Gh,{className:"w-20 h-20 text-cyan-400 mb-6 animate-pulse"}),a.jsx("h2",{className:"text-5xl font-black text-white italic tracking-tighter mb-4",children:"BTT!"}),a.jsx("div",{className:"bg-[#111] border border-white/10 p-6 rounded-2xl mb-8 w-full max-w-xs shadow-2xl",children:a.jsxs("p",{className:"text-neutral-300 text-sm font-medium leading-relaxed",children:['"',r,'"']})}),a.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs",children:[a.jsx("button",{onClick:_,className:"bg-cyan-500 text-black font-black py-4 rounded-xl hover:scale-105 transition-transform uppercase tracking-widest text-sm shadow-[0_0_30px_rgba(6,182,212,0.4)]",children:"TEKRAR OYNA "}),a.jsx("button",{onClick:t,className:"bg-transparent border border-white/20 text-neutral-400 font-bold py-4 rounded-xl hover:text-white hover:border-white transition-colors uppercase tracking-widest text-sm",children:"IKI"})]})]}),a.jsx("div",{className:`grid grid-cols-2 gap-3 w-full max-w-sm transition-all duration-300 ${e.phase==="IDLE"?"opacity-40 grayscale scale-95":"opacity-100 scale-100"}`,children:e.words.map((E,S)=>{const N=S<e.visibleCount,A=S===e.activeIdx;return a.jsxs("div",{className:`flex items-center justify-center rounded-2xl border-2 h-20 transition-all duration-100 relative overflow-hidden backdrop-blur-sm ${A?"bg-cyan-500/20 border-cyan-400 shadow-[0_0_30px_rgba(6,182,212,0.3)] scale-[1.03] z-20":N?"bg-[#111]/80 border-cyan-900/50":"bg-black/20 border-white/5"}`,children:[A&&a.jsx("div",{className:"absolute inset-0 bg-cyan-400/10 animate-pulse"}),a.jsx("span",{className:`text-xl md:text-2xl font-black italic tracking-tighter transition-all duration-75 text-center break-all px-2 leading-none w-full ${A?"text-cyan-50 drop-shadow-[0_0_10px_rgba(6,182,212,0.8)] scale-110":N?"text-cyan-100/70":"opacity-0"}`,children:E}),a.jsxs("div",{className:`absolute top-2 left-3 text-[9px] font-mono font-bold ${A?"text-cyan-300":"text-white/20"}`,children:["0",S+1]})]},S)})})]}),e.phase==="IDLE"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 pb-12 bg-gradient-to-t from-black via-black/95 to-transparent z-40 flex justify-center",children:a.jsx("button",{onClick:x,className:"w-full max-w-sm bg-cyan-400 text-black font-black py-5 rounded-2xl text-lg uppercase tracking-[0.3em] shadow-[0_0_40px_rgba(34,211,238,0.3)] hover:scale-[1.01] active:scale-95 transition-all border-4 border-transparent hover:border-white/20",children:"BALAT"})}),(e.phase==="REVEAL"||e.phase==="HIGHLIGHT")&&a.jsx("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:a.jsx("div",{className:`text-[10px] font-black uppercase tracking-[0.5em] transition-colors ${e.phase==="HIGHLIGHT"?"text-pink-500 animate-pulse":"text-neutral-500"}`,children:e.phase==="REVEAL"?"HAFIZAYA AL...":"RTM TAKP ET!"})})]})},E3=({onComplete:t})=>{const[e,n]=w.useState(0),i=[{icon:"",title:"MKROFON SENDE",desc:"Flowify'a ho geldin. Buras sradan bir oyun deil, bir kariyer simlasyonu. Yeraltndan balayp listeleri alt st etmeye hazr msn?",sub:"HKAYEN MD BALIYOR"},{icon:a.jsx(Ia,{className:"w-12 h-12 text-[#1ed760]"}),title:"FAN = SEVYE",desc:"Bu oyunda en nemli ey Fan (XP) kazanmaktr. Konser vererek veya Arcade oyunlar oynayarak Fan kitleni byt. Fan sayn arttka seviye atlarsn.",sub:"HEDEF: SEVYE ATLA, EHRLER A"},{icon:a.jsx(Ot,{className:"w-12 h-12 text-yellow-500"}),title:"HER YERDE KAZAN",desc:"Sadece konser vermek zorunda deilsin. Arcade salonundaki mini oyunlarda yksek skor yaparak da Fan ve Nakit kazanabilirsin. Kendini her alanda gelitir.",sub:"ARCADE OYNA, KENDN GELTR"}],s=i[e];return a.jsxs("div",{className:"fixed inset-0 z-[999] bg-black flex flex-col items-center justify-center p-6 animate-fade-in font-sans",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1a1a1a_0%,_#000_100%)] pointer-events-none"}),a.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] pointer-events-none"}),a.jsxs("div",{className:"relative z-10 w-full max-w-sm bg-[#121212]/90 backdrop-blur-xl border border-white/10 rounded-[2rem] p-8 shadow-2xl flex flex-col items-center text-center",children:[a.jsx("div",{className:"flex gap-1.5 mb-8",children:i.map((r,l)=>a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${l===e?"w-8 bg-white":"w-2 bg-white/20"}`},l))}),a.jsx("div",{className:"w-24 h-24 bg-gradient-to-tr from-white/10 to-white/5 rounded-full flex items-center justify-center text-5xl shadow-[0_0_40px_rgba(255,255,255,0.1)] mb-6 ring-1 ring-white/10",children:s.icon}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-4 uppercase",children:s.title}),a.jsx("p",{className:"text-neutral-300 text-sm font-medium leading-relaxed mb-4 min-h-[80px]",children:s.desc}),a.jsx("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/5 mb-8",children:a.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em]",children:s.sub})}),a.jsx("button",{onClick:()=>{e<i.length-1?n(r=>r+1):t()},className:"w-full bg-white text-black font-black py-4 rounded-xl hover:scale-[1.02] active:scale-95 transition-all uppercase tracking-[0.2em] text-xs shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:e<i.length-1?"DEVAM ET":"BALAYALIM"})]})]})},dd=({title:t,rewardText:e,onWatch:n,onCancel:i,buttonText:s="REKLAM ZLE"})=>{const[r,l]=w.useState(!1),o=async()=>{l(!0);const u=await Au.reklami_baslat();l(!1),u?n():alert("Reklam u anda yklenemedi. Ltfen internet balantn kontrol et veya biraz sonra tekrar dene.")};return a.jsxs("div",{className:"fixed inset-0 z-[999] bg-black/95 backdrop-blur-xl flex flex-col items-center justify-center p-6 animate-fade-in font-sans",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-900/20 to-blue-900/20 pointer-events-none"}),a.jsxs("div",{className:"relative z-10 w-full max-w-sm bg-[#121212] border border-white/10 rounded-[2rem] p-8 shadow-2xl flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-tr from-[#1ed760] to-emerald-600 rounded-full flex items-center justify-center text-white mb-6 shadow-[0_0_30px_rgba(30,215,96,0.3)] animate-bounce",children:a.jsx(vn,{className:"w-8 h-8 ml-1"})}),a.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tighter mb-2 uppercase",children:t}),a.jsx("p",{className:"text-neutral-300 text-sm font-bold mb-8",children:e}),r?a.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-[#1ed760] border-t-transparent rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"REKLAM YKLENYOR..."})]}):a.jsxs("button",{onClick:o,className:"w-full bg-white text-black font-black py-4 rounded-xl hover:scale-[1.02] active:scale-95 transition-all uppercase tracking-[0.2em] text-xs shadow-lg mb-3 flex items-center justify-center gap-2",children:[a.jsx(vn,{className:"w-3 h-3"}),s]}),!r&&a.jsx("button",{onClick:i,className:"text-neutral-500 text-[10px] font-bold uppercase tracking-widest hover:text-white transition-colors p-2",children:"HAYIR, TEEKKRLER"})]})]})},S3=({fans:t,cash:e,onClose:n})=>{const[i,s]=w.useState(!1);return w.useEffect(()=>{nn(),setTimeout(()=>s(!0),50)},[]),a.jsx("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,children:a.jsxs("div",{className:`w-full max-w-[260px] bg-[#0a0a0a] border border-white/10 rounded-2xl relative overflow-hidden shadow-2xl transform transition-all duration-300 ease-out ${i?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-[#1ed760] to-transparent opacity-50"}),a.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[a.jsx("div",{className:"mb-3 text-[#1ed760] drop-shadow-[0_0_15px_rgba(30,215,96,0.3)]",children:a.jsx(Ot,{className:"w-8 h-8"})}),a.jsx("h1",{className:"text-xl font-black text-white italic tracking-tighter mb-6 uppercase",children:"KAZANDIN"}),a.jsxs("div",{className:"w-full space-y-0 mb-6 border-t border-white/5 border-b",children:[t>0&&a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/5 last:border-0 group",children:[a.jsxs("div",{className:"flex items-center gap-3 text-neutral-400",children:[a.jsx(Ia,{className:"w-4 h-4"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Fan (XP)"})]}),a.jsxs("div",{className:"text-white font-mono font-bold text-sm text-shadow-sm",children:["+",t.toLocaleString()]})]}),e>0&&a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/5 last:border-0 group",children:[a.jsxs("div",{className:"flex items-center gap-3 text-neutral-400",children:[a.jsx(Ao,{className:"w-4 h-4 text-yellow-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Nakit"})]}),a.jsxs("div",{className:"text-[#1ed760] font-mono font-bold text-sm text-shadow-sm",children:["+",e.toLocaleString()]})]})]}),a.jsx("button",{onClick:n,className:"w-full py-3 rounded-lg font-bold text-[10px] uppercase tracking-[0.2em] bg-white text-black hover:bg-neutral-200 transition-colors",children:"DEVAM ET"})]})]})})},wb={performPurchase:async t=>{if(console.log(`Purchase initiated for: ${t}`),window.PurchaseChannel)return console.log("PurchaseChannel Bridge Detected. Sending signal..."),window.onPurchaseResult||(window.onPurchaseResult=e=>{console.log("Purchase Result received from native:",e),e.success&&window.odulVer?window.odulVer(e.productId):e.success||alert(`Satn alm hatas: ${e.error}`)}),window.PurchaseChannel.postMessage(t),{success:!0,productId:t,transactionId:"pending_native"};if(qt.isNativePlatform())try{return localStorage.setItem("last_purchase_attempt",t),(await Hh.purchase(t)).success?{success:!0,productId:t,transactionId:`native_${Date.now()}`}:{success:!1,productId:t,error:"Maaza ilemi balatlamad."}}catch(e){return console.error("Native Payment Error:",e),{success:!1,productId:t,error:e.message}}else return console.log("Web Simulation: Payment processed immediately."),localStorage.setItem("last_purchase_attempt",t),new Promise(e=>{setTimeout(()=>{window.odulVer&&window.odulVer(t),e({success:!0,productId:t,transactionId:`web_direct_${Date.now()}`})},500)})},restorePurchases:async()=>window.FlutterPay?(window.FlutterPay.postMessage("RESTORE_PURCHASES"),!0):(qt.isNativePlatform()?await Hh.restore():console.log("Web srmnde geri ykleme ilemi yapld."),!0)},Nb={vip:[{id:"vip_sub",name:"FLOWIFY PRO",price:"199.99 ",originalPrice:"249.99 ",discount:"%20",perks:[{text:"Reklamsz Deneyim"},{text:"Direkt 50. Seviye"},{text:"Mavi Tik Hesabna Eklenir"}],popular:!0,theme:"gold"},{id:"verified_tick",name:"MAV TK",price:"89.99 ",originalPrice:"129.99 ",discount:"KALICI",perks:[{text:"Resmi Onayl Hesap"},{text:"Listelerde Mavi Tik konu"},{text:"Gvenilirlik Prestiji"}],popular:!1,theme:"blue"}],currency:[{id:"gold_mini",name:"Cep Harl",amount:25e3,price:"9.99 ",originalPrice:"14.99 "},{id:"gold_100",name:"Kasa Balangc",amount:1e5,price:"29.99 ",originalPrice:"39.99 ",popular:!0},{id:"gold_bag",name:"Byk Vurgun",amount:3e5,price:"69.99 ",originalPrice:"89.99 "},{id:"gold_500",name:"Milyoner",amount:1e6,price:"149.99 ",originalPrice:"199.99 "},{id:"gold_vault",name:"Banka Kasas",amount:5e6,price:"499.99 ",originalPrice:"699.99 ",badge:"BEST"}],energy:[{id:"energy_coffee",name:"Espresso",amount:25,price:"4.99 ",originalPrice:"9.99 ",icon:""},{id:"energy_refill",name:"Full Depo",amount:100,price:"19.99 ",originalPrice:"29.99 ",icon:"",popular:!0},{id:"energy_bulk",name:"Stok",amount:500,price:"79.99 ",originalPrice:"119.99 ",icon:""}]},Eb=({player:t,updateMultipleStats:e,onClose:n,initialTab:i="vip"})=>{const[s,r]=w.useState(i),[l,o]=w.useState(null),{showToast:u}=rr(),f=async(c,d)=>{if(l)return;Y(),o(c.id);const p=await wb.performPurchase(c.id);o(null),p.success?console.log("Purchase signal sent."):u("lem iptal edildi.","error")},h=async()=>{if(l)return;Y(),o("ad_watch");const c=await Au.reklami_baslat();o(null),c?(nn(),e({energy:Math.min(t.maxEnergy,t.energy+20)}),u("+20 Enerji Eklendi!","success")):u("Reklam yklenemedi. Ltfen internetini kontrol et.","error")};return a.jsxs("div",{className:"fixed inset-0 z-[99999] bg-[#090909] flex flex-col font-sans animate-fade-in overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center px-6 pt-[max(1rem,env(safe-area-inset-top))] pb-4 bg-black/80 backdrop-blur-md border-b border-white/5 shrink-0 z-20",children:[a.jsxs("h1",{className:"text-lg font-bold text-white tracking-widest uppercase flex items-center gap-2",children:["MAAZA",s==="vip"&&a.jsx("span",{className:"bg-yellow-500 text-black text-[9px] px-1.5 py-0.5 rounded font-black",children:"PRO"})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-[#1a1a1a] text-white/50 hover:text-white flex items-center justify-center transition-colors",children:""})]}),a.jsx("div",{className:"px-6 py-4 shrink-0 bg-black z-10 border-b border-white/5",children:a.jsx("div",{className:"flex bg-[#111] p-1 rounded-lg border border-white/5",children:["vip","currency","energy"].map(c=>{const d=s===c;return a.jsx("button",{onClick:()=>{Y(),r(c)},className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase tracking-widest transition-all ${d?"bg-white text-black shadow-sm":"text-neutral-500 hover:text-neutral-300"}`,children:c==="vip"?"PREMIUM":c==="currency"?"NAKT":"ENERJ"},c)})})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-safe space-y-4 custom-scrollbar bg-[#090909]",children:[a.jsx("div",{className:"h-4"}),s==="vip"&&a.jsx("div",{className:"space-y-6",children:Nb.vip.map(c=>{const d=c.theme==="gold";return a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-20 blur-md transition-opacity duration-500 group-hover:opacity-40 ${d?"bg-yellow-500":"bg-blue-500"}`}),a.jsxs("div",{className:"relative bg-[#0a0a0a] border border-white/10 rounded-2xl p-5 overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg ${d?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-500"}`,children:d?a.jsx(Km,{className:"w-5 h-5"}):a.jsx(ud,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-bold text-sm tracking-wide",children:c.name}),a.jsx("div",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded inline-block mt-1 ${d?"bg-yellow-500/20 text-yellow-500":"bg-blue-500/20 text-blue-500"}`,children:c.discount})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-neutral-500 line-through decoration-red-500",children:c.originalPrice}),a.jsx("div",{className:`text-lg font-black tracking-tight px-3 py-1 rounded-lg mt-1 shadow-sm ${d?"bg-yellow-500 text-black":"bg-blue-500 text-white"}`,children:c.price})]})]}),a.jsx("div",{className:"space-y-2 mb-5",children:c.perks.map((p,x)=>a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-neutral-300 font-medium",children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${d?"bg-yellow-500":"bg-blue-500"}`}),p.text]},x))}),a.jsx("button",{onClick:()=>f(c),disabled:!!l,className:`w-full py-3 rounded-xl font-bold text-xs uppercase tracking-widest transition-transform active:scale-[0.98] ${d?"bg-white text-black":"bg-[#1a1a1a] text-white border border-white/10 hover:bg-[#222]"}`,children:l===c.id?"...":"SATIN AL"})]})]},c.id)})}),(s==="currency"||s==="energy")&&a.jsxs("div",{className:"flex flex-col gap-3",children:[Nb[s].map(c=>a.jsxs("div",{className:"flex items-center justify-between bg-[#111] p-3 rounded-xl border border-white/5 active:bg-[#1a1a1a] transition-colors relative overflow-hidden group",children:[c.popular&&a.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-bl-lg z-10"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-xl shrink-0 ${s==="currency"?"bg-green-500/10 text-green-500":"bg-blue-500/10 text-blue-500"}`,children:s==="currency"?a.jsx(Ao,{className:"w-5 h-5"}):c.icon}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white font-bold text-sm leading-tight",children:c.name}),c.popular&&a.jsx("span",{className:"text-[8px] font-black bg-red-500 text-white px-1.5 rounded-sm",children:"HOT"})]}),a.jsxs("div",{className:`text-xs font-bold mt-0.5 ${s==="currency"?"text-green-400":"text-blue-400"}`,children:["+",c.amount.toLocaleString()," ",s==="currency"?"":"Enerji"]})]})]}),a.jsxs("button",{onClick:()=>f(c),disabled:!!l,className:"flex flex-col items-end bg-[#222] hover:bg-[#333] border border-white/10 px-4 py-2 rounded-lg transition-colors group-active:scale-95",children:[a.jsx("span",{className:"text-[9px] text-neutral-500 line-through decoration-red-500",children:c.originalPrice}),a.jsx("span",{className:"text-white font-bold text-sm",children:c.price})]})]},c.id)),s==="energy"&&a.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-900/40 to-blue-800/20 p-3 rounded-xl border border-blue-500/30 active:scale-[0.99] transition-transform relative overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-xl shrink-0 bg-blue-500/20 text-white shadow-[0_0_15px_rgba(59,130,246,0.3)]",children:a.jsx(vn,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white font-bold text-sm leading-tight",children:"REKLAM ZLE"}),a.jsx("span",{className:"text-[8px] font-black bg-blue-500 text-white px-1.5 rounded-sm",children:"FREE"})]}),a.jsxs("div",{className:"text-xs font-bold mt-0.5 text-blue-300",children:["+",Ne.AD_REWARD_ENERGY," Enerji"]})]})]}),a.jsx("button",{onClick:h,disabled:!!l,className:"bg-blue-600 hover:bg-blue-500 text-white border border-white/10 px-6 py-3 rounded-lg font-black text-xs uppercase tracking-widest shadow-lg transition-colors",children:l==="ad_watch"?"...":"ZLE"})]})]}),a.jsx("div",{className:"h-20"}),a.jsx("div",{className:"text-center pb-safe",children:a.jsx("button",{onClick:()=>{Y(),wb.restorePurchases().then(()=>u("lem tamamland.","info"))},className:"text-[9px] font-bold text-neutral-600 uppercase tracking-widest hover:text-neutral-400 transition-colors",children:"Satn Almlar Geri Ykle"})})]})]})},bf=["Beatler Ykleniyor...","Mikrofon Ayarlanyor...","Rhyme Defteri Alyor...","Stdyo Iklar Yaklyor...","Flow Analiz Ediliyor...","Menajer Aranyor...","Yeralt Balantlar Kuruluyor..."],A3=({onFinish:t,isReady:e})=>{const[n,i]=w.useState(0),[s,r]=w.useState(!1),[l,o]=w.useState(bf[0]);return w.useEffect(()=>{const f=setInterval(()=>{i(h=>e&&h>=90?Math.min(100,h+2):!e&&h>=90?90:Math.min(100,h+1))},30);return()=>clearInterval(f)},[e]),w.useEffect(()=>{if(n>=100){r(!0);const u=setTimeout(t,600);return()=>clearTimeout(u)}},[n,t]),w.useEffect(()=>{const u=setInterval(()=>{o(bf[Math.floor(Math.random()*bf.length)])},800);return()=>clearInterval(u)},[]),a.jsxs("div",{className:`fixed inset-0 z-[99999] bg-black flex flex-col items-center justify-center transition-opacity duration-500 ease-out ${s?"opacity-0":"opacity-100"}`,children:[a.jsxs("div",{className:"flex flex-col items-center w-full max-w-[200px]",children:[a.jsx("div",{className:"w-32 h-32 relative mb-12 animate-pulse",children:a.jsx("img",{src:"https://i.ibb.co/XxZ9Ft3Z/logobeyaz2.png",alt:"Flowify",className:"w-full h-full object-contain drop-shadow-[0_0_25px_rgba(255,255,255,0.2)]"})}),a.jsx("div",{className:"w-32 h-[3px] bg-[#222] rounded-full overflow-hidden relative mb-3",children:a.jsx("div",{className:"h-full bg-white shadow-[0_0_15px_white] transition-all duration-75 ease-linear rounded-full",style:{width:`${n}%`}})}),a.jsxs("div",{className:"text-center space-y-1",children:[a.jsxs("div",{className:"text-[10px] font-black text-white font-mono tracking-widest",children:["%",Math.floor(n)]}),a.jsx("div",{className:"text-[9px] font-bold text-neutral-500 uppercase tracking-widest h-4 animate-fade-in",children:l})]})]}),a.jsx("div",{className:"absolute bottom-8 text-[8px] text-neutral-800 font-bold uppercase tracking-[0.3em]",children:"FLOWIFY ENGINE v1.0"})]})},k3="https://files.catbox.moe/ww3mw8.mp3",Sb=["SOKAK","MAHALLE","SLAH","PARA","SAYGI","YERALTI","POLS","KARANLIK","BEAT","RTM","KAFYE","MKROFON","SAHNE","IIKLAR","YALAN","GEREK","DOST","DMAN","SAVA","BARI","GURUR","HIRS","HRET","STANBUL","ANKARA","ZMR","ADANA","GETTO","SREN","DUMAN","HAYAL","KABUS","ZAMAN","GEM","GELECEK","KADER","YAZGI","KAN","TER","GZYAI"],T3=({onExit:t})=>{const[e,n]=w.useState("menu"),[i,s]=w.useState(20),[r,l]=w.useState("HAZIRLAN"),[o,u]=w.useState(3),f=w.useRef(null),h=w.useRef(null),c=w.useRef(null);w.useEffect(()=>(c.current=new Audio(k3),c.current.loop=!0,c.current.volume=.5,()=>{p(),clearInterval(f.current),clearInterval(h.current)}),[]);const d=()=>{c.current&&c.current.paused&&c.current.play().catch(N=>console.log("Music blocked",N))},p=()=>{c.current&&(c.current.pause(),c.current.currentTime=0)},x=async()=>{n("countdown"),u(3),d();const N=setInterval(()=>{u(A=>A===1?(clearInterval(N),v("p1_turn"),0):A-1)},1e3)},v=N=>{n(N),s(20),b(),f.current=setInterval(b,4e3),h.current=setInterval(()=>{s(A=>A<=1?(m(N),0):A-1)},1e3)},b=()=>{const N=Sb[Math.floor(Math.random()*Sb.length)];l(N)},m=N=>{clearInterval(f.current),clearInterval(h.current),N==="p1_turn"?n("switching"):(p(),n("finished"))},g=()=>{v("p2_turn")},y=()=>a.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-50 w-10 h-10 rounded-full flex items-center justify-center text-white/50 border border-white/10 hover:bg-purple-900/50 hover:text-white hover:border-purple-500 transition-all font-bold",children:""});if(e==="menu")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 bg-[#050505] text-center relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#1a1a1a] to-black z-0"}),a.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] z-0"}),a.jsxs("div",{className:"z-10 relative mb-8",children:[a.jsx("div",{className:"absolute inset-0 bg-purple-600 blur-[80px] opacity-20 rounded-full"}),a.jsx("div",{className:"w-32 h-32 rounded-full border-2 border-white/10 flex items-center justify-center mx-auto bg-black/50 backdrop-blur-md shadow-[0_0_30px_rgba(147,51,234,0.3)]",children:a.jsx(vi,{className:"w-12 h-12 text-purple-400"})})]}),a.jsxs("h1",{className:"text-5xl font-black italic text-white mb-4 z-10 relative tracking-tighter drop-shadow-xl",children:["FREESTYLE",a.jsx("br",{}),a.jsx("span",{className:"text-purple-500",children:"CYPHER"})]}),a.jsxs("p",{className:"text-neutral-500 mb-10 max-w-xs z-10 relative text-xs font-bold uppercase tracking-widest leading-relaxed",children:["2 Kiilik Offline Mod",a.jsx("br",{}),"Beat alar, kelimeler akar.",a.jsx("br",{}),"Sreniz 20 saniye."]}),a.jsx("button",{onClick:x,className:"z-10 bg-white text-black text-sm font-black py-4 px-12 rounded-xl hover:scale-105 transition-transform shadow-[0_0_20px_rgba(168,85,247,0.4)] uppercase tracking-widest border-2 border-transparent hover:border-purple-500",children:"KAPIMAYI BALAT"}),a.jsx("button",{onClick:t,className:"mt-8 text-neutral-600 z-10 font-bold text-[10px] uppercase tracking-widest hover:text-white transition-colors",children:"Ana Menye Dn"})]});if(e==="countdown")return a.jsxs("div",{className:"h-full flex items-center justify-center bg-black relative",children:[a.jsx(y,{}),a.jsx("div",{className:"text-[180px] font-black text-transparent bg-clip-text bg-gradient-to-b from-purple-400 to-purple-800 animate-ping",children:o>0?o:"BALA"})]});if(e==="switching")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-black p-6 text-center relative",children:[a.jsx(y,{}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center opacity-20",children:[a.jsx("div",{className:"w-[500px] h-[500px] border border-purple-500/30 rounded-full animate-[spin_10s_linear_infinite]"}),a.jsx("div",{className:"w-[300px] h-[300px] border border-purple-500/30 rounded-full animate-[spin_5s_linear_infinite_reverse] absolute"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h2",{className:"text-4xl font-black text-white mb-2 uppercase italic tracking-tight",children:"SIRA DEYOR"}),a.jsx("p",{className:"text-sm text-purple-500 font-bold mb-10 tracking-[0.3em] animate-pulse",children:"TELEFONU RAKBE VER"}),a.jsx("button",{onClick:g,className:"bg-transparent border-2 border-purple-500 text-purple-500 font-black py-4 px-10 rounded-xl text-sm hover:bg-purple-500 hover:text-white shadow-[0_0_20px_rgba(168,85,247,0.3)] transition-all uppercase tracking-widest",children:"BEN HAZIRIM"})]})]});if(e==="finished")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-black p-6 text-center",children:[a.jsx("h1",{className:"text-6xl font-black text-white mb-4 italic tracking-tighter",children:"BTT!"}),a.jsx("p",{className:"text-neutral-500 mb-12 text-sm font-bold uppercase tracking-widest",children:"Seyirci kimi daha ok sevdi?"}),a.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs",children:[a.jsx("button",{onClick:()=>{n("menu")},className:"bg-purple-600 text-white font-black py-4 rounded-xl hover:scale-105 transition-transform uppercase tracking-widest text-xs",children:"TEKRAR OYNA"}),a.jsx("button",{onClick:t,className:"bg-neutral-900 text-white font-bold py-4 rounded-xl border border-white/10 hover:bg-neutral-800 uppercase tracking-widest text-xs",children:"IKI YAP"})]})]});const _=e==="p1_turn",E=_?"text-purple-400":"text-pink-500",S=_?"bg-purple-900/10":"bg-pink-900/10";return a.jsxs("div",{className:`h-full flex flex-col relative overflow-hidden bg-black ${S}`,children:[a.jsx(y,{}),a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("div",{className:`absolute top-[-50%] left-[-20%] w-[600px] h-[600px] ${_?"bg-purple-500":"bg-pink-500"} blur-[150px] opacity-10 rounded-full animate-pulse`}),a.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-30"})]}),a.jsxs("div",{className:"relative z-10 pt-safe p-6 flex justify-between items-end border-b border-white/5 pb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:`text-[10px] font-black uppercase tracking-[0.3em] mb-1 ${_?"text-purple-600":"text-pink-600"}`,children:"SIRA KMDE?"}),a.jsx("div",{className:`text-2xl font-black italic ${E}`,children:_?"OYUNCU 1":"OYUNCU 2"})]}),a.jsxs("div",{className:"flex items-center text-white font-mono font-bold text-3xl",children:[i,a.jsx("span",{className:"text-sm text-neutral-600 ml-1",children:"sn"})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 px-4",children:[a.jsx("div",{className:"mb-8 flex gap-1 h-16 items-end",children:[...Array(12)].map((N,A)=>a.jsx("div",{className:`w-2 rounded-t-sm animate-[bounce_0.5s_infinite] ${_?"bg-purple-500":"bg-pink-500"}`,style:{height:`${Math.random()*100}%`,animationDuration:`${.3+Math.random()*.4}s`,opacity:.5}},A))}),a.jsx("div",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-[0.5em] mb-6 border border-white/10 px-4 py-1 rounded-full bg-black/50",children:"KONU"}),a.jsxs("div",{className:"relative w-full text-center",children:[a.jsx("h1",{className:"text-6xl md:text-8xl font-black text-white break-all leading-none tracking-tighter drop-shadow-[0_0_15px_rgba(255,255,255,0.5)] animate-[slideIn_0.3s_cubic-bezier(0.2,0.8,0.2,1)]",children:r},r),a.jsx("div",{className:`absolute -inset-4 blur-xl opacity-20 ${_?"bg-purple-500":"bg-pink-500"} -z-10`})]})]}),a.jsx("div",{className:"h-1 bg-neutral-900 w-full relative z-10",children:a.jsx("div",{className:`h-full transition-all duration-1000 linear ${_?"bg-purple-500 shadow-[0_0_15px_purple]":"bg-pink-500 shadow-[0_0_15px_pink]"}`,style:{width:`${i/20*100}%`}})})]})},Ab=({playerName:t,onGameEnd:e,onExit:n,isSolo:i=!1})=>{const[s,r]=w.useState("auth"),[l,o]=w.useState(null),[u,f]=w.useState(null),[h,c]=w.useState(null),[d,p]=w.useState(null),[x,v]=w.useState(0),[b,m]=w.useState(null),[g,y]=w.useState(null),[_,E]=w.useState(0),[S,N]=w.useState(3),[A,T]=w.useState(!1),[k,C]=w.useState(3),[L,D]=w.useState(null),[B,$]=w.useState(!1),[O,H]=w.useState(!1),[Q,P]=w.useState(!1),[R,I]=w.useState("Rakip"),[M,z]=w.useState(0),[V,Z]=w.useState(null),[X,q]=w.useState(!1),te=w.useRef(null);w.useEffect(()=>((async()=>{Et.currentUser&&f(Et.currentUser.uid),r(i?"menu":"lobby")})(),()=>dt()),[]);const Pe=(J,ae)=>{window.dispatchEvent(new CustomEvent("flowify-notify",{detail:{message:J,type:ae}}))},He=async(J,ae)=>{r("loading"),P(!1),H(!1);try{let Ue=[];J==="general"?Ue=await oa():Ue=await ca(ae,60,!0);const oe=Zw(Ue);if(oe)p(oe),m(oe.startSong),y(oe.targetSongs[0]),r("playing"),C(3);else throw new Error("Yetersiz veri")}catch(Ue){console.error(Ue),Pe("Bu kategoride yeterli ark bulunamad.","error"),r("menu")}};w.useEffect(()=>{if(i||!l||!u)return;const J=ve(ye,`games/${l}`),ae=Un(J,Ue=>{const oe=Ue.val();if(oe){if(s==="lobby"&&oe.sequence){const G=oe.sequence,ne={startSong:G.startSong,targetSongs:Array.isArray(G.targetSongs)?G.targetSongs:Object.values(G.targetSongs)};p(ne),m(ne.startSong),y(ne.targetSongs[0]),r("playing"),C(3)}if(oe.players){const G=oe.players[u],ne=Object.keys(oe.players).find(K=>K!==u),ie=ne?oe.players[ne]:null;if(ie&&(c(ne),I(ie.name),z(ie.score)),!X&&s==="playing"){const K=(G==null?void 0:G.lives)<=0,ee=(ie==null?void 0:ie.lives)<=0,we=(G==null?void 0:G.status)==="finished"&&(ie==null?void 0:ie.status)==="finished";(K||ee||we)&&(q(!0),dt(),At((G==null?void 0:G.score)||0,(ie==null?void 0:ie.score)||0,ne))}}}});return()=>ae()},[l,u,s,i,X]),w.useEffect(()=>{if(s==="playing"&&k>0){hs();const J=setTimeout(()=>{k===1&&Ca(),C(ae=>ae-1)},1e3);return()=>clearTimeout(J)}},[k,s]),w.useEffect(()=>{if(i||!l||!u||s!=="playing")return;const J=ve(ye,`games/${l}/rounds/${x}`),ae=Un(J,Ue=>{const oe=Ue.val(),G=oe?oe[u]:null;if(!G)return;!B&&!L&&T(!0);const ne=Object.keys(oe||{}).find(K=>K!==u),ie=ne?oe[ne]:null;G&&ie&&A&&Vn(G.guess)});return()=>ae()},[l,u,x,A,s,i]),w.useEffect(()=>{s==="playing"&&g&&k===0&&!O&&Ce(g.previewUrl)},[g,s,k,O]);const Ce=J=>{dt();const ae=new Audio(J);ae.volume=.6,te.current=ae,ae.play().catch(()=>console.log("Autoplay blocked"))},dt=()=>{te.current&&(te.current.pause(),te.current.currentTime=0)},wi=J=>{o(J)},Fn=J=>{if(!(!g||!b||A||k>0))if(Y(),i)Vn(J);else{if(!l||!u)return;T(!0),dt(),bi(ve(ye,`games/${l}/rounds/${x}/${u}`),{guess:J,timestamp:Date.now()})}},Vn=J=>{if(!g||!b)return;T(!1),$(!0);const ae=g.releaseYear<b.releaseYear,Ue=g.releaseYear>b.releaseYear,oe=g.releaseYear===b.releaseYear;let G=!1;if(J==="older"&&(ae||oe)&&(G=!0),J==="newer"&&(Ue||oe)&&(G=!0),G){So(),D("correct");const ne=_+1;E(ne),!i&&l&&u&&Su(l,u,ne,S)}else{da(),D("wrong");const ne=S-1;N(ne),!i&&l&&u&&Su(l,u,_,ne)}setTimeout(()=>Ke(G?S:S-1),2500)},Ke=J=>{if(!d)return;if(J<=0){i&&!Q?(dt(),H(!0)):_e();return}D(null),$(!1),T(!1),m(g);const ae=x+1;ae<d.targetSongs.length?(v(ae),y(d.targetSongs[ae])):_e()},pe=()=>{if(H(!1),P(!0),N(1),!d)return;D(null),$(!1),T(!1),m(g);const J=x+1;J<d.targetSongs.length?(v(J),y(d.targetSongs[J])):_e()},_e=()=>{s==="waiting_opponent"||s==="gameover"||s==="result_screen"||(H(!1),dt(),!i&&l&&u?(Gm(l,u,_),S>0&&r("waiting_opponent")):At(_,0,""))},At=(J,ae,Ue)=>{r("gameover"),dt();let oe="draw",G=0;!i&&l&&u&&h?(J>ae?(oe="win",G=34,u&&Ue&&Hm(u,Ue)):J<ae?(oe="loss",G=-34):(oe="draw",G=0),Z({result:oe,change:G}),setTimeout(()=>r("result_screen"),1e3)):i&&setTimeout(()=>{e(J),n()},2e3)};return O?a.jsx(dd,{title:"CANIN BTT!",rewardText:"Reklam izleyerek +1 Can ile devam et.",onWatch:pe,onCancel:_e,buttonText:"DEVAM ET (+1 CAN)"}):s==="menu"&&i?a.jsxs("div",{className:"h-full bg-[#121212] flex flex-col relative animate-fade-in font-sans",children:[a.jsxs("div",{className:"pt-safe-top px-6 pb-6 bg-gradient-to-b from-black/80 to-[#121212] z-20 shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 mt-4",children:[a.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-black/40 flex items-center justify-center text-white hover:bg-white/10 transition-colors",children:""}),a.jsx("div",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest bg-black/40 px-3 py-1 rounded-full border border-white/5",children:"SOLO MOD"})]}),a.jsx("h1",{className:"text-4xl font-black italic text-white tracking-tighter mb-2",children:"AAI YUKARI"}),a.jsx("p",{className:"text-neutral-400 text-xs font-medium",children:"Hangi ark daha yeni? Kategorini se."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 custom-scrollbar",children:[a.jsx("h3",{className:"text-white font-bold text-xs mb-4",children:"KATEGORLER"}),a.jsx("div",{className:"space-y-2",children:Bl.map((J,ae)=>{const Ue=ae*45%360,oe=`linear-gradient(135deg, hsl(${Ue}, 60%, 20%), hsl(${Ue}, 60%, 5%))`;return a.jsxs("button",{onClick:()=>He(J.id,J.query),className:"w-full bg-[#181818] hover:bg-[#282828] p-3 rounded-md flex items-center gap-4 group transition-all active:scale-[0.98] border border-transparent hover:border-[#1ed760]/20",children:[a.jsx("div",{className:"w-12 h-12 rounded bg-[#333] shadow-lg flex items-center justify-center shrink-0 font-black text-white/20 text-lg",style:{background:oe},children:J.label.charAt(0)}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsx("div",{className:"text-white font-bold text-sm truncate group-hover:text-[#1ed760] transition-colors leading-tight",children:J.label}),a.jsxs("div",{className:"text-neutral-500 text-[10px] font-medium mt-0.5 truncate",children:["Oyunu balat  ",J.id==="general"?"Kark":"Sanat"]})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-black/40 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(vn,{className:"w-3 h-3 ml-0.5"})})]},J.id)})})]})]}):s==="loading"?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-black",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("div",{className:"text-neutral-400 font-bold animate-pulse tracking-widest text-xs uppercase",children:"HAZIRLANIYOR..."})]}):s==="lobby"&&u&&!i?a.jsx($m,{gameType:"higherlower",gameName:"AAI / YUKARI",playerId:u,playerName:t,playerFans:0,playerLevel:1,onGameStart:wi,onExit:n}):s==="result_screen"&&V&&!i?a.jsx(qm,{result:V.result,myScore:_,opponentScore:M,opponentName:R,respectChange:V.change,onContinue:()=>{e(_),n()}}):s==="waiting_opponent"&&!i?a.jsxs("div",{className:"h-full bg-black flex flex-col items-center justify-center text-white relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-black italic mb-2",children:"SONULAR BEKLENYOR"}),a.jsx("p",{className:"text-neutral-500 text-sm",children:"Rakibin oyunu bitirmesi bekleniyor..."}),a.jsxs("div",{className:"mt-8 bg-neutral-900 p-4 rounded-xl border border-white/10 w-64",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-blue-500 font-bold",children:"SEN"}),a.jsx("span",{className:"text-white font-mono",children:_})]}),a.jsxs("div",{className:"flex justify-between opacity-50",children:[a.jsx("span",{className:"text-red-500 font-bold",children:R}),a.jsx("span",{className:"text-white font-mono",children:"???"})]})]})]}):s==="auth"?a.jsx("div",{className:"h-full bg-black flex items-center justify-center text-white",children:"Ykleniyor..."}):a.jsxs("div",{className:"h-full w-full bg-black relative flex flex-col overflow-hidden font-sans",children:[k>0&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:a.jsx("div",{className:"text-9xl font-black text-white animate-ping",children:k})}),s==="gameover"&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md",children:a.jsx("div",{className:"text-3xl font-black text-white animate-bounce",children:"SONULAR GELD!"})}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 p-4 pt-safe flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-4xl font-black text-white drop-shadow-md",children:_}),a.jsx("div",{className:"flex gap-1 mt-1",children:[...Array(3)].map((J,ae)=>a.jsx("div",{className:`w-3 h-3 rounded-full ${ae<S?"bg-[#1ed760]":"bg-neutral-800"}`},ae))})]}),!i&&a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs font-bold text-neutral-400 uppercase",children:R}),a.jsx("div",{className:"text-xl font-bold text-white",children:M}),A&&a.jsx("div",{className:"text-[10px] text-yellow-400 animate-pulse",children:"Rakip Bekleniyor..."})]})]}),L&&a.jsx("div",{className:"absolute inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-pulse",children:a.jsx("div",{className:`text-6xl font-black transform -rotate-6 ${L==="correct"?"text-[#1ed760]":"text-red-500"}`,children:L==="correct"?"DORU!":"YANLI!"})}),a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row relative",children:[a.jsxs("div",{className:"flex-1 relative bg-neutral-900 border-b md:border-b-0 md:border-r border-black/50 overflow-hidden group",children:[a.jsx("img",{src:b==null?void 0:b.artworkUrl100,className:"absolute inset-0 w-full h-full object-cover opacity-40 group-hover:opacity-50 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/60"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-2 leading-tight",children:b==null?void 0:b.trackName}),a.jsx("p",{className:"text-neutral-300 mb-6",children:b==null?void 0:b.artistName}),a.jsx("div",{className:"text-5xl font-black text-yellow-500 drop-shadow-lg",children:b==null?void 0:b.releaseYear}),a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-widest mt-2",children:"k Yl"})]})]}),a.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-20 w-12 h-12 bg-white rounded-full flex items-center justify-center font-black text-black border-4 border-black shadow-xl",children:"VS"}),a.jsxs("div",{className:"flex-1 relative bg-neutral-800 overflow-hidden",children:[a.jsx("img",{src:g==null?void 0:g.artworkUrl100,className:"absolute inset-0 w-full h-full object-cover opacity-40 animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/60"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-2 leading-tight",children:g==null?void 0:g.trackName}),a.jsx("p",{className:"text-neutral-300 mb-8",children:g==null?void 0:g.artistName}),B?a.jsxs("div",{className:"animate-bounce",children:[a.jsx("div",{className:`text-5xl font-black drop-shadow-lg ${L==="correct"?"text-[#1ed760]":"text-red-500"}`,children:g==null?void 0:g.releaseYear}),a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-widest mt-2",children:"k Yl"})]}):a.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-[200px]",children:[a.jsx("button",{onClick:()=>Fn("newer"),disabled:A||k>0,className:"bg-transparent border-2 border-white text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-white hover:text-black transition-all active:scale-95 disabled:opacity-50",children:"DAHA YEN "}),a.jsx("div",{className:"text-xs text-neutral-400 uppercase tracking-widest font-bold",children:"Veya"}),a.jsx("button",{onClick:()=>Fn("older"),disabled:A||k>0,className:"bg-transparent border-2 border-white text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-white hover:text-black transition-all active:scale-95 disabled:opacity-50",children:"DAHA ESK "})]})]})]})]})]})},R3=({playerName:t,onGameEnd:e,onExit:n})=>{const[i,s]=w.useState("auth"),[r,l]=w.useState(null),[o,u]=w.useState(null),[f,h]=w.useState(null),[c,d]=w.useState([]),[p,x]=w.useState(0),[v,b]=w.useState(3),[m,g]=w.useState(0),[y,_]=w.useState(!1),[E,S]=w.useState(!1),[N,A]=w.useState("Rakip"),[T,k]=w.useState(0),[C,L]=w.useState(3),[D,B]=w.useState(null),[$,O]=w.useState(!1),[H,Q]=w.useState(3),[P,R]=w.useState(15),[I,M]=w.useState(!1),[z,V]=w.useState(null),[Z,X]=w.useState(null),q=w.useRef(null),te=w.useRef(null);w.useEffect(()=>((async()=>{Et.currentUser&&u(Et.currentUser.uid),s("lobby")})(),()=>Ce()),[]),w.useEffect(()=>{if(!r||!o)return;const pe=ve(ye,`games/${r}`),_e=Un(pe,At=>{const J=At.val();if(J&&(i==="lobby"&&J.questions&&(d(J.questions),s("playing"),Q(3)),J.players)){const ae=J.players[o],Ue=Object.keys(J.players).find(G=>G!==o),oe=Ue?J.players[Ue]:null;if(oe&&(h(Ue),A(oe.name),k(oe.score),L(oe.lives)),!$&&i==="playing"){const G=(ae==null?void 0:ae.lives)<=0,ne=(oe==null?void 0:oe.lives)<=0,ie=(ae==null?void 0:ae.status)==="finished"&&(oe==null?void 0:oe.status)==="finished";(G||ne||ie)&&(O(!0),Ce(),Vn((ae==null?void 0:ae.score)||0,(oe==null?void 0:oe.score)||0,Ue))}}});return()=>_e()},[r,o,i,$]),w.useEffect(()=>{if(i==="playing"&&H>0){hs();const pe=setTimeout(()=>{H===1&&Ca(),Q(_e=>_e-1)},1e3);return()=>clearTimeout(pe)}else i==="playing"&&H===0&&!I&&p===0&&He(0,c)},[H,i]),w.useEffect(()=>(i==="playing"&&I&&P>0&&!y?te.current=setTimeout(()=>R(pe=>pe-1),1e3):P===0&&I&&wi(-1),()=>clearTimeout(te.current)),[P,i,I,y]);const Pe=pe=>{l(pe)},He=(pe,_e)=>{if(pe>=_e.length){Fn();return}X(null),V(null),x(pe),R(15),M(!0),dt(_e[pe].correctSong.previewUrl)},Ce=()=>{q.current&&(q.current.pause(),q.current.currentTime=0)},dt=pe=>{Ce(),pe&&(q.current=new Audio(pe),q.current.volume=.5,q.current.play().catch(_e=>{}))},wi=pe=>{if(!I)return;M(!1),Ce(),V(pe);const _e=c[p];let At=v,J=m;_e&&pe===_e.correctSong.trackId?(So(),J+=100+P*10,g(J),X("correct")):(da(),At-=1,b(At),X("wrong")),r&&o&&Su(r,o,J,At),setTimeout(()=>{At<=0?Fn(J):He(p+1,c)},1500)},Fn=pe=>{if(i==="waiting_opponent"||i==="gameover"||i==="result_screen")return;const _e=pe!==void 0?pe:m;g(_e),Ce(),r&&o&&Gm(r,o,_e),v>0&&s("waiting_opponent")},Vn=(pe,_e,At)=>{s("gameover"),Ce();let J="draw",ae=0;pe>_e?(J="win",ae=34,o&&At&&Hm(o,At)):pe<_e?(J="loss",ae=-34):(J="draw",ae=0),B({result:J,change:ae}),setTimeout(()=>{s("result_screen")},1e3)};if(i==="lobby"&&o)return a.jsx($m,{gameType:"trivia",gameName:"RAPQUIZ BATTLE",playerId:o,playerName:t,playerFans:0,playerLevel:1,onGameStart:Pe,onExit:n});if(i==="result_screen"&&D)return a.jsx(qm,{result:D.result,myScore:m,opponentScore:T,opponentName:N,respectChange:D.change,onContinue:()=>{e(m),n()}});if(i==="waiting_opponent")return a.jsxs("div",{className:"h-full bg-black flex flex-col items-center justify-center text-white relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mb-4"}),a.jsx("h2",{className:"text-2xl font-black italic mb-2",children:"SONULAR BEKLENYOR"}),a.jsx("p",{className:"text-neutral-500 text-sm",children:"Rakibin oyunu bitirmesi bekleniyor..."}),a.jsxs("div",{className:"mt-8 bg-neutral-900 p-4 rounded-xl border border-white/10 w-64",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-green-500 font-bold",children:"SEN"}),a.jsx("span",{className:"text-white font-mono",children:m})]}),a.jsxs("div",{className:"flex justify-between opacity-50",children:[a.jsx("span",{className:"text-red-500 font-bold",children:N}),a.jsx("span",{className:"text-white font-mono",children:"???"})]})]})]});const Ke=c[p];return!Ke&&i!=="gameover"&&i!=="result_screen"?a.jsx("div",{className:"h-full bg-black flex items-center justify-center text-white",children:"Ykleniyor..."}):a.jsxs("div",{className:"h-full flex flex-col bg-[#050505] p-4 relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[400px] h-[400px] bg-purple-900/10 rounded-full blur-[100px] pointer-events-none"}),H>0&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:a.jsx("div",{className:"text-9xl font-black text-white animate-ping",children:H})}),i==="gameover"&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md",children:a.jsx("div",{className:"text-3xl font-black text-white animate-bounce",children:"SONULAR GELD!"})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 pt-safe-top mt-safe z-20",children:[a.jsx("div",{className:"bg-neutral-900/80 backdrop-blur rounded-xl p-3 flex items-center border border-white/5 shadow-lg",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-neutral-300 uppercase",children:N}),a.jsxs("span",{className:"text-[10px] text-neutral-500",children:[T," pts"]})]})}),a.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-red-900/50 flex items-center justify-center text-white border border-red-500/30 hover:bg-red-900 z-50",children:""})]}),a.jsxs("div",{className:"flex justify-between items-center mb-4 px-2 z-20",children:[a.jsx("div",{className:"font-mono text-3xl font-black text-white drop-shadow-lg",children:m}),a.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((pe,_e)=>a.jsx("div",{className:`w-2.5 h-2.5 rounded-sm transform rotate-45 ${_e<v?"bg-green-500 shadow-[0_0_8px_green]":"bg-neutral-800"}`},_e))})]}),a.jsx("div",{className:"w-full h-1 bg-neutral-800 rounded-full mb-4 overflow-hidden z-20",children:a.jsx("div",{className:`h-full transition-all duration-1000 linear ${P<5?"bg-red-500":"bg-purple-500"}`,style:{width:`${P/15*100}%`}})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 min-h-0",children:Ke&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6 relative group shrink-0",children:[a.jsx("div",{className:"absolute inset-0 bg-purple-500 blur-3xl opacity-10 rounded-full group-hover:opacity-20 transition-opacity"}),a.jsxs("div",{className:`w-36 h-36 md:w-56 md:h-56 rounded-full bg-black border-[6px] border-[#1a1a1a] flex items-center justify-center shadow-2xl relative z-10 ${I?"animate-spin-slow":""}`,children:[a.jsx("img",{src:Ke.correctSong.artworkUrl100?Ke.correctSong.artworkUrl100.replace("http:","https:"):"",className:"w-full h-full object-cover rounded-full opacity-50 blur-[1px] scale-105",alt:"Song Art"}),a.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-full"}),a.jsx("div",{className:"absolute w-4 h-4 bg-black rounded-full border border-white/10 z-20"})]})]}),a.jsx("h2",{className:"text-xs font-bold text-center mb-6 text-neutral-400 uppercase tracking-[0.3em] shrink-0",children:"HANG ARKI?"}),a.jsx("div",{className:"w-full flex-1 min-h-0 flex flex-col gap-3 pb-safe max-w-sm",children:Ke.options.map(pe=>{let _e="bg-white/5 border-white/10 text-neutral-200 hover:bg-white/10 hover:border-white/20";return Z&&(pe.trackId===Ke.correctSong.trackId?_e="bg-green-600 border-green-400 text-white shadow-[0_0_20px_rgba(34,197,94,0.5)]":pe.trackId===z?_e="bg-red-600 border-red-400 text-white":_e="opacity-30 border-transparent"),a.jsx("button",{onClick:()=>wi(pe.trackId),disabled:!I||H>0,className:`w-full p-4 rounded-2xl text-center font-bold text-sm transition-all border-2 active:scale-95 flex items-center justify-center min-h-[60px] backdrop-blur-sm relative overflow-hidden ${_e}`,children:a.jsx("span",{className:"truncate w-full block relative z-10",children:pe.trackName})},pe.trackId)})})]})})]})},fd=({score:t,onContinue:e,gameName:n="OYUN BTT",isWin:i})=>{const s=i!==void 0?i:t>0;return a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-fade-in",children:a.jsxs("div",{className:"w-full max-w-[260px] bg-[#0a0a0a] border border-white/10 rounded-2xl relative overflow-hidden shadow-2xl transform transition-all duration-300 ease-out scale-100",children:[a.jsx("div",{className:`absolute top-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-${s?"[#1ed760]":"red-500"} to-transparent opacity-50`}),a.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[a.jsx("div",{className:`mb-4 drop-shadow-[0_0_15px_rgba(0,0,0,0.5)] ${s?"text-[#1ed760]":"text-red-500"}`,children:s?a.jsx(Ot,{className:"w-10 h-10"}):a.jsx(Ym,{className:"w-10 h-10"})}),a.jsx("h1",{className:"text-xl font-black text-white italic tracking-tighter mb-1 uppercase",children:s?"OYUN BTT":"BAARISIZ"}),a.jsx("p",{className:"text-[9px] font-bold text-neutral-500 uppercase tracking-[0.2em] mb-6",children:n}),a.jsxs("div",{className:"w-full bg-[#141414] border border-white/5 rounded-xl p-4 mb-6",children:[a.jsx("div",{className:"text-[10px] text-neutral-400 font-bold uppercase tracking-wider mb-1",children:"TOPLAM SKOR"}),a.jsx("div",{className:"text-4xl font-black text-white font-mono tracking-tight",children:t.toLocaleString()})]}),a.jsx("button",{onClick:e,className:"w-full py-3 rounded-lg font-bold text-[10px] uppercase tracking-[0.2em] bg-white text-black hover:bg-neutral-200 transition-colors shadow-lg",children:"DEVAM ET"})]})]})})},j3="https://files.catbox.moe/rrsuo4.mp3",C3=({onExit:t,onGameEnd:e})=>{const[n,i]=w.useState("menu"),[s,r]=w.useState([]),[l,o]=w.useState(0),[u,f]=w.useState(0),[h,c]=w.useState(3),[d,p]=w.useState(null),[x,v]=w.useState(!1),[b,m]=w.useState(!1),g=w.useRef(0),y=w.useRef(0),_=w.useRef(0),E=w.useRef([]),S=w.useRef(300),N=w.useRef(null),A=w.useRef({lives:3,score:0,playing:!1}),T=3,k=600,C=500,L=60;w.useEffect(()=>(N.current=new Audio(j3),N.current.loop=!0,N.current.volume=.5,()=>{cancelAnimationFrame(g.current),N.current&&(N.current.pause(),N.current=null)}),[]);const D=()=>{N.current&&(N.current.currentTime=0,N.current.play().catch(I=>console.log("Music blocked",I))),i("playing"),o(0),f(0),c(3),r([]),m(!1),E.current=[],A.current={lives:3,score:0,playing:!0},S.current=Math.floor(Math.random()*200)+250,y.current=performance.now(),_.current=performance.now(),cancelAnimationFrame(g.current),g.current=requestAnimationFrame(B)},B=I=>{if(!A.current.playing||A.current.lives<=0)return;const M=(I-y.current)/1e3;y.current=I;const z=A.current.score,V=Math.max(300,1e3-z*2);if(I-_.current>V){const q=Math.floor(Math.random()*T),te={id:I,lane:q,y:-50,hit:!1};E.current.push(te),_.current=I}let Z=!1;const X=S.current*M;E.current.forEach(q=>{q.hit||(q.y+=X,q.y>k&&(Z=!0,q.hit=!0))}),E.current=E.current.filter(q=>q.y<=k),r([...E.current]),Z&&$(),g.current=requestAnimationFrame(B)},$=()=>{A.current.lives-=1,c(A.current.lives),f(0),R("KAIRDIN!","text-red-500"),A.current.lives<=0&&O()},O=()=>{A.current.playing=!1,cancelAnimationFrame(g.current),N.current&&N.current.pause(),b?i("gameover"):v(!0)},H=()=>{v(!1),m(!0),c(1),A.current.lives=1,A.current.playing=!0,N.current&&N.current.play().catch(()=>{}),y.current=performance.now(),g.current=requestAnimationFrame(B)},Q=()=>{v(!1),i("gameover")},P=I=>{if(!A.current.playing)return;const M=E.current.findIndex(z=>z.lane===I&&!z.hit&&Math.abs(z.y-C)<L);if(M!==-1){const z=E.current[M],V=Math.abs(z.y-C);let Z=10;V<20?(Z=50,R("MKEMMEL!","text-cyan-400")):V<40?(Z=25,R("Y!","text-pink-400")):R("NORMAL","text-purple-400"),A.current.score+=Z,o(A.current.score),f(X=>X+1),E.current.splice(M,1),r([...E.current])}else f(0)},R=(I,M)=>{p({text:I,color:M}),setTimeout(()=>p(null),500)};return x?a.jsx(dd,{title:"OYUN BTT!",rewardText:"Reklam izle ve +1 Can ile kaldn yerden devam et.",onWatch:H,onCancel:Q,buttonText:"DEVAM ET (+1 CAN)"}):n==="menu"?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-[#050505] relative p-6 touch-none select-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[500px] h-[500px] bg-pink-600/10 rounded-full blur-[100px] pointer-events-none"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[100px] pointer-events-none"}),a.jsx("div",{className:"absolute top-4 right-4 z-50",children:a.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 text-white flex items-center justify-center font-bold hover:bg-white/20 transition-colors",children:""})}),a.jsxs("div",{className:"text-center z-10 space-y-2 mb-12",children:[a.jsx("div",{className:"text-7xl mb-4 opacity-80",children:""}),a.jsx("h1",{className:"text-5xl font-black italic text-transparent bg-clip-text bg-gradient-to-r from-[#ff008c] to-cyan-400 mb-2 tracking-tighter drop-shadow-lg",children:"REFLEX"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-[#ff008c] to-cyan-400 mx-auto rounded-full"}),a.jsx("p",{className:"text-neutral-400 text-sm font-bold uppercase tracking-widest mt-4",children:"Zamanlama Her eydir"})]}),a.jsx("button",{onClick:D,className:"w-full max-w-xs bg-white text-black font-black py-5 rounded-2xl text-lg uppercase tracking-[0.3em] shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:scale-[1.02] active:scale-95 transition-all border-4 border-transparent hover:border-[#ff008c]/30 z-10",children:"BALAT"})]}):n==="gameover"?a.jsx(fd,{gameName:"REFLEX",score:l,onContinue:()=>{e(l),t()}}):a.jsxs("div",{className:"h-full w-full bg-gradient-to-b from-[#1a0510] via-black to-[#050505] relative overflow-hidden flex flex-col font-sans touch-none select-none",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 z-20 flex justify-between items-start bg-gradient-to-b from-black/90 to-transparent pb-20",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-5xl font-black text-white italic tracking-tighter drop-shadow-md",children:l}),a.jsx("div",{className:`text-sm font-bold uppercase tracking-widest mt-1 ${u>5?"text-cyan-400 animate-pulse":"text-neutral-500"}`,children:u>0?`${u}x COMBO`:"RHYTHM"})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((I,M)=>a.jsx("div",{className:`w-8 h-2 rounded-full transform -skew-x-12 transition-all duration-300 ${M<h?"bg-[#ff008c] shadow-[0_0_10px_#ff008c]":"bg-[#333]"}`},M))}),a.jsx("div",{className:"text-[9px] font-bold text-neutral-600 uppercase tracking-wider",children:"CAN"})]})]}),d&&a.jsx("div",{className:`absolute top-40 left-1/2 transform -translate-x-1/2 text-4xl font-black ${d.color} animate-bounce whitespace-nowrap drop-shadow-lg z-30 tracking-tight italic`,children:d.text}),a.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-30 w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:""}),a.jsx("div",{className:"flex-1 relative flex justify-center perspective-1000 overflow-hidden",children:a.jsxs("div",{className:"w-full max-w-md h-full relative flex transform-style-3d rotate-x-20 border-x border-white/5 shadow-[0_0_80px_rgba(255,0,140,0.1)]",children:[a.jsxs("div",{className:"absolute inset-0 flex",children:[a.jsx("div",{className:"flex-1 border-r border-white/5 bg-gradient-to-b from-transparent via-[#ff008c]/5 to-[#ff008c]/20"}),a.jsx("div",{className:"flex-1 border-r border-white/5 bg-gradient-to-b from-transparent via-cyan-400/5 to-cyan-400/20"}),a.jsx("div",{className:"flex-1 bg-gradient-to-b from-transparent via-[#ff008c]/5 to-[#ff008c]/20"})]}),a.jsx("div",{className:"absolute w-full h-1 bg-white/50 blur-[2px] z-10",style:{top:`${C/k*100}%`}}),s.map(I=>a.jsx("div",{className:`absolute w-[30%] h-4 rounded-full shadow-[0_0_15px_currentColor] z-20 will-change-transform ${I.lane===1?"bg-cyan-400 text-cyan-400":"bg-[#ff008c] text-[#ff008c]"}`,style:{left:`${I.lane*33.3+1.65}%`,top:0,transform:`translate3d(0, ${I.y/k*100*6}px, 0) scale(${.5+I.y/k})`,opacity:I.y>k?0:1}},I.id))]})}),a.jsx("div",{className:"h-36 bg-black/90 backdrop-blur-md border-t border-white/10 p-6 grid grid-cols-3 gap-4 z-30 pb-safe",children:[0,1,2].map(I=>a.jsx("button",{onClick:()=>P(I),className:`rounded-2xl border-b-4 active:border-b-0 active:translate-y-1 transition-all flex items-center justify-center group relative overflow-hidden ${I===1?"bg-[#1a1a1a] border-cyan-900 active:bg-cyan-900/50":"bg-[#1a1a1a] border-pink-900 active:bg-pink-900/50"}`,children:a.jsx("div",{className:`w-16 h-16 rounded-full border-2 opacity-20 group-active:opacity-100 group-active:scale-110 transition-all ${I===1?"border-cyan-400 bg-cyan-400/20":"border-[#ff008c] bg-[#ff008c]/20"}`})},I))})]})},Qo=10,I3=25,O3=({onExit:t,onGameEnd:e,playerName:n})=>{const[i,s]=w.useState("menu"),[r,l]=w.useState([]),[o,u]=w.useState(0),[f,h]=w.useState(0),[c,d]=w.useState(3),[p,x]=w.useState(""),[v,b]=w.useState(!1),[m,g]=w.useState(!1),[y,_]=w.useState(null),[E,S]=w.useState(null),[N,A]=w.useState(0),[T,k]=w.useState(Qo),[C,L]=w.useState(!1),D=w.useRef(null),[B,$]=w.useState([]),O=w.useRef(null);w.useEffect(()=>(iI().then($),()=>{O.current&&O.current.pause(),clearInterval(D.current)}),[]),w.useEffect(()=>{if(i==="playing"&&N>0){hs();const q=setTimeout(()=>{N===1&&Ca(),A(te=>te-1)},1e3);return()=>clearTimeout(q)}else i==="playing"&&N===0&&!C&&r.length>0&&!v&&o===0&&T===Qo&&P(r[0])},[N,i,v]),w.useEffect(()=>(i==="playing"&&C&&N===0?D.current=setInterval(()=>{k(q=>q<=.1?(I(),0):q-.1)},100):clearInterval(D.current),()=>clearInterval(D.current)),[i,C,N]);const H=(q,te)=>{window.dispatchEvent(new CustomEvent("flowify-notify",{detail:{message:q,type:te}}))},Q=async(q,te)=>{var He;Y(),s("loading"),x(((He=Bl.find(Ce=>Ce.id===q))==null?void 0:He.label)||""),g(!1),b(!1);let Pe=[];try{if(q==="general"?Pe=await oa():Pe=await ca(te,60,!0),Pe.length<10){H("Yetersiz ark bulundu. Ltfen baka kategori dene.","error"),s("menu");return}const Ce=Qw(Pe,I3);l(Ce),h(0),d(3),u(0),A(3),s("playing")}catch(Ce){console.error("Game Start Error",Ce),H("Balant hatas.","error"),s("menu")}},P=q=>{R(q),k(Qo),L(!0),_(null)},R=q=>{if(O.current&&O.current.pause(),q.correctSong.previewUrl){const te=new Audio(q.correctSong.previewUrl);te.volume=.5,O.current=te,te.play().catch(Pe=>console.log("Autoplay blocked"))}},I=()=>{L(!1),da(),d(q=>{const te=q-1;return te<=0&&!m?setTimeout(()=>b(!0),1e3):te<=0?setTimeout(Z,1e3):setTimeout(V,1500),te}),S("wrong")},M=q=>{if(E||!C)return;L(!1),_(q);const te=r[o];if(q===te.correctSong.trackId){So();const He=Math.ceil(T*100),Ce=Math.max(10,He);h(dt=>dt+Ce),S("correct"),setTimeout(V,1500)}else da(),S("wrong"),d(He=>{const Ce=He-1;return Ce<=0&&!m?setTimeout(()=>b(!0),1500):Ce<=0?setTimeout(Z,1500):setTimeout(V,1500),Ce})},z=()=>{b(!1),g(!0),d(1),V()},V=()=>{if(S(null),o+1>=r.length)Z();else{const q=o+1;u(q),P(r[q])}},Z=()=>{b(!1),O.current&&O.current.pause(),s("gameover"),Et.currentUser&&nI(Et.currentUser.uid,n||"MC",f)};if(v)return a.jsx(dd,{title:"CANIN BTT!",rewardText:"Reklam izleyerek +1 Can ile devam et.",onWatch:z,onCancel:Z,buttonText:"DEVAM ET (+1 CAN)"});if(i==="menu")return a.jsxs("div",{className:"h-full bg-[#121212] flex flex-col relative animate-fade-in font-sans",children:[a.jsxs("div",{className:"pt-safe-top px-6 pb-6 bg-gradient-to-b from-black/80 to-[#121212] z-20 shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 mt-4",children:[a.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-black/40 flex items-center justify-center text-white hover:bg-white/10 transition-colors",children:""}),a.jsx("div",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest bg-black/40 px-3 py-1 rounded-full border border-white/5",children:"SOLO MOD"})]}),a.jsx("h1",{className:"text-4xl font-black italic text-white tracking-tighter mb-2",children:"RAP QUIZ"}),a.jsx("p",{className:"text-neutral-400 text-xs font-medium",children:"Bilgini konutur, zamana kar yar."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 custom-scrollbar",children:[B.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-white font-bold text-xs mb-3 flex items-center gap-2",children:[a.jsx(Ot,{className:"w-4 h-4 text-yellow-500"}),"LDER TABLOSU"]}),a.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:B.slice(0,5).map((q,te)=>a.jsxs("div",{className:"bg-[#181818] p-3 rounded-lg min-w-[100px] border border-white/5 flex flex-col items-center",children:[a.jsxs("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-black mb-2 ${te===0?"bg-yellow-500 text-black":"bg-[#333] text-white"}`,children:["#",te+1]}),a.jsx("div",{className:"text-white text-[10px] font-bold truncate w-full text-center",children:q.name}),a.jsx("div",{className:"text-[#1ed760] text-[9px] font-mono",children:q.score})]},te))})]}),a.jsx("h3",{className:"text-white font-bold text-xs mb-4",children:"KATEGORLER"}),a.jsx("div",{className:"space-y-2",children:Bl.map((q,te)=>{const Pe=te*45%360,He=`linear-gradient(135deg, hsl(${Pe}, 60%, 20%), hsl(${Pe}, 60%, 5%))`;return a.jsxs("button",{onClick:()=>Q(q.id,q.query),className:"w-full bg-[#181818] hover:bg-[#282828] p-3 rounded-md flex items-center gap-4 group transition-all active:scale-[0.98] border border-transparent hover:border-[#1ed760]/20",children:[a.jsx("div",{className:"w-12 h-12 rounded bg-[#333] shadow-lg flex items-center justify-center shrink-0 font-black text-white/20 text-lg",style:{background:He},children:q.label.charAt(0)}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsx("div",{className:"text-white font-bold text-sm truncate group-hover:text-[#1ed760] transition-colors leading-tight",children:q.label}),a.jsxs("div",{className:"text-neutral-500 text-[10px] font-medium mt-0.5 truncate",children:["Testi balat  ",q.id==="general"?"Kark":"Sanat"]})]}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-black/40 flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(vn,{className:"w-3 h-3 ml-0.5"})})]},q.id)})})]})]});if(i==="loading")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-black",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#1ed760] border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("div",{className:"text-neutral-400 font-bold animate-pulse tracking-widest text-xs uppercase",children:"YKLENYOR..."})]});if(i==="gameover")return a.jsx(fd,{gameName:"RAP QUIZ (SOLO)",score:f,earnedListeners:0,totalListeners:0,isWin:f>0,onContinue:()=>{Y(),e(f),t()}});const X=r[o];return a.jsxs("div",{className:"h-full flex flex-col bg-[#050505] relative overflow-hidden font-sans",children:[N>0&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:a.jsx("div",{className:"text-9xl font-black text-white animate-ping",children:N})}),a.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[400px] h-[400px] bg-green-900/10 rounded-full blur-[100px] pointer-events-none"}),a.jsxs("div",{className:"p-4 bg-black/50 backdrop-blur-md flex justify-between items-center z-20 pt-[max(1rem,env(safe-area-inset-top))] border-b border-white/5 shrink-0",children:[a.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-[#1a1a1a] flex items-center justify-center text-white font-bold text-sm border border-white/5",children:""}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest border border-white/5 px-3 py-1 rounded-full",children:["SORU: ",a.jsxs("span",{className:"text-white",children:[o+1," / ",r.length]})]}),a.jsx("div",{className:"flex gap-1.5",children:[...Array(3)].map((q,te)=>a.jsx("div",{className:`w-2.5 h-2.5 rounded-sm transform rotate-45 ${te<c?"bg-[#1ed760] shadow-[0_0_8px_green]":"bg-neutral-800"}`},te))})]})]}),a.jsx("div",{className:"w-full h-1 bg-neutral-900 relative z-20 shrink-0",children:a.jsx("div",{className:`h-full transition-all duration-100 linear ${T<3?"bg-red-500":T<6?"bg-yellow-500":"bg-[#1ed760]"}`,style:{width:`${T/Qo*100}%`}})}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-start pt-4 px-6 relative z-10 min-h-0 overflow-y-auto",children:[a.jsx("div",{className:"text-4xl font-black text-white mb-4 drop-shadow-2xl tracking-tighter shrink-0",children:f}),a.jsxs("div",{className:"mb-6 relative group shrink-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[#1ed760] blur-3xl opacity-10 rounded-full group-hover:opacity-20 transition-opacity"}),a.jsxs("div",{className:"w-36 h-36 md:w-56 md:h-56 rounded-full bg-black border-[6px] border-[#1a1a1a] flex items-center justify-center shadow-2xl relative z-10 animate-spin-slow",children:[a.jsx("img",{src:X.correctSong.artworkUrl100?X.correctSong.artworkUrl100.replace("http:","https:"):"",className:"w-full h-full object-cover rounded-full opacity-50 blur-[1px] scale-105",alt:"Song Art"}),a.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-full"}),a.jsx("div",{className:"absolute w-4 h-4 bg-black rounded-full border border-white/10 z-20"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-30",children:a.jsx("span",{className:`text-4xl font-black ${T<3?"text-red-500 animate-ping":"text-white/90"}`,children:Math.ceil(T)})})]})]}),a.jsx("h3",{className:"text-xs text-neutral-400 font-bold mb-4 text-center uppercase tracking-[0.3em] animate-pulse shrink-0",children:"HANG ARKI?"}),a.jsx("div",{className:"w-full space-y-3 pb-safe max-w-sm flex-1",children:X.options.map(q=>{let te="bg-[#181818] border-white/5 text-neutral-200 hover:bg-[#282828] hover:border-white/10";return E&&(q.trackId===X.correctSong.trackId?te="bg-[#1ed760] border-[#1ed760] text-black shadow-[0_0_20px_rgba(30,215,96,0.5)]":q.trackId===y?te="bg-red-600 border-red-500 text-white":te="opacity-30 border-transparent"),a.jsx("button",{disabled:!!E||!C||N>0,onClick:()=>M(q.trackId),className:`w-full p-4 rounded-md text-center font-bold text-sm transition-all border active:scale-95 flex items-center justify-center min-h-[60px] relative overflow-hidden ${te}`,children:a.jsx("span",{className:"truncate w-full block relative z-10",children:q.trackName})},q.trackId)})})]})]})},kb=({playerName:t,onGameEnd:e,onExit:n})=>{const[i,s]=w.useState("auth"),[r,l]=w.useState([]),[o,u]=w.useState([]),[f,h]=w.useState(!1),[c,d]=w.useState(0),[p,x]=w.useState(3),[v,b]=w.useState(45),[m,g]=w.useState(0),[y,_]=w.useState(0),E=w.useRef(null),S=w.useRef(null);w.useEffect(()=>((async()=>{if(Et.currentUser){const L=ve(ye,`users/${Et.currentUser.uid}/stats/monthly_listeners`);wu(L).then(D=>{D.exists()&&_(D.val())})}await N()})(),()=>{E.current&&E.current.pause(),clearInterval(S.current)}),[]);const N=async()=>{s("auth");try{const L=(await oa()).slice(0,6);let D=[];L.forEach(B=>{D.push({songId:B.trackId,artwork:B.artworkUrl100,previewUrl:B.previewUrl,status:"closed"}),D.push({songId:B.trackId,artwork:B.artworkUrl100,previewUrl:B.previewUrl,status:"closed"})}),D=D.sort(()=>Math.random()-.5),D=D.map((B,$)=>({...B,id:$})),l(D),s("playing"),x(3)}catch(C){console.error("Solo start failed",C),n()}};w.useEffect(()=>{if(i==="playing"&&p>0){hs();const C=setTimeout(()=>{p===1&&Ca(),x(L=>L-1)},1e3);return()=>clearTimeout(C)}else i==="playing"&&p===0&&(S.current=setInterval(()=>{b(C=>C<=1?(k(),0):C-1)},1e3))},[p,i]),w.useEffect(()=>{i==="playing"&&r.length>0&&r.every(L=>L.status==="matched")&&k(!0)},[r,i]);const A=C=>{if(p>0||i!=="playing"||f||o.length>=2||r[C].status!=="closed")return;Y();const D=[...r];D[C].status="open",l(D);const B=[...o,C];u(B),B.length===2&&(h(!0),T(B[0],B[1]))},T=(C,L)=>{const D=r[C],B=r[L];if(D.songId===B.songId){E.current&&E.current.pause();const $=new Audio(D.previewUrl);$.volume=.5,E.current=$,$.play().catch(O=>{}),So(),l(O=>{const H=[...O];return H[C].status="matched",H[L].status="matched",H}),d(O=>O+100),u([]),h(!1)}else setTimeout(()=>{l($=>{const O=[...$];return O[C].status="closed",O[L].status="closed",O}),da(),u([]),h(!1)},800)},k=async(C=!1)=>{clearInterval(S.current),E.current&&E.current.pause();const L=C?v*20:0,D=c+L;d(D);const B=Math.floor(D*.5);g(B),Et.currentUser&&B>0&&(await Xw(Et.currentUser.uid,B),_($=>$+B),window.dispatchEvent(new CustomEvent("updateListeners",{detail:B}))),s("gameover")};return i==="auth"?a.jsx("div",{className:"h-full bg-black flex items-center justify-center text-white font-bold",children:"Ykleniyor..."}):i==="gameover"?a.jsx(fd,{gameName:"KAPAK AVCISI",score:c,earnedListeners:m,totalListeners:y,onContinue:()=>{Y(),e(c),n()}}):a.jsxs("div",{className:"h-full bg-[#111] flex flex-col relative overflow-hidden",children:[p>0&&a.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:a.jsx("div",{className:"text-9xl font-black text-white animate-ping",children:p})}),a.jsxs("div",{className:"p-4 pt-safe flex justify-between items-center border-b border-white/10 bg-black/80 backdrop-blur-md z-20",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] text-neutral-500 font-bold uppercase",children:"SKOR"}),a.jsx("div",{className:"text-3xl font-black text-white",children:c})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("div",{className:"text-[10px] text-neutral-500 font-bold uppercase",children:"SRE"}),a.jsx("div",{className:`text-2xl font-mono font-bold ${v<10?"text-red-500 animate-pulse":"text-white"}`,children:v})]})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"grid grid-cols-3 gap-3 w-full max-w-sm aspect-[3/4]",children:r.map((C,L)=>a.jsx(L3,{card:C,onClick:()=>A(L)},L))})})]})},L3=({card:t,onClick:e})=>{const n=t.status==="open"||t.status==="matched",i=t.status==="matched";return a.jsx("div",{onClick:e,className:"group w-full h-full perspective-1000 cursor-pointer active:scale-95 transition-transform duration-200",children:a.jsxs("div",{className:"relative w-full h-full transform-style-3d transition-all duration-500",style:{transform:n?"rotateY(180deg)":"rotateY(0deg)"},children:[a.jsx("div",{className:"absolute inset-0 backface-hidden bg-[#1a1a1a] border-2 border-white/10 rounded-xl flex items-center justify-center shadow-lg hover:border-cyan-500/50 z-[2]",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:a.jsx("div",{className:"text-2xl font-black text-white/20 group-hover:text-cyan-500/50",children:"?"})}),a.jsxs("div",{className:`absolute inset-0 backface-hidden rounded-xl overflow-hidden border-2 bg-black z-[1] ${i?"border-green-500 shadow-[0_0_15px_green]":"border-white"}`,style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[a.jsx("img",{src:t.artwork,className:"w-full h-full object-cover"}),i&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 font-black text-xl text-green-500",children:""})]})]})})},M3="https://files.catbox.moe/buq95f.mp3",D3=.6,P3=-9,U3=4,z3=80,Xo=190,B3=({onExit:t,onGameEnd:e})=>{const[n,i]=w.useState("menu"),[s,r]=w.useState(0),[l,o]=w.useState(0),u=w.useRef(!1),f=w.useRef(0),h=w.useRef(0),c=w.useRef(300),d=w.useRef(0),p=w.useRef(0),x=w.useRef([]),v=w.useRef(null),[,b]=w.useState(0);w.useEffect(()=>{const S=localStorage.getItem("flowify_flappy_hs");return S&&o(parseInt(S)),v.current=new Audio(M3),v.current.loop=!0,v.current.volume=.5,()=>{v.current&&(v.current.pause(),v.current=null),cancelAnimationFrame(f.current)}},[]);const m=w.useCallback(()=>{if(!u.current)return;if(d.current+=D3,c.current+=d.current,p.current+=5,h.current++,h.current%z3===0){const L=window.innerHeight-Xo-100,D=Math.floor(Math.random()*(L-100+1))+100;x.current.push({x:window.innerWidth,topHeight:D,passed:!1,type:Math.floor(Math.random()*3)})}for(let C=x.current.length-1;C>=0;C--){const L=x.current[C];L.x-=U3,L.x<-80&&x.current.splice(C,1)}const S=18,N=c.current+20,A=70;if(c.current<-50||c.current>window.innerHeight-20){_();return}let T=!1;const k=60;if(x.current.forEach(C=>{A+S>C.x&&A-S<C.x+k&&(N-S<C.topHeight||N+S>C.topHeight+Xo)&&(T=!0),!C.passed&&A>C.x+k&&(C.passed=!0,r(L=>L+1))}),T){_();return}b(C=>C+1),f.current=requestAnimationFrame(m)},[]),g=()=>{c.current=window.innerHeight/2,d.current=0,p.current=0,x.current=[],h.current=0,r(0),i("playing"),u.current=!0,v.current&&(v.current.currentTime=0,v.current.play().catch(S=>console.log("Music blocked",S))),f.current&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(m)},y=()=>{u.current&&(d.current=P3)},_=()=>{u.current=!1,ct(),cancelAnimationFrame(f.current),v.current&&v.current.pause(),s>l&&(o(s),localStorage.setItem("flowify_flappy_hs",s.toString())),i("gameover")};w.useEffect(()=>{const S=N=>{if(N){if(N.target.tagName==="BUTTON")return;N.preventDefault()}n==="playing"?y():n==="menu"&&g()};return window.addEventListener("mousedown",S),window.addEventListener("touchstart",S,{passive:!1}),window.addEventListener("keydown",N=>{N.code==="Space"&&S()}),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("touchstart",S)}},[n]);const E=(S,N)=>a.jsx("div",{className:`w-full h-full flex flex-col ${N?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:"w-full h-full bg-[#121212] border-x border-[#1ed760]/30 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(0deg, #1ed760 1px, transparent 1px)",backgroundSize:"100% 10px"}}),a.jsx("div",{className:`absolute left-0 right-0 h-1.5 bg-[#1ed760] shadow-[0_0_10px_#1ed760] ${N?"bottom-0":"top-0"}`})]})});return n==="menu"?a.jsxs("div",{className:"h-full w-full bg-[#000] flex flex-col items-center justify-center relative overflow-hidden font-sans",children:[a.jsx("div",{className:"absolute inset-0 z-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20 animate-pulse"}),a.jsx("button",{onClick:S=>{S.stopPropagation(),t()},className:"absolute top-6 right-6 z-50 text-white font-bold w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 pointer-events-auto",children:""}),a.jsxs("div",{className:"relative z-10 text-center animate-fade-in",children:[a.jsxs("div",{className:"w-32 h-32 mx-auto mb-8 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[#1ed760] rounded-full blur-[40px] opacity-20 animate-pulse"}),a.jsx("div",{className:"w-full h-full rounded-full border-4 border-[#1ed760] flex items-center justify-center bg-black shadow-[0_0_30px_rgba(30,215,96,0.2)] animate-spin-slow",children:a.jsx(Gi,{className:"w-16 h-16 text-[#1ed760]"})})]}),a.jsx("h1",{className:"text-5xl font-black text-white italic tracking-tighter mb-2 drop-shadow-lg",children:"FLAPPY DISC"}),a.jsx("p",{className:"text-neutral-500 text-xs font-bold uppercase tracking-[0.3em] mb-12",children:"Ritim karma"}),a.jsx("button",{onClick:S=>{S.stopPropagation(),g()},className:"bg-[#1ed760] text-black font-black py-4 px-12 rounded-full hover:scale-105 transition-transform pointer-events-auto shadow-[0_0_20px_rgba(30,215,96,0.4)] text-sm tracking-widest",children:"BALAT"})]})]}):n==="gameover"?a.jsx(fd,{gameName:"FLAPPY DISC",score:s,onContinue:()=>{e(s),t()}}):a.jsxs("div",{className:"h-full w-full bg-[#000] relative overflow-hidden select-none touch-none cursor-pointer",children:[a.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"linear-gradient(#222 1px, transparent 1px), linear-gradient(90deg, #222 1px, transparent 1px)",backgroundSize:"40px 40px",animation:"gridScroll 2s linear infinite"}}),a.jsx("style",{children:"@keyframes gridScroll { from { background-position: 0 0; } to { background-position: -40px 0; } }"}),x.current.map((S,N)=>a.jsxs(pa.Fragment,{children:[a.jsx("div",{className:"absolute top-0 w-[60px] z-10",style:{left:S.x,height:S.topHeight,willChange:"left"},children:E(S.topHeight,!0)}),a.jsx("div",{className:"absolute bottom-0 w-[60px] z-10",style:{left:S.x,height:window.innerHeight-S.topHeight-Xo,willChange:"left"},children:E(window.innerHeight-S.topHeight-Xo,!1)})]},N)),a.jsx("div",{className:"absolute left-[50px] w-[40px] h-[40px] z-30",style:{top:c.current,transform:`rotate(${p.current}deg)`,willChange:"top, transform"},children:a.jsxs("div",{className:"w-full h-full rounded-full bg-[#111] border-2 border-[#1ed760] shadow-[0_0_15px_#1ed760] flex items-center justify-center relative",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-[#1ed760] rounded-full blur-md opacity-40 -z-10 animate-pulse"})]})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0",children:a.jsx("div",{className:"text-[10rem] font-black text-[#1ed760]/10 italic tracking-tighter leading-none",children:s})})]})},Tb=3,Rb=.03,jb=65,vf=20,H3=50,Jo={bg:"#000000",primary:"#1ed760",grid:"#121212"},G3=({onExit:t,onGameEnd:e})=>{const n=w.useRef(null),[i,s]=w.useState("menu"),[r,l]=w.useState(0),[o,u]=w.useState(0),f=w.useRef({isRunning:!1,rotation:0,rotationSpeed:Rb,walls:[],playerAngle:0,speed:Tb,frameCount:0,score:0,pulse:0}),h=w.useRef(0),c=w.useRef(null),d=w.useRef({left:!1,right:!1});w.useEffect(()=>{const N=localStorage.getItem("flowify_hexagon_hs");return N&&u(parseInt(N)),c.current=new Audio("https://files.catbox.moe/ksaxm7.mp3"),c.current.loop=!0,c.current.volume=.6,()=>x()},[]);const p=()=>{f.current={isRunning:!0,rotation:0,rotationSpeed:Rb,walls:[],playerAngle:0,speed:Tb,frameCount:0,score:0,pulse:0},l(0),s("playing"),c.current&&(c.current.currentTime=0,c.current.play().catch(()=>{})),h.current&&cancelAnimationFrame(h.current),h.current=requestAnimationFrame(m)},x=()=>{f.current.isRunning=!1,h.current&&cancelAnimationFrame(h.current),c.current&&c.current.pause()},v=()=>{x(),ct(),f.current.score>o&&(u(Math.floor(f.current.score)),localStorage.setItem("flowify_hexagon_hs",Math.floor(f.current.score).toString())),s("gameover")},b=()=>{const{score:N}=f.current;N>15&&N%10<.1&&(f.current.speed+=.15),N>20&&N%15<.1&&(f.current.rotationSpeed+=.002);const A=Math.floor(Math.random()*6),T=800;if(Math.random()>.4)for(let C=0;C<6;C++)C!==A&&f.current.walls.push({side:C,distance:T,height:vf});else f.current.walls.push({side:A,distance:T,height:vf}),f.current.walls.push({side:(A+3)%6,distance:T,height:vf})},m=()=>{if(!f.current.isRunning||!n.current)return;const N=n.current.getContext("2d");if(!N)return;const{width:A,height:T}=n.current,k=A/2,C=T/2;f.current.frameCount++,f.current.score+=.02,l(Math.floor(f.current.score)),f.current.pulse=Math.sin(f.current.frameCount*.2)*5,f.current.rotation+=f.current.rotationSpeed;const L=.17;d.current.left&&(f.current.playerAngle-=L),d.current.right&&(f.current.playerAngle+=L),f.current.playerAngle<0&&(f.current.playerAngle+=Math.PI*2),f.current.playerAngle>Math.PI*2&&(f.current.playerAngle-=Math.PI*2);const D=Math.max(25,H3-Math.floor(f.current.score/2));f.current.frameCount%D===0&&b();for(let z=f.current.walls.length-1;z>=0;z--){const V=f.current.walls[z];if(V.distance-=f.current.speed,V.distance<10){f.current.walls.splice(z,1);continue}const Z=jb;if(V.distance<Z+15&&V.distance>Z-5){let X=(f.current.playerAngle-f.current.rotation)%(Math.PI*2);X<0&&(X+=Math.PI*2);const q=Math.floor(X/(Math.PI/3)),te=q*(Math.PI/3)+Math.PI/6;let Pe=X-te;if(Pe>Math.PI&&(Pe-=Math.PI*2),Pe<-Math.PI&&(Pe+=Math.PI*2),q===V.side&&Math.abs(Pe)<.4){v();return}}}N.fillStyle=Jo.bg,N.fillRect(0,0,A,T),N.save(),N.translate(k,C),N.save(),N.rotate(f.current.rotation*.2),N.strokeStyle=Jo.grid,N.lineWidth=2,N.beginPath();for(let z=0;z<6;z++){const V=z*Math.PI/3;N.moveTo(0,0),N.lineTo(Math.cos(V)*1e3,Math.sin(V)*1e3)}N.stroke();const B=f.current.frameCount*2%200;N.strokeStyle="#111",N.lineWidth=1;for(let z=0;z<5;z++){const V=100+z*200+B;N.beginPath();for(let Z=0;Z<=6;Z++){const X=Z*Math.PI/3;Z===0?N.moveTo(Math.cos(X)*V,Math.sin(X)*V):N.lineTo(Math.cos(X)*V,Math.sin(X)*V)}N.stroke()}N.restore(),N.rotate(f.current.rotation),N.shadowBlur=20,N.shadowColor=Jo.primary,N.fillStyle=Jo.primary,f.current.walls.forEach(z=>{const V=z.side*(Math.PI/3),Z=(z.side+1)*(Math.PI/3),X=z.distance,q=z.height,te=.05;N.beginPath(),N.moveTo(X*Math.cos(V+te),X*Math.sin(V+te)),N.lineTo((X+q)*Math.cos(V+te),(X+q)*Math.sin(V+te)),N.lineTo((X+q)*Math.cos(Z-te),(X+q)*Math.sin(Z-te)),N.lineTo(X*Math.cos(Z-te),X*Math.sin(Z-te)),N.closePath(),N.fill()});const $=f.current.playerAngle-f.current.rotation,O=jb;N.shadowBlur=15,N.shadowColor="#fff",N.fillStyle="#fff",N.beginPath();const H=Math.cos($)*(O+8),Q=Math.sin($)*(O+8),P=Math.cos($+.15)*(O-8),R=Math.sin($+.15)*(O-8),I=Math.cos($-.15)*(O-8),M=Math.sin($-.15)*(O-8);N.moveTo(H,Q),N.lineTo(P,R),N.lineTo(I,M),N.closePath(),N.fill(),N.shadowBlur=0,N.fillStyle="#333",N.beginPath(),N.arc(0,0,4,0,Math.PI*2),N.fill(),N.restore(),h.current=requestAnimationFrame(m)},g=N=>{N.preventDefault();let A;"touches"in N?A=N.touches[0].clientX:A=N.clientX,A<window.innerWidth/2?(d.current.left=!0,d.current.right=!1):(d.current.right=!0,d.current.left=!1)},y=N=>{N.preventDefault(),d.current={left:!1,right:!1}},_=N=>{N.code==="ArrowLeft"&&(d.current.left=!0),N.code==="ArrowRight"&&(d.current.right=!0)},E=N=>{N.code==="ArrowLeft"&&(d.current.left=!1),N.code==="ArrowRight"&&(d.current.right=!1)};w.useEffect(()=>(window.addEventListener("keydown",_),window.addEventListener("keyup",E),()=>{window.removeEventListener("keydown",_),window.removeEventListener("keyup",E)}),[]);const S={background:"radial-gradient(circle, transparent 40%, black 100%)",pointerEvents:"none"};return i==="menu"?a.jsxs("div",{className:"h-full w-full bg-[#000] flex flex-col items-center justify-center relative overflow-hidden font-sans select-none",children:[a.jsx("div",{className:"absolute inset-0 z-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),a.jsx("button",{onClick:t,className:"absolute top-6 right-6 z-50 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white border border-white/10 hover:bg-white/10",children:""}),a.jsxs("div",{className:"relative z-10 text-center animate-fade-in flex flex-col items-center",children:[a.jsxs("div",{className:"w-40 h-40 bg-gradient-to-br from-[#1ed760] to-[#121212] rounded shadow-[0_0_50px_rgba(30,215,96,0.3)] mb-8 flex items-center justify-center border border-white/10 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"}),a.jsx("div",{className:"text-6xl font-black italic text-black mix-blend-overlay",children:"FLOW"}),a.jsx("div",{className:"absolute bottom-2 right-3 text-xs font-bold text-black bg-[#1ed760] px-1 rounded",children:"TRAP"})]}),a.jsx("h1",{className:"text-5xl font-black text-white italic tracking-tighter mb-2 drop-shadow-xl",children:"FLOW TRAP"}),a.jsx("p",{className:"text-neutral-500 text-xs font-bold uppercase tracking-[0.3em] mb-12",children:"REFLEKS TEST"}),a.jsx("button",{onClick:p,className:"w-16 h-16 bg-[#1ed760] rounded-full flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-[0_0_30px_rgba(30,215,96,0.4)]",children:a.jsx(vn,{className:"w-6 h-6 text-black ml-1"})}),o>0&&a.jsxs("div",{className:"mt-8 text-[#1ed760] text-sm font-mono font-bold",children:["HIGH SCORE: ",o]})]})]}):i==="gameover"?a.jsxs("div",{className:"h-full w-full bg-black flex flex-col items-center justify-center relative z-50 text-center animate-zoom-in",children:[a.jsx("div",{className:"text-[#ef4444] text-6xl mb-6 animate-pulse",children:""}),a.jsx("h2",{className:"text-4xl font-black text-white italic tracking-tighter mb-2",children:"AKILDIN"}),a.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest mb-10",children:"Ritim seni yendi"}),a.jsxs("div",{className:"bg-[#121212] border border-white/10 p-6 rounded-2xl mb-8 w-64 shadow-2xl",children:[a.jsx("div",{className:"text-[10px] text-neutral-500 font-bold uppercase tracking-widest mb-2",children:"SKORUN"}),a.jsx("div",{className:"text-5xl font-black text-[#1ed760] font-mono",children:Math.floor(r)})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:p,className:"bg-white text-black font-black py-3 px-8 rounded-full uppercase tracking-widest text-xs hover:scale-105 transition-all",children:"TEKRAR"}),a.jsx("button",{onClick:()=>{e(Math.floor(r)),t()},className:"bg-transparent text-neutral-400 border border-neutral-600 font-bold py-3 px-8 rounded-full uppercase tracking-widest text-xs hover:text-white hover:border-white transition-all",children:"IKI"})]})]}):a.jsxs("div",{className:"h-full w-full bg-black relative overflow-hidden touch-none select-none cursor-crosshair",onTouchStart:g,onTouchEnd:y,onMouseDown:g,onMouseUp:y,children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 p-8 z-20 flex justify-between pointer-events-none",children:[a.jsx("div",{className:"text-4xl font-black text-white/20 font-mono tracking-tighter",children:Math.floor(r)}),a.jsx("div",{className:"text-[10px] font-bold text-[#1ed760] uppercase tracking-widest bg-[#1ed760]/10 px-2 py-1 rounded border border-[#1ed760]/20",children:r<10?"BALANGI":r<30?"HIZLANIYOR":"GOD MODE"})]}),a.jsx("div",{className:"absolute top-6 right-6 z-30 pointer-events-auto",children:a.jsx("button",{onClick:v,className:"w-8 h-8 flex items-center justify-center text-white/20 hover:text-white",children:""})}),a.jsxs("div",{className:"absolute inset-0 flex pointer-events-none z-10",children:[a.jsx("div",{className:`flex-1 border-r border-white/5 transition-colors duration-100 ${d.current.left?"bg-white/[0.02]":""}`}),a.jsx("div",{className:`flex-1 border-l border-white/5 transition-colors duration-100 ${d.current.right?"bg-white/[0.02]":""}`})]}),a.jsx("div",{className:"absolute inset-0 z-10",style:S}),a.jsx("canvas",{ref:n,width:window.innerWidth,height:window.innerHeight,className:"w-full h-full block"})]})},F3=()=>{const[t,e]=w.useState(!0),[n,i]=w.useState(null),[s,r]=w.useState(!1),[l,o]=w.useState(null),[u,f]=w.useState(!0),[h,c]=w.useState("selector"),[d,p]=w.useState("hub"),[x,v]=w.useState(!1),[b,m]=w.useState(!1),[g,y]=w.useState(!1),[_,E]=w.useState(null),[S,N]=w.useState("none"),[A,T]=w.useState(null),k=w.useRef(0),{showToast:C}=rr();w.useEffect(()=>{window.odulVer=P=>{console.log("Global odulVer triggered with:",P);const R=P||localStorage.getItem("last_purchase_attempt");R&&o(I=>{if(!I||!n)return I;const M={...I};let z="";switch(R){case"gold_mini":M.careerCash+=25e3,z="+25.000 Eklendi!";break;case"gold_100":M.careerCash+=1e5,z="+100.000 Eklendi!";break;case"gold_bag":M.careerCash+=3e5,z="+300.000 Eklendi!";break;case"gold_500":M.careerCash+=1e6,z="+1.000.000 Eklendi!";break;case"gold_vault":M.careerCash+=5e6,z="+5.000.000 Eklendi!";break;case"energy_coffee":M.energy=Math.min(I.maxEnergy,I.energy+25),z="+25 Enerji Eklendi!";break;case"energy_refill":M.energy=I.maxEnergy,z="Enerji Fullendi!";break;case"energy_bulk":M.energy=Math.min(I.maxEnergy+500,I.energy+500),z="+500 Enerji Eklendi!";break;case"vip_sub":M.isVip=!0,M.energy=I.maxEnergy,M.monthly_listeners=Math.max(M.monthly_listeners||0,2401e4),M.ownedUpgrades||(M.ownedUpgrades={}),M.ownedUpgrades.verified_badge=1,z="FLOWIFY PRO Aktif Edildi! Seviye 50 ve Mavi Tik Hesabna Eklendi.";break;case"verified_tick":M.ownedUpgrades||(M.ownedUpgrades={}),M.ownedUpgrades.verified_badge=1,z="Mavi Tik Hesabna Eklendi!";break;case"rewarded_ad":M.energy=Math.min(I.maxEnergy,I.energy+30),z="+30 Enerji Eklendi!";break;default:return I}return Ka(n.uid,M),nn(),C(z,"success"),localStorage.removeItem("last_purchase_attempt"),E(null),M})}},[n]),w.useEffect(()=>{(async()=>{try{Au.initialize(),Hh.initialize();const I=NI(M=>{});await Promise.race([I,new Promise(M=>setTimeout(M,8e3))])}catch(I){console.error("Init error:",I)}finally{f(!1)}const R=()=>{EI()};window.addEventListener("click",R,{once:!0}),window.addEventListener("touchstart",R,{once:!0}),window.addEventListener("keydown",R,{once:!0})})()},[]),w.useEffect(()=>{localStorage.getItem("flowify_welcome_seen")||m(!0)},[]);const L=P=>{Y(),p(P)};w.useEffect(()=>{let P=null,R=null;R=setTimeout(()=>{console.warn("Auth timeout - proceeding without auth"),r(!0)},1e4);const I=HC(async M=>{if(R&&(clearTimeout(R),R=null),i(M),M){const z=ve(ye,`users/${M.uid}/stats`);P=Un(z,V=>{if(V.exists()){const Z=V.val(),X={...Ng,...Z};X.careerCash!==void 0&&(X.cash=X.careerCash),X.monthly_listeners!==void 0&&(X.careerLevel=Bi(X.monthly_listeners)),o(X)}else o(null);r(!0)})}else o(null),r(!0),P&&P()});return()=>{I(),P&&P(),R&&clearTimeout(R)}},[]),w.useEffect(()=>{if(!l||!n)return;const P=setInterval(()=>{const I=Date.now(),M=I-l.lastEnergyUpdate,z=Math.floor(M/Ne.REGEN_TIME_MS);if(z>0&&l.energy<l.maxEnergy){const V=Math.min(l.maxEnergy,l.energy+z),Z={...l,energy:V,lastEnergyUpdate:I};Ka(n.uid,Z)}},1e4),R=setInterval(()=>{const I=NS.calculatePassiveIncome(l.discography||[]);I>0&&o(M=>M?{...M,pendingCash:(M.pendingCash||0)+I}:null)},5e3);return()=>{clearInterval(P),clearInterval(R)}},[l,n]),w.useEffect(()=>{if(!n||!l)return;let P="Dolanyor...";h==="career"?P="Kariyer Yolunda":d==="nightlife"?P="Casinoda":d==="social"?P="Sosyalleiyor":d==="arcade"?P="Arcade Salonunda":d==="online"&&(P="Online Arenada"),S!=="none"&&(P="Kapmada!");const R=Math.max(0,l.monthly_listeners||0),I=Bi(R),M=ve(ye,`public_users/${n.uid}`);ys(M,{uid:n.uid,name:l.name,monthly_listeners:R,respect:l.respect,level:I,lastActive:Date.now(),appearance:l.appearance,currentAction:P}),zm(M).remove();const z=setInterval(()=>{bi(M,{lastActive:Date.now(),currentAction:P})},3e4);return()=>clearInterval(z)},[n,l,h,d,S]);const D=(P,R)=>{if(!l||!n)return;let M=l[P]+R;["monthly_listeners","energy","flow","lyrics","rhythm","charisma"].includes(P)&&(M=Math.max(0,M)),P==="energy"&&(M=Math.min(l.maxEnergy||100,M));let z={...l,[P]:M};P==="cash"?z.careerCash=M:P==="careerCash"&&(z.cash=M),P==="monthly_listeners"&&(z.careerLevel=Bi(z.monthly_listeners)),o(z),Ka(n.uid,z)},B=P=>{if(!l||!n)return;const R={...l};Object.entries(P).forEach(([I,M])=>{const z=I,V=R[z];if(typeof V=="number"&&typeof M=="number"){let Z=V+M;["monthly_listeners","energy","flow","lyrics","rhythm","charisma"].includes(z)&&(Z=Math.max(0,Z)),z==="energy"&&(Z=Math.min(l.maxEnergy||100,Z)),R[z]=Z}else R[z]=M}),P.cash!==void 0&&(R.careerCash=R.cash),P.careerCash!==void 0&&(R.cash=R.careerCash),R.monthly_listeners!==void 0&&(R.careerLevel=Bi(R.monthly_listeners)),o(R),Ka(n.uid,R)},$=P=>!l||l.energy<P?(y(!0),!1):(D("energy",-P),!0),O=()=>{y(!1),D("energy",Ne.AD_REWARD_ENERGY),C(`+${Ne.AD_REWARD_ENERGY} Enerji Kazandn!`,"success")},H=async P=>{if(["freestyle","higherlower-solo","flowbattle-solo","covermatch-solo","flappydisk","rhythmtwister","hexagon","rapquiz","rhythm"].includes(S)){const z=(l==null?void 0:l.careerLevel)||1,{fans:V,cash:Z}=vS(S,P,z);(V>0||Z>0)&&(B({monthly_listeners:V,careerCash:Z,battlesWon:1}),n!=null&&n.uid&&Xw(n.uid,V),T({fans:V,cash:Z}))}N("none"),k.current+=1;const I=["trivia","higherlower","flowbattle","covermatch","rapquiz","higherlower-solo"];if(!(l!=null&&l.isVip)&&(I.includes(S)||k.current%2===0))try{await Au.showInterstitial()}catch{}},Q=P=>{if(["battlebet","blackjack","zeppelin"].includes(P)){N(P);return}const R=["flowbattle","higherlower","trivia"].includes(P),I=["freestyle","higherlower-solo","flowbattle-solo","covermatch-solo","flappydisk","rhythmtwister","hexagon","rapquiz","rhythm"].includes(P);let M=0;R?M=Ne.COST.ONLINE_MATCH:I&&(M=Ne.COST.OFFLINE_GAME),$(M)&&N(P)};return t?a.jsx(A3,{onFinish:()=>e(!1),isReady:!u&&s}):s?n?l?g?a.jsx(dd,{title:"ENERJN BTT!",rewardText:`Reklam izleyerek +${Ne.AD_REWARD_ENERGY} Enerji kazan.`,onWatch:O,onCancel:()=>y(!1)}):x?a.jsx(tb,{onCreate:(P,R,I,M)=>{B({name:P,gender:R,appearance:I,favoriteSong:M}),v(!1)},isEditing:!0,initialData:l,ownedUpgrades:l.ownedUpgrades}):S!=="none"?a.jsxs(qo,{className:"bg-black",children:[S==="freestyle"&&a.jsx(T3,{onExit:()=>N("none")}),S==="trivia"&&a.jsx(R3,{playerName:l.name,onGameEnd:H,onExit:()=>N("none")}),S==="higherlower"&&a.jsx(Ab,{playerName:l.name,onGameEnd:H,onExit:()=>N("none")}),S==="higherlower-solo"&&a.jsx(Ab,{playerName:l.name,onGameEnd:H,onExit:()=>N("none"),isSolo:!0}),S==="rhythm"&&a.jsx(C3,{onExit:()=>N("none"),onGameEnd:H}),S==="rapquiz"&&a.jsx(O3,{playerName:l.name,onExit:()=>N("none"),onGameEnd:H}),S==="flowbattle"&&a.jsx(Fh,{playerName:l.name,onExit:()=>N("none"),onGameEnd:H}),S==="flowbattle-solo"&&a.jsx(Fh,{playerName:l.name,onExit:()=>N("none"),onGameEnd:H,isSolo:!0}),S==="covermatch"&&a.jsx(kb,{playerName:l.name,onExit:()=>N("none"),onGameEnd:H}),S==="covermatch-solo"&&a.jsx(kb,{playerName:l.name,onExit:()=>N("none"),onGameEnd:H,isSolo:!0}),S==="flappydisk"&&a.jsx(B3,{onExit:()=>N("none"),onGameEnd:H}),S==="rhythmtwister"&&a.jsx(N3,{onExit:()=>N("none")}),S==="hexagon"&&a.jsx(G3,{onExit:()=>N("none"),onGameEnd:H}),S==="battlebet"&&a.jsx(rN,{player:l,updateStat:D,onExit:()=>N("none"),cashType:"careerCash"}),S==="blackjack"&&a.jsx(aN,{player:l,updateStat:D,onExit:()=>N("none"),cashType:"careerCash"}),S==="zeppelin"&&a.jsx(lN,{player:l,updateStat:D,onExit:()=>N("none"),cashType:"careerCash"})]}):b&&h==="selector"?a.jsx(E3,{onComplete:()=>{localStorage.setItem("flowify_welcome_seen","true"),m(!1)}}):h==="selector"?a.jsx(qo,{children:a.jsx($I,{player:l,onSelectMode:c})}):h==="career"?a.jsxs(a.Fragment,{children:[a.jsx(qo,{children:a.jsx(v3,{player:l,updateStat:D,updateMultipleStats:B,onExit:()=>c("selector"),onEditCharacter:()=>v(!0),onOpenShop:P=>{Y(),E(P)}})}),_&&a.jsx(Eb,{player:l,updateMultipleStats:B,onClose:()=>E(null),initialTab:_})]}):a.jsxs(a.Fragment,{children:[a.jsxs(qo,{className:"bg-[#121212] text-white",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/95 via-black/80 to-transparent pb-8 pointer-events-none",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 1rem)"},children:[a.jsx("div",{className:"flex items-center gap-3 pointer-events-auto",children:a.jsxs("button",{onClick:()=>{Y(),c("selector")},className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 backdrop-blur-md border border-white/10 text-xs font-bold text-white hover:bg-white/20 transition-all active:scale-95 shadow-sm",children:[a.jsx(yc,{dir:"left",className:"w-3 h-3 text-white"}),a.jsx("span",{children:"MEN"})]})}),a.jsxs("div",{className:"flex items-center gap-4 drop-shadow-md pointer-events-auto",children:[a.jsxs("button",{onClick:()=>{Y(),E("currency")},className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[9px] font-bold text-neutral-400 uppercase tracking-wider",children:"Nakit"}),a.jsxs("span",{className:"text-sm font-mono text-[#1ed760] font-black",children:["",l.careerCash.toLocaleString()]})]}),a.jsxs("button",{onClick:()=>{Y(),E("energy")},className:"flex flex-col items-end w-28 group",children:[a.jsxs("span",{className:"text-[9px] font-bold text-neutral-400 uppercase tracking-wider mb-1 flex items-center gap-1",children:[a.jsx("span",{className:"text-yellow-400",children:""}),"ENERJ",a.jsx("span",{className:l.energy<20?"text-red-500 animate-pulse":"text-white",children:Math.floor(l.energy)})]}),a.jsx("div",{className:"w-full h-3 bg-[#222] rounded-full overflow-hidden border border-white/20 group-hover:border-white/40 transition-colors shadow-lg relative",children:a.jsx("div",{className:`h-full transition-all duration-500 relative overflow-hidden ${l.energy<30?"bg-red-500":"bg-white"}`,style:{width:`${l.energy/l.maxEnergy*100}%`},children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent w-full h-full animate-[shimmer_2s_infinite]"})})})]})]})]}),a.jsxs("div",{className:"flex-1 w-full relative bg-[#121212] h-full overflow-hidden",children:[d==="hub"&&a.jsx("div",{className:"w-full animate-fade-in h-full",children:a.jsx(GI,{player:l,ownedUpgrades:l.ownedUpgrades||{},onEditCharacter:()=>v(!0),updateStat:D,updateMultipleStats:B,onOpenShop:P=>{Y(),E(P)}})}),d==="arcade"&&a.jsx("div",{className:"w-full animate-fade-in h-full",children:a.jsx(nb,{player:l,onSelectGame:Q,mode:"arcade"})}),d==="online"&&a.jsx("div",{className:"w-full animate-fade-in h-full",children:a.jsx(nb,{player:l,onSelectGame:Q,mode:"online"})}),d==="nightlife"&&a.jsx("div",{className:"w-full animate-fade-in h-full",children:a.jsx(YI,{player:l,onSelectGame:Q})}),d==="social"&&a.jsx("div",{className:"w-full animate-fade-in h-full",children:a.jsx(VI,{player:l,uid:n.uid})})]}),a.jsx(BI,{activeTab:d,setTab:L})]}),_&&a.jsx(Eb,{player:l,updateMultipleStats:B,onClose:()=>E(null),initialTab:_}),A&&a.jsx(S3,{fans:A.fans,cash:A.cash,onClose:()=>T(null)})]}):a.jsx(tb,{onCreate:(P,R,I,M)=>{const z={...Ng,name:P,gender:R,appearance:I,favoriteSong:M};Ka(n.uid,z),v(!1)}}):a.jsx(KI,{}):a.jsx("div",{className:"h-dvh w-screen bg-black flex items-center justify-center text-white",children:"Ykleniyor..."})},V3=()=>a.jsx(zI,{children:a.jsx(F3,{})}),cN=document.getElementById("root");if(!cN)throw new Error("Could not find root element to mount to");const Y3=dS.createRoot(cN);Y3.render(a.jsx(pa.StrictMode,{children:a.jsx(V3,{})}));export{qx as A,eN as W};
